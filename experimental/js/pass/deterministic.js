import { Exit, Spawn } from '../rom/location.js';
import { MessageId } from '../rom/messageid.js';
import { GlobalDialog, LocalDialog } from '../rom/npc.js';
import { ShopType } from '../rom/shop.js';
import { hex } from '../rom/util.js';
import { assert } from '../util.js';
const [] = [hex];
function write(arr, start, ...data) {
    for (let i = 0; i < data.length; i++) {
        arr[start + i] = data[i];
    }
}
export function deterministicPreParse(prg) {
    prg[0x1a594] = 0xff;
    prg[0x1cdc5] = 0xa8;
    prg[0x1a176] = 0xff;
    prg[0x1a84c] = 0xff;
    prg[0x1d843] = 0xa0;
    prg[0x1e06b] &= 7;
    prg[0x1e06f] &= 7;
    prg[0x1e073] &= 7;
    prg[0x1e077] &= 7;
    prg[0x1e07b] &= 7;
    prg[0x1e084] &= 7;
    prg[0x1e09b] &= 7;
    prg[0x1e0b9] &= 7;
    prg[0x1e105] = 0x2f;
    prg[0x1e277] = 0x00;
    prg[0x1e366] = 0x40;
    prg[0x1e371] = 0x00;
    prg[0x1e387] = 0x00;
    prg[0x1e391] = 0x00;
    write(prg, 0x1a168, 0x33, 0x33);
    write(prg, 0x1a48e, 0x33, 0x33);
    prg[0x19bb1] = 0x70;
    prg[0x19bb5] = 0x71;
    prg[0x19a77] = 0x72;
    prg[0x19deb] = 0x73;
    prg[0x1a045] = 0x74;
    prg[0x1a0e1] = 0x75;
    prg[0x1a0e5] = 0x76;
    prg[0x1a0e9] = 0x77;
    prg[0x1a605] = 0x78;
    prg[0x1a3c1] = 0x79;
    prg[0x1a3c5] = 0x7a;
    prg[0x1a3c9] = 0x7b;
    write(prg, 0x1e0b7, 0xc0, 0x00);
    write(prg, 0x1e32a, 0xc0, 0x00);
    write(prg, 0x1e330, 0xc0, 0x00);
    write(prg, 0x1e336, 0xc0, 0x00);
    write(prg, 0x1e0e0, 0xc0, 0x00);
    write(prg, 0x1e0e6, 0xc0, 0x00);
    prg[0x1c803] = 0x00;
    write(prg, 0x1c80d, 0xa2, 0xb3);
    prg[0x1aa86] = 0xfe;
    write(prg, 0x3d6d5, 0x25, 0x29, 0x39, 0x3a, 0x3b, 0x47, 0x3c, 0x3e, 0x84, 0x46, 0xb2, 0x42, 0xb4, 0x41, 0xff);
}
export function deterministic(rom, flags) {
    addZombieWarp(rom);
    consolidateItemGrants(rom);
    addMezameTrigger(rom);
    normalizeSwords(rom, flags);
    fixCrystalis(rom);
    fixOpelStatue(rom);
    fixCoinSprites(rom);
    fixChests(rom);
    preventBossSoftlocks(rom);
    makeBraceletsProgressive(rom);
    adjustGoaFortressTriggers(rom);
    preventNpcDespawns(rom, flags);
    leafElderInSabreHeals(rom);
    if (flags.requireHealedDolphinToRide())
        requireHealedDolphin(rom);
    if (flags.saharaRabbitsRequireTelepathy())
        requireTelepathyForDeo(rom);
    adjustItemNames(rom, flags);
    alarmFluteIsKeyItem(rom, flags);
    brokahanaWantsMado1(rom);
    if (flags.teleportOnThunderSword()) {
        teleportOnThunderSword(rom);
        rom.townWarp.thunderSwordWarp = [rom.locations.Shyron.id, 0x41];
    }
    else {
        noTeleportOnThunderSword(rom);
    }
    undergroundChannelLandBridge(rom);
    if (flags.fogLampNotRequired())
        fogLampNotRequired(rom, flags);
    evilSpiritIslandRequiresDolphin(rom);
    simplifyInvisibleChests(rom);
    addCordelWestTriggers(rom, flags);
    if (flags.disableRabbitSkip())
        fixRabbitSkip(rom);
    if (flags.disableRageSkip())
        patchLimeTreeLake(rom);
    fixReverseWalls(rom);
    if (flags.chargeShotsOnly())
        disableStabs(rom);
    if (flags.orbsOptional())
        orbsOptional(rom);
    if (flags.noBowMode())
        noBowMode(rom);
    patchTooManyItemsMessage(rom);
}
function consolidateItemGrants(rom) {
    rom.items.GlowingLamp.itemUseData[0].message.action = 0x0b;
}
function addMezameTrigger(rom) {
    const trigger = rom.nextFreeTrigger();
    trigger.used = true;
    trigger.conditions = [~rom.flags.AlwaysTrue.id];
    trigger.message = MessageId.of({ action: 4 });
    trigger.flags = [rom.flags.AlwaysTrue.id];
    const mezame = rom.locations.MezameShrine;
    mezame.spawns.push(Spawn.of({ tile: 0x88, type: 2, id: trigger.id }));
}
function normalizeSwords(rom, flags) {
    rom.objects[0x10].atk = 3;
    rom.objects[0x11].atk = 6;
    rom.objects[0x12].atk = 8;
    rom.objects[0x18].atk = 3;
    rom.objects[0x13].atk = 5;
    rom.objects[0x19].atk = 5;
    rom.objects[0x17].atk = 7;
    rom.objects[0x1a].atk = 7;
    rom.objects[0x14].atk = 3;
    rom.objects[0x15].atk = 6;
    rom.objects[0x16].atk = 8;
    rom.objects[0x1c].atk = 3;
    rom.objects[0x1d].atk = 3;
    rom.objects[0x1e].atk = 5;
    rom.objects[0x1b].atk = 7;
    rom.objects[0x1f].atk = 7;
    if (flags.slowDownTornado()) {
        const tornado = rom.objects[0x12];
        tornado.speed = 0x07;
        tornado.data[0x0c] = 0x60;
    }
}
function preventBossSoftlocks(rom) {
    const trigger = rom.trigger(0xa0);
    trigger.used = true;
    trigger.conditions = [];
    trigger.flags = [];
    trigger.message = MessageId.of({ part: 0, index: 0, action: 0x15 });
    rom.objects[0x5e].data[0xd] = 0xfe;
    rom.items.InsectFlute.itemUseData[0].flags = [rom.flags.UsedInsectFlute.id];
}
function fixOpelStatue(rom) {
    rom.items.OpelStatue.selectedItemValue = 0;
}
function fixCoinSprites(rom) {
    for (const page of [0x60, 0x64, 0x65, 0x66, 0x67, 0x68,
        0x69, 0x6a, 0x6b, 0x6c, 0x6d, 0x6f]) {
        for (const pat of [0, 1, 2]) {
            rom.patterns[page << 6 | pat].pixels = rom.patterns[0x5e << 6 | pat].pixels;
        }
    }
    rom.objects[0x0c].metasprite = 0xa9;
}
function fixReverseWalls(rom) {
    for (const t in [0x04, 0x05, 0x08, 0x09]) {
        rom.tileEffects[0xbc - 0xb3].effects[t] = 0x18;
        rom.tileEffects[0xb5 - 0xb3].effects[t] = 0x18;
    }
}
function undergroundChannelLandBridge(rom) {
    const { tiles } = rom.screens[0xa1];
    tiles[0x28] = 0x9f;
    tiles[0x37] = 0x23;
    tiles[0x38] = 0x23;
    tiles[0x39] = 0x21;
    tiles[0x47] = 0x8d;
    tiles[0x48] = 0x8f;
    tiles[0x56] = 0x99;
    tiles[0x57] = 0x9a;
    tiles[0x58] = 0x8c;
}
function fogLampNotRequired(rom, flags) {
    const { flags: { AlwaysTrue, InjuredDolphin, FogLamp, KensuInCabin, ReturnedFogLamp }, items: { ShellFlute }, locations: { BoatHouse, Portoa_FishermanHouse }, npcs, } = rom;
    const requireHealed = flags.requireHealedDolphinToRide();
    ShellFlute.itemUseData[0].want =
        requireHealed ? InjuredDolphin.id : AlwaysTrue.id;
    npcs.KensuInCabin.data[0] = 0x67;
    npcs.KensuInCabin.localDialogs.get(-1)[0].message.action = 0x0a;
    npcs.KensuInCabin.localDialogs.get(-1)[0].flags = [];
    npcs.KensuInCabin.spawnConditions.set(BoatHouse.id, [ReturnedFogLamp.id, ~KensuInCabin.id]);
    npcs.Fisherman.spawnConditions.set(Portoa_FishermanHouse.id, [FogLamp.id]);
    rom.itemGets[0x64].flags = [];
    rom.itemGets[0x67].copyFrom(rom.itemGets[0x64]);
}
function fixChests(rom) {
    for (const loc of rom.locations) {
        for (const s of loc.spawns) {
            if (s.isChest())
                s.timed = false;
        }
    }
}
function adjustGoaFortressTriggers(rom) {
    const l = rom.locations;
    l.GoaFortress_Kelbesque.spawns[0].x -= 16;
    l.GoaFortress_Zebu.spawns.splice(1, 1);
    l.GoaFortress_Tornel.spawns.splice(2, 1);
    l.GoaFortress_Asina.spawns.splice(2, 1);
    l.GoaFortress_Kensu.spawns.splice(3, 1);
    l.GoaFortress_Kensu.spawns.splice(1, 1);
}
function alarmFluteIsKeyItem(rom, flags) {
    const { items: { AlarmFlute }, locations: { WaterfallCave4 }, npcs: { WindmillGuard }, } = rom;
    rom.itemGets[0x31].inventoryRowStart = 0x20;
    AlarmFlute.unique = true;
    AlarmFlute.basePrice = 0;
    WindmillGuard.data[1] = 0x31;
    const replacements = [
        [0x21, 0.72],
        [0x1f, 0.9],
    ];
    let j = 0;
    for (const shop of rom.shops) {
        if (shop.type !== ShopType.TOOL)
            continue;
        for (let i = 0, len = shop.contents.length; i < len; i++) {
            if (shop.contents[i] !== 0x31)
                continue;
            const [item, priceRatio] = replacements[(j++) % replacements.length];
            shop.contents[i] = item;
            if (rom.shopDataTablesAddress) {
                shop.prices[i] = Math.round(shop.prices[i] * priceRatio);
            }
        }
    }
    rom.itemGets[0x5b].itemId = 0x1d;
    WaterfallCave4.spawn(0x19).id = 0x10;
}
function brokahanaWantsMado1(rom) {
    const { flags: { Karmine, Mado1 }, npcs: { Brokahana } } = rom;
    const dialog = assert(Brokahana.localDialogs.get(-1))[0];
    if (dialog.condition !== ~Karmine.id) {
        throw new Error(`Bad brokahana condition: ${dialog.condition}`);
    }
    dialog.condition = ~Mado1.id;
}
function requireHealedDolphin(rom) {
    const { flags: { InjuredDolphin, ShellFlute }, npcs: { Fisherman, FishermanDaughter }, } = rom;
    Fisherman.spawnConditions.set(0xd6, [ShellFlute.id, InjuredDolphin.id]);
    const daughterDialog = FishermanDaughter.localDialogs.get(-1);
    daughterDialog.unshift(daughterDialog[0].clone());
    daughterDialog[0].condition = ~InjuredDolphin.id;
    daughterDialog[1].condition = ~ShellFlute.id;
}
function requireTelepathyForDeo(rom) {
    const { flags: { Telepathy }, npcs: { Deo, SaharaBunny }, } = rom;
    SaharaBunny.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x12]));
    Deo.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x13]));
}
function teleportOnThunderSword(rom) {
    const { flags: { WarpShyron }, } = rom;
    rom.itemGets[0x03].flags.push(WarpShyron.id);
}
function noTeleportOnThunderSword(rom) {
    rom.itemGets[0x03].acquisitionAction.action = 0x16;
}
function adjustItemNames(rom, flags) {
    if (flags.leatherBootsGiveSpeed()) {
        const leatherBoots = rom.items[0x2f];
        leatherBoots.menuName = 'Speed Boots';
        leatherBoots.messageName = 'Speed Boots';
        if (flags.changeGasMaskToHazmatSuit()) {
            const gasMask = rom.items[0x29];
            gasMask.menuName = 'Hazmat Suit';
            gasMask.messageName = 'Hazmat Suit';
        }
    }
    for (let i = 0x05; i < 0x0c; i += 2) {
        rom.items[i].menuName = rom.items[i].menuName.replace('Ball', 'Orb');
        rom.items[i].messageName = rom.items[i].messageName.replace('Ball', 'Orb');
    }
}
function makeBraceletsProgressive(rom) {
    const { flags: { BallOfWind, TornadoBracelet }, npcs: { Tornel }, } = rom;
    const vanilla = Tornel.localDialogs.get(0x21);
    const patched = [
        vanilla[0],
        vanilla[2],
        vanilla[2].clone(),
        vanilla[1],
    ];
    patched[1].condition = ~TornadoBracelet.id;
    patched[2].condition = ~BallOfWind.id;
    patched[3].condition = ~0;
    Tornel.localDialogs.set(0x21, patched);
}
function simplifyInvisibleChests(rom) {
    const { CordelPlainEast, KirisaMeadow, UndergroundChannel } = rom.locations;
    for (const location of [CordelPlainEast, KirisaMeadow, UndergroundChannel]) {
        for (const spawn of location.spawns) {
            if (spawn.isChest())
                spawn.data[2] |= 0x20;
        }
    }
}
function addCordelWestTriggers(rom, flags) {
    const { CordelPlainEast, CordelPlainWest } = rom.locations;
    for (const spawn of CordelPlainEast.spawns) {
        if (spawn.isChest() || (flags.disableTeleportSkip() && spawn.isTrigger())) {
            CordelPlainWest.spawns.push(spawn.clone());
        }
    }
}
function fixRabbitSkip(rom) {
    for (const spawn of rom.locations.MtSabreNorth_Main.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x86) {
            if (spawn.x === 0x740) {
                spawn.x += 16;
                spawn.y += 16;
            }
        }
    }
}
function patchTooManyItemsMessage(rom) {
    rom.messages.parts[0x20][0x0f].text += '\nItem: [:ITEM:]';
}
function addZombieWarp(rom) {
    const { flags: { WarpZombie }, locations: { ZombieTown }, } = rom;
    rom.flags.insertZombieWarpFlag();
    const message = rom.messages.parts[0x21][0];
    message.text = [
        ' {1a:Leaf}      {16:Brynmaer} {1d:Oak} ',
        '{0c:Nadare}\'s  {1e:Portoa}   {14:Amazones} ',
        '{19:Joel}      Zombie   {20:Swan} ',
        '{23:Shyron}    {18:Goa}      {21:Sahara}',
    ].join('\n');
    const trigger = rom.nextFreeTrigger();
    trigger.used = true;
    trigger.conditions = [];
    trigger.message = MessageId.of({});
    trigger.flags = [WarpZombie.id];
    for (const spawn of ZombieTown.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8a) {
            spawn.id = trigger.id;
        }
    }
    rom.townWarp.locations.splice(7, 0, ZombieTown.id);
    if (rom.townWarp.locations.pop() !== 0xff)
        throw new Error('unexpected');
}
function evilSpiritIslandRequiresDolphin(rom) {
    rom.trigger(0x8a).conditions = [~rom.flags.CurrentlyRidingDolphin.id];
    rom.messages.parts[0x1d][0x10].text = `The cave entrance appears
to be underwater. You'll
need to swim.`;
}
function leafElderInSabreHeals(rom) {
    const leafElder = rom.npcs[0x0d];
    const summitDialog = leafElder.localDialogs.get(0x35)[0];
    summitDialog.message.action = 0x17;
}
function patchLimeTreeLake(rom) {
    rom.metatilesets.lime.getTile(0x7c).setEffects(6);
    rom.metatilesets.lime.getTile(0x7f).setEffects(6);
    rom.metatilesets.lime.getTile(0x7b).setTiles([0x7f, 0x7f, 0x7f, 0x7f])
        .setAttrs(0).setEffects(6);
    rom.screens[0x74].set2d(0x90, [
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
    ]);
}
function preventNpcDespawns(rom, opts) {
    function remove(arr, elem) {
        const index = arr.indexOf(elem);
        if (index < 0)
            throw new Error(`Could not find element ${elem} in ${arr}`);
        arr.splice(index, 1);
    }
    function removeIf(arr, pred) {
        const index = arr.findIndex(pred);
        if (index < 0)
            throw new Error(`Could not find element in ${arr}`);
        arr.splice(index, 1);
    }
    const { locations: { BoatHouse, Brynmaer, Crypt_Draygon2, Joel_Shed, MtSabreNorth_SummitCave, MtSabreWest_Upper, PortoaPalace_ThroneRoom, Portoa_AsinaRoom, Portoa_FortuneTeller, Shyron_Temple, StomHouse, Swan_DanceHall, Swan_Tavern, WindmillCave, WaterfallCave4, WaterfallValleyNorth, ZebuCave, ZombieTown_HouseBasement, }, items: { GlowingLamp, KeyToPrison, LovePendant, StatueOfOnyx, }, npcs: { Akahana, AkahanaInBrynmaer, Asina, AztecaInShyron, Clark, Draygon, FortuneTeller, Kensu, KensuInCabin, KensuInSwan, LeafRabbit, OakChild, OakElder, OakMother, PortoaPalaceFrontGuard, PortoaQueen, PortoaThroneRoomBackDoorGuard, Rage, Stom, StonedAkahana, Tornel, WindmillGuard, Zebu, }, flags, } = rom;
    Kensu.localDialogs.delete(Swan_Tavern.id);
    KensuInSwan.link(Kensu.id);
    KensuInSwan.used = true;
    KensuInSwan.data = [...Kensu.data];
    Kensu.data[0] = GlowingLamp.id;
    Swan_DanceHall.spawns.find(s => s.isNpc() && s.id === Kensu.id).id =
        KensuInSwan.id;
    LovePendant.itemUseData[0].want = 0x100 | KensuInSwan.id;
    StonedAkahana.linkDialog(Akahana.id);
    AkahanaInBrynmaer.used = true;
    AkahanaInBrynmaer.link(Akahana.id);
    AkahanaInBrynmaer.data = [...Akahana.data];
    Brynmaer.spawns.find(s => s.isNpc() && s.id === Akahana.id).id =
        AkahanaInBrynmaer.id;
    StatueOfOnyx.itemUseData[0].want = 0x100 | AkahanaInBrynmaer.id;
    LeafRabbit.dialog()[2].condition = flags.RescuedLeafElder.id;
    LeafRabbit.dialog()[2].flags.push(flags.TalkedToLeafRabbit.id);
    LeafRabbit.dialog()[3].flags.push(flags.TalkedToLeafRabbit.id);
    WindmillGuard.spawns(WindmillCave)[1] =
        ~flags.WindmillGuardAlarmFluteTradein.id;
    remove(Akahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    remove(StonedAkahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    function reverseDialog(ds) {
        ds.reverse();
        for (let i = 0; i < ds.length; i++) {
            const next = ds[i + 1];
            ds[i].condition = next ? ~next.condition : ~0;
        }
    }
    ;
    OakElder.dialog()[0].message.action = 0x03;
    OakElder.dialog()[1].message.action = 0x03;
    OakElder.dialog()[2].message.action = 0x03;
    OakElder.dialog()[3].message.action = 0x03;
    (() => {
        const [killedInsect, gotItem, getItem, findChild] = OakMother.dialog();
        findChild.condition = ~flags.RescuedChild.id;
        gotItem.condition = ~0;
        OakMother.dialog().splice(0, 4, findChild, getItem, killedInsect, gotItem);
    })();
    for (const i of [0x20, 0x21, 0x22, 0x7c, 0x7d]) {
        reverseDialog(rom.npcs[i].dialog());
    }
    OakChild.dialog().unshift(...OakChild.dialog().splice(1, 1));
    PortoaThroneRoomBackDoorGuard.spawnConditions.set(PortoaPalace_ThroneRoom.id, [~flags.QueenNotInThroneRoom.id, ~flags.MesiaRecording.id]);
    PortoaPalaceFrontGuard.dialog()[1].condition = flags.MesiaRecording.id;
    PortoaQueen.dialog()[3].condition = flags.SwordOfWater.id;
    PortoaQueen.dialog()[3].message.action = 0x03;
    PortoaQueen.dialog()[4].flags.push(flags.PortoaQueenGoingAway.id);
    PortoaQueen.spawns(PortoaPalace_ThroneRoom)[1] = ~flags.MesiaRecording.id;
    PortoaQueen.spawns(Portoa_AsinaRoom)[0] = flags.MesiaRecording.id;
    PortoaQueen.dialog()[1].condition = flags.MesiaRecording.id;
    FortuneTeller.spawns(Portoa_FortuneTeller)[1] = ~flags.MesiaRecording.id;
    Clark.spawnConditions.set(ZombieTown_HouseBasement.id, [~flags.Clark.id]);
    Clark.spawnConditions.set(Joel_Shed.id, [flags.Clark.id]);
    Zebu.localDialogs.set(ZebuCave.id, [
        LocalDialog.of(~flags.TalkedToZebuInCave.id, [0x00, 0x1a], [flags.TalkedToZebuInCave.id]),
        LocalDialog.of(flags.LeafVillagersRescued.id, [0x00, 0x1d]),
        LocalDialog.of(flags.LeafAbduction.id, [0x00, 0x1c]),
        LocalDialog.of(flags.ZebuAtWindmill.id, [0x00, 0x1d]),
        LocalDialog.of(flags.UsedWindmillKey.id, [0x00, 0x1b, 0x03]),
        LocalDialog.of(~0, [0x00, 0x1d]),
    ]);
    remove(Zebu.spawns(ZebuCave), ~flags.BehindWhirlpool.id);
    Tornel.spawnConditions.delete(MtSabreWest_Upper.id);
    Stom.spawnConditions.delete(StomHouse.id);
    Asina.data[1] = rom.items.FluteOfLime.id;
    Asina.dialog(Portoa_AsinaRoom)[0].message.action = 0x11;
    Asina.dialog(Portoa_AsinaRoom)[2].message.action = 0x11;
    remove(Asina.spawns(Portoa_AsinaRoom), ~flags.CalmedAngrySea.id);
    KensuInCabin.spawnConditions.set(BoatHouse.id, [~flags.AbleToRideDolphin.id,
        flags.ReturnedFogLamp.id]);
    KensuInCabin.dialog()[0].message.action = 0x02;
    AztecaInShyron.spawns(Shyron_Temple).push(~flags.ShyronMassacre.id);
    rom.trigger(0x82).conditions.push(~flags.ShyronMassacre.id);
    Rage.dialog()[0].condition = flags.SwordOfWater.id;
    Draygon.spawnConditions.set(Crypt_Draygon2.id, [~flags.Draygon2.id]);
    Zebu.dialog(Shyron_Temple)
        .unshift(...Zebu.dialog(Shyron_Temple).splice(1, 1));
    rom.trigger(0x80).conditions = [
        ~flags.ShyronMassacre.id,
        flags.TalkedToZebuInShyron.id,
        flags.SwordOfThunder.id,
    ];
    rom.trigger(0x81).conditions = [];
    if (opts.barrierRequiresCalmSea()) {
        rom.trigger(0x84).conditions.push(flags.CalmedAngrySea.id);
    }
    rom.trigger(0x8c).conditions.push(flags.TalkedToZebuInCave.id);
    rom.trigger(0x8d).used = false;
    for (const spawn of MtSabreNorth_SummitCave.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8d)
            spawn.id = 0xb2;
    }
    removeIf(WaterfallValleyNorth.spawns, spawn => spawn.isTrigger() && spawn.id === 0x8d);
    rom.trigger(0xb2).conditions.push(flags.Kelbesque1.id);
    rom.trigger(0xb2).flags.push(~flags.LeafVillagersCurrentlyAbducted.id, ~flags.LeafElderCurrentlyAbducted.id, flags.LeafVillagersRescued.id);
    rom.trigger(0x8c).conditions.push(~flags.Kelbesque1.id);
    rom.trigger(0x86).conditions.push(~flags.Kelbesque1.id);
    remove(KeyToPrison.itemUseData[0].flags, ~flags.LeafVillagersCurrentlyAbducted.id);
    replace(rom.trigger(0xbb).conditions, ~flags.Rage.id, ~flags.MesiaRecording.id);
}
function disableStabs(rom) {
    for (const o of [0x08, 0x09, 0x27]) {
        rom.objects[o].collisionPlane = 0;
    }
    rom.npcs.Brokahana.data[0] = rom.items.FruitOfLime.id;
}
function orbsOptional(rom) {
    for (const obj of [0x10, 0x14, 0x18, 0x1d]) {
        rom.objects[obj].terrainSusceptibility &= ~0x04;
        rom.objects[obj].level = 2;
    }
}
function noBowMode(rom) {
    const { flags: { UsedBowOfTruth }, locations: { Crypt_Draygon2, Crypt_Hall2, MezameShrine }, } = rom;
    let trigger;
    for (const spawn of MezameShrine.spawns) {
        if (spawn.isTrigger() && spawn.tile === 0x88) {
            trigger = rom.trigger(spawn.id);
        }
    }
    if (!trigger)
        throw new Error(`Could not find start trigger`);
    trigger.flags.push(UsedBowOfTruth.id);
    rom.tileEffects[0xb9 - 0xb3].effects[0x58] = 0;
    MezameShrine.exits.push(Exit.of({ tile: 0x68, dest: Crypt_Draygon2.id, entrance: 0 }));
    for (let exit of Crypt_Draygon2.exits) {
        if (exit.dest === Crypt_Hall2.id) {
            exit.dest = MezameShrine.id;
            exit.entrance = 1;
        }
    }
    for (let exit of Crypt_Hall2.exits) {
        if (exit.dest === Crypt_Draygon2.id) {
            exit.dest = MezameShrine.id;
            exit.entrance = 0;
        }
    }
}
function fixCrystalis(rom) {
    rom.objects[0x33].elements = 0xf;
}
function replace(array, old, replacement) {
    for (let i = 0; i < array.length; i++) {
        if (array[i] !== old)
            continue;
        array[i] = replacement;
        return;
    }
    throw new Error(`Could not find ${old} in ${array.join(',')}`);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZXJtaW5pc3RpYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL2RldGVybWluaXN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUMvQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDOUMsT0FBTyxFQUFDLFlBQVksRUFBRSxXQUFXLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEQsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBRXhDLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUNuQyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBRWxDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFFakIsU0FBUyxLQUFLLENBQUMsR0FBZSxFQUFFLEtBQWEsRUFBRSxHQUFHLElBQWM7SUFDOUQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDcEMsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDMUI7QUFDSCxDQUFDO0FBRUQsTUFBTSxVQUFVLHFCQUFxQixDQUFDLEdBQWU7SUFFbkQsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUdwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUlwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BC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LE9BQU8sR0FBRyxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDdEMsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDcEIsT0FBTyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDaEQsT0FBTyxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDNUMsT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzFDLE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDO0lBQzFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsQ0FBQztBQUVELFNBQVMsZUFBZSxDQUFDLEdBQVEsRUFBRSxLQUFjO0lBaUIvQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUUxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBRTFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBRTFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsSUFBSSxLQUFLLENBQUMsZUFBZSxFQUFFLEVBQUU7UUFHM0IsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNyQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztLQUMzQjtBQUNILENBQUM7QUFJRCxTQUFTLG9CQUFvQixDQUFDLEdBQVE7SUFDcEMsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENB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WSxDQUFDLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztTQUNuQjtLQUNGO0lBQ0QsS0FBSyxJQUFJLElBQUksSUFBSSxXQUFXLENBQUMsS0FBSyxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLENBQUMsRUFBRSxFQUFFO1lBQ25DLElBQUksQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztTQUNuQjtLQUNGO0FBQ0gsQ0FBQztBQUdELFNBQVMsWUFBWSxDQUFDLEdBQVE7SUFDNUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO0FBQ25DLENBQUM7QUFFRCxTQUFTLE9BQU8sQ0FBSSxLQUFVLEVBQUUsR0FBTSxFQUFFLFdBQWM7SUFDcEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDckMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRztZQUFFLFNBQVM7UUFDL0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQztRQUN2QixPQUFPO0tBQ1I7SUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtCQUFrQixHQUFHLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFBlcmZvcm0gaW5pdGlhbCBjbGVhbnVwL3NldHVwIG9mIHRoZSBST00uXG5cbmltcG9ydCB7RmxhZ1NldH0gZnJvbSAnLi4vZmxhZ3NldC5qcyc7XG5pbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7RXhpdCwgU3Bhd259IGZyb20gJy4uL3JvbS9sb2NhdGlvbi5qcyc7XG5pbXBvcnQge01lc3NhZ2VJZH0gZnJvbSAnLi4vcm9tL21lc3NhZ2VpZC5qcyc7XG5pbXBvcnQge0dsb2JhbERpYWxvZywgTG9jYWxEaWFsb2d9IGZyb20gJy4uL3JvbS9ucGMuanMnO1xuaW1wb3J0IHtTaG9wVHlwZX0gZnJvbSAnLi4vcm9tL3Nob3AuanMnO1xuaW1wb3J0IHtUcmlnZ2VyfSBmcm9tICcuLi9yb20vdHJpZ2dlci5qcyc7XG5pbXBvcnQge2hleH0gZnJvbSAnLi4vcm9tL3V0aWwuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL3V0aWwuanMnO1xuXG5jb25zdCBbXSA9IFtoZXhdOyAvLyBnZW5lcmFsbHkgdXNlZnVsXG5cbmZ1bmN0aW9uIHdyaXRlKGFycjogVWludDhBcnJheSwgc3RhcnQ6IG51bWJlciwgLi4uZGF0YTogbnVtYmVyW10pIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyW3N0YXJ0ICsgaV0gPSBkYXRhW2ldO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmlzdGljUHJlUGFyc2UocHJnOiBVaW50OEFycmF5KTogdm9pZCB7XG4gIC8vIFJlbW92ZSB1bm5lY2Vzc2FyeSBzdGF0dWUgZmlnaHQgdHJpZ2dlcnMuICBUT0RPIC0gcmVtb3ZlIDFkIGxvY2F0aW9uIGNoZWNrXG4gIHByZ1sweDFhNTk0XSA9IDB4ZmY7IC8vIGp1c3QgY3V0IG9mZiB0d28gb2JqZWN0cyBlYXJseS5cblxuICAvLyBSZW1vdmUgdW5uZWNlc3Nhcnkgb2FrIGVudHJhbmNlIHRyaWdnZXIgKGFhKS4gIFJlZGlyZWN0IHRoZSBkaWFsb2cgZmxhZy5cbiAgcHJnWzB4MWNkYzVdID0gMHhhODsgLy8gY2hhbmdlIGZsYWcgdG8gbm90IHVzZSAwNDMuXG4gIHByZ1sweDFhMTc2XSA9IDB4ZmY7IC8vIHJlbW92ZSB0aGUgODMgdHJpZ2dlciBmcm9tIGdvYSBmb3J0cmVzcyBlbnRyYW5jZS5cbiAgcHJnWzB4MWE4NGNdID0gMHhmZjsgLy8gcmVtb3ZlIHRoZSBhYSB0cmlnZ2VyIChsYXN0IHNwYXduIGluIG9haykuXG5cbiAgLy8gUmVtb3ZlIGJyb2tlbiAodW51c2VkKSBrZW5zdSBkaWFsb2cgaW4gc3dhbiB0YXZlcm4gLSBvcmlnaW5hbCByZWFkc1xuICAvLyBwYXJ0IG9mIHRoZSBuZXh0IGFyZWEncyBsb2NhbCBkaWFsb2dzIGFzIGZsYWdzIHRvIHNldCwgaW5jbHVkaW5nIDE0MC5cbiAgcHJnWzB4MWQ4NDNdID0gMHhhMDsgLy8gY2hhbmdlIGUwIChleHBlY3RpbmcgZm9sbG93LXVwIGZsYWdzKSB0byBhMC5cblxuICAvLyBSZW1vdmUgdW51c2VkIGl0ZW0vdHJpZ2dlciBhY3Rpb25zXG4gIHByZ1sweDFlMDZiXSAmPSA3OyAvLyBtZWRpY2FsIGhlcmIgbm9ybWFsIHVzYWdlID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwNmZdICY9IDc7IC8vIG1hZ2ljIHJpbmcgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDczXSAmPSA3OyAvLyBmcnVpdCBvZiBsaW1lIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3N10gJj0gNzsgLy8gYW50aWRvdGUgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDdiXSAmPSA3OyAvLyBvcGVsIHN0YXR1ZSBpdGVtdXNlWzBdID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwODRdICY9IDc7IC8vIHdhcnAgYm9vdHMgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDQgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDliXSAmPSA3OyAvLyB3aW5kbWlsbCBrZXkgaXRlbXVzZVsxXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMGI5XSAmPSA3OyAvLyBnbG93aW5nIGxhbXAgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG5cbiAgcHJnWzB4MWUxMDVdID0gMHgyZjsgLy8gY2hhbmdlIFVzZWRCb3dPZlRydXRoIGZyb20gMDg2IHRvIGZpeGVkIDAyZiAoNjQ4NTo4MClcblxuICBwcmdbMHgxZTI3N10gPSAweDAwOyAvLyByZW1vdmUgZmxhZyAwYTEgZnJvbSBhbWF6b25lcyB3YXJwICh0cmlnZ2VyIDkwKVxuICBwcmdbMHgxZTM2Nl0gPSAweDQwOyAvLyByZW1vdmUgdW5yZWFkIDA4ZSBmbGFnIGZyb20gc2FiZXJhIHRyYXAgKHRyaWdnZXIgYjYpXG4gIHByZ1sweDFlMzcxXSA9IDB4MDA7IC8vIHJlbW92ZSBmbGFnIDBhMiBmcm9tIHBvcnRvYSBjYXN0bGUgYnJpZGdlICh0cmlnZ2VyIGI3KVxuXG4gIC8vIGd1YXJkIHBhcmFseXNpcyBmbGFncyBhcmUgbW92ZWQgaGFyZGNvZGVkIG5vd1xuICBwcmdbMHgxZTM4N10gPSAweDAwOyAvLyByZW1vdmUgY29uZGl0aW9uIDA5ZSBmcm9tIHBhbGFjZSBndWFyZCAodHJpZ2dlciBiYilcbiAgcHJnWzB4MWUzOTFdID0gMHgwMDsgLy8gcmVtb3ZlIGNvbmRpdGlvbiAwOTkgZnJvbSBhbWF6b25lcyBndWFyZCAodHJpZ2dlciBiYylcblxuICAvLyBDdXN0b20gc2hvb3Rpbmcgd2FsbHM6IG1hcmsgd2FsbHMgYXMgc2hvb3RpbmdcbiAgd3JpdGUocHJnLCAweDFhMTY4LCAweDMzLCAweDMzKTsgLy8gZnJvbnQgb2YgZ29hIGZvcnRyZXNzXG4gIHdyaXRlKHByZywgMHgxYTQ4ZSwgMHgzMywgMHgzMyk7IC8vIG9hc2lzIGNhdmVcblxuICAvLyBSZW51bWJlciBtaW1pY3NcbiAgcHJnWzB4MTliYjFdID0gMHg3MDsgLy8gZm9nIGxhbXAgY2F2ZSAzICg0YSkgbm9ydGggbWltaWNcbiAgcHJnWzB4MTliYjVdID0gMHg3MTsgLy8gZm9nIGxhbXAgY2F2ZSAzICg0YSkgc291dGh3ZXN0IG1pbWljXG4gIHByZ1sweDE5YTc3XSA9IDB4NzI7IC8vIHdhdGVyZmFsbCBjYXZlIDEgKDU0KSBtaW1pY1xuICBwcmdbMHgxOWRlYl0gPSAweDczOyAvLyBldmlsIHNwaXJpdCBpc2xhbmQgNCAoNmIpIHJpdmVyIHJpZ2h0IG1pbWljXG4gIHByZ1sweDFhMDQ1XSA9IDB4NzQ7IC8vIG10IGh5ZHJhIGNhdmUgOCAoODUpIG1pbWljXG4gIHByZ1sweDFhMGUxXSA9IDB4NzU7IC8vIHN0eHkgbGVmdCAoODkpIG5vcnRoIG1pbWljXG4gIHByZ1sweDFhMGU1XSA9IDB4NzY7IC8vIHN0eHkgcmlnaHQgKDg5KSBub3J0aCByaXZlcnNpZGUgbWltaWNcbiAgcHJnWzB4MWEwZTldID0gMHg3NzsgLy8gc3R4eSByaWdodCAoODkpIHNvdXRoIHJpdmVyc2lkZSBtaW1pY1xuICBwcmdbMHgxYTYwNV0gPSAweDc4OyAvLyBjcnlwdCBsZWZ0IHBpdCAoYTMpIG1pbWljXG4gIHByZ1sweDFhM2MxXSA9IDB4Nzk7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSB0b3AgbWlkZGxlIG1pbWljXG4gIHByZ1sweDFhM2M1XSA9IDB4N2E7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSB0b3AgcmlnaHQgbWltaWNcbiAgcHJnWzB4MWEzYzldID0gMHg3YjsgLy8ga2FybWluZSBiYXNlbWVudCAoYjUpIGJvdHRvbSByaWdodCBtaW1pY1xuXG4gIHdyaXRlKHByZywgMHgxZTBiNywgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSBzaGVsbCBmbHV0ZSB1c2UgZmxhZyAobmV2ZXIgcmVhZClcbiAgd3JpdGUocHJnLCAweDFlMzJhLCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIHByaXNvbiBvcGVuYWJsZSBmbGFnICh0cmlnZ2VyIGFkKVxuICB3cml0ZShwcmcsIDB4MWUzMzAsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgc3R4eSBvcGVuYWJsZSBmbGFnICh0cmlnZ2VyIGFlKVxuICB3cml0ZShwcmcsIDB4MWUzMzYsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgYWx0YXIgdXNhYmxlIGZsYWcgKHRyaWdnZXIgYWYpXG4gIHdyaXRlKHByZywgMHgxZTBlMCwgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSB1bnVzZWQgZmx1dGUgb2YgbGltZSBpdGVtdXNlIGZsYWdcbiAgd3JpdGUocHJnLCAweDFlMGU2LCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIHVudXNlZCBmbHV0ZSBvZiBsaW1lIGl0ZW11c2UgZmxhZ1xuXG4gIC8vIFN3YW4gZ2F0ZSBndWFyZHMgc3Bhd24gZXhhY3RseSBiYXNlZCBvbiBnYXRlIGJlaW5nIGNsb3NlZCAoMmIzKS5cbiAgLy8gQWxzbyByZW1vdmUgdGhlIGRlc3Bhd24gdHJpZ2dlciAod2UgY2FuJ3QgbW92ZSB0aGUgZ3VhcmRzIGJlY2F1c2VcbiAgLy8gdGhlIGdhdGUgYW5pbWF0aW9uIG5lZWRzIHRvIGJlIGluIHNsb3QgZSkuXG4gIHByZ1sweDFjODAzXSA9IDB4MDA7IC8vIHJlbW92ZSB+MDY2IGZyb20gc3Bhd24gY29uZGl0aW9uIDJjIEAgMzhcbiAgd3JpdGUocHJnLCAweDFjODBkLCAweGEyLCAweGIzKTsgLy8gc3Bhd24gY29uZGl0aW9uIDJkIEAgNzNcbiAgcHJnWzB4MWFhODZdID0gMHhmZTsgLy8gdHJpZ2dlciAtPiB1bnVzZWQgc3Bhd25cblxuICAvLyBUT0RPIC0gdGhlc2UgYXJlIHRyYW5zaXRpb25hbCB1bnRpbCB3ZSBtb3ZlIHRoZSBsb2dpYyBlbHNld2hlcmVcbiAgd3JpdGUocHJnLCAweDNkNmQ1LFxuICAgICAgICAweDI1LCAweDI5LCAgLy8gMjUgc3RhdHVlIG9mIG9ueXggdXNlIC0+IDI5IGdhcyBtYXNrXG4gICAgICAgIDB4MzksIDB4M2EsICAvLyAzOSBnbG93aW5nIGxhbXAgdXNlIC0+IDNhIHN0YXR1ZSBvZiBnb2xkXG4gICAgICAgIDB4M2IsIDB4NDcsICAvLyAzYiBsb3ZlIHBlbmRhbnQgdXNlIC0+IDQ3IGNoYW5nZVxuICAgICAgICAweDNjLCAweDNlLCAgLy8gM2Mga2lyaXNhIHBsYW50IHVzZSAtPiAzZSBib3cgb2YgbW9vblxuICAgICAgICAweDg0LCAweDQ2LCAgLy8gODQgYW5ncnkgc2VhIHRyaWdnZXIgLT4gNDYgYmFycmllclxuICAgICAgICAweGIyLCAweDQyLCAgLy8gYjIgc3VtbWl0IHRyaWdnZXIgLT4gNDIgcGFyYWx5c2lzXG4gICAgICAgIDB4YjQsIDB4NDEsICAvLyBiNCB3aW5kbWlsbCBjYXZlIHRyaWdnZXIgLT4gNDEgcmVmcmVzaFxuICAgICAgICAweGZmKTsgICAgICAgLy8gZm9yIGJvb2trZWVwaW5nIHB1cnBvc2VzLCBub3QgYWN0dWFsbHkgdXNlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5pc3RpYyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgLy8gTk9URTogZG8gdGhpcyB2ZXJ5IGVhcmx5IHRvIG1ha2Ugc3VyZSByZWZzIHRvIHdhcnAgcG9pbnQgZmxhZ3MgYXJlXG4gIC8vIHVwZGF0ZWQgdG8gcmVmbGVjdCBzaGlmdHMgKHByb2JhYmx5IG5vdCBhbiBpc3N1ZSBhbnltb3JlIG5vdyB0aGF0XG4gIC8vIHdlIHRyYWNrIGZsYWcgbW92ZXMgc2VwYXJhdGVseSkuXG4gIGFkZFpvbWJpZVdhcnAocm9tKTtcblxuICBjb25zb2xpZGF0ZUl0ZW1HcmFudHMocm9tKTtcbiAgYWRkTWV6YW1lVHJpZ2dlcihyb20pO1xuICBub3JtYWxpemVTd29yZHMocm9tLCBmbGFncyk7XG5cbiAgZml4Q3J5c3RhbGlzKHJvbSk7XG4gIGZpeE9wZWxTdGF0dWUocm9tKTtcbiAgZml4Q29pblNwcml0ZXMocm9tKTtcbiAgZml4Q2hlc3RzKHJvbSk7XG4gIHByZXZlbnRCb3NzU29mdGxvY2tzKHJvbSk7XG5cbiAgbWFrZUJyYWNlbGV0c1Byb2dyZXNzaXZlKHJvbSk7XG5cbiAgYWRqdXN0R29hRm9ydHJlc3NUcmlnZ2Vycyhyb20pO1xuICBwcmV2ZW50TnBjRGVzcGF3bnMocm9tLCBmbGFncyk7XG4gIGxlYWZFbGRlckluU2FicmVIZWFscyhyb20pO1xuICBpZiAoZmxhZ3MucmVxdWlyZUhlYWxlZERvbHBoaW5Ub1JpZGUoKSkgcmVxdWlyZUhlYWxlZERvbHBoaW4ocm9tKTtcbiAgaWYgKGZsYWdzLnNhaGFyYVJhYmJpdHNSZXF1aXJlVGVsZXBhdGh5KCkpIHJlcXVpcmVUZWxlcGF0aHlGb3JEZW8ocm9tKTtcblxuICBhZGp1c3RJdGVtTmFtZXMocm9tLCBmbGFncyk7XG5cbiAgLy8gVE9ETyAtIGNvbnNpZGVyIG1ha2luZyBhIFRyYW5zZm9ybWF0aW9uIGludGVyZmFjZSwgd2l0aCBvcmRlcmluZyBjaGVja3NcbiAgYWxhcm1GbHV0ZUlzS2V5SXRlbShyb20sIGZsYWdzKTsgLy8gTk9URTogcHJlLXNodWZmbGVcbiAgYnJva2FoYW5hV2FudHNNYWRvMShyb20pO1xuICBpZiAoZmxhZ3MudGVsZXBvcnRPblRodW5kZXJTd29yZCgpKSB7XG4gICAgdGVsZXBvcnRPblRodW5kZXJTd29yZChyb20pO1xuICAgIC8vIG5vdCBTaHlyb25fVGVtcGxlIHNpbmNlIG5vLXRodW5kZXItc3dvcmQtZm9yLW1hc3NhY3JlXG4gICAgcm9tLnRvd25XYXJwLnRodW5kZXJTd29yZFdhcnAgPSBbcm9tLmxvY2F0aW9ucy5TaHlyb24uaWQsIDB4NDFdO1xuICB9IGVsc2Uge1xuICAgIG5vVGVsZXBvcnRPblRodW5kZXJTd29yZChyb20pO1xuICB9XG5cbiAgdW5kZXJncm91bmRDaGFubmVsTGFuZEJyaWRnZShyb20pO1xuICBpZiAoZmxhZ3MuZm9nTGFtcE5vdFJlcXVpcmVkKCkpIGZvZ0xhbXBOb3RSZXF1aXJlZChyb20sIGZsYWdzKTtcblxuICBldmlsU3Bpcml0SXNsYW5kUmVxdWlyZXNEb2xwaGluKHJvbSk7XG4gIHNpbXBsaWZ5SW52aXNpYmxlQ2hlc3RzKHJvbSk7XG4gIGFkZENvcmRlbFdlc3RUcmlnZ2Vycyhyb20sIGZsYWdzKTtcbiAgaWYgKGZsYWdzLmRpc2FibGVSYWJiaXRTa2lwKCkpIGZpeFJhYmJpdFNraXAocm9tKTtcblxuICBpZiAoZmxhZ3MuZGlzYWJsZVJhZ2VTa2lwKCkpIHBhdGNoTGltZVRyZWVMYWtlKHJvbSk7XG5cbiAgZml4UmV2ZXJzZVdhbGxzKHJvbSk7XG4gIGlmIChmbGFncy5jaGFyZ2VTaG90c09ubHkoKSkgZGlzYWJsZVN0YWJzKHJvbSk7XG4gIGlmIChmbGFncy5vcmJzT3B0aW9uYWwoKSkgb3Jic09wdGlvbmFsKHJvbSk7XG4gIGlmIChmbGFncy5ub0Jvd01vZGUoKSkgbm9Cb3dNb2RlKHJvbSk7XG5cbiAgcGF0Y2hUb29NYW55SXRlbXNNZXNzYWdlKHJvbSk7XG59XG5cbi8vIFVwZGF0ZXMgYSBmZXcgaXRlbXVzZSBhbmQgdHJpZ2dlciBhY3Rpb25zIGluIGxpZ2h0IG9mIGNvbnNvbGlkYXRpb25cbi8vIGFyb3VuZCBpdGVtIGdyYW50aW5nLlxuZnVuY3Rpb24gY29uc29saWRhdGVJdGVtR3JhbnRzKHJvbTogUm9tKTogdm9pZCB7XG4gIHJvbS5pdGVtcy5HbG93aW5nTGFtcC5pdGVtVXNlRGF0YVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MGI7XG59XG5cbi8vIEFkZHMgYSB0cmlnZ2VyIGFjdGlvbiB0byBtZXphbWUuICBVc2UgODcgbGVmdG92ZXIgZnJvbSByZXNjdWluZyB6ZWJ1LlxuZnVuY3Rpb24gYWRkTWV6YW1lVHJpZ2dlcihyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB0cmlnZ2VyID0gcm9tLm5leHRGcmVlVHJpZ2dlcigpO1xuICB0cmlnZ2VyLnVzZWQgPSB0cnVlO1xuICB0cmlnZ2VyLmNvbmRpdGlvbnMgPSBbfnJvbS5mbGFncy5BbHdheXNUcnVlLmlkXTtcbiAgdHJpZ2dlci5tZXNzYWdlID0gTWVzc2FnZUlkLm9mKHthY3Rpb246IDR9KTtcbiAgdHJpZ2dlci5mbGFncyA9IFtyb20uZmxhZ3MuQWx3YXlzVHJ1ZS5pZF07XG4gIGNvbnN0IG1lemFtZSA9IHJvbS5sb2NhdGlvbnMuTWV6YW1lU2hyaW5lO1xuICBtZXphbWUuc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3RpbGU6IDB4ODgsIHR5cGU6IDIsIGlkOiB0cmlnZ2VyLmlkfSkpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTd29yZHMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KSB7XG4gIC8vIHdpbmQgMSA9PiAxIGhpdCAgICAgICAgICAgICAgID0+IDNcbiAgLy8gd2luZCAyID0+IDEgaGl0ICAgICAgICAgICAgICAgPT4gNlxuICAvLyB3aW5kIDMgPT4gMi0zIGhpdHMgOE1QICAgICAgICA9PiA4XG5cbiAgLy8gZmlyZSAxID0+IDEgaGl0ICAgICAgICAgICAgICAgPT4gM1xuICAvLyBmaXJlIDIgPT4gMyBoaXRzICAgICAgICAgICAgICA9PiA1XG4gIC8vIGZpcmUgMyA9PiA0LTYgaGl0cyAxNk1QICAgICAgID0+IDdcblxuICAvLyB3YXRlciAxID0+IDEgaGl0ICAgICAgICAgICAgICA9PiAzXG4gIC8vIHdhdGVyIDIgPT4gMS0yIGhpdHMgICAgICAgICAgID0+IDZcbiAgLy8gd2F0ZXIgMyA9PiAzLTYgaGl0cyAxNk1QICAgICAgPT4gOFxuXG4gIC8vIHRodW5kZXIgMSA9PiAxLTIgaGl0cyBzcHJlYWQgID0+IDNcbiAgLy8gdGh1bmRlciAyID0+IDEtMyBoaXRzIHNwcmVhZCAgPT4gNVxuICAvLyB0aHVuZGVyIDMgPT4gNy0xMCBoaXRzIDQwTVAgICA9PiA3XG5cbiAgcm9tLm9iamVjdHNbMHgxMF0uYXRrID0gMzsgLy8gd2luZCAxXG4gIHJvbS5vYmplY3RzWzB4MTFdLmF0ayA9IDY7IC8vIHdpbmQgMlxuICByb20ub2JqZWN0c1sweDEyXS5hdGsgPSA4OyAvLyB3aW5kIDNcblxuICByb20ub2JqZWN0c1sweDE4XS5hdGsgPSAzOyAvLyBmaXJlIDFcbiAgcm9tLm9iamVjdHNbMHgxM10uYXRrID0gNTsgLy8gZmlyZSAyXG4gIHJvbS5vYmplY3RzWzB4MTldLmF0ayA9IDU7IC8vIGZpcmUgMlxuICByb20ub2JqZWN0c1sweDE3XS5hdGsgPSA3OyAvLyBmaXJlIDNcbiAgcm9tLm9iamVjdHNbMHgxYV0uYXRrID0gNzsgLy8gZmlyZSAzXG5cbiAgcm9tLm9iamVjdHNbMHgxNF0uYXRrID0gMzsgLy8gd2F0ZXIgMVxuICByb20ub2JqZWN0c1sweDE1XS5hdGsgPSA2OyAvLyB3YXRlciAyXG4gIHJvbS5vYmplY3RzWzB4MTZdLmF0ayA9IDg7IC8vIHdhdGVyIDNcblxuICByb20ub2JqZWN0c1sweDFjXS5hdGsgPSAzOyAvLyB0aHVuZGVyIDEgKHVudXNlZCBhbGlhcz8pXG4gIHJvbS5vYmplY3RzWzB4MWRdLmF0ayA9IDM7IC8vIHRodW5kZXIgMVxuICByb20ub2JqZWN0c1sweDFlXS5hdGsgPSA1OyAvLyB0aHVuZGVyIDJcbiAgcm9tLm9iamVjdHNbMHgxYl0uYXRrID0gNzsgLy8gdGh1bmRlciAzXG4gIHJvbS5vYmplY3RzWzB4MWZdLmF0ayA9IDc7IC8vIHRodW5kZXIgM1xuXG4gIGlmIChmbGFncy5zbG93RG93blRvcm5hZG8oKSkge1xuICAgIC8vIFRPRE8gLSB0b3JuYWRvIChvYmogMTIpID0+IHNwZWVkIDA3IGluc3RlYWQgb2YgMDhcbiAgICAvLyAgICAgIC0gbGlmZXRpbWUgaXMgNDgwID0+IDcwIG1heWJlIHRvbyBsb25nLCA2MCBzd2VldCBzcG90P1xuICAgIGNvbnN0IHRvcm5hZG8gPSByb20ub2JqZWN0c1sweDEyXTtcbiAgICB0b3JuYWRvLnNwZWVkID0gMHgwNztcbiAgICB0b3JuYWRvLmRhdGFbMHgwY10gPSAweDYwOyAvLyBpbmNyZWFzZSBsaWZldGltZSAoNDgwKSBieSAyMCVcbiAgfVxufVxuXG4vLyBBZGQgY29kZSB0byBlbnN1cmUgRHJheWdvbiAyIGFuZCBHaWFudCBJbnNlY3QgcmVzcGF3biB3aXRob3V0IHRoZWlyXG4vLyBpdGVtcyBvbmNlIHRoZXkndmUgYmVlbiB1c2VkLlxuZnVuY3Rpb24gcHJldmVudEJvc3NTb2Z0bG9ja3Mocm9tOiBSb20pIHtcbiAgY29uc3QgdHJpZ2dlciA9IHJvbS50cmlnZ2VyKDB4YTApO1xuICB0cmlnZ2VyLnVzZWQgPSB0cnVlO1xuICB0cmlnZ2VyLmNvbmRpdGlvbnMgPSBbXTtcbiAgdHJpZ2dlci5mbGFncyA9IFtdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe3BhcnQ6IDAsIGluZGV4OiAwLCBhY3Rpb246IDB4MTV9KTtcblxuICByb20ub2JqZWN0c1sweDVlXS5kYXRhWzB4ZF0gPSAweGZlOyAvLyBvYmplY3QgYWN0aW9uIDdlIGluc3RlYWQgb2YgN2ZcbiAgcm9tLml0ZW1zLkluc2VjdEZsdXRlLml0ZW1Vc2VEYXRhWzBdLmZsYWdzID0gW3JvbS5mbGFncy5Vc2VkSW5zZWN0Rmx1dGUuaWRdO1xufVxuXG5mdW5jdGlvbiBmaXhPcGVsU3RhdHVlKHJvbTogUm9tKSB7XG4gIC8vIERvbid0IHNlbGVjdCBPcGVsIFN0YXR1ZSBhdCBhbGwuICBUaGlzIHBhdGNoZXMgdGhlIHRhYmxlIGF0ICQyMTAzYlxuICAvLyB0aGF0IHRyYW5zbGF0ZXMgYW4gaXRlbSBJRCB0byBhIFwic2VsZWN0ZWQgaXRlbVwiIGluZGV4LCBpLmUuIGVhY2hcbiAgLy8gdHlwZSBvZiBpdGVtIG1hcHMgdG8gYSBzZXJpZXMgMS4uTi4gIEluIHRoaXMgY2FzZSwgd2UganVzdCByZW1hcFxuICAvLyBPcGVsIFN0YXR1ZSB0byB6ZXJvIHNvIHRoYXQgaXQgbG9va3MgbGlrZSBub3RoaW5nIGlzIHNlbGVjdGVkLlxuICByb20uaXRlbXMuT3BlbFN0YXR1ZS5zZWxlY3RlZEl0ZW1WYWx1ZSA9IDA7XG59XG5cbmZ1bmN0aW9uIGZpeENvaW5TcHJpdGVzKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3QgcGFnZSBvZiBbMHg2MCwgMHg2NCwgMHg2NSwgMHg2NiwgMHg2NywgMHg2OCxcbiAgICAgICAgICAgICAgICAgICAgICAweDY5LCAweDZhLCAweDZiLCAweDZjLCAweDZkLCAweDZmXSkge1xuICAgIGZvciAoY29uc3QgcGF0IG9mIFswLCAxLCAyXSkge1xuICAgICAgcm9tLnBhdHRlcm5zW3BhZ2UgPDwgNiB8IHBhdF0ucGl4ZWxzID0gcm9tLnBhdHRlcm5zWzB4NWUgPDwgNiB8IHBhdF0ucGl4ZWxzO1xuICAgIH1cbiAgfVxuICByb20ub2JqZWN0c1sweDBjXS5tZXRhc3ByaXRlID0gMHhhOTtcbn1cblxuLyoqXG4gKiBGaXggdGhlIHNvZnRsb2NrIHRoYXQgaGFwcGVucyB3aGVuIHlvdSBnbyB0aHJvdWdoXG4gKiBhIHdhbGwgYmFja3dhcmRzIGJ5IG1vdmluZyB0aGUgZXhpdC9lbnRyYW5jZSB0aWxlc1xuICogdXAgYSBiaXQgYW5kIGFkanVzdGluZyBzb21lIHRpbGVFZmZlY3RzIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gZml4UmV2ZXJzZVdhbGxzKHJvbTogUm9tKSB7XG4gIC8vIGFkanVzdCB0aWxlIGVmZmVjdCBmb3IgYmFjayB0aWxlcyBvZiBpcm9uIHdhbGxcbiAgZm9yIChjb25zdCB0IGluIFsweDA0LCAweDA1LCAweDA4LCAweDA5XSkge1xuICAgIHJvbS50aWxlRWZmZWN0c1sweGJjIC0gMHhiM10uZWZmZWN0c1t0XSA9IDB4MTg7XG4gICAgcm9tLnRpbGVFZmZlY3RzWzB4YjUgLSAweGIzXS5lZmZlY3RzW3RdID0gMHgxODtcbiAgfVxuICAvLyBUT0RPIC0gbW92ZSBhbGwgdGhlIGVudHJhbmNlcyB0byB5PTIwIGFuZCBleGl0cyB0byB5dD0wMVxufVxuXG4vKiogTWFrZSBhIGxhbmQgYnJpZGdlIGluIHVuZGVyZ3JvdW5kIGNoYW5uZWwgKi9cbmZ1bmN0aW9uIHVuZGVyZ3JvdW5kQ2hhbm5lbExhbmRCcmlkZ2Uocm9tOiBSb20pIHtcbiAgY29uc3Qge3RpbGVzfSA9IHJvbS5zY3JlZW5zWzB4YTFdO1xuICB0aWxlc1sweDI4XSA9IDB4OWY7XG4gIHRpbGVzWzB4MzddID0gMHgyMztcbiAgdGlsZXNbMHgzOF0gPSAweDIzOyAvLyAweDhlO1xuICB0aWxlc1sweDM5XSA9IDB4MjE7XG4gIHRpbGVzWzB4NDddID0gMHg4ZDtcbiAgdGlsZXNbMHg0OF0gPSAweDhmO1xuICB0aWxlc1sweDU2XSA9IDB4OTk7XG4gIHRpbGVzWzB4NTddID0gMHg5YTtcbiAgdGlsZXNbMHg1OF0gPSAweDhjO1xufVxuXG5mdW5jdGlvbiBmb2dMYW1wTm90UmVxdWlyZWQocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KSB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge0Fsd2F5c1RydWUsIEluanVyZWREb2xwaGluLCBGb2dMYW1wLFxuICAgICAgICAgICAgS2Vuc3VJbkNhYmluLCBSZXR1cm5lZEZvZ0xhbXB9LFxuICAgIGl0ZW1zOiB7U2hlbGxGbHV0ZX0sXG4gICAgbG9jYXRpb25zOiB7Qm9hdEhvdXNlLCBQb3J0b2FfRmlzaGVybWFuSG91c2V9LFxuICAgIG5wY3MsXG4gIH0gPSByb207XG4gICAgXG4gIC8vIE5lZWQgdG8gbWFrZSBzZXZlcmFsIGNoYW5nZXMuXG4gIC8vICgxKSBkb2xwaGluIG9ubHkgcmVxdWlyZXMgc2hlbGwgZmx1dGUsIG1ha2UgdGhlIGZsYWcgY2hlY2sgZnJlZVxuICAvLyAgICAgdW5sZXNzIGhlYWxpbmcgaXMgcmVxdWlyZWQuXG4gIGNvbnN0IHJlcXVpcmVIZWFsZWQgPSBmbGFncy5yZXF1aXJlSGVhbGVkRG9scGhpblRvUmlkZSgpO1xuICBTaGVsbEZsdXRlLml0ZW1Vc2VEYXRhWzBdLndhbnQgPVxuICAgICAgcmVxdWlyZUhlYWxlZCA/IEluanVyZWREb2xwaGluLmlkIDogQWx3YXlzVHJ1ZS5pZDtcbiAgLy8gKDIpIGtlbnN1IDY4IChANjEpIGRyb3BzIGFuIGl0ZW0gKDY3IG1hZ2ljIHJpbmcpXG4gIG5wY3MuS2Vuc3VJbkNhYmluLmRhdGFbMF0gPSAweDY3O1xuICBucGNzLktlbnN1SW5DYWJpbi5sb2NhbERpYWxvZ3MuZ2V0KC0xKSFbMF0ubWVzc2FnZS5hY3Rpb24gPSAweDBhO1xuICBucGNzLktlbnN1SW5DYWJpbi5sb2NhbERpYWxvZ3MuZ2V0KC0xKSFbMF0uZmxhZ3MgPSBbXTtcbiAgbnBjcy5LZW5zdUluQ2FiaW4uc3Bhd25Db25kaXRpb25zLnNldChCb2F0SG91c2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1JldHVybmVkRm9nTGFtcC5pZCwgfktlbnN1SW5DYWJpbi5pZF0pO1xuICAvLyAoMykgZmlzaGVybWFuIDY0IHNwYXducyBvbiBmb2cgbGFtcCByYXRoZXIgdGhhbiBzaGVsbCBmbHV0ZVxuICBucGNzLkZpc2hlcm1hbi5zcGF3bkNvbmRpdGlvbnMuc2V0KFBvcnRvYV9GaXNoZXJtYW5Ib3VzZS5pZCwgW0ZvZ0xhbXAuaWRdKTtcblxuICAvLyAoNCkgZml4IHVwIGl0ZW1nZXQgNjcgZnJvbSBpdGVtZ2V0IDY0IChkZWxldGUgdGhlIGZsYWcpXG4gIHJvbS5pdGVtR2V0c1sweDY0XS5mbGFncyA9IFtdO1xuICByb20uaXRlbUdldHNbMHg2N10uY29weUZyb20ocm9tLml0ZW1HZXRzWzB4NjRdKTtcbiAgLy9yb20uaXRlbUdldHNbMHg2N10uZmxhZ3MgPSBbMHgwYzFdO1xuXG4gIC8vIFRPRE8gLSBncmFwaGljcyBzY3Jld2VkIHVwIC0gZmlndXJlIG91dCBpZiBvYmplY3QgYWN0aW9uIGlzIGNoYW5naW5nXG4gIC8vIHRoZSBwYXR0ZXJuIHRhYmxlcyBiYXNlZCBvbiAoZS5nLikgJDYwMCx4IG1heWJlPyAgQ2FuIHdlIHByZXZlbnQgaXQ/XG5cbiAgLy8gVE9ETyAtIGFkZCBhIG5vdGVzIGZpbGUgYWJvdXQgdGhpcy5cblxufVxuXG4vKipcbiAqIFJlbW92ZSB0aW1lciBzcGF3bnMgZnJvbSBhbGwgY2hlc3RzLiAgTWltaWNzIGhhdmUgYWxyZWFkeSBiZWVuXG4gKiByZW51bWJlcmVkIHRvIGJlIGV1bmlxdWUgKHByZS1wYXJzZSkuICBOb3RlIHRoYXQgdGhlIHJlbnVtYmVyaW5nXG4gKiByZXF1aXJlcyBhbiBhc3NlbWJseSBjaGFuZ2UgKCQzZDNmZCBpbiBwcmVzaHVmZmxlLnMpLlxuICovXG5mdW5jdGlvbiBmaXhDaGVzdHMocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBsb2Mgb2Ygcm9tLmxvY2F0aW9ucykge1xuICAgIGZvciAoY29uc3QgcyBvZiBsb2Muc3Bhd25zKSB7XG4gICAgICBpZiAocy5pc0NoZXN0KCkpIHMudGltZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gVE9ETyAtIGZpbmQgYSBiZXR0ZXIgd2F5IHRvIGJ1bmRsZSBhc20gY2hhbmdlcz8gLSBidXQgaXQncyBhIG1lc3NcbiAgLy8gICAgICAgIHdpdGggc2hhcmluZyBsYWJlbHMsIHRyYWNraW5nIGNsb2JiZXJpbmcsIGV0Yy5cbiAgLy8gcm9tLmFzc2VtYmxlKClcbiAgLy8gICAgIC4kKCdhZGMgJDEwJylcbiAgLy8gICAgIC5iZXEoJ2xhYmVsJylcbiAgLy8gICAgIC5sc2goKVxuICAvLyAgICAgLmxzaChgJHthZGRyfSx4YClcbiAgLy8gICAgIC5sYWJlbCgnbGFiZWwnKTtcbiAgLy8gcm9tLnBhdGNoKClcbiAgLy8gICAgIC5vcmcoMHgzZDNmZClcbiAgLy8gICAgIC5ieXRlKDB4YjApO1xuXG4gIC8vIHJvbS5jb2RlLnJlcGxhY2UoMHgzYzE5MiwgMHgzYzFhNywgYFxuICAvLyAgICAgYXNsXG4gIC8vICAgICBhZGMgJDEwICA7IGRvIHNvbWV0aGluZ1xuICAvLyAgICAgYm5lICtcbiAgLy8gICAgICBydHNcbiAgLy8gICArIGptcCBGb29CYXJgKTtcbiAgLy8gcm9tLmNvZGUucmVwbGFjZUV4YWN0KHN0YXJ0LCBlbmQsIGNvZGUpO1xuICAvLyByb20uY29kZS5pbnNlcnQocGFnZSwgYFxuICAvLyAgICAgTGFiZWw6ICA7IHVzYWJsZSBmcm9tIGVsc2V3aGVyZT9cbiAgLy8gICAgIC0gYXNsXG4gIC8vICAgICAgIGJjYyAtXG4gIC8vICAgICAgIHJ0c2ApO1xufVxuXG5mdW5jdGlvbiBhZGp1c3RHb2FGb3J0cmVzc1RyaWdnZXJzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IGwgPSByb20ubG9jYXRpb25zO1xuICAvLyBNb3ZlIEtlbGJlc3F1ZSAyIG9uZSBmdWxsIHRpbGUgbGVmdC5cbiAgbC5Hb2FGb3J0cmVzc19LZWxiZXNxdWUuc3Bhd25zWzBdLnggLT0gMTY7XG4gIC8vIFJlbW92ZSBzYWdlIHNjcmVlbiBsb2NrcyAoZXhjZXB0IEtlbnN1KS5cbiAgbC5Hb2FGb3J0cmVzc19aZWJ1LnNwYXducy5zcGxpY2UoMSwgMSk7IC8vIHplYnUgc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX1Rvcm5lbC5zcGF3bnMuc3BsaWNlKDIsIDEpOyAvLyB0b3JuZWwgc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX0FzaW5hLnNwYXducy5zcGxpY2UoMiwgMSk7IC8vIGFzaW5hIHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19LZW5zdS5zcGF3bnMuc3BsaWNlKDMsIDEpOyAvLyBrZW5zdSBodW1hbiBzY3JlZW4gbG9jayB0cmlnZ2VyXG4gIGwuR29hRm9ydHJlc3NfS2Vuc3Uuc3Bhd25zLnNwbGljZSgxLCAxKTsgLy8ga2Vuc3Ugc2xpbWUgc2NyZWVuIGxvY2sgdHJpZ2dlclxufVxuXG5mdW5jdGlvbiBhbGFybUZsdXRlSXNLZXlJdGVtKHJvbTogUm9tLCBmbGFnczpGbGFnU2V0KTogdm9pZCB7XG4gIGNvbnN0IHtcbiAgICBpdGVtczoge0FsYXJtRmx1dGV9LFxuICAgIC8vIGZsYWdzOiB7VGFsa2VkVG9aZWJ1U3R1ZGVudCwgWmVidVN0dWRlbnR9LFxuICAgIGxvY2F0aW9uczoge1dhdGVyZmFsbENhdmU0fSxcbiAgICBucGNzOiB7V2luZG1pbGxHdWFyZH0sXG4gIH0gPSByb207XG5cbiAgLy8gTW92ZSBhbGFybSBmbHV0ZSB0byB0aGlyZCByb3dcbiAgcm9tLml0ZW1HZXRzWzB4MzFdLmludmVudG9yeVJvd1N0YXJ0ID0gMHgyMDtcbiAgLy8gRW5zdXJlIGFsYXJtIGZsdXRlIGNhbm5vdCBiZSBkcm9wcGVkXG4gIC8vIHJvbS5wcmdbMHgyMTAyMV0gPSAweDQzOyAvLyBUT0RPIC0gcm9tLml0ZW1zWzB4MzFdLj8/P1xuICBBbGFybUZsdXRlLnVuaXF1ZSA9IHRydWU7XG4gIC8vIEVuc3VyZSBhbGFybSBmbHV0ZSBjYW5ub3QgYmUgc29sZFxuICBBbGFybUZsdXRlLmJhc2VQcmljZSA9IDA7XG5cbiAgV2luZG1pbGxHdWFyZC5kYXRhWzFdID0gMHgzMTtcblxuICAvLyBpZiAoZmxhZ3MuemVidVN0dWRlbnRHaXZlc0l0ZW0oKSkge1xuICAvLyBQZXJzb24gMTQgKFplYnUncyBzdHVkZW50KTogc2Vjb25kYXJ5IGl0ZW0gLT4gYWxhcm0gZmx1dGVcbiAgLy8gICBXaW5kbWlsbEd1YXJkLmRhdGFbMV0gPSAweDMxO1xuICAvLyB9IGVsc2Uge1xuICAvLyAgIFdpbmRtaWxsR3VhcmQuZGF0YVsxXSA9IDB4ZmY7IC8vIGluZGljYXRlIG5vdGhpbmcgdGhlcmU6IG5vIHNsb3QuXG4gIC8vICAgY29uc3QgZGlhbG9nID0gV2luZG1pbGxHdWFyZC5kaWFsb2coTGVhZl9TdHVkZW50SG91c2UpWzBdO1xuICAvLyAgIGRpYWxvZy5jb25kaXRpb24gPSB+VGFsa2VkVG9aZWJ1U3R1ZGVudC5pZDtcbiAgLy8gICBkaWFsb2cuZmxhZ3MucHVzaChUYWxrZWRUb1plYnVTdHVkZW50LmlkKTtcbiAgLy8gICByZXBsYWNlKFplYnUuc3Bhd25zKFplYnVDYXZlKSwgWmVidVN0dWRlbnQuaWQsIFRhbGtlZFRvWmVidVN0dWRlbnQuaWQpO1xuICAvLyB9XG5cbiAgLy8gUmVtb3ZlIGFsYXJtIGZsdXRlIGZyb20gc2hvcHMgKHJlcGxhY2Ugd2l0aCBvdGhlciBpdGVtcylcbiAgLy8gTk9URSAtIHdlIGNvdWxkIHNpbXBsaWZ5IHRoaXMgd2hvbGUgdGhpbmcgYnkganVzdCBoYXJkY29kaW5nIGluZGljZXMuXG4gIC8vICAgICAgLSBpZiB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gaGFwcGVuIGVhcmx5LCBpdCdzIGFsbCB0aGUgc2FtZS5cbiAgY29uc3QgcmVwbGFjZW1lbnRzID0gW1xuICAgIFsweDIxLCAwLjcyXSwgLy8gZnJ1aXQgb2YgcG93ZXIsIDcyJSBvZiBjb3N0XG4gICAgWzB4MWYsIDAuOV0sIC8vIGx5c2lzIHBsYW50LCA5MCUgb2YgY29zdFxuICBdO1xuICBsZXQgaiA9IDA7XG4gIGZvciAoY29uc3Qgc2hvcCBvZiByb20uc2hvcHMpIHtcbiAgICBpZiAoc2hvcC50eXBlICE9PSBTaG9wVHlwZS5UT09MKSBjb250aW51ZTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc2hvcC5jb250ZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHNob3AuY29udGVudHNbaV0gIT09IDB4MzEpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgW2l0ZW0sIHByaWNlUmF0aW9dID0gcmVwbGFjZW1lbnRzWyhqKyspICUgcmVwbGFjZW1lbnRzLmxlbmd0aF07XG4gICAgICBzaG9wLmNvbnRlbnRzW2ldID0gaXRlbTtcbiAgICAgIGlmIChyb20uc2hvcERhdGFUYWJsZXNBZGRyZXNzKSB7XG4gICAgICAgIC8vIE5PVEU6IHRoaXMgaXMgYnJva2VuIC0gbmVlZCBhIGNvbnRyb2xsZWQgd2F5IHRvIGNvbnZlcnQgcHJpY2UgZm9ybWF0c1xuICAgICAgICBzaG9wLnByaWNlc1tpXSA9IE1hdGgucm91bmQoc2hvcC5wcmljZXNbaV0gKiBwcmljZVJhdGlvKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGFuZ2UgZmx1dGUgb2YgbGltZSBjaGVzdCdzIChub3ctdW51c2VkKSBpdGVtZ2V0IHRvIGhhdmUgbWVkaWNhbCBoZXJiXG4gIHJvbS5pdGVtR2V0c1sweDViXS5pdGVtSWQgPSAweDFkO1xuICAvLyBDaGFuZ2UgdGhlIGFjdHVhbCBzcGF3biBmb3IgdGhhdCBjaGVzdCB0byBiZSB0aGUgbWlycm9yZWQgc2hpZWxkIGNoZXN0XG4gIFdhdGVyZmFsbENhdmU0LnNwYXduKDB4MTkpLmlkID0gMHgxMDtcblxuICAvLyBUT0RPIC0gcmVxdWlyZSBuZXcgY29kZSBmb3IgdHdvIHVzZXNcbn1cblxuZnVuY3Rpb24gYnJva2FoYW5hV2FudHNNYWRvMShyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7ZmxhZ3M6IHtLYXJtaW5lLCBNYWRvMX0sIG5wY3M6IHtCcm9rYWhhbmF9fSA9IHJvbTtcbiAgY29uc3QgZGlhbG9nID0gYXNzZXJ0KEJyb2thaGFuYS5sb2NhbERpYWxvZ3MuZ2V0KC0xKSlbMF07XG4gIGlmIChkaWFsb2cuY29uZGl0aW9uICE9PSB+S2FybWluZS5pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQmFkIGJyb2thaGFuYSBjb25kaXRpb246ICR7ZGlhbG9nLmNvbmRpdGlvbn1gKTtcbiAgfVxuICBkaWFsb2cuY29uZGl0aW9uID0gfk1hZG8xLmlkO1xufVxuXG5mdW5jdGlvbiByZXF1aXJlSGVhbGVkRG9scGhpbihyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtJbmp1cmVkRG9scGhpbiwgU2hlbGxGbHV0ZX0sXG4gICAgbnBjczoge0Zpc2hlcm1hbiwgRmlzaGVybWFuRGF1Z2h0ZXJ9LFxuICB9ID0gcm9tO1xuICAvLyBOb3JtYWxseSB0aGUgZmlzaGVybWFuICgkNjQpIHNwYXducyBpbiBoaXMgaG91c2UgKCRkNikgaWYgeW91IGhhdmVcbiAgLy8gdGhlIHNoZWxsIGZsdXRlICgyMzYpLiAgSGVyZSB3ZSBhbHNvIGFkZCBhIHJlcXVpcmVtZW50IG9uIHRoZSBoZWFsZWRcbiAgLy8gZG9scGhpbiBzbG90ICgwMjUpLCB3aGljaCB3ZSBrZWVwIGFyb3VuZCBzaW5jZSBpdCdzIGFjdHVhbGx5IHVzZWZ1bC5cbiAgRmlzaGVybWFuLnNwYXduQ29uZGl0aW9ucy5zZXQoMHhkNiwgW1NoZWxsRmx1dGUuaWQsIEluanVyZWREb2xwaGluLmlkXSk7XG4gIC8vIEFsc28gZml4IGRhdWdodGVyJ3MgZGlhbG9nICgkN2IpLlxuICBjb25zdCBkYXVnaHRlckRpYWxvZyA9IEZpc2hlcm1hbkRhdWdodGVyLmxvY2FsRGlhbG9ncy5nZXQoLTEpITtcbiAgZGF1Z2h0ZXJEaWFsb2cudW5zaGlmdChkYXVnaHRlckRpYWxvZ1swXS5jbG9uZSgpKTtcbiAgZGF1Z2h0ZXJEaWFsb2dbMF0uY29uZGl0aW9uID0gfkluanVyZWREb2xwaGluLmlkO1xuICBkYXVnaHRlckRpYWxvZ1sxXS5jb25kaXRpb24gPSB+U2hlbGxGbHV0ZS5pZDtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZVRlbGVwYXRoeUZvckRlbyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtUZWxlcGF0aHl9LFxuICAgIG5wY3M6IHtEZW8sIFNhaGFyYUJ1bm55fSxcbiAgfSA9IHJvbTtcbiAgLy8gTm90IGhhdmluZyB0ZWxlcGF0aHkgKDI0Mykgd2lsbCB0cmlnZ2VyIGEgXCJreXUga3l1XCIgKDFhOjEyLCAxYToxMykgZm9yXG4gIC8vIGJvdGggZ2VuZXJpYyBidW5uaWVzICg1OSkgYW5kIGRlbyAoNWEpLlxuICBTYWhhcmFCdW5ueS5nbG9iYWxEaWFsb2dzLnB1c2goR2xvYmFsRGlhbG9nLm9mKH5UZWxlcGF0aHkuaWQsIFsweDFhLCAweDEyXSkpO1xuICBEZW8uZ2xvYmFsRGlhbG9ncy5wdXNoKEdsb2JhbERpYWxvZy5vZih+VGVsZXBhdGh5LmlkLCBbMHgxYSwgMHgxM10pKTtcbn1cblxuZnVuY3Rpb24gdGVsZXBvcnRPblRodW5kZXJTd29yZChyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtXYXJwU2h5cm9ufSxcbiAgfSA9IHJvbTtcbiAgLy8gaXRlbWdldCAwMyBzd29yZCBvZiB0aHVuZGVyID0+IHNldCAyZmQgc2h5cm9uIHdhcnAgcG9pbnRcbiAgcm9tLml0ZW1HZXRzWzB4MDNdLmZsYWdzLnB1c2goV2FycFNoeXJvbi5pZCk7XG59XG5cbmZ1bmN0aW9uIG5vVGVsZXBvcnRPblRodW5kZXJTd29yZChyb206IFJvbSk6IHZvaWQge1xuICAvLyBDaGFuZ2Ugc3dvcmQgb2YgdGh1bmRlcidzIGFjdGlvbiB0byBiYmUgdGhlIHNhbWUgYXMgb3RoZXIgc3dvcmRzICgxNilcbiAgcm9tLml0ZW1HZXRzWzB4MDNdLmFjcXVpc2l0aW9uQWN0aW9uLmFjdGlvbiA9IDB4MTY7XG59XG5cbmZ1bmN0aW9uIGFkanVzdEl0ZW1OYW1lcyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgaWYgKGZsYWdzLmxlYXRoZXJCb290c0dpdmVTcGVlZCgpKSB7XG4gICAgLy8gcmVuYW1lIGxlYXRoZXIgYm9vdHMgdG8gc3BlZWQgYm9vdHNcbiAgICBjb25zdCBsZWF0aGVyQm9vdHMgPSByb20uaXRlbXNbMHgyZl0hO1xuICAgIGxlYXRoZXJCb290cy5tZW51TmFtZSA9ICdTcGVlZCBCb290cyc7XG4gICAgbGVhdGhlckJvb3RzLm1lc3NhZ2VOYW1lID0gJ1NwZWVkIEJvb3RzJztcbiAgICBpZiAoZmxhZ3MuY2hhbmdlR2FzTWFza1RvSGF6bWF0U3VpdCgpKSB7XG4gICAgICBjb25zdCBnYXNNYXNrID0gcm9tLml0ZW1zWzB4MjldO1xuICAgICAgZ2FzTWFzay5tZW51TmFtZSA9ICdIYXptYXQgU3VpdCc7XG4gICAgICBnYXNNYXNrLm1lc3NhZ2VOYW1lID0gJ0hhem1hdCBTdWl0JztcbiAgICB9XG4gIH1cblxuICAvLyByZW5hbWUgYmFsbHMgdG8gb3Jic1xuICBmb3IgKGxldCBpID0gMHgwNTsgaSA8IDB4MGM7IGkgKz0gMikge1xuICAgIHJvbS5pdGVtc1tpXS5tZW51TmFtZSA9IHJvbS5pdGVtc1tpXS5tZW51TmFtZS5yZXBsYWNlKCdCYWxsJywgJ09yYicpO1xuICAgIHJvbS5pdGVtc1tpXS5tZXNzYWdlTmFtZSA9IHJvbS5pdGVtc1tpXS5tZXNzYWdlTmFtZS5yZXBsYWNlKCdCYWxsJywgJ09yYicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VCcmFjZWxldHNQcm9ncmVzc2l2ZShyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtCYWxsT2ZXaW5kLCBUb3JuYWRvQnJhY2VsZXR9LFxuICAgIG5wY3M6IHtUb3JuZWx9LFxuICB9ID0gcm9tO1xuICAvLyB0b3JuZWwncyB0cmlnZ2VyIG5lZWRzIGJvdGggaXRlbXNcbiAgY29uc3QgdmFuaWxsYSA9IFRvcm5lbC5sb2NhbERpYWxvZ3MuZ2V0KDB4MjEpITtcbiAgY29uc3QgcGF0Y2hlZCA9IFtcbiAgICB2YW5pbGxhWzBdLCAvLyBhbHJlYWR5IGxlYXJuZWQgdGVsZXBvcnRcbiAgICB2YW5pbGxhWzJdLCAvLyBkb24ndCBoYXZlIHRvcm5hZG8gYnJhY2VsZXRcbiAgICB2YW5pbGxhWzJdLmNsb25lKCksIC8vIHdpbGwgY2hhbmdlIHRvIGRvbid0IGhhdmUgb3JiXG4gICAgdmFuaWxsYVsxXSwgLy8gaGF2ZSBicmFjZWxldCwgbGVhcm4gdGVsZXBvcnRcbiAgXTtcbiAgcGF0Y2hlZFsxXS5jb25kaXRpb24gPSB+VG9ybmFkb0JyYWNlbGV0LmlkOyAvLyBkb24ndCBoYXZlIGJyYWNlbGV0XG4gIHBhdGNoZWRbMl0uY29uZGl0aW9uID0gfkJhbGxPZldpbmQuaWQ7IC8vIGRvbid0IGhhdmUgb3JiXG4gIHBhdGNoZWRbM10uY29uZGl0aW9uID0gfjA7ICAgICAvLyBkZWZhdWx0XG4gIFRvcm5lbC5sb2NhbERpYWxvZ3Muc2V0KDB4MjEsIHBhdGNoZWQpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGlmeUludmlzaWJsZUNoZXN0cyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7Q29yZGVsUGxhaW5FYXN0LCBLaXJpc2FNZWFkb3csIFVuZGVyZ3JvdW5kQ2hhbm5lbH0gPSByb20ubG9jYXRpb25zO1xuICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIFtDb3JkZWxQbGFpbkVhc3QsIEtpcmlzYU1lYWRvdywgVW5kZXJncm91bmRDaGFubmVsXSkge1xuICAgIGZvciAoY29uc3Qgc3Bhd24gb2YgbG9jYXRpb24uc3Bhd25zKSB7XG4gICAgICAvLyBzZXQgdGhlIG5ldyBcImludmlzaWJsZVwiIGZsYWcgb24gdGhlIGNoZXN0LlxuICAgICAgaWYgKHNwYXduLmlzQ2hlc3QoKSkgc3Bhd24uZGF0YVsyXSB8PSAweDIwO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgdGhlIHN0YXR1ZSBvZiBvbnl4IGFuZCBwb3NzaWJseSB0aGUgdGVsZXBvcnQgYmxvY2sgdHJpZ2dlciB0byBDb3JkZWwgV2VzdFxuZnVuY3Rpb24gYWRkQ29yZGVsV2VzdFRyaWdnZXJzKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCkge1xuICBjb25zdCB7Q29yZGVsUGxhaW5FYXN0LCBDb3JkZWxQbGFpbldlc3R9ID0gcm9tLmxvY2F0aW9ucztcbiAgZm9yIChjb25zdCBzcGF3biBvZiBDb3JkZWxQbGFpbkVhc3Quc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzQ2hlc3QoKSB8fCAoZmxhZ3MuZGlzYWJsZVRlbGVwb3J0U2tpcCgpICYmIHNwYXduLmlzVHJpZ2dlcigpKSkge1xuICAgICAgLy8gQ29weSBpZiAoMSkgaXQncyB0aGUgY2hlc3QsIG9yICgyKSB3ZSdyZSBkaXNhYmxpbmcgdGVsZXBvcnQgc2tpcFxuICAgICAgQ29yZGVsUGxhaW5XZXN0LnNwYXducy5wdXNoKHNwYXduLmNsb25lKCkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaXhSYWJiaXRTa2lwKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2Ygcm9tLmxvY2F0aW9ucy5NdFNhYnJlTm9ydGhfTWFpbi5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4ODYpIHtcbiAgICAgIGlmIChzcGF3bi54ID09PSAweDc0MCkge1xuICAgICAgICBzcGF3bi54ICs9IDE2O1xuICAgICAgICBzcGF3bi55ICs9IDE2O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwYXRjaFRvb01hbnlJdGVtc01lc3NhZ2Uocm9tOiBSb20pIHtcbiAgcm9tLm1lc3NhZ2VzLnBhcnRzWzB4MjBdWzB4MGZdLnRleHQgKz0gJ1xcbkl0ZW06IFs6SVRFTTpdJztcbn1cblxuZnVuY3Rpb24gYWRkWm9tYmllV2FycChyb206IFJvbSkge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtXYXJwWm9tYmllfSxcbiAgICBsb2NhdGlvbnM6IHtab21iaWVUb3dufSxcbiAgfSA9IHJvbTtcbiAgLy8gTWFrZSBzcGFjZSBmb3IgdGhlIG5ldyBmbGFnIGJldHdlZW4gSm9lbCBhbmQgU3dhblxuICByb20uZmxhZ3MuaW5zZXJ0Wm9tYmllV2FycEZsYWcoKTtcbiAgLy8gVXBkYXRlIHRoZSBtZW51XG4gIGNvbnN0IG1lc3NhZ2UgPSByb20ubWVzc2FnZXMucGFydHNbMHgyMV1bMF07XG4gIG1lc3NhZ2UudGV4dCA9IFtcbiAgICAnIHsxYTpMZWFmfSAgICAgIHsxNjpCcnlubWFlcn0gezFkOk9ha30gJyxcbiAgICAnezBjOk5hZGFyZX1cXCdzICB7MWU6UG9ydG9hfSAgIHsxNDpBbWF6b25lc30gJyxcbiAgICAnezE5OkpvZWx9ICAgICAgWm9tYmllICAgezIwOlN3YW59ICcsXG4gICAgJ3syMzpTaHlyb259ICAgIHsxODpHb2F9ICAgICAgezIxOlNhaGFyYX0nLFxuICBdLmpvaW4oJ1xcbicpO1xuICAvLyBBZGQgYSB0cmlnZ2VyIHRvIHRoZSBlbnRyYW5jZSAtIHRoZXJlJ3MgYWxyZWFkeSBhIHNwYXduIGZvciA4YVxuICAvLyBidXQgd2UgY2FuJ3QgcmV1c2UgdGhhdCBzaW5jZSBpdCdzIHRoZSBzYW1lIGFzIHRoZSBvbmUgb3V0c2lkZVxuICAvLyB0aGUgbWFpbiBFU0kgZW50cmFuY2U7IHNvIHJldXNlIGEgZGlmZmVyZW50IG9uZS5cbiAgY29uc3QgdHJpZ2dlciA9IHJvbS5uZXh0RnJlZVRyaWdnZXIoKTtcbiAgdHJpZ2dlci51c2VkID0gdHJ1ZTtcbiAgdHJpZ2dlci5jb25kaXRpb25zID0gW107XG4gIHRyaWdnZXIubWVzc2FnZSA9IE1lc3NhZ2VJZC5vZih7fSk7XG4gIHRyaWdnZXIuZmxhZ3MgPSBbV2FycFpvbWJpZS5pZF07IC8vIG5ldyB3YXJwIHBvaW50IGZsYWdcbiAgLy8gQWN0dWFsbHkgcmVwbGFjZSB0aGUgdHJpZ2dlci5cbiAgZm9yIChjb25zdCBzcGF3biBvZiBab21iaWVUb3duLnNwYXducykge1xuICAgIGlmIChzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi5pZCA9PT0gMHg4YSkge1xuICAgICAgc3Bhd24uaWQgPSB0cmlnZ2VyLmlkO1xuICAgIH1cbiAgfVxuICAvLyBJbnNlcnQgaW50byB0aGUgd2FycCB0YWJsZS5cbiAgcm9tLnRvd25XYXJwLmxvY2F0aW9ucy5zcGxpY2UoNywgMCwgWm9tYmllVG93bi5pZCk7XG4gIGlmIChyb20udG93bldhcnAubG9jYXRpb25zLnBvcCgpICE9PSAweGZmKSB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQnKTtcbiAgLy8gQVNNIGZpeGVzIHNob3VsZCBoYXZlIGhhcHBlbmVkIGluIHByZXNodWZmbGUuc1xufVxuXG5mdW5jdGlvbiBldmlsU3Bpcml0SXNsYW5kUmVxdWlyZXNEb2xwaGluKHJvbTogUm9tKSB7XG4gIHJvbS50cmlnZ2VyKDB4OGEpLmNvbmRpdGlvbnMgPSBbfnJvbS5mbGFncy5DdXJyZW50bHlSaWRpbmdEb2xwaGluLmlkXTtcbiAgcm9tLm1lc3NhZ2VzLnBhcnRzWzB4MWRdWzB4MTBdLnRleHQgPSBgVGhlIGNhdmUgZW50cmFuY2UgYXBwZWFyc1xudG8gYmUgdW5kZXJ3YXRlci4gWW91J2xsXG5uZWVkIHRvIHN3aW0uYDtcbn1cblxuZnVuY3Rpb24gbGVhZkVsZGVySW5TYWJyZUhlYWxzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IGxlYWZFbGRlciA9IHJvbS5ucGNzWzB4MGRdO1xuICBjb25zdCBzdW1taXREaWFsb2cgPSBsZWFmRWxkZXIubG9jYWxEaWFsb2dzLmdldCgweDM1KSFbMF07XG4gIHN1bW1pdERpYWxvZy5tZXNzYWdlLmFjdGlvbiA9IDB4MTc7IC8vIGhlYWwgYW5kIGRpc2FwcGVhci5cbn1cblxuLy8gUHJldmVudCBSYWdlIHNraXAgYnkgYWRkaW5nIHRyZWVzIG9uIGVpdGhlciBzaWRlIG9mIGVudHJhbmNlLlxuLy8gVE9ETyAtIG1ha2UgdGhpcyBvcHRpb25hbD8gYWNjb3VudCBmb3IgaXQgaW4gbG9naWM/XG5mdW5jdGlvbiBwYXRjaExpbWVUcmVlTGFrZShyb206IFJvbSk6IHZvaWQge1xuICByb20ubWV0YXRpbGVzZXRzLmxpbWUuZ2V0VGlsZSgweDdjKS5zZXRFZmZlY3RzKDYpO1xuICByb20ubWV0YXRpbGVzZXRzLmxpbWUuZ2V0VGlsZSgweDdmKS5zZXRFZmZlY3RzKDYpO1xuICByb20ubWV0YXRpbGVzZXRzLmxpbWUuZ2V0VGlsZSgweDdiKS5zZXRUaWxlcyhbMHg3ZiwgMHg3ZiwgMHg3ZiwgMHg3Zl0pXG4gICAgICAuc2V0QXR0cnMoMCkuc2V0RWZmZWN0cyg2KTsgLy8ucmVwbGFjZUluKHJvbS5tZXRhc2NyZWVucy5saW1lVHJlZUxha2UpO1xuXG5cbiAgcm9tLnNjcmVlbnNbMHg3NF0uc2V0MmQoMHg5MCwgW1xuICAgIFsweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCBudWxsLCBudWxsLFxuICAgICAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiXSxcbiAgICBbMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgbnVsbCwgbnVsbCxcbiAgICAgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3Yl0sXG4gIFxuXG5cbiAgLy8gcm9tLnNjcmVlbnNbMHg3NF0uc2V0MmQoMHg5MCwgW1xuICAvLyAgIFsweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdkLCAweDdlLFxuICAvLyAgICAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjXSxcbiAgLy8gICBbMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgbnVsbCwgbnVsbCxcbiAgLy8gICAgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMF0sXG4gIC8vICAgWzB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIG51bGwsIG51bGwsXG4gIC8vICAgIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzBdLFxuXG5cblxuICAgIC8vIERpZmZlcmVudCBvcHRpb25zIHRvIGZpbGwgaW4gdGhlIHNwYWNlcy4uLlxuICAgIC8vIFsweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCBudWxsLCBudWxsLFxuICAgIC8vICAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczXSxcbiAgICAvLyBbMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NV0sXG4gICAgLy8gWzB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjddLFxuICAgIC8vIFsweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCBudWxsLCBudWxsLFxuICAgIC8vICAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwXSxcbiAgICAvLyBbMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3Zl0sXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50TnBjRGVzcGF3bnMocm9tOiBSb20sIG9wdHM6IEZsYWdTZXQpOiB2b2lkIHtcbiAgZnVuY3Rpb24gcmVtb3ZlPFQ+KGFycjogVFtdLCBlbGVtOiBUKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZihlbGVtKTtcbiAgICBpZiAoaW5kZXggPCAwKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGVsZW1lbnQgJHtlbGVtfSBpbiAke2Fycn1gKTtcbiAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICBmdW5jdGlvbiByZW1vdmVJZjxUPihhcnI6IFRbXSwgcHJlZDogKGVsZW06IFQpID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IGFyci5maW5kSW5kZXgocHJlZCk7XG4gICAgaWYgKGluZGV4IDwgMCkgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBlbGVtZW50IGluICR7YXJyfWApO1xuICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgLy8gZnVuY3Rpb24gZGlhbG9nKGlkOiBudW1iZXIsIGxvYzogbnVtYmVyID0gLTEpOiBMb2NhbERpYWxvZ1tdIHtcbiAgLy8gICBjb25zdCByZXN1bHQgPSByb20ubnBjc1tpZF0ubG9jYWxEaWFsb2dzLmdldChsb2MpO1xuICAvLyAgIGlmICghcmVzdWx0KSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZGlhbG9nICQke2hleChpZCl9IGF0ICQke2hleChsb2MpfWApO1xuICAvLyAgIHJldHVybiByZXN1bHQ7XG4gIC8vIH1cbiAgLy8gZnVuY3Rpb24gc3Bhd25zKGlkOiBudW1iZXIsIGxvYzogbnVtYmVyKTogbnVtYmVyW10ge1xuICAvLyAgIGNvbnN0IHJlc3VsdCA9IHJvbS5ucGNzW2lkXS5zcGF3bkNvbmRpdGlvbnMuZ2V0KGxvYyk7XG4gIC8vICAgaWYgKCFyZXN1bHQpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBzcGF3biBjb25kaXRpb24gJCR7aGV4KGlkKX0gYXQgJCR7aGV4KGxvYyl9YCk7XG4gIC8vICAgcmV0dXJuIHJlc3VsdDtcbiAgLy8gfVxuXG4gIC8vIExpbmsgc29tZSByZWR1bmRhbnQgTlBDczogS2Vuc3UgKDdlLCA3NCkgYW5kIEFrYWhhbmEgKDg4LCAxNilcblxuICBjb25zdCB7XG4gICAgbG9jYXRpb25zOiB7XG4gICAgICBCb2F0SG91c2UsIEJyeW5tYWVyLFxuICAgICAgQ3J5cHRfRHJheWdvbjIsXG4gICAgICBKb2VsX1NoZWQsXG4gICAgICBNdFNhYnJlTm9ydGhfU3VtbWl0Q2F2ZSwgTXRTYWJyZVdlc3RfVXBwZXIsXG4gICAgICBQb3J0b2FQYWxhY2VfVGhyb25lUm9vbSwgUG9ydG9hX0FzaW5hUm9vbSwgUG9ydG9hX0ZvcnR1bmVUZWxsZXIsXG4gICAgICBTaHlyb25fVGVtcGxlLCBTdG9tSG91c2UsIFN3YW5fRGFuY2VIYWxsLCBTd2FuX1RhdmVybixcbiAgICAgIFdpbmRtaWxsQ2F2ZSwgV2F0ZXJmYWxsQ2F2ZTQsIFdhdGVyZmFsbFZhbGxleU5vcnRoLFxuICAgICAgWmVidUNhdmUsIFpvbWJpZVRvd25fSG91c2VCYXNlbWVudCxcbiAgICB9LFxuICAgIGl0ZW1zOiB7XG4gICAgICBHbG93aW5nTGFtcCwgS2V5VG9Qcmlzb24sIExvdmVQZW5kYW50LCBTdGF0dWVPZk9ueXgsXG4gICAgfSxcbiAgICBucGNzOiB7XG4gICAgICBBa2FoYW5hIC8qIDE2ICovLCBBa2FoYW5hSW5CcnlubWFlciwgLyogODIgKi8gQXNpbmEgLyogNjIgKi8sXG4gICAgICBBenRlY2FJblNoeXJvbiAvKiA2ZSAqLyxcbiAgICAgIENsYXJrIC8qIDQ0ICovLCBEcmF5Z29uIC8qIGNiICovLCBGb3J0dW5lVGVsbGVyIC8qIDM5ICovLFxuICAgICAgS2Vuc3UgLyogN2UgKi8sIEtlbnN1SW5DYWJpbiAvKiA2OCAqLywgS2Vuc3VJblN3YW4gLyogNzQgKi8sXG4gICAgICBMZWFmUmFiYml0IC8qIDEzICovLFxuICAgICAgT2FrQ2hpbGQgLyogMWYgKi8sIE9ha0VsZGVyIC8qIDFkICovLCBPYWtNb3RoZXIgLyogMWUgKi8sXG4gICAgICBQb3J0b2FQYWxhY2VGcm9udEd1YXJkIC8qIDM0ICovLCBQb3J0b2FRdWVlbiAvKiAzOCAqLyxcbiAgICAgIFBvcnRvYVRocm9uZVJvb21CYWNrRG9vckd1YXJkIC8qIDMzICovLCBSYWdlIC8qIGMzICovLFxuICAgICAgU3RvbSAvKiA2MCAqLywgU3RvbmVkQWthaGFuYSAvKiA4OCAqLyxcbiAgICAgIFRvcm5lbCAvKiA1ZiAqLywgV2luZG1pbGxHdWFyZCAvKiAxNCAqLywgWmVidSAvKiA1ZSAqLyxcbiAgICB9LFxuICAgIGZsYWdzLFxuICB9ID0gcm9tO1xuXG4gIEtlbnN1LmxvY2FsRGlhbG9ncy5kZWxldGUoU3dhbl9UYXZlcm4uaWQpOyAvLyB1bnVzZWQgZGlhbG9nXG4gIEtlbnN1SW5Td2FuLmxpbmsoS2Vuc3UuaWQpO1xuICBLZW5zdUluU3dhbi51c2VkID0gdHJ1ZTtcbiAgS2Vuc3VJblN3YW4uZGF0YSA9IFsuLi5LZW5zdS5kYXRhXSBhcyBhbnk7XG4gIEtlbnN1LmRhdGFbMF0gPSBHbG93aW5nTGFtcC5pZDtcbiAgU3dhbl9EYW5jZUhhbGwuc3Bhd25zLmZpbmQocyA9PiBzLmlzTnBjKCkgJiYgcy5pZCA9PT0gS2Vuc3UuaWQpIS5pZCA9XG4gICAgICBLZW5zdUluU3dhbi5pZDtcbiAgTG92ZVBlbmRhbnQuaXRlbVVzZURhdGFbMF0ud2FudCA9IDB4MTAwIHwgS2Vuc3VJblN3YW4uaWQ7XG5cbiAgLy8gZGlhbG9nIGlzIHNoYXJlZCBiZXR3ZWVuIDg4IGFuZCAxNi5cbiAgU3RvbmVkQWthaGFuYS5saW5rRGlhbG9nKEFrYWhhbmEuaWQpO1xuXG4gIC8vIE1ha2UgYSBuZXcgTlBDIGZvciBBa2FoYW5hIGluIEJyeW5tYWVyOyBvdGhlcnMgd29uJ3QgYWNjZXB0IHRoZSBTdGF0dWUgb2YgT255eC5cbiAgLy8gTGlua2luZyBzcGF3biBjb25kaXRpb25zIGFuZCBkaWFsb2dzIGlzIHN1ZmZpY2llbnQsIHNpbmNlIHRoZSBhY3R1YWwgTlBDIElEXG4gIC8vICgxNiBvciA4MikgaXMgd2hhdCBtYXR0ZXJzIGZvciB0aGUgdHJhZGUtaW5cbiAgQWthaGFuYUluQnJ5bm1hZXIudXNlZCA9IHRydWU7XG4gIEFrYWhhbmFJbkJyeW5tYWVyLmxpbmsoQWthaGFuYS5pZCk7XG4gIEFrYWhhbmFJbkJyeW5tYWVyLmRhdGEgPSBbLi4uQWthaGFuYS5kYXRhXSBhcyBhbnk7IC8vIGVuc3VyZSBnaXZlIGl0ZW1cbiAgQnJ5bm1hZXIuc3Bhd25zLmZpbmQocyA9PiBzLmlzTnBjKCkgJiYgcy5pZCA9PT0gQWthaGFuYS5pZCkhLmlkID1cbiAgICAgIEFrYWhhbmFJbkJyeW5tYWVyLmlkO1xuICBTdGF0dWVPZk9ueXguaXRlbVVzZURhdGFbMF0ud2FudCA9IDB4MTAwIHwgQWthaGFuYUluQnJ5bm1hZXIuaWQ7XG5cbiAgLy8gTGVhZiBlbGRlciBpbiBob3VzZSAoJDBkIEAgJGMwKSB+IHN3b3JkIG9mIHdpbmQgcmVkdW5kYW50IGZsYWdcbiAgLy8gZGlhbG9nKDB4MGQsIDB4YzApWzJdLmZsYWdzID0gW107XG4gIC8vcm9tLml0ZW1HZXRzWzB4MDBdLmZsYWdzID0gW107IC8vIGNsZWFyIHJlZHVuZGFudCBmbGFnXG5cbiAgLy8gTGVhZiByYWJiaXQgKCQxMykgbm9ybWFsbHkgc3RvcHMgc2V0dGluZyBpdHMgZmxhZyBhZnRlciBwcmlzb24gZG9vciBvcGVuZWQsXG4gIC8vIGJ1dCB0aGF0IGRvZXNuJ3QgbmVjZXNzYXJpbHkgb3BlbiBtdCBzYWJyZS4gIEluc3RlYWQgKGEpIHRyaWdnZXIgb24gMDQ3XG4gIC8vIChzZXQgYnkgOGQgdXBvbiBlbnRlcmluZyBlbGRlcidzIGNlbGwpLiAgQWxzbyBtYWtlIHN1cmUgdGhhdCB0aGF0IHBhdGggYWxzb1xuICAvLyBwcm92aWRlcyB0aGUgbmVlZGVkIGZsYWcgdG8gZ2V0IGludG8gbXQgc2FicmUuXG4gIExlYWZSYWJiaXQuZGlhbG9nKClbMl0uY29uZGl0aW9uID0gZmxhZ3MuUmVzY3VlZExlYWZFbGRlci5pZDtcbiAgTGVhZlJhYmJpdC5kaWFsb2coKVsyXS5mbGFncy5wdXNoKGZsYWdzLlRhbGtlZFRvTGVhZlJhYmJpdC5pZCk7XG4gIExlYWZSYWJiaXQuZGlhbG9nKClbM10uZmxhZ3MucHVzaChmbGFncy5UYWxrZWRUb0xlYWZSYWJiaXQuaWQpO1xuXG4gIC8vIFdpbmRtaWxsIGd1YXJkICgkMTQgQCAkMGUpIHNob3VsZG4ndCBkZXNwYXduIGFmdGVyIGFiZHVjdGlvbiAoMDM4KSxcbiAgLy8gYnV0IGluc3RlYWQgYWZ0ZXIgZ2l2aW5nIHRoZSBpdGVtICgwODgpXG4gIFdpbmRtaWxsR3VhcmQuc3Bhd25zKFdpbmRtaWxsQ2F2ZSlbMV0gPVxuICAgICAgfmZsYWdzLldpbmRtaWxsR3VhcmRBbGFybUZsdXRlVHJhZGVpbi5pZDtcbiAgLy9kaWFsb2coMHgxNCwgMHgwZSlbMF0uZmxhZ3MgPSBbXTsgLy8gcmVtb3ZlIHJlZHVuZGFudCBmbGFnIH4gd2luZG1pbGwga2V5XG5cbiAgLy8gQWthaGFuYSAoJDE2IC8gODgpIH4gc2hpZWxkIHJpbmcgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHgxNiwgMHg1NylbMF0uZmxhZ3MgPSBbXTtcbiAgLy8gRG9uJ3QgZGlzYXBwZWFyIGFmdGVyIGdldHRpbmcgYmFycmllciAobm90ZSA4OCdzIHNwYXducyAqbm90KiBsaW5rZWQgdG8gMTYpXG4gIHJlbW92ZShBa2FoYW5hLnNwYXducyhXYXRlcmZhbGxDYXZlNCksIH5mbGFncy5CZWhpbmRXaGlybHBvb2wuaWQpO1xuICByZW1vdmUoU3RvbmVkQWthaGFuYS5zcGF3bnMoV2F0ZXJmYWxsQ2F2ZTQpLCB+ZmxhZ3MuQmVoaW5kV2hpcmxwb29sLmlkKTtcblxuICBmdW5jdGlvbiByZXZlcnNlRGlhbG9nKGRzOiBMb2NhbERpYWxvZ1tdKTogdm9pZCB7XG4gICAgZHMucmV2ZXJzZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5leHQgPSBkc1tpICsgMV07XG4gICAgICBkc1tpXS5jb25kaXRpb24gPSBuZXh0ID8gfm5leHQuY29uZGl0aW9uIDogfjA7XG4gICAgfVxuICB9O1xuXG4gIC8vIE9hayBlbGRlciAoJDFkKSB+IHN3b3JkIG9mIGZpcmUgcmVkdW5kYW50IGZsYWdcbiAgLy9vYWtFbGRlckRpYWxvZ1s0XS5mbGFncyA9IFtdO1xuICAvLyBNYWtlIHN1cmUgdGhhdCB3ZSB0cnkgdG8gZ2l2ZSB0aGUgaXRlbSBmcm9tICphbGwqIHBvc3QtaW5zZWN0IGRpYWxvZ3NcbiAgT2FrRWxkZXIuZGlhbG9nKClbMF0ubWVzc2FnZS5hY3Rpb24gPSAweDAzO1xuICBPYWtFbGRlci5kaWFsb2coKVsxXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIE9ha0VsZGVyLmRpYWxvZygpWzJdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgT2FrRWxkZXIuZGlhbG9nKClbM10ubWVzc2FnZS5hY3Rpb24gPSAweDAzO1xuXG4gIC8vIE9hayBtb3RoZXIgKCQxZSkgfiBpbnNlY3QgZmx1dGUgcmVkdW5kYW50IGZsYWdcbiAgLy8gVE9ETyAtIHJlYXJyYW5nZSB0aGVzZSBmbGFncyBhIGJpdCAobWF5YmUgfjA0NSwgfjBhMCB+MDQxIC0gc28gcmV2ZXJzZSlcbiAgLy8gICAgICAtIHdpbGwgbmVlZCB0byBjaGFuZ2UgYmFsbE9mRmlyZSBhbmQgaW5zZWN0Rmx1dGUgaW4gZGVwZ3JhcGhcbiAgKCgpID0+IHtcbiAgICBjb25zdCBba2lsbGVkSW5zZWN0LCBnb3RJdGVtLCBnZXRJdGVtLCBmaW5kQ2hpbGRdID0gT2FrTW90aGVyLmRpYWxvZygpO1xuICAgIGZpbmRDaGlsZC5jb25kaXRpb24gPSB+ZmxhZ3MuUmVzY3VlZENoaWxkLmlkO1xuICAgIC8vZ2V0SXRlbS5jb25kaXRpb24gPSB+MHgyMjc7XG4gICAgLy9nZXRJdGVtLmZsYWdzID0gW107XG4gICAgZ290SXRlbS5jb25kaXRpb24gPSB+MDsgLy8gYWx3YXlzIHRydWVcbiAgICBPYWtNb3RoZXIuZGlhbG9nKCkuc3BsaWNlKDAsIDQsIGZpbmRDaGlsZCwgZ2V0SXRlbSwga2lsbGVkSW5zZWN0LCBnb3RJdGVtKTtcbiAgfSkoKTtcbiAgLy8vIG9ha01vdGhlckRpYWxvZ1syXS5mbGFncyA9IFtdO1xuICAvLyAvLyBFbnN1cmUgd2UgYWx3YXlzIGdpdmUgaXRlbSBhZnRlciBpbnNlY3QuXG4gIC8vIG9ha01vdGhlckRpYWxvZ1swXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIC8vIG9ha01vdGhlckRpYWxvZ1sxXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIC8vIHJldmVyc2VEaWFsb2cob2FrTW90aGVyRGlhbG9nKTtcblxuICAvLyBSZXZlcnNlIHRoZSBvdGhlciBvYWsgZGlhbG9ncywgdG9vLlxuICBmb3IgKGNvbnN0IGkgb2YgWzB4MjAsIDB4MjEsIDB4MjIsIDB4N2MsIDB4N2RdKSB7XG4gICAgcmV2ZXJzZURpYWxvZyhyb20ubnBjc1tpXS5kaWFsb2coKSk7XG4gIH1cblxuICAvLyBTd2FwIHRoZSBmaXJzdCB0d28gb2FrIGNoaWxkIGRpYWxvZ3MuXG4gIE9ha0NoaWxkLmRpYWxvZygpLnVuc2hpZnQoLi4uT2FrQ2hpbGQuZGlhbG9nKCkuc3BsaWNlKDEsIDEpKTtcblxuICAvLyBUaHJvbmUgcm9vbSBiYWNrIGRvb3IgZ3VhcmQgKCQzMyBAICRkZikgc2hvdWxkIGhhdmUgc2FtZSBzcGF3biBjb25kaXRpb24gYXMgcXVlZW5cbiAgLy8gKDAyMCBOT1QgcXVlZW4gbm90IGluIHRocm9uZSByb29tIEFORCAwMWIgTk9UIHZpZXdlZCBtZXNpYSByZWNvcmRpbmcpXG4gIFBvcnRvYVRocm9uZVJvb21CYWNrRG9vckd1YXJkLnNwYXduQ29uZGl0aW9ucy5zZXQoXG4gICAgICBQb3J0b2FQYWxhY2VfVGhyb25lUm9vbS5pZCxcbiAgICAgIFt+ZmxhZ3MuUXVlZW5Ob3RJblRocm9uZVJvb20uaWQsIH5mbGFncy5NZXNpYVJlY29yZGluZy5pZF0pO1xuXG4gIC8vIEZyb250IHBhbGFjZSBndWFyZCAoJDM0KSB2YWNhdGlvbiBtZXNzYWdlIGtleXMgb2ZmIDAxYiBpbnN0ZWFkIG9mIDAxZlxuICBQb3J0b2FQYWxhY2VGcm9udEd1YXJkLmRpYWxvZygpWzFdLmNvbmRpdGlvbiA9IGZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuXG4gIC8vIFF1ZWVuJ3MgKCQzOCkgZGlhbG9nIG5lZWRzIHF1aXRlIGEgYml0IG9mIHdvcmtcbiAgLy8gR2l2ZSBpdGVtIChmbHV0ZSBvZiBsaW1lKSBldmVuIGlmIGdvdCB0aGUgc3dvcmQgb2Ygd2F0ZXJcbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbM10uY29uZGl0aW9uID0gZmxhZ3MuU3dvcmRPZldhdGVyLmlkOyAvLyBcInlvdSBmb3VuZCBzd29yZFwiXG4gIFBvcnRvYVF1ZWVuLmRpYWxvZygpWzNdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMzsgLy8gID0+IGFjdGlvbiAzIGl0ZW1nZXRcbiAgLy8gRW5zdXJlIHlvdSBjYW4gYWx3YXlzIG1ha2UgdGhlIHF1ZWVuIGdvIGF3YXkuXG4gIFBvcnRvYVF1ZWVuLmRpYWxvZygpWzRdLmZsYWdzLnB1c2goZmxhZ3MuUG9ydG9hUXVlZW5Hb2luZ0F3YXkuaWQpO1xuICAvLyBRdWVlbiBzcGF3biBjb25kaXRpb24gZGVwZW5kcyBvbiAwMWIgKG1lc2lhIHJlY29yZGluZykgbm90IDAxZiAoYmFsbCBvZiB3YXRlcilcbiAgLy8gVGhpcyBlbnN1cmVzIHlvdSBoYXZlIGJvdGggc3dvcmQgYW5kIGJhbGwgdG8gZ2V0IHRvIGhlciAoPz8/KVxuICBQb3J0b2FRdWVlbi5zcGF3bnMoUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20pWzFdID0gfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuICBQb3J0b2FRdWVlbi5zcGF3bnMoUG9ydG9hX0FzaW5hUm9vbSlbMF0gPSBmbGFncy5NZXNpYVJlY29yZGluZy5pZDtcbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbMV0uY29uZGl0aW9uID0gZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7IC8vIHJldmVhbFxuXG4gIC8vIEZvcnR1bmUgdGVsbGVyICgkMzkpIHNob3VsZCBhbHNvIG5vdCBzcGF3biBiYXNlZCBvbiBtZXNpYSByZWNvcmRpbmcgcmF0aGVyIHRoYW4gb3JiXG4gIEZvcnR1bmVUZWxsZXIuc3Bhd25zKFBvcnRvYV9Gb3J0dW5lVGVsbGVyKVsxXSA9IH5mbGFncy5NZXNpYVJlY29yZGluZy5pZDtcblxuICAvLyBDbGFyayAoJDQ0KSBtb3ZlcyBhZnRlciB0YWxraW5nIHRvIGhpbSAoMDhkKSByYXRoZXIgdGhhbiBjYWxtaW5nIHNlYSAoMDhmKS5cbiAgLy8gVE9ETyAtIGNoYW5nZSAwOGQgdG8gd2hhdGV2ZXIgYWN0dWFsIGl0ZW0gaGUgZ2l2ZXMsIHRoZW4gcmVtb3ZlIGJvdGggZmxhZ3NcbiAgQ2xhcmsuc3Bhd25Db25kaXRpb25zLnNldChab21iaWVUb3duX0hvdXNlQmFzZW1lbnQuaWQsIFt+ZmxhZ3MuQ2xhcmsuaWRdKTtcbiAgQ2xhcmsuc3Bhd25Db25kaXRpb25zLnNldChKb2VsX1NoZWQuaWQsIFtmbGFncy5DbGFyay5pZF0pO1xuICAvL2RpYWxvZygweDQ0LCAweGU5KVsxXS5mbGFncy5wb3AoKTsgLy8gcmVtb3ZlIHJlZHVuZGFudCBpdGVtZ2V0IGZsYWdcblxuICAvLyBCcm9rYWhhbmEgKCQ1NCkgfiB3YXJyaW9yIHJpbmcgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg1NClbMl0uZmxhZ3MgPSBbXTtcblxuICAvLyBEZW8gKCQ1YSkgfiBwZW5kYW50IHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4NWEpWzFdLmZsYWdzID0gW107XG5cbiAgLy8gWmVidSAoJDVlKSBjYXZlIGRpYWxvZyAoQCAkMTApXG4gIC8vIFRPRE8gLSBkaWFsb2dzKDB4NWUsIDB4MTApLnJlYXJyYW5nZSh+MHgwM2EsIDB4MDBkLCAweDAzOCwgMHgwMzksIDB4MDBhLCB+MHgwMDApO1xuICBaZWJ1LmxvY2FsRGlhbG9ncy5zZXQoWmVidUNhdmUuaWQsIFtcbiAgICBMb2NhbERpYWxvZy5vZih+ZmxhZ3MuVGFsa2VkVG9aZWJ1SW5DYXZlLmlkLFxuICAgICAgICAgICAgICAgICAgIFsweDAwLCAweDFhXSwgW2ZsYWdzLlRhbGtlZFRvWmVidUluQ2F2ZS5pZF0pLFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLkxlYWZWaWxsYWdlcnNSZXNjdWVkLmlkLCBbMHgwMCwgMHgxZF0pLFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLkxlYWZBYmR1Y3Rpb24uaWQsIFsweDAwLCAweDFjXSksIC8vIDAzOCBsZWFmIGF0dGFja2VkXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuWmVidUF0V2luZG1pbGwuaWQsIFsweDAwLCAweDFkXSksIC8vIDAzOSBsZWFybmVkIHJlZnJlc2hcbiAgICBMb2NhbERpYWxvZy5vZihmbGFncy5Vc2VkV2luZG1pbGxLZXkuaWQsIFsweDAwLCAweDFiLCAweDAzXSksIC8vID0+IHJlZnJlc2hcbiAgICBMb2NhbERpYWxvZy5vZih+MCwgWzB4MDAsIDB4MWRdKSxcbiAgXSk7XG4gIC8vIERvbid0IGRlc3Bhd24gb24gZ2V0dGluZyBiYXJyaWVyXG4gIHJlbW92ZShaZWJ1LnNwYXducyhaZWJ1Q2F2ZSksIH5mbGFncy5CZWhpbmRXaGlybHBvb2wuaWQpOyAvLyByZW1vdmUgMDUxIE5PVCBsZWFybmVkIGJhcnJpZXJcblxuICAvLyBUb3JuZWwgKCQ1ZikgaW4gc2FicmUgd2VzdCAoJDIxKSB+IHRlbGVwb3J0IHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4NWYsIDB4MjEpWzFdLmZsYWdzID0gW107XG4gIC8vIERvbid0IGRlc3Bhd24gb24gZ2V0dGluZyBiYXJyaWVyXG4gIFRvcm5lbC5zcGF3bkNvbmRpdGlvbnMuZGVsZXRlKE10U2FicmVXZXN0X1VwcGVyLmlkKTsgLy8gYWx3YXlzIHNwYXduXG5cbiAgLy8gU3RvbSAoJDYwKTogZG9uJ3QgZGVzcGF3biBvbiBnZXR0aW5nIGJhcnJpZXJcbiAgU3RvbS5zcGF3bkNvbmRpdGlvbnMuZGVsZXRlKFN0b21Ib3VzZS5pZCk7IC8vIHJlbW92ZSAwNTEgTk9UIGxlYXJuZWQgYmFycmllclxuXG4gIC8vIEFzaW5hICgkNjIpIGluIGJhY2sgcm9vbSAoJGUxKSBnaXZlcyBmbHV0ZSBvZiBsaW1lXG4gIEFzaW5hLmRhdGFbMV0gPSByb20uaXRlbXMuRmx1dGVPZkxpbWUuaWQ7XG4gIEFzaW5hLmRpYWxvZyhQb3J0b2FfQXNpbmFSb29tKVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MTE7XG4gIEFzaW5hLmRpYWxvZyhQb3J0b2FfQXNpbmFSb29tKVsyXS5tZXNzYWdlLmFjdGlvbiA9IDB4MTE7XG4gIC8vIFByZXZlbnQgZGVzcGF3biBmcm9tIGJhY2sgcm9vbSBhZnRlciBjYWxtaW5nIHNlYSAofjA4ZiBvciB+MjgzKVxuICByZW1vdmUoQXNpbmEuc3Bhd25zKFBvcnRvYV9Bc2luYVJvb20pLCB+ZmxhZ3MuQ2FsbWVkQW5ncnlTZWEuaWQpO1xuXG4gIC8vIEtlbnN1IGluIGNhYmluICgkNjggQCAkNjEpIG5lZWRzIHRvIGJlIGF2YWlsYWJsZSBldmVuIGFmdGVyIHZpc2l0aW5nIEpvZWwuXG4gIC8vIENoYW5nZSBoaW0gdG8ganVzdCBkaXNhcHBlYXIgYWZ0ZXIgc2V0dGluZyB0aGUgcmlkZWFibGUgZG9scGhpbiBmbGFnICgwOWIpLFxuICAvLyBhbmQgdG8gbm90IGV2ZW4gc2hvdyB1cCBhdCBhbGwgdW5sZXNzIHRoZSBmb2cgbGFtcCB3YXMgcmV0dXJuZWQgKDAyMSkuXG4gIEtlbnN1SW5DYWJpbi5zcGF3bkNvbmRpdGlvbnMuc2V0KEJvYXRIb3VzZS5pZCwgW35mbGFncy5BYmxlVG9SaWRlRG9scGhpbi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuUmV0dXJuZWRGb2dMYW1wLmlkXSk7XG4gIEtlbnN1SW5DYWJpbi5kaWFsb2coKVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDI7IC8vIGRpc2FwcGVhclxuXG4gIC8vIEF6dGVjYSBpbiBTaHlyb24gKDZlKSBzaG91bGRuJ3Qgc3Bhd24gYWZ0ZXIgbWFzc2FjcmUgKDAyNylcbiAgQXp0ZWNhSW5TaHlyb24uc3Bhd25zKFNoeXJvbl9UZW1wbGUpLnB1c2gofmZsYWdzLlNoeXJvbk1hc3NhY3JlLmlkKTtcbiAgLy8gQWxzbyB0aGUgZGlhbG9nIHRyaWdnZXIgKDgyKSBzaG91bGRuJ3QgaGFwcGVuXG4gIHJvbS50cmlnZ2VyKDB4ODIpLmNvbmRpdGlvbnMucHVzaCh+ZmxhZ3MuU2h5cm9uTWFzc2FjcmUuaWQpO1xuXG4gIC8vIEtlbnN1IGluIGxpZ2h0aG91c2UgKCQ3NC8kN2UgQCAkNjIpIH4gcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg3NCwgMHg2MilbMF0uZmxhZ3MgPSBbXTtcblxuICAvLyBBenRlY2EgKCQ4MykgaW4gcHlyYW1pZCB+IGJvdyBvZiB0cnV0aCByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDgzKVswXS5jb25kaXRpb24gPSB+MHgyNDA7ICAvLyAyNDAgTk9UIGJvdyBvZiB0cnV0aFxuICAvL2RpYWxvZygweDgzKVswXS5mbGFncyA9IFtdO1xuXG4gIC8vIFJhZ2UgYmxvY2tzIG9uIHN3b3JkIG9mIHdhdGVyLCBub3QgcmFuZG9tIGl0ZW0gZnJvbSB0aGUgY2hlc3RcbiAgUmFnZS5kaWFsb2coKVswXS5jb25kaXRpb24gPSBmbGFncy5Td29yZE9mV2F0ZXIuaWQ7XG5cbiAgLy8gUmVtb3ZlIHVzZWxlc3Mgc3Bhd24gY29uZGl0aW9uIGZyb20gTWFkbyAxXG4gIC8vIHJvbS5ucGNzWzB4YzRdLnNwYXduQ29uZGl0aW9ucy5kZWxldGUoMHhmMik7IC8vIGFsd2F5cyBzcGF3blxuXG4gIC8vIERyYXlnb24gMiAoJGNiIEAgbG9jYXRpb24gJGE2KSBzaG91bGQgZGVzcGF3biBhZnRlciBiZWluZyBkZWZlYXRlZC5cbiAgRHJheWdvbi5zcGF3bkNvbmRpdGlvbnMuc2V0KENyeXB0X0RyYXlnb24yLmlkLCBbfmZsYWdzLkRyYXlnb24yLmlkXSk7XG5cbiAgLy8gRml4IFplYnUgdG8gZ2l2ZSBrZXkgdG8gc3R4eSBldmVuIGlmIHRodW5kZXIgc3dvcmQgaXMgZ290dGVuIChqdXN0IHN3aXRjaCB0aGVcbiAgLy8gb3JkZXIgb2YgdGhlIGZpcnN0IHR3bykuICBBbHNvIGRvbid0IGJvdGhlciBzZXR0aW5nIDAzYiBzaW5jZSB0aGUgbmV3IEl0ZW1HZXRcbiAgLy8gbG9naWMgb2J2aWF0ZXMgdGhlIG5lZWQuXG4gIFplYnUuZGlhbG9nKFNoeXJvbl9UZW1wbGUpXG4gICAgICAudW5zaGlmdCguLi5aZWJ1LmRpYWxvZyhTaHlyb25fVGVtcGxlKS5zcGxpY2UoMSwgMSkpO1xuICAvLyB6ZWJ1U2h5cm9uWzBdLmZsYWdzID0gW107XG5cbiAgLy8gU2h5cm9uIG1hc3NhY3JlICgkODApIHJlcXVpcmVzIGtleSB0byBzdHh5XG4gIHJvbS50cmlnZ2VyKDB4ODApLmNvbmRpdGlvbnMgPSBbXG4gICAgfmZsYWdzLlNoeXJvbk1hc3NhY3JlLmlkLFxuICAgIGZsYWdzLlRhbGtlZFRvWmVidUluU2h5cm9uLmlkLFxuICAgIGZsYWdzLlN3b3JkT2ZUaHVuZGVyLmlkLFxuICBdO1xuXG4gIC8vIEVudGVyIHNoeXJvbiAoJDgxKSBzaG91bGQgc2V0IHdhcnAgbm8gbWF0dGVyIHdoYXRcbiAgcm9tLnRyaWdnZXIoMHg4MSkuY29uZGl0aW9ucyA9IFtdO1xuXG4gIGlmIChvcHRzLmJhcnJpZXJSZXF1aXJlc0NhbG1TZWEoKSkge1xuICAgIC8vIExlYXJuIGJhcnJpZXIgKCQ4NCkgcmVxdWlyZXMgY2FsbSBzZWFcbiAgICByb20udHJpZ2dlcigweDg0KS5jb25kaXRpb25zLnB1c2goZmxhZ3MuQ2FsbWVkQW5ncnlTZWEuaWQpO1xuICAgIC8vIFRPRE8gLSBjb25zaWRlciBub3Qgc2V0dGluZyAwNTEgYW5kIGNoYW5naW5nIHRoZSBjb25kaXRpb24gdG8gbWF0Y2ggdGhlIGl0ZW1cbiAgfVxuICAvL3JvbS50cmlnZ2VyKDB4ODQpLmZsYWdzID0gW107XG5cbiAgLy8gQWRkIGFuIGV4dHJhIGNvbmRpdGlvbiB0byB0aGUgTGVhZiBhYmR1Y3Rpb24gdHJpZ2dlciAoYmVoaW5kIHplYnUpLiAgVGhpcyBlbnN1cmVzXG4gIC8vIGFsbCB0aGUgaXRlbXMgaW4gTGVhZiBwcm9wZXIgKGVsZGVyIGFuZCBzdHVkZW50KSBhcmUgZ290dGVuIGJlZm9yZSB0aGV5IGRpc2FwcGVhci5cbiAgcm9tLnRyaWdnZXIoMHg4YykuY29uZGl0aW9ucy5wdXNoKGZsYWdzLlRhbGtlZFRvWmVidUluQ2F2ZS5pZCk7XG5cbiAgLy8gTW9yZSB3b3JrIG9uIGFiZHVjdGlvbiB0cmlnZ2VyczpcbiAgLy8gMS4gUmVtb3ZlIHRoZSA4ZCB0cmlnZ2VyIGluIHRoZSBmcm9udCBvZiB0aGUgY2VsbCwgc3dhcCBpdCBvdXRcbiAgLy8gICAgZm9yIGIyIChsZWFybiBwYXJhbHlzaXMpLlxuICByb20udHJpZ2dlcigweDhkKS51c2VkID0gZmFsc2U7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgTXRTYWJyZU5vcnRoX1N1bW1pdENhdmUuc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLmlkID09PSAweDhkKSBzcGF3bi5pZCA9IDB4YjI7XG4gIH1cbiAgcmVtb3ZlSWYoV2F0ZXJmYWxsVmFsbGV5Tm9ydGguc3Bhd25zLFxuICAgICAgICAgICBzcGF3biA9PiBzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi5pZCA9PT0gMHg4ZCk7XG4gIC8vIDIuIFNldCB0aGUgdHJpZ2dlciB0byByZXF1aXJlIGhhdmluZyBraWxsZWQga2VsYmVzcXVlLlxuICByb20udHJpZ2dlcigweGIyKS5jb25kaXRpb25zLnB1c2goZmxhZ3MuS2VsYmVzcXVlMS5pZCk7XG4gIC8vIDMuIEFsc28gc2V0IHRoZSB0cmlnZ2VyIHRvIGZyZWUgdGhlIHZpbGxhZ2VycyBhbmQgdGhlIGVsZGVyLlxuICByb20udHJpZ2dlcigweGIyKS5mbGFncy5wdXNoKFxuICAgIH5mbGFncy5MZWFmVmlsbGFnZXJzQ3VycmVudGx5QWJkdWN0ZWQuaWQsXG4gICAgfmZsYWdzLkxlYWZFbGRlckN1cnJlbnRseUFiZHVjdGVkLmlkLFxuICAgIGZsYWdzLkxlYWZWaWxsYWdlcnNSZXNjdWVkLmlkKTtcbiAgLy8gNC4gRG9uJ3QgdHJpZ2dlciB0aGUgYWJkdWN0aW9uIGluIHRoZSBmaXJzdCBwbGFjZSBpZiBrZWxiZXNxdWUgZGVhZFxuICByb20udHJpZ2dlcigweDhjKS5jb25kaXRpb25zLnB1c2gofmZsYWdzLktlbGJlc3F1ZTEuaWQpO1xuICAvLyA1LiBEb24ndCB0cmlnZ2VyIHJhYmJpdCBibG9jayBpZiBrZWxiZXNxdWUgZGVhZFxuICByb20udHJpZ2dlcigweDg2KS5jb25kaXRpb25zLnB1c2gofmZsYWdzLktlbGJlc3F1ZTEuaWQpOyAvLyBraWxsZWQga2VsYmVzcXVlXG4gIC8vIDYuIERvbid0IGZyZWUgdmlsbGFnZXJzIGZyb20gdXNpbmcgcHJpc29uIGtleVxuICByZW1vdmUoS2V5VG9Qcmlzb24uaXRlbVVzZURhdGFbMF0uZmxhZ3MsXG4gICAgICAgICB+ZmxhZ3MuTGVhZlZpbGxhZ2Vyc0N1cnJlbnRseUFiZHVjdGVkLmlkKTtcbiAgLy8gcm9tLnByZ1sweDFlMGEzXSA9IDB4YzA7XG4gIC8vIHJvbS5wcmdbMHgxZTBhNF0gPSAweDAwO1xuXG4gIC8vIFRPRE8gLSBhZGRpdGlvbmFsIHdvcmsgb24gYWJkdWN0aW9uIHRyaWdnZXI6XG4gIC8vICAgLSBnZXQgcmlkIG9mIHRoZSBmbGFncyBvbiBrZXkgdG8gcHJpc29uIHVzZVxuICAvLyAgIC0gYWRkIGEgY29uZGl0aW9uIHRoYXQgYWJkdWN0aW9uIGRvZXNuJ3QgaGFwcGVuIGlmIHJlc2N1ZWRcbiAgLy8gR2V0IHJpZCBvZiBCT1RIIHRyaWdnZXJzIGluIHN1bW1pdCBjYXZlLCAgSW5zdGVhZCwgdGllIGV2ZXJ5dGhpbmdcbiAgLy8gdG8gdGhlIGVsZGVyIGRpYWxvZyBvbiB0b3BcbiAgLy8gICAtIGlmIGtlbGJlc3F1ZSBzdGlsbCBhbGl2ZSwgbWF5YmUgZ2l2ZSBhIGhpbnQgYWJvdXQgd2Vha25lc3NcbiAgLy8gICAtIGlmIGtlbGJlc3F1ZSBkZWFkIHRoZW4gdGVhY2ggcGFyYWx5c2lzIGFuZCBzZXQvY2xlYXIgZmxhZ3NcbiAgLy8gICAtIGlmIHBhcmFseXNpcyBsZWFybmVkIHRoZW4gc2F5IHNvbWV0aGluZyBnZW5lcmljXG4gIC8vIFN0aWxsIG5lZWQgdG8ga2VlcCB0aGUgdHJpZ2dlciBpbiB0aGUgZnJvbnQgaW4gY2FzZSBub1xuICAvLyBhYmR1Y3Rpb24geWV0XG4gIC8vICAgLSBpZiBOT1QgcGFyYWx5c2lzIEFORCBpZiBOT1QgZWxkZXIgbWlzc2luZyBBTkQgaWYga2VsYmVxdWUgZGVhZFxuICAvLyAtLS0+IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgdHdvIHdheXMgdG8gZ2V0IChsaWtlIHJlZnJlc2gpP1xuICAvL1xuICAvLyBBbHNvIGFkZCBhIGNoZWNrIHRoYXQgdGhlIHJhYmJpdCB0cmlnZ2VyIGlzIGdvbmUgaWYgcmVzY3VlZCFcblxuXG5cbiAgLy8gUGFyYWx5c2lzIHRyaWdnZXIgKCRiMikgfiByZW1vdmUgcmVkdW5kYW50IGl0ZW1nZXQgZmxhZ1xuICAvL3JvbS50cmlnZ2VyKDB4YjIpLmNvbmRpdGlvbnNbMF0gPSB+MHgyNDI7XG4gIC8vcm9tLnRyaWdnZXIoMHhiMikuZmxhZ3Muc2hpZnQoKTsgLy8gcmVtb3ZlIDAzNyBsZWFybmVkIHBhcmFseXNpc1xuXG4gIC8vIExlYXJuIHJlZnJlc2ggdHJpZ2dlciAoJGI0KSB+IHJlbW92ZSByZWR1bmRhbnQgaXRlbWdldCBmbGFnXG4gIC8vcm9tLnRyaWdnZXIoMHhiNCkuY29uZGl0aW9uc1sxXSA9IH4weDI0MTtcbiAgLy9yb20udHJpZ2dlcigweGI0KS5mbGFncyA9IFtdOyAvLyByZW1vdmUgMDM5IGxlYXJuZWQgcmVmcmVzaFxuXG4gIC8vIFRlbGVwb3J0IGJsb2NrIG9uIG10IHNhYnJlIGlzIGZyb20gc3BlbGwsIG5vdCBzbG90XG4gIC8vIE5PVEU6IHRoaXMgaXMgbm93IGRvbmUgaW4gZmxhZ3MuZGVmcmFnXG4gIC8vcmVwbGFjZShyb20udHJpZ2dlcigweGJhKS5jb25kaXRpb25zLCB+MHgwM2YsIH5mbGFncy5UZWxlcG9ydC5pZCk7XG5cbiAgLy8gUG9ydG9hIHBhbGFjZSBndWFyZCBtb3ZlbWVudCB0cmlnZ2VyICgkYmIpIHN0b3BzIG9uIDAxYiAobWVzaWEpIG5vdCAwMWYgKG9yYilcbiAgcmVwbGFjZShyb20udHJpZ2dlcigweGJiKS5jb25kaXRpb25zLCB+ZmxhZ3MuUmFnZS5pZCwgfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkKTtcblxuICAvLyBSZW1vdmUgcmVkdW5kYW50IHRyaWdnZXIgOGEgKHNsb3QgMTYpIGluIHpvbWJpZXRvd24gKCQ2NSlcbiAgLy8gIC0tIG5vdGU6IG5vIGxvbmdlciBuZWNlc3Nhcnkgc2luY2Ugd2UgcmVwdXJwb3NlIGl0IGluc3RlYWQuXG4gIC8vIGNvbnN0IHt6b21iaWVUb3dufSA9IHJvbS5sb2NhdGlvbnM7XG4gIC8vIHpvbWJpZVRvd24uc3Bhd25zID0gem9tYmllVG93bi5zcGF3bnMuZmlsdGVyKHggPT4gIXguaXNUcmlnZ2VyKCkgfHwgeC5pZCAhPSAweDhhKTtcblxuICAvLyAvLyBSZXBsYWNlIGFsbCBkaWFsb2cgY29uZGl0aW9ucyBmcm9tIDAwZSB0byAyNDNcbiAgLy8gZm9yIChjb25zdCBucGMgb2Ygcm9tLm5wY3MpIHtcbiAgLy8gICBmb3IgKGNvbnN0IGQgb2YgbnBjLmFsbERpYWxvZ3MoKSkge1xuICAvLyAgICAgaWYgKGQuY29uZGl0aW9uID09PSAweDAwZSkgZC5jb25kaXRpb24gPSAweDI0MztcbiAgLy8gICAgIGlmIChkLmNvbmRpdGlvbiA9PT0gfjB4MDBlKSBkLmNvbmRpdGlvbiA9IH4weDI0MztcbiAgLy8gICB9XG4gIC8vIH1cbn1cblxuLy8gSGFyZCBtb2RlIGZsYWc6IEhjIC0gemVybyBvdXQgdGhlIHN3b3JkJ3MgY29sbGlzaW9uIHBsYW5lXG5mdW5jdGlvbiBkaXNhYmxlU3RhYnMocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBvIG9mIFsweDA4LCAweDA5LCAweDI3XSkge1xuICAgIHJvbS5vYmplY3RzW29dLmNvbGxpc2lvblBsYW5lID0gMDtcbiAgfVxuICAvLyBBbHNvIHRha2Ugd2FycmlvciByaW5nIG91dCBvZiB0aGUgcGljdHVyZS4uLiA6dHJvbGw6XG4gIC8vIHJvbS5pdGVtR2V0c1sweDJiXS5pZCA9IDB4NWI7IC8vIG1lZGljYWwgaGVyYiBmcm9tIHNlY29uZCBmbHV0ZSBvZiBsaW1lIGNoZWNrXG4gIHJvbS5ucGNzLkJyb2thaGFuYS5kYXRhWzBdID0gcm9tLml0ZW1zLkZydWl0T2ZMaW1lLmlkO1xufVxuXG5mdW5jdGlvbiBvcmJzT3B0aW9uYWwocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBvYmogb2YgWzB4MTAsIDB4MTQsIDB4MTgsIDB4MWRdKSB7XG4gICAgLy8gMS4gTG9vc2VuIHRlcnJhaW4gc3VzY2VwdGliaWxpdHkgb2YgbGV2ZWwgMSBzaG90c1xuICAgIHJvbS5vYmplY3RzW29ial0udGVycmFpblN1c2NlcHRpYmlsaXR5ICY9IH4weDA0O1xuICAgIC8vIDIuIEluY3JlYXNlIHRoZSBsZXZlbCB0byAyXG4gICAgcm9tLm9iamVjdHNbb2JqXS5sZXZlbCA9IDI7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9Cb3dNb2RlKHJvbTogUm9tKTogdm9pZCB7XG4gIC8vIEluaXRpYWwgdHJpZ2dlciBnaXZlcyBcInVzZWQgYm93IG9mIHRydXRoXCIuXG4gIGNvbnN0IHtcbiAgICBmbGFnczoge1VzZWRCb3dPZlRydXRofSxcbiAgICBsb2NhdGlvbnM6IHtDcnlwdF9EcmF5Z29uMiwgQ3J5cHRfSGFsbDIsIE1lemFtZVNocmluZX0sXG4gIH0gPSByb207XG4gIGxldCB0cmlnZ2VyITogVHJpZ2dlcjtcbiAgZm9yIChjb25zdCBzcGF3biBvZiBNZXphbWVTaHJpbmUuc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLnRpbGUgPT09IDB4ODgpIHtcbiAgICAgIHRyaWdnZXIgPSByb20udHJpZ2dlcihzcGF3bi5pZCk7XG4gICAgfVxuICB9XG4gIGlmICghdHJpZ2dlcikgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBzdGFydCB0cmlnZ2VyYCk7XG4gIHRyaWdnZXIuZmxhZ3MucHVzaChVc2VkQm93T2ZUcnV0aC5pZCk7XG4gIC8vIEFkZCBhbiBleGl0IHN0cmFpZ2h0IHRvIGRyYXlnb25cbiAgLy9NZXphbWVTaHJpbmUuZW50cmFuY2VzWzFdLnRpbGUgPSAweDk4O1xuICByb20udGlsZUVmZmVjdHNbMHhiOSAtIDB4YjNdLmVmZmVjdHNbMHg1OF0gPSAwO1xuICBNZXphbWVTaHJpbmUuZXhpdHMucHVzaChcbiAgICAgIEV4aXQub2Yoe3RpbGU6IDB4NjgsIGRlc3Q6IENyeXB0X0RyYXlnb24yLmlkLCBlbnRyYW5jZTogMH0pKTtcbiAgZm9yIChsZXQgZXhpdCBvZiBDcnlwdF9EcmF5Z29uMi5leGl0cykge1xuICAgIGlmIChleGl0LmRlc3QgPT09IENyeXB0X0hhbGwyLmlkKSB7XG4gICAgICBleGl0LmRlc3QgPSBNZXphbWVTaHJpbmUuaWQ7XG4gICAgICBleGl0LmVudHJhbmNlID0gMTtcbiAgICB9XG4gIH1cbiAgZm9yIChsZXQgZXhpdCBvZiBDcnlwdF9IYWxsMi5leGl0cykge1xuICAgIGlmIChleGl0LmRlc3QgPT09IENyeXB0X0RyYXlnb24yLmlkKSB7XG4gICAgICBleGl0LmRlc3QgPSBNZXphbWVTaHJpbmUuaWQ7XG4gICAgICBleGl0LmVudHJhbmNlID0gMDtcbiAgICB9XG4gIH1cbn1cblxuLy8gRm9yIG5vdyB0aGlzIGp1c3QgZml4ZXMgdGhlIHNob3QgdG8gYmUgYWxsIGVsZW1lbnRzIGluc3RlYWQgb2Ygbm9uZS5cbmZ1bmN0aW9uIGZpeENyeXN0YWxpcyhyb206IFJvbSkge1xuICByb20ub2JqZWN0c1sweDMzXS5lbGVtZW50cyA9IDB4Zjtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZTxUPihhcnJheTogVFtdLCBvbGQ6IFQsIHJlcGxhY2VtZW50OiBUKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYXJyYXlbaV0gIT09IG9sZCkgY29udGludWU7XG4gICAgYXJyYXlbaV0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCAke29sZH0gaW4gJHthcnJheS5qb2luKCcsJyl9YCk7ICAgICAgXG59XG4iXX0=