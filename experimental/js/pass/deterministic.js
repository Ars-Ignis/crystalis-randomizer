import { Entrance, Exit, Flag, Spawn } from '../rom/location.js';
import { MessageId } from '../rom/messageid.js';
import { GlobalDialog, LocalDialog } from '../rom/npc.js';
import { ShopType } from '../rom/shop.js';
import { hex } from '../rom/util.js';
import { assert } from '../util.js';
const [] = [hex];
function write(arr, start, ...data) {
    for (let i = 0; i < data.length; i++) {
        arr[start + i] = data[i];
    }
}
export function deterministicPreParse(prg) {
    prg[0x1a594] = 0xff;
    prg[0x1cdc5] = 0xa8;
    prg[0x1a84c] = 0xff;
    prg[0x1d843] = 0xa0;
    prg[0x1e06b] &= 7;
    prg[0x1e06f] &= 7;
    prg[0x1e073] &= 7;
    prg[0x1e077] &= 7;
    prg[0x1e07b] &= 7;
    prg[0x1e084] &= 7;
    prg[0x1e09b] &= 7;
    prg[0x1e0b9] &= 7;
    prg[0x1e105] = 0x2f;
    prg[0x19bb1] = 0x70;
    prg[0x19bb5] = 0x71;
    prg[0x19a77] = 0x72;
    prg[0x19deb] = 0x73;
    prg[0x1a045] = 0x74;
    prg[0x1a0e1] = 0x75;
    prg[0x1a0e5] = 0x76;
    prg[0x1a0e9] = 0x77;
    prg[0x1a605] = 0x78;
    prg[0x1a3c1] = 0x79;
    prg[0x1a3c5] = 0x7a;
    prg[0x1a3c9] = 0x7b;
    write(prg, 0x1e0b7, 0xc0, 0x00);
    write(prg, 0x1c80d, 0xa2, 0xb3);
    prg[0x1aa86] = 0xfe;
}
export function deterministic(rom, flags) {
    addZombieWarp(rom);
    consolidateItemGrants(rom);
    addMezameTrigger(rom);
    normalizeSwords(rom, flags);
    fixCoinSprites(rom);
    fixChests(rom);
    preventBossSoftlocks(rom);
    makeBraceletsProgressive(rom);
    addTowerExit(rom);
    reversibleSwanGate(rom);
    adjustGoaFortressTriggers(rom);
    preventNpcDespawns(rom, flags);
    leafElderInSabreHeals(rom);
    if (flags.requireHealedDolphinToRide())
        requireHealedDolphin(rom);
    if (flags.saharaRabbitsRequireTelepathy())
        requireTelepathyForDeo(rom);
    adjustItemNames(rom, flags);
    alarmFluteIsKeyItem(rom, flags);
    brokahanaWantsMado1(rom);
    if (flags.teleportOnThunderSword()) {
        teleportOnThunderSword(rom);
        rom.townWarp.thunderSwordWarp = [rom.locations.Shyron.id, 0x41];
    }
    else {
        noTeleportOnThunderSword(rom);
    }
    undergroundChannelLandBridge(rom);
    if (flags.fogLampNotRequired())
        fogLampNotRequired(rom, flags);
    if (flags.addEastCave()) {
        eastCave(rom, flags);
        if (flags.connectGoaToLeaf()) {
            connectGoaToLeaf(rom);
        }
    }
    else if (flags.connectLimeTreeToLeaf()) {
        connectLimeTreeToLeaf(rom);
    }
    evilSpiritIslandRequiresDolphin(rom);
    simplifyInvisibleChests(rom);
    addCordelWestTriggers(rom, flags);
    if (flags.disableRabbitSkip())
        fixRabbitSkip(rom);
    patchLimeTreeLake(rom);
    closeCaveEntrances(rom, flags);
    fixReverseWalls(rom);
    if (flags.chargeShotsOnly())
        disableStabs(rom);
    if (flags.orbsOptional())
        orbsOptional(rom);
    if (flags.noBowMode())
        noBowMode(rom);
    patchTooManyItemsMessage(rom);
}
function consolidateItemGrants(rom) {
    rom.items.GlowingLamp.itemUseData[0].message.action = 0x0b;
}
function addMezameTrigger(rom) {
    const trigger = rom.nextFreeTrigger();
    trigger.used = true;
    trigger.conditions = [~rom.flags.AlwaysTrue.id];
    trigger.message = MessageId.of({ action: 4 });
    trigger.flags = [rom.flags.AlwaysTrue.id];
    const mezame = rom.locations.MezameShrine;
    mezame.spawns.push(Spawn.of({ tile: 0x88, type: 2, id: trigger.id }));
}
function normalizeSwords(rom, flags) {
    rom.objects[0x10].atk = 3;
    rom.objects[0x11].atk = 6;
    rom.objects[0x12].atk = 8;
    rom.objects[0x18].atk = 3;
    rom.objects[0x13].atk = 5;
    rom.objects[0x19].atk = 5;
    rom.objects[0x17].atk = 7;
    rom.objects[0x1a].atk = 7;
    rom.objects[0x14].atk = 3;
    rom.objects[0x15].atk = 6;
    rom.objects[0x16].atk = 8;
    rom.objects[0x1c].atk = 3;
    rom.objects[0x1e].atk = 5;
    rom.objects[0x1b].atk = 7;
    rom.objects[0x1f].atk = 7;
    if (flags.slowDownTornado()) {
        const tornado = rom.objects[0x12];
        tornado.speed = 0x07;
        tornado.data[0x0c] = 0x60;
    }
}
function preventBossSoftlocks(rom) {
    const trigger = rom.trigger(0xa0);
    trigger.used = true;
    trigger.conditions = [];
    trigger.flags = [];
    trigger.message = MessageId.of({ part: 0, index: 0, action: 0x15 });
    rom.objects[0x5e].data[0xd] = 0xfe;
    rom.items.InsectFlute.itemUseData[0].flags = [rom.flags.UsedInsectFlute.id];
}
function fixCoinSprites(rom) {
    for (const page of [0x60, 0x64, 0x65, 0x66, 0x67, 0x68,
        0x69, 0x6a, 0x6b, 0x6c, 0x6d, 0x6f]) {
        for (const pat of [0, 1, 2]) {
            rom.patterns[page << 6 | pat].pixels = rom.patterns[0x5e << 6 | pat].pixels;
        }
    }
    rom.objects[0x0c].metasprite = 0xa9;
}
function fixReverseWalls(rom) {
    for (const t in [0x04, 0x05, 0x08, 0x09]) {
        rom.tileEffects[0xbc - 0xb3].effects[t] = 0x18;
        rom.tileEffects[0xb5 - 0xb3].effects[t] = 0x18;
    }
}
function undergroundChannelLandBridge(rom) {
    const { tiles } = rom.screens[0xa1];
    tiles[0x28] = 0x9f;
    tiles[0x37] = 0x23;
    tiles[0x38] = 0x23;
    tiles[0x39] = 0x21;
    tiles[0x47] = 0x8d;
    tiles[0x48] = 0x8f;
    tiles[0x56] = 0x99;
    tiles[0x57] = 0x9a;
    tiles[0x58] = 0x8c;
}
function fogLampNotRequired(rom, flags) {
    const { flags: { AlwaysTrue, InjuredDolphin, FogLamp, KensuInCabin, ReturnedFogLamp }, items: { ShellFlute }, locations: { BoatHouse, Portoa_FishermanHouse }, npcs, } = rom;
    const requireHealed = flags.requireHealedDolphinToRide();
    ShellFlute.itemUseData[0].want =
        requireHealed ? InjuredDolphin.id : AlwaysTrue.id;
    npcs.KensuInCabin.data[0] = 0x67;
    npcs.KensuInCabin.localDialogs.get(-1)[0].message.action = 0x0a;
    npcs.KensuInCabin.localDialogs.get(-1)[0].flags = [];
    npcs.KensuInCabin.spawnConditions.set(BoatHouse.id, [ReturnedFogLamp.id, ~KensuInCabin.id]);
    npcs.Fisherman.spawnConditions.set(Portoa_FishermanHouse.id, [FogLamp.id]);
    rom.itemGets[0x64].flags = [];
    rom.itemGets[0x67].copyFrom(rom.itemGets[0x64]);
}
function fixChests(rom) {
    for (const loc of rom.locations) {
        for (const s of loc.spawns) {
            if (s.isChest())
                s.timed = false;
        }
    }
}
function adjustGoaFortressTriggers(rom) {
    const l = rom.locations;
    l.GoaFortress_Kelbesque.spawns[0].x -= 16;
    l.GoaFortress_Zebu.spawns.splice(1, 1);
    l.GoaFortress_Tornel.spawns.splice(2, 1);
    l.GoaFortress_Asina.spawns.splice(2, 1);
    l.GoaFortress_Kensu.spawns.splice(3, 1);
    l.GoaFortress_Kensu.spawns.splice(1, 1);
}
function alarmFluteIsKeyItem(rom, flags) {
    const { items: { AlarmFlute }, flags: { TalkedToZebuStudent, ZebuStudent }, locations: { Leaf_StudentHouse, WaterfallCave4, ZebuCave }, npcs: { WindmillGuard, Zebu }, } = rom;
    rom.itemGets[0x31].inventoryRowStart = 0x20;
    AlarmFlute.unique = true;
    AlarmFlute.basePrice = 0;
    if (flags.zebuStudentGivesItem()) {
        WindmillGuard.data[1] = 0x31;
    }
    else {
        WindmillGuard.data[1] = 0xff;
        const dialog = WindmillGuard.dialog(Leaf_StudentHouse)[0];
        dialog.condition = ~TalkedToZebuStudent.id;
        dialog.flags.push(TalkedToZebuStudent.id);
        replace(Zebu.spawns(ZebuCave), ZebuStudent.id, TalkedToZebuStudent.id);
    }
    const replacements = [
        [0x21, 0.72],
        [0x1f, 0.9],
    ];
    let j = 0;
    for (const shop of rom.shops) {
        if (shop.type !== ShopType.TOOL)
            continue;
        for (let i = 0, len = shop.contents.length; i < len; i++) {
            if (shop.contents[i] !== 0x31)
                continue;
            const [item, priceRatio] = replacements[(j++) % replacements.length];
            shop.contents[i] = item;
            if (rom.shopDataTablesAddress) {
                shop.prices[i] = Math.round(shop.prices[i] * priceRatio);
            }
        }
    }
    rom.itemGets[0x5b].itemId = 0x1d;
    WaterfallCave4.spawn(0x19).id = 0x10;
}
function brokahanaWantsMado1(rom) {
    const { flags: { Karmine, Mado1 }, npcs: { Brokahana } } = rom;
    const dialog = assert(Brokahana.localDialogs.get(-1))[0];
    if (dialog.condition !== ~Karmine.id) {
        throw new Error(`Bad brokahana condition: ${dialog.condition}`);
    }
    dialog.condition = ~Mado1.id;
}
function requireHealedDolphin(rom) {
    const { flags: { InjuredDolphin, ShellFlute }, npcs: { Fisherman, FishermanDaughter }, } = rom;
    Fisherman.spawnConditions.set(0xd6, [ShellFlute.id, InjuredDolphin.id]);
    const daughterDialog = FishermanDaughter.localDialogs.get(-1);
    daughterDialog.unshift(daughterDialog[0].clone());
    daughterDialog[0].condition = ~InjuredDolphin.id;
    daughterDialog[1].condition = ~ShellFlute.id;
}
function requireTelepathyForDeo(rom) {
    const { flags: { Telepathy }, npcs: { Deo, SaharaBunny }, } = rom;
    SaharaBunny.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x12]));
    Deo.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x13]));
}
function teleportOnThunderSword(rom) {
    const { flags: { WarpShyron }, } = rom;
    rom.itemGets[0x03].flags.push(WarpShyron.id);
}
function noTeleportOnThunderSword(rom) {
    rom.itemGets[0x03].acquisitionAction.action = 0x16;
}
function adjustItemNames(rom, flags) {
    if (flags.leatherBootsGiveSpeed()) {
        const leatherBoots = rom.items[0x2f];
        leatherBoots.menuName = 'Speed Boots';
        leatherBoots.messageName = 'Speed Boots';
        if (flags.changeGasMaskToHazmatSuit()) {
            const gasMask = rom.items[0x29];
            gasMask.menuName = 'Hazmat Suit';
            gasMask.messageName = 'Hazmat Suit';
        }
    }
    for (let i = 0x05; i < 0x0c; i += 2) {
        rom.items[i].menuName = rom.items[i].menuName.replace('Ball', 'Orb');
        rom.items[i].messageName = rom.items[i].messageName.replace('Ball', 'Orb');
    }
}
function makeBraceletsProgressive(rom) {
    const { flags: { BallOfWind, TornadoBracelet }, npcs: { Tornel }, } = rom;
    const vanilla = Tornel.localDialogs.get(0x21);
    const patched = [
        vanilla[0],
        vanilla[2],
        vanilla[2].clone(),
        vanilla[1],
    ];
    patched[1].condition = ~TornadoBracelet.id;
    patched[2].condition = ~BallOfWind.id;
    patched[3].condition = ~0;
    Tornel.localDialogs.set(0x21, patched);
}
function simplifyInvisibleChests(rom) {
    const { CordelPlainEast, KirisaMeadow, UndergroundChannel } = rom.locations;
    for (const location of [CordelPlainEast, KirisaMeadow, UndergroundChannel]) {
        for (const spawn of location.spawns) {
            if (spawn.isChest())
                spawn.data[2] |= 0x20;
        }
    }
}
function addCordelWestTriggers(rom, flags) {
    const { CordelPlainEast, CordelPlainWest } = rom.locations;
    for (const spawn of CordelPlainEast.spawns) {
        if (spawn.isChest() || (flags.disableTeleportSkip() && spawn.isTrigger())) {
            CordelPlainWest.spawns.push(spawn.clone());
        }
    }
}
function fixRabbitSkip(rom) {
    for (const spawn of rom.locations.MtSabreNorth_Main.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x86) {
            if (spawn.x === 0x740) {
                spawn.x += 16;
                spawn.y += 16;
            }
        }
    }
}
function addTowerExit(rom) {
    const { TowerEntrance, Crypt_Teleporter } = rom.locations;
    const entrance = Crypt_Teleporter.entrances.length;
    const dest = Crypt_Teleporter.id;
    Crypt_Teleporter.entrances.push(Entrance.of({ tile: 0x68 }));
    TowerEntrance.exits.push(Exit.of({ tile: 0x57, dest, entrance }));
    TowerEntrance.exits.push(Exit.of({ tile: 0x58, dest, entrance }));
}
function connectLimeTreeToLeaf(rom) {
    const { ValleyOfWind, LimeTreeValley } = rom.locations;
    ValleyOfWind.screens[5][4] = 0x10;
    LimeTreeValley.screens[1][0] = 0x1a;
    LimeTreeValley.screens[2][0] = 0x0c;
    const windEntrance = ValleyOfWind.entrances.push(Entrance.of({ x: 0x4ef, y: 0x578 })) - 1;
    const limeEntrance = LimeTreeValley.entrances.push(Entrance.of({ x: 0x010, y: 0x1c0 })) - 1;
    ValleyOfWind.exits.push(Exit.of({ x: 0x4f0, y: 0x560, dest: 0x42, entrance: limeEntrance }), Exit.of({ x: 0x4f0, y: 0x570, dest: 0x42, entrance: limeEntrance }));
    LimeTreeValley.exits.push(Exit.of({ x: 0x000, y: 0x1b0, dest: 0x03, entrance: windEntrance }), Exit.of({ x: 0x000, y: 0x1c0, dest: 0x03, entrance: windEntrance }));
}
function closeCaveEntrances(rom, flags) {
    const { flags: { AlwaysTrue }, locations: { CordelPlainEast, CordelPlainWest, Desert2, GoaValley, KirisaMeadow, LimeTreeValley, SaharaOutsideCave, ValleyOfWind, WaterfallValleyNorth, WaterfallValleySouth, }, } = rom;
    ValleyOfWind.entrances[1].y += 16;
    rom.swapMetatiles([0x90], [0x07, [0x01, 0x00], ~0xc1], [0x0e, [0x02, 0x00], ~0xc1], [0x20, [0x03, 0x0a], ~0xd7], [0x21, [0x04, 0x0a], ~0xd7]);
    rom.swapMetatiles([0x94, 0x9c], [0x68, [0x01, 0x00], ~0xc1], [0x83, [0x02, 0x00], ~0xc1], [0x88, [0x03, 0x0a], ~0xd7], [0x89, [0x04, 0x0a], ~0xd7]);
    rom.screens[0x0a].tiles[0x38] = 0x01;
    rom.screens[0x0a].tiles[0x39] = 0x02;
    rom.screens[0x0a].tiles[0x48] = 0x03;
    rom.screens[0x0a].tiles[0x49] = 0x04;
    rom.screens[0x15].tiles[0x79] = 0x01;
    rom.screens[0x15].tiles[0x7a] = 0x02;
    rom.screens[0x15].tiles[0x89] = 0x03;
    rom.screens[0x15].tiles[0x8a] = 0x04;
    rom.screens[0x19].tiles[0x48] = 0x01;
    rom.screens[0x19].tiles[0x49] = 0x02;
    rom.screens[0x19].tiles[0x58] = 0x03;
    rom.screens[0x19].tiles[0x59] = 0x04;
    rom.screens[0x3e].tiles[0x56] = 0x01;
    rom.screens[0x3e].tiles[0x57] = 0x02;
    rom.screens[0x3e].tiles[0x66] = 0x03;
    rom.screens[0x3e].tiles[0x67] = 0x04;
    const flagsToClear = [
        [ValleyOfWind, 0x30],
        [CordelPlainWest, 0x30],
        [CordelPlainEast, 0x30],
        [WaterfallValleyNorth, 0x00],
        [WaterfallValleyNorth, 0x14],
        [WaterfallValleySouth, 0x74],
        [KirisaMeadow, 0x10],
        [SaharaOutsideCave, 0x00],
        [Desert2, 0x41],
    ];
    if (flags.addEastCave() && flags.connectLimeTreeToLeaf()) {
        flagsToClear.push([LimeTreeValley, 0x10]);
    }
    if (flags.connectGoaToLeaf()) {
        flagsToClear.push([GoaValley, 0x01]);
    }
    for (const [loc, yx] of flagsToClear) {
        loc.flags.push(Flag.of({ yx, flag: AlwaysTrue.id }));
    }
    function replaceFlag(loc, yx, flag) {
        for (const f of loc.flags) {
            if (f.yx === yx) {
                f.flag = flag;
                return;
            }
        }
        throw new Error(`Could not find flag to replace at ${loc}:${yx}`);
    }
    ;
    if (flags.paralysisRequiresPrisonKey()) {
        const windmillFlag = 0x2ee;
        replaceFlag(CordelPlainWest, 0x30, windmillFlag);
        replaceFlag(CordelPlainEast, 0x30, windmillFlag);
        replaceFlag(WaterfallValleyNorth, 0x00, 0x2d8);
        const explosion = Spawn.of({ y: 0x060, x: 0x060, type: 4, id: 0x2c });
        const keyTrigger = Spawn.of({ y: 0x070, x: 0x070, type: 2, id: 0xad });
        WaterfallValleyNorth.spawns.splice(1, 0, explosion);
        WaterfallValleyNorth.spawns.push(keyTrigger);
    }
}
function eastCave(rom, flags) {
    const { ValleyOfWind, LimeTreeValley, SealedCave1 } = rom.locations;
    const loc1 = rom.locations.allocate(rom.locations.EastCave1);
    const loc2 = rom.locations.allocate(rom.locations.EastCave2);
    const loc3 = rom.locations.EastCave3;
    loc1.screens = [[0x9c, 0x84, 0x80, 0x83, 0x9c],
        [0x80, 0x81, 0x83, 0x86, 0x80],
        [0x83, 0x88, 0x89, 0x80, 0x80],
        [0x81, 0x8c, 0x85, 0x82, 0x84],
        [0x9e, 0x85, 0x9c, 0x98, 0x86]];
    loc2.screens = [[0x9c, 0x84, 0x9b, 0x80, 0x9b],
        [0x80, 0x81, 0x81, 0x80, 0x81],
        [0x80, 0x87, 0x8b, 0x8a, 0x86],
        [0x80, 0x8c, 0x80, 0x85, 0x84],
        [0x9c, 0x86, 0x80, 0x80, 0x9a]];
    for (const l of [loc1, loc2, loc3]) {
        l.bgm = 0x17;
        l.entrances = [];
        l.exits = [];
        l.pits = [];
        l.spawns = [];
        l.flags = [];
        l.height = l.screens.length;
        l.width = l.screens[0].length;
        l.extended = 0;
        l.tilePalettes = [0x1a, 0x1b, 0x05];
        l.tileset = 0x88;
        l.tileEffects = 0xb5;
        l.tilePatterns = [0x14, 0x02];
        l.spritePatterns = [...SealedCave1.spritePatterns];
        l.spritePalettes = [...SealedCave1.spritePalettes];
    }
    ValleyOfWind.writeScreens2d(0x23, [
        [0x11, 0x0d],
        [0x09, 0xc2]
    ]);
    rom.tileEffects[0].effects[0xc0] = 0;
    loc1.connect(0x43, loc2, 0x44);
    loc1.connect(0x40, ValleyOfWind, 0x34);
    if (flags.connectLimeTreeToLeaf()) {
        LimeTreeValley.resizeScreens(0, 1, 0, 0);
        LimeTreeValley.writeScreens2d(0x00, [
            [0x0c, 0x11],
            [0x15, 0x36],
            [0x0e, 0x0f]
        ]);
        loc1.screens[0][4] = 0x97;
        loc1.connect(0x04, LimeTreeValley, 0x10);
    }
    loc1.spawns.push(Spawn.of({ screen: 0x21, tile: 0x87, timed: true, id: 0x2 }), Spawn.of({ screen: 0x12, tile: 0x88, timed: false, id: 0x2 }), Spawn.of({ screen: 0x13, tile: 0x89, timed: true, id: 0x2 }), Spawn.of({ screen: 0x32, tile: 0x68, timed: false, id: 0x2 }), Spawn.of({ screen: 0x41, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x33, tile: 0x98, timed: true, id: 0x2 }), Spawn.of({ screen: 0x03, tile: 0x88, timed: true, id: 0x2 }));
    loc2.spawns.push(Spawn.of({ screen: 0x01, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x11, tile: 0x48, timed: false, id: 0x2 }), Spawn.of({ screen: 0x12, tile: 0x77, timed: true, id: 0x2 }), Spawn.of({ screen: 0x14, tile: 0x28, timed: false, id: 0x2 }), Spawn.of({ screen: 0x23, tile: 0x85, timed: true, id: 0x2 }), Spawn.of({ screen: 0x31, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x33, tile: 0x8a, timed: false, id: 0x2 }), Spawn.of({ screen: 0x34, tile: 0x98, timed: true, id: 0x2 }), Spawn.of({ screen: 0x41, tile: 0x82, timed: true, id: 0x2 }));
    if (!flags.zebuStudentGivesItem()) {
        loc2.spawns.push(Spawn.of({ y: 0x110, x: 0x478, type: 2, id: 0x31 }));
    }
    if (flags.addExtraChecksToEastCave()) {
        loc2.spawns.push(Spawn.of({ y: 0x110, x: 0x478, type: 2, id: 0x59 }));
        loc2.spawns.push(Spawn.of({ y: 0x070, x: 0x108, type: 2, id: 0x70 }));
    }
}
function connectGoaToLeaf(rom) {
    const { GoaValley, EastCave2, EastCave3 } = rom.locations;
    GoaValley.writeScreens2d(0x00, [
        [0x0c, 0xc1, 0x0d],
        [0x0e, 0x37, 0x35]
    ]);
    rom.locations.allocate(EastCave3);
    EastCave3.screens = [[0x9a],
        [0x8f],
        [0x9e]];
    EastCave3.height = 3;
    EastCave3.width = 1;
    EastCave3.spawns.push(Spawn.from([0x18, 0x07, 0x23, 0x00]));
    EastCave3.flags.push(Flag.of({ screen: 0x10, flag: rom.flags.alloc(0x200) }));
    EastCave2.screens[4][0] = 0x99;
    EastCave2.connect(0x40, EastCave3, ~0x00);
    EastCave3.connect(0x20, GoaValley, 0x01);
}
function patchTooManyItemsMessage(rom) {
    rom.messages.parts[0x20][0x0f].text += '\nItem: [:ITEM:]';
}
function addZombieWarp(rom) {
    const { flags: { WarpZombie }, locations: { ZombieTown }, } = rom;
    rom.flags.insertZombieWarpFlag();
    const message = rom.messages.parts[0x21][0];
    message.text = [
        ' {1a:Leaf}      {16:Brynmaer} {1d:Oak} ',
        '{0c:Nadare}\'s  {1e:Portoa}   {14:Amazones} ',
        '{19:Joel}      Zombie   {20:Swan} ',
        '{23:Shyron}    {18:Goa}      {21:Sahara}',
    ].join('\n');
    const trigger = rom.nextFreeTrigger();
    trigger.used = true;
    trigger.conditions = [];
    trigger.message = MessageId.of({});
    trigger.flags = [WarpZombie.id];
    for (const spawn of ZombieTown.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8a) {
            spawn.id = trigger.id;
        }
    }
    rom.townWarp.locations.splice(7, 0, ZombieTown.id);
    if (rom.townWarp.locations.pop() !== 0xff)
        throw new Error('unexpected');
}
function evilSpiritIslandRequiresDolphin(rom) {
    rom.trigger(0x8a).conditions = [~rom.flags.CurrentlyRidingDolphin.id];
    rom.messages.parts[0x1d][0x10].text = `The cave entrance appears
to be underwater. You'll
need to swim.`;
}
function reversibleSwanGate(rom) {
    const { flags: { OpenedSwanGate }, locations: { SwanGate }, npcs: { SoldierGuard }, } = rom;
    SwanGate.spawns.push(Spawn.of({ xt: 0x0a, yt: 0x02, type: 1, id: 0x2d }), Spawn.of({ xt: 0x0b, yt: 0x02, type: 1, id: 0x2d }));
    SoldierGuard.localDialogs.get(SwanGate.id)[0].flags.push(OpenedSwanGate.id);
}
function leafElderInSabreHeals(rom) {
    const leafElder = rom.npcs[0x0d];
    const summitDialog = leafElder.localDialogs.get(0x35)[0];
    summitDialog.message.action = 0x17;
}
function patchLimeTreeLake(rom) {
    rom.screens[0x74].setTiles(0x90, [
        [0x7c, 0x7f, 0x7c, 0x7f, 0x7c, 0x7f, 0x7c, 0x7d, 0x7e,
            0x7c, 0x7f, 0x7c, 0x7f, 0x7c, 0x7f, 0x7c],
        [0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, null, null,
            0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30],
        [0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, null, null,
            0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30],
    ]);
}
function preventNpcDespawns(rom, opts) {
    function remove(arr, elem) {
        const index = arr.indexOf(elem);
        if (index < 0)
            throw new Error(`Could not find element ${elem} in ${arr}`);
        arr.splice(index, 1);
    }
    function removeIf(arr, pred) {
        const index = arr.findIndex(pred);
        if (index < 0)
            throw new Error(`Could not find element in ${arr}`);
        arr.splice(index, 1);
    }
    const { locations: { BoatHouse, Brynmaer, Crypt_Draygon2, Joel_Shed, MtSabreNorth_SummitCave, MtSabreWest_Upper, PortoaPalace_ThroneRoom, Portoa_AsinaRoom, Portoa_FortuneTeller, Shyron_Temple, StomHouse, Swan_DanceHall, Swan_Tavern, WindmillCave, WaterfallCave4, WaterfallValleyNorth, ZebuCave, ZombieTown_HouseBasement, }, items: { GlowingLamp, KeyToPrison, LovePendant, StatueOfOnyx, }, npcs: { Akahana, AkahanaInBrynmaer, Asina, AztecaInShyron, Clark, Draygon, FortuneTeller, Kensu, KensuInCabin, KensuInSwan, LeafRabbit, OakChild, OakElder, OakMother, PortoaPalaceFrontGuard, PortoaQueen, PortoaThroneRoomBackDoorGuard, Rage, Stom, StonedAkahana, Tornel, WindmillGuard, Zebu, }, flags, } = rom;
    Kensu.localDialogs.delete(Swan_Tavern.id);
    KensuInSwan.link(Kensu.id);
    KensuInSwan.used = true;
    KensuInSwan.data = [...Kensu.data];
    Kensu.data[0] = GlowingLamp.id;
    Swan_DanceHall.spawns.find(s => s.isNpc() && s.id === Kensu.id).id =
        KensuInSwan.id;
    LovePendant.itemUseData[0].want = 0x100 | KensuInSwan.id;
    StonedAkahana.linkDialog(Akahana.id);
    AkahanaInBrynmaer.used = true;
    AkahanaInBrynmaer.link(Akahana.id);
    AkahanaInBrynmaer.data = [...Akahana.data];
    Brynmaer.spawns.find(s => s.isNpc() && s.id === Akahana.id).id =
        AkahanaInBrynmaer.id;
    StatueOfOnyx.itemUseData[0].want = 0x100 | AkahanaInBrynmaer.id;
    LeafRabbit.dialog()[2].condition = flags.RescuedLeafElder.id;
    LeafRabbit.dialog()[2].flags.push(flags.TalkedToLeafRabbit.id);
    LeafRabbit.dialog()[3].flags.push(flags.TalkedToLeafRabbit.id);
    WindmillGuard.spawns(WindmillCave)[1] =
        ~flags.WindmillGuardAlarmFluteTradein.id;
    remove(Akahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    remove(StonedAkahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    function reverseDialog(ds) {
        ds.reverse();
        for (let i = 0; i < ds.length; i++) {
            const next = ds[i + 1];
            ds[i].condition = next ? ~next.condition : ~0;
        }
    }
    ;
    OakElder.dialog()[0].message.action = 0x03;
    OakElder.dialog()[1].message.action = 0x03;
    OakElder.dialog()[2].message.action = 0x03;
    OakElder.dialog()[3].message.action = 0x03;
    (() => {
        const [killedInsect, gotItem, getItem, findChild] = OakMother.dialog();
        findChild.condition = ~flags.RescuedChild.id;
        gotItem.condition = ~0;
        OakMother.dialog().splice(0, 4, findChild, getItem, killedInsect, gotItem);
    })();
    for (const i of [0x20, 0x21, 0x22, 0x7c, 0x7d]) {
        reverseDialog(rom.npcs[i].dialog());
    }
    OakChild.dialog().unshift(...OakChild.dialog().splice(1, 1));
    PortoaThroneRoomBackDoorGuard.spawnConditions.set(PortoaPalace_ThroneRoom.id, [~flags.QueenNotInThroneRoom.id, ~flags.MesiaRecording.id]);
    PortoaPalaceFrontGuard.dialog()[1].condition = flags.MesiaRecording.id;
    PortoaQueen.dialog()[3].condition = flags.SwordOfWater.id;
    PortoaQueen.dialog()[3].message.action = 0x03;
    PortoaQueen.dialog()[4].flags.push(flags.PortoaQueenGoingAway.id);
    PortoaQueen.spawns(PortoaPalace_ThroneRoom)[1] = ~flags.MesiaRecording.id;
    PortoaQueen.spawns(Portoa_AsinaRoom)[0] = flags.MesiaRecording.id;
    PortoaQueen.dialog()[1].condition = flags.MesiaRecording.id;
    FortuneTeller.spawns(Portoa_FortuneTeller)[1] = ~flags.MesiaRecording.id;
    Clark.spawnConditions.set(ZombieTown_HouseBasement.id, [~flags.Clark.id]);
    Clark.spawnConditions.set(Joel_Shed.id, [flags.Clark.id]);
    Zebu.localDialogs.set(ZebuCave.id, [
        LocalDialog.of(~flags.TalkedToZebuInCave.id, [0x00, 0x1a], [flags.TalkedToZebuInCave.id]),
        LocalDialog.of(flags.LeafVillagersRescued.id, [0x00, 0x1d]),
        LocalDialog.of(flags.LeafAbduction.id, [0x00, 0x1c]),
        LocalDialog.of(flags.ZebuAtWindmill.id, [0x00, 0x1d]),
        LocalDialog.of(flags.UsedWindmillKey.id, [0x00, 0x1b, 0x03]),
        LocalDialog.of(~0, [0x00, 0x1d]),
    ]);
    remove(Zebu.spawns(ZebuCave), ~flags.BehindWhirlpool.id);
    Tornel.spawnConditions.delete(MtSabreWest_Upper.id);
    Stom.spawnConditions.delete(StomHouse.id);
    Asina.data[1] = rom.items.FluteOfLime.id;
    Asina.dialog(Portoa_AsinaRoom)[0].message.action = 0x11;
    Asina.dialog(Portoa_AsinaRoom)[2].message.action = 0x11;
    remove(Asina.spawns(Portoa_AsinaRoom), ~flags.CalmedAngrySea.id);
    KensuInCabin.spawnConditions.set(BoatHouse.id, [~flags.AbleToRideDolphin.id,
        flags.ReturnedFogLamp.id]);
    KensuInCabin.dialog()[0].message.action = 0x02;
    AztecaInShyron.spawns(Shyron_Temple).push(~flags.ShyronMassacre.id);
    rom.trigger(0x82).conditions.push(~flags.ShyronMassacre.id);
    Rage.dialog()[0].condition = flags.SwordOfWater.id;
    Draygon.spawnConditions.set(Crypt_Draygon2.id, [~flags.Draygon2.id]);
    Zebu.dialog(Shyron_Temple)
        .unshift(...Zebu.dialog(Shyron_Temple).splice(1, 1));
    rom.trigger(0x80).conditions = [
        ~flags.ShyronMassacre.id,
        flags.TalkedToZebuInShyron.id,
        flags.SwordOfThunder.id,
    ];
    rom.trigger(0x81).conditions = [];
    if (opts.barrierRequiresCalmSea()) {
        rom.trigger(0x84).conditions.push(flags.CalmedAngrySea.id);
    }
    rom.trigger(0x8c).conditions.push(flags.TalkedToZebuInCave.id);
    rom.trigger(0x8d).used = false;
    for (const spawn of MtSabreNorth_SummitCave.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8d)
            spawn.id = 0xb2;
    }
    removeIf(WaterfallValleyNorth.spawns, spawn => spawn.isTrigger() && spawn.id === 0x8d);
    rom.trigger(0xb2).conditions.push(flags.Kelbesque1.id);
    rom.trigger(0xb2).flags.push(~flags.LeafVillagersCurrentlyAbducted.id, ~flags.LeafElderCurrentlyAbducted.id, flags.LeafVillagersRescued.id);
    rom.trigger(0x8c).conditions.push(~flags.Kelbesque1.id);
    rom.trigger(0x86).conditions.push(~flags.Kelbesque1.id);
    remove(KeyToPrison.itemUseData[0].flags, ~flags.LeafVillagersCurrentlyAbducted.id);
    rom.trigger(0xba).conditions[0] = ~flags.Teleport.id;
    rom.trigger(0xbb).conditions[1] = ~flags.MesiaRecording.id;
}
function disableStabs(rom) {
    for (const o of [0x08, 0x09, 0x27]) {
        rom.objects[o].collisionPlane = 0;
    }
    rom.npcs.Brokahana.data[0] = rom.items.FruitOfLime.id;
}
function orbsOptional(rom) {
    for (const obj of [0x10, 0x14, 0x18, 0x1d]) {
        rom.objects[obj].terrainSusceptibility &= ~0x04;
        rom.objects[obj].level = 2;
    }
}
function noBowMode(rom) {
    const { flags: { UsedBowOfTruth }, locations: { Crypt_Draygon2, Crypt_Hall2, MezameShrine }, } = rom;
    let trigger;
    for (const spawn of MezameShrine.spawns) {
        if (spawn.isTrigger() && spawn.tile === 0x88) {
            trigger = rom.trigger(spawn.id);
        }
    }
    if (!trigger)
        throw new Error(`Could not find start trigger`);
    trigger.flags.push(UsedBowOfTruth.id);
    rom.tileEffects[0xb9 - 0xb3].effects[0x58] = 0;
    MezameShrine.exits.push(Exit.of({ tile: 0x68, dest: Crypt_Draygon2.id, entrance: 0 }));
    for (let exit of Crypt_Draygon2.exits) {
        if (exit.dest === Crypt_Hall2.id) {
            exit.dest = MezameShrine.id;
            exit.entrance = 1;
        }
    }
    for (let exit of Crypt_Hall2.exits) {
        if (exit.dest === Crypt_Draygon2.id) {
            exit.dest = MezameShrine.id;
            exit.entrance = 0;
        }
    }
}
function replace(array, old, replacement) {
    for (let i = 0; i < array.length; i++) {
        if (array[i] !== old)
            continue;
        array[i] = replacement;
        return;
    }
    throw new Error(`Could not find ${old} in ${array.join(',')}`);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZXJtaW5pc3RpYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL2RldGVybWluaXN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFZLEtBQUssRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3pFLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUM5QyxPQUFPLEVBQUMsWUFBWSxFQUFFLFdBQVcsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEMsT0FBTyxFQUFDLEdBQUcsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ25DLE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFFbEMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUVqQixTQUFTLEtBQUssQ0FBQyxHQUFlLEVBQUUsS0FBYSxFQUFFLEdBQUcsSUFBYztJQUM5RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNwQyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUMxQjtBQUNILENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQUMsR0FBZTtJQUVuRCxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUlwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVsQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BCLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUto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LENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUUxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUUxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsSUFBSSxLQUFLLENBQUMsZUFBZSxFQUFFLEVBQUU7UUFHM0IsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFD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QUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVwQyxNQUFNLFlBQVksR0FDZCxZQUFZLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2RSxNQUFNLFlBQVksR0FDZCxjQUFjLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV6RSxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FDbkIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUMsQ0FBQyxFQUNqRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUMsQ0FBQztJQUN2RSxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FDckIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUMsQ0FBQyxFQUNqRSxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUMsQ0FBQztBQUN6RSxDQUFDO0FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxHQUFRLEVBQUUsS0FBYztJQUVsRCxNQUFNLEVBQ0osS0FBSyxFQUFFLEVBQUMsVUFBVSxFQUFDLEVBQ25CLFNBQVMsRUFBRSxFQUNULGVBQWUsRUFDZixlQUFlLEVBQ2YsT0FBTyxFQUNQLFNBQVMsRUFDVCxZQUFZLEVBQ1osY0FBYyxFQUNkLGlCQUFpQixFQUNqQixZQUFZLEVBQ1osb0JBQW9CLEVBQ3BCLG9CQUFvQixHQUNyQixHQUNGLEdBQUcsR0FBRyxDQUFDO0lBR1IsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBR2xDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFDTixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUMzQixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUMzQixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUMzQixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0MsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFDWixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUMzQixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUMzQixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUMzQixDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFHL0MsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBRXJDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUks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QzFDO0lBR0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQ2QsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzNELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUMzRCxDQUFDO0lBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQ2QsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzNELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdB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QUM7QUFFRCxTQUFTLE9BQU8sQ0FBSSxLQUFVLEVBQUUsR0FBTSxFQUFFLFdBQWM7SUFDcEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDckMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRztZQUFFLFNBQVM7UUFDL0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQztRQUN2QixPQUFPO0tBQ1I7SUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtCQUFrQixHQUFHLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFBlcmZvcm0gaW5pdGlhbCBjbGVhbnVwL3NldHVwIG9mIHRoZSBST00uXG5cbmltcG9ydCB7RmxhZ1NldH0gZnJvbSAnLi4vZmxhZ3NldC5qcyc7XG5pbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7RW50cmFuY2UsIEV4aXQsIEZsYWcsIExvY2F0aW9uLCBTcGF3bn0gZnJvbSAnLi4vcm9tL2xvY2F0aW9uLmpzJztcbmltcG9ydCB7TWVzc2FnZUlkfSBmcm9tICcuLi9yb20vbWVzc2FnZWlkLmpzJztcbmltcG9ydCB7R2xvYmFsRGlhbG9nLCBMb2NhbERpYWxvZ30gZnJvbSAnLi4vcm9tL25wYy5qcyc7XG5pbXBvcnQge1Nob3BUeXBlfSBmcm9tICcuLi9yb20vc2hvcC5qcyc7XG5pbXBvcnQge1RyaWdnZXJ9IGZyb20gJy4uL3JvbS90cmlnZ2VyLmpzJztcbmltcG9ydCB7aGV4fSBmcm9tICcuLi9yb20vdXRpbC5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5cbmNvbnN0IFtdID0gW2hleF07IC8vIGdlbmVyYWxseSB1c2VmdWxcblxuZnVuY3Rpb24gd3JpdGUoYXJyOiBVaW50OEFycmF5LCBzdGFydDogbnVtYmVyLCAuLi5kYXRhOiBudW1iZXJbXSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbc3RhcnQgKyBpXSA9IGRhdGFbaV07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluaXN0aWNQcmVQYXJzZShwcmc6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgLy8gUmVtb3ZlIHVubmVjZXNzYXJ5IHN0YXR1ZSBmaWdodCB0cmlnZ2Vycy4gIFRPRE8gLSByZW1vdmUgMWQgbG9jYXRpb24gY2hlY2tcbiAgcHJnWzB4MWE1OTRdID0gMHhmZjsgLy8ganVzdCBjdXQgb2ZmIHR3byBvYmplY3RzIGVhcmx5LlxuXG4gIC8vIFJlbW92ZSB1bm5lY2Vzc2FyeSBvYWsgZW50cmFuY2UgdHJpZ2dlciAoYWEpLiAgUmVkaXJlY3QgdGhlIGRpYWxvZyBmbGFnLlxuICBwcmdbMHgxY2RjNV0gPSAweGE4OyAvLyBjaGFuZ2UgZmxhZyB0byBub3QgdXNlIDA0My5cbiAgcHJnWzB4MWE4NGNdID0gMHhmZjsgLy8gcmVtb3ZlIHRoZSBhYSB0cmlnZ2VyIChsYXN0IHNwYXduIGluIG9haykuXG5cbiAgLy8gUmVtb3ZlIGJyb2tlbiAodW51c2VkKSBrZW5zdSBkaWFsb2cgaW4gc3dhbiB0YXZlcm4gLSBvcmlnaW5hbCByZWFkc1xuICAvLyBwYXJ0IG9mIHRoZSBuZXh0IGFyZWEncyBsb2NhbCBkaWFsb2dzIGFzIGZsYWdzIHRvIHNldCwgaW5jbHVkaW5nIDE0MC5cbiAgcHJnWzB4MWQ4NDNdID0gMHhhMDsgLy8gY2hhbmdlIGUwIChleHBlY3RpbmcgZm9sbG93LXVwIGZsYWdzKSB0byBhMC5cblxuICAvLyBSZW1vdmUgdW51c2VkIGl0ZW0vdHJpZ2dlciBhY3Rpb25zXG4gIHByZ1sweDFlMDZiXSAmPSA3OyAvLyBtZWRpY2FsIGhlcmIgbm9ybWFsIHVzYWdlID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwNmZdICY9IDc7IC8vIG1hZ2ljIHJpbmcgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDczXSAmPSA3OyAvLyBmcnVpdCBvZiBsaW1lIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3N10gJj0gNzsgLy8gYW50aWRvdGUgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDdiXSAmPSA3OyAvLyBvcGVsIHN0YXR1ZSBpdGVtdXNlWzBdID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwODRdICY9IDc7IC8vIHdhcnAgYm9vdHMgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDQgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDliXSAmPSA3OyAvLyB3aW5kbWlsbCBrZXkgaXRlbXVzZVsxXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMGI5XSAmPSA3OyAvLyBnbG93aW5nIGxhbXAgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG5cbiAgcHJnWzB4MWUxMDVdID0gMHgyZjsgLy8gY2hhbmdlIFVzZWRCb3dPZlRydXRoIGZyb20gMDg2IHRvIGZpeGVkIDAyZiAoNjQ4NTo4MClcblxuICAvLyBSZW51bWJlciBtaW1pY3NcbiAgcHJnWzB4MTliYjFdID0gMHg3MDsgLy8gZm9nIGxhbXAgY2F2ZSAzICg0YSkgbm9ydGggbWltaWNcbiAgcHJnWzB4MTliYjVdID0gMHg3MTsgLy8gZm9nIGxhbXAgY2F2ZSAzICg0YSkgc291dGh3ZXN0IG1pbWljXG4gIHByZ1sweDE5YTc3XSA9IDB4NzI7IC8vIHdhdGVyZmFsbCBjYXZlIDEgKDU0KSBtaW1pY1xuICBwcmdbMHgxOWRlYl0gPSAweDczOyAvLyBldmlsIHNwaXJpdCBpc2xhbmQgNCAoNmIpIHJpdmVyIHJpZ2h0IG1pbWljXG4gIHByZ1sweDFhMDQ1XSA9IDB4NzQ7IC8vIG10IGh5ZHJhIGNhdmUgOCAoODUpIG1pbWljXG4gIHByZ1sweDFhMGUxXSA9IDB4NzU7IC8vIHN0eHkgbGVmdCAoODkpIG5vcnRoIG1pbWljXG4gIHByZ1sweDFhMGU1XSA9IDB4NzY7IC8vIHN0eHkgcmlnaHQgKDg5KSBub3J0aCByaXZlcnNpZGUgbWltaWNcbiAgcHJnWzB4MWEwZTldID0gMHg3NzsgLy8gc3R4eSByaWdodCAoODkpIHNvdXRoIHJpdmVyc2lkZSBtaW1pY1xuICBwcmdbMHgxYTYwNV0gPSAweDc4OyAvLyBjcnlwdCBsZWZ0IHBpdCAoYTMpIG1pbWljXG4gIHByZ1sweDFhM2MxXSA9IDB4Nzk7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSB0b3AgbWlkZGxlIG1pbWljXG4gIHByZ1sweDFhM2M1XSA9IDB4N2E7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSB0b3AgcmlnaHQgbWltaWNcbiAgcHJnWzB4MWEzYzldID0gMHg3YjsgLy8ga2FybWluZSBiYXNlbWVudCAoYjUpIGJvdHRvbSByaWdodCBtaW1pY1xuXG4gIC8vIFJlbW92ZSBzaGVsbCBmbHV0ZSBJdGVtVXNlIGZsYWcgc2V0IChuZXZlciByZWFkKVxuICB3cml0ZShwcmcsIDB4MWUwYjcsIDB4YzAsIDB4MDApO1xuXG4gIC8vIFN3YW4gZ2F0ZSBndWFyZHMgc3Bhd24gZXhhY3RseSBiYXNlZCBvbiBnYXRlIGJlaW5nIGNsb3NlZCAoMmIzKS5cbiAgLy8gQWxzbyByZW1vdmUgdGhlIGRlc3Bhd24gdHJpZ2dlciAod2UgY2FuJ3QgbW92ZSB0aGUgZ3VhcmRzIGJlY2F1c2VcbiAgLy8gdGhlIGdhdGUgYW5pbWF0aW9uIG5lZWRzIHRvIGJlIGluIHNsb3QgZSkuXG4gIHdyaXRlKHByZywgMHgxYzgwZCwgMHhhMiwgMHhiMyk7IC8vIHNwYXduIGNvbmRpdGlvbiAyZCBAIDczXG4gIHByZ1sweDFhYTg2XSA9IDB4ZmU7IC8vIHRyaWdnZXIgLT4gdW51c2VkIHNwYXduXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmlzdGljKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCk6IHZvaWQge1xuICAvLyBOT1RFOiBkbyB0aGlzIHZlcnkgZWFybHkgdG8gbWFrZSBzdXJlIHJlZnMgdG8gd2FycCBwb2ludCBmbGFncyBhcmVcbiAgLy8gdXBkYXRlZCB0byByZWZsZWN0IHNoaWZ0cyAocHJvYmFibHkgbm90IGFuIGlzc3VlIGFueW1vcmUgbm93IHRoYXRcbiAgLy8gd2UgdHJhY2sgZmxhZyBtb3ZlcyBzZXBhcmF0ZWx5KS5cbiAgYWRkWm9tYmllV2FycChyb20pO1xuXG4gIGNvbnNvbGlkYXRlSXRlbUdyYW50cyhyb20pO1xuICBhZGRNZXphbWVUcmlnZ2VyKHJvbSk7XG4gIG5vcm1hbGl6ZVN3b3Jkcyhyb20sIGZsYWdzKTtcblxuICBmaXhDb2luU3ByaXRlcyhyb20pO1xuICBmaXhDaGVzdHMocm9tKTtcbiAgcHJldmVudEJvc3NTb2Z0bG9ja3Mocm9tKTtcblxuICBtYWtlQnJhY2VsZXRzUHJvZ3Jlc3NpdmUocm9tKTtcblxuICBhZGRUb3dlckV4aXQocm9tKTtcbiAgcmV2ZXJzaWJsZVN3YW5HYXRlKHJvbSk7XG4gIGFkanVzdEdvYUZvcnRyZXNzVHJpZ2dlcnMocm9tKTtcbiAgcHJldmVudE5wY0Rlc3Bhd25zKHJvbSwgZmxhZ3MpO1xuICBsZWFmRWxkZXJJblNhYnJlSGVhbHMocm9tKTtcbiAgaWYgKGZsYWdzLnJlcXVpcmVIZWFsZWREb2xwaGluVG9SaWRlKCkpIHJlcXVpcmVIZWFsZWREb2xwaGluKHJvbSk7XG4gIGlmIChmbGFncy5zYWhhcmFSYWJiaXRzUmVxdWlyZVRlbGVwYXRoeSgpKSByZXF1aXJlVGVsZXBhdGh5Rm9yRGVvKHJvbSk7XG5cbiAgYWRqdXN0SXRlbU5hbWVzKHJvbSwgZmxhZ3MpO1xuXG4gIC8vIFRPRE8gLSBjb25zaWRlciBtYWtpbmcgYSBUcmFuc2Zvcm1hdGlvbiBpbnRlcmZhY2UsIHdpdGggb3JkZXJpbmcgY2hlY2tzXG4gIGFsYXJtRmx1dGVJc0tleUl0ZW0ocm9tLCBmbGFncyk7IC8vIE5PVEU6IHByZS1zaHVmZmxlXG4gIGJyb2thaGFuYVdhbnRzTWFkbzEocm9tKTtcbiAgaWYgKGZsYWdzLnRlbGVwb3J0T25UaHVuZGVyU3dvcmQoKSkge1xuICAgIHRlbGVwb3J0T25UaHVuZGVyU3dvcmQocm9tKTtcbiAgICAvLyBub3QgU2h5cm9uX1RlbXBsZSBzaW5jZSBuby10aHVuZGVyLXN3b3JkLWZvci1tYXNzYWNyZVxuICAgIHJvbS50b3duV2FycC50aHVuZGVyU3dvcmRXYXJwID0gW3JvbS5sb2NhdGlvbnMuU2h5cm9uLmlkLCAweDQxXTtcbiAgfSBlbHNlIHtcbiAgICBub1RlbGVwb3J0T25UaHVuZGVyU3dvcmQocm9tKTtcbiAgfVxuXG4gIHVuZGVyZ3JvdW5kQ2hhbm5lbExhbmRCcmlkZ2Uocm9tKTtcbiAgaWYgKGZsYWdzLmZvZ0xhbXBOb3RSZXF1aXJlZCgpKSBmb2dMYW1wTm90UmVxdWlyZWQocm9tLCBmbGFncyk7XG5cbiAgaWYgKGZsYWdzLmFkZEVhc3RDYXZlKCkpIHtcbiAgICBlYXN0Q2F2ZShyb20sIGZsYWdzKTtcbiAgICBpZiAoZmxhZ3MuY29ubmVjdEdvYVRvTGVhZigpKSB7XG4gICAgICBjb25uZWN0R29hVG9MZWFmKHJvbSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGZsYWdzLmNvbm5lY3RMaW1lVHJlZVRvTGVhZigpKSB7XG4gICAgY29ubmVjdExpbWVUcmVlVG9MZWFmKHJvbSk7XG4gIH1cbiAgZXZpbFNwaXJpdElzbGFuZFJlcXVpcmVzRG9scGhpbihyb20pO1xuICBzaW1wbGlmeUludmlzaWJsZUNoZXN0cyhyb20pO1xuICBhZGRDb3JkZWxXZXN0VHJpZ2dlcnMocm9tLCBmbGFncyk7XG4gIGlmIChmbGFncy5kaXNhYmxlUmFiYml0U2tpcCgpKSBmaXhSYWJiaXRTa2lwKHJvbSk7XG5cbiAgcGF0Y2hMaW1lVHJlZUxha2Uocm9tKTtcbiAgY2xvc2VDYXZlRW50cmFuY2VzKHJvbSwgZmxhZ3MpOyAvLyBOT1RFOiBhZnRlciBvdGhlciBtYXAgZWRpdHNcblxuICBmaXhSZXZlcnNlV2FsbHMocm9tKTtcbiAgaWYgKGZsYWdzLmNoYXJnZVNob3RzT25seSgpKSBkaXNhYmxlU3RhYnMocm9tKTtcbiAgaWYgKGZsYWdzLm9yYnNPcHRpb25hbCgpKSBvcmJzT3B0aW9uYWwocm9tKTtcbiAgaWYgKGZsYWdzLm5vQm93TW9kZSgpKSBub0Jvd01vZGUocm9tKTtcblxuICBwYXRjaFRvb01hbnlJdGVtc01lc3NhZ2Uocm9tKTtcbn1cblxuLy8gVXBkYXRlcyBhIGZldyBpdGVtdXNlIGFuZCB0cmlnZ2VyIGFjdGlvbnMgaW4gbGlnaHQgb2YgY29uc29saWRhdGlvblxuLy8gYXJvdW5kIGl0ZW0gZ3JhbnRpbmcuXG5mdW5jdGlvbiBjb25zb2xpZGF0ZUl0ZW1HcmFudHMocm9tOiBSb20pOiB2b2lkIHtcbiAgcm9tLml0ZW1zLkdsb3dpbmdMYW1wLml0ZW1Vc2VEYXRhWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwYjtcbn1cblxuLy8gQWRkcyBhIHRyaWdnZXIgYWN0aW9uIHRvIG1lemFtZS4gIFVzZSA4NyBsZWZ0b3ZlciBmcm9tIHJlc2N1aW5nIHplYnUuXG5mdW5jdGlvbiBhZGRNZXphbWVUcmlnZ2VyKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHRyaWdnZXIgPSByb20ubmV4dEZyZWVUcmlnZ2VyKCk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFt+cm9tLmZsYWdzLkFsd2F5c1RydWUuaWRdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe2FjdGlvbjogNH0pO1xuICB0cmlnZ2VyLmZsYWdzID0gW3JvbS5mbGFncy5BbHdheXNUcnVlLmlkXTtcbiAgY29uc3QgbWV6YW1lID0gcm9tLmxvY2F0aW9ucy5NZXphbWVTaHJpbmU7XG4gIG1lemFtZS5zcGF3bnMucHVzaChTcGF3bi5vZih7dGlsZTogMHg4OCwgdHlwZTogMiwgaWQ6IHRyaWdnZXIuaWR9KSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN3b3Jkcyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpIHtcbiAgLy8gd2luZCAxID0+IDEgaGl0ICAgICAgICAgICAgICAgPT4gM1xuICAvLyB3aW5kIDIgPT4gMSBoaXQgICAgICAgICAgICAgICA9PiA2XG4gIC8vIHdpbmQgMyA9PiAyLTMgaGl0cyA4TVAgICAgICAgID0+IDhcblxuICAvLyBmaXJlIDEgPT4gMSBoaXQgICAgICAgICAgICAgICA9PiAzXG4gIC8vIGZpcmUgMiA9PiAzIGhpdHMgICAgICAgICAgICAgID0+IDVcbiAgLy8gZmlyZSAzID0+IDQtNiBoaXRzIDE2TVAgICAgICAgPT4gN1xuXG4gIC8vIHdhdGVyIDEgPT4gMSBoaXQgICAgICAgICAgICAgID0+IDNcbiAgLy8gd2F0ZXIgMiA9PiAxLTIgaGl0cyAgICAgICAgICAgPT4gNlxuICAvLyB3YXRlciAzID0+IDMtNiBoaXRzIDE2TVAgICAgICA9PiA4XG5cbiAgLy8gdGh1bmRlciAxID0+IDEtMiBoaXRzIHNwcmVhZCAgPT4gM1xuICAvLyB0aHVuZGVyIDIgPT4gMS0zIGhpdHMgc3ByZWFkICA9PiA1XG4gIC8vIHRodW5kZXIgMyA9PiA3LTEwIGhpdHMgNDBNUCAgID0+IDdcblxuICByb20ub2JqZWN0c1sweDEwXS5hdGsgPSAzOyAvLyB3aW5kIDFcbiAgcm9tLm9iamVjdHNbMHgxMV0uYXRrID0gNjsgLy8gd2luZCAyXG4gIHJvbS5vYmplY3RzWzB4MTJdLmF0ayA9IDg7IC8vIHdpbmQgM1xuXG4gIHJvbS5vYmplY3RzWzB4MThdLmF0ayA9IDM7IC8vIGZpcmUgMVxuICByb20ub2JqZWN0c1sweDEzXS5hdGsgPSA1OyAvLyBmaXJlIDJcbiAgcm9tLm9iamVjdHNbMHgxOV0uYXRrID0gNTsgLy8gZmlyZSAyXG4gIHJvbS5vYmplY3RzWzB4MTddLmF0ayA9IDc7IC8vIGZpcmUgM1xuICByb20ub2JqZWN0c1sweDFhXS5hdGsgPSA3OyAvLyBmaXJlIDNcblxuICByb20ub2JqZWN0c1sweDE0XS5hdGsgPSAzOyAvLyB3YXRlciAxXG4gIHJvbS5vYmplY3RzWzB4MTVdLmF0ayA9IDY7IC8vIHdhdGVyIDJcbiAgcm9tLm9iamVjdHNbMHgxNl0uYXRrID0gODsgLy8gd2F0ZXIgM1xuXG4gIHJvbS5vYmplY3RzWzB4MWNdLmF0ayA9IDM7IC8vIHRodW5kZXIgMVxuICByb20ub2JqZWN0c1sweDFlXS5hdGsgPSA1OyAvLyB0aHVuZGVyIDJcbiAgcm9tLm9iamVjdHNbMHgxYl0uYXRrID0gNzsgLy8gdGh1bmRlciAzXG4gIHJvbS5vYmplY3RzWzB4MWZdLmF0ayA9IDc7IC8vIHRodW5kZXIgM1xuXG4gIGlmIChmbGFncy5zbG93RG93blRvcm5hZG8oKSkge1xuICAgIC8vIFRPRE8gLSB0b3JuYWRvIChvYmogMTIpID0+IHNwZWVkIDA3IGluc3RlYWQgb2YgMDhcbiAgICAvLyAgICAgIC0gbGlmZXRpbWUgaXMgNDgwID0+IDcwIG1heWJlIHRvbyBsb25nLCA2MCBzd2VldCBzcG90P1xuICAgIGNvbnN0IHRvcm5hZG8gPSByb20ub2JqZWN0c1sweDEyXTtcbiAgICB0b3JuYWRvLnNwZWVkID0gMHgwNztcbiAgICB0b3JuYWRvLmRhdGFbMHgwY10gPSAweDYwOyAvLyBpbmNyZWFzZSBsaWZldGltZSAoNDgwKSBieSAyMCVcbiAgfVxufVxuXG4vLyBBZGQgY29kZSB0byBlbnN1cmUgRHJheWdvbiAyIGFuZCBHaWFudCBJbnNlY3QgcmVzcGF3biB3aXRob3V0IHRoZWlyXG4vLyBpdGVtcyBvbmNlIHRoZXkndmUgYmVlbiB1c2VkLlxuZnVuY3Rpb24gcHJldmVudEJvc3NTb2Z0bG9ja3Mocm9tOiBSb20pIHtcbiAgY29uc3QgdHJpZ2dlciA9IHJvbS50cmlnZ2VyKDB4YTApO1xuICB0cmlnZ2VyLnVzZWQgPSB0cnVlO1xuICB0cmlnZ2VyLmNvbmRpdGlvbnMgPSBbXTtcbiAgdHJpZ2dlci5mbGFncyA9IFtdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe3BhcnQ6IDAsIGluZGV4OiAwLCBhY3Rpb246IDB4MTV9KTtcblxuICByb20ub2JqZWN0c1sweDVlXS5kYXRhWzB4ZF0gPSAweGZlOyAvLyBvYmplY3QgYWN0aW9uIDdlIGluc3RlYWQgb2YgN2ZcbiAgcm9tLml0ZW1zLkluc2VjdEZsdXRlLml0ZW1Vc2VEYXRhWzBdLmZsYWdzID0gW3JvbS5mbGFncy5Vc2VkSW5zZWN0Rmx1dGUuaWRdO1xufVxuXG5mdW5jdGlvbiBmaXhDb2luU3ByaXRlcyhyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IHBhZ2Ugb2YgWzB4NjAsIDB4NjQsIDB4NjUsIDB4NjYsIDB4NjcsIDB4NjgsXG4gICAgICAgICAgICAgICAgICAgICAgMHg2OSwgMHg2YSwgMHg2YiwgMHg2YywgMHg2ZCwgMHg2Zl0pIHtcbiAgICBmb3IgKGNvbnN0IHBhdCBvZiBbMCwgMSwgMl0pIHtcbiAgICAgIHJvbS5wYXR0ZXJuc1twYWdlIDw8IDYgfCBwYXRdLnBpeGVscyA9IHJvbS5wYXR0ZXJuc1sweDVlIDw8IDYgfCBwYXRdLnBpeGVscztcbiAgICB9XG4gIH1cbiAgcm9tLm9iamVjdHNbMHgwY10ubWV0YXNwcml0ZSA9IDB4YTk7XG59XG5cbi8qKlxuICogRml4IHRoZSBzb2Z0bG9jayB0aGF0IGhhcHBlbnMgd2hlbiB5b3UgZ28gdGhyb3VnaFxuICogYSB3YWxsIGJhY2t3YXJkcyBieSBtb3ZpbmcgdGhlIGV4aXQvZW50cmFuY2UgdGlsZXNcbiAqIHVwIGEgYml0IGFuZCBhZGp1c3Rpbmcgc29tZSB0aWxlRWZmZWN0cyB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGZpeFJldmVyc2VXYWxscyhyb206IFJvbSkge1xuICAvLyBhZGp1c3QgdGlsZSBlZmZlY3QgZm9yIGJhY2sgdGlsZXMgb2YgaXJvbiB3YWxsXG4gIGZvciAoY29uc3QgdCBpbiBbMHgwNCwgMHgwNSwgMHgwOCwgMHgwOV0pIHtcbiAgICByb20udGlsZUVmZmVjdHNbMHhiYyAtIDB4YjNdLmVmZmVjdHNbdF0gPSAweDE4O1xuICAgIHJvbS50aWxlRWZmZWN0c1sweGI1IC0gMHhiM10uZWZmZWN0c1t0XSA9IDB4MTg7XG4gIH1cbiAgLy8gVE9ETyAtIG1vdmUgYWxsIHRoZSBlbnRyYW5jZXMgdG8geT0yMCBhbmQgZXhpdHMgdG8geXQ9MDFcbn1cblxuLyoqIE1ha2UgYSBsYW5kIGJyaWRnZSBpbiB1bmRlcmdyb3VuZCBjaGFubmVsICovXG5mdW5jdGlvbiB1bmRlcmdyb3VuZENoYW5uZWxMYW5kQnJpZGdlKHJvbTogUm9tKSB7XG4gIGNvbnN0IHt0aWxlc30gPSByb20uc2NyZWVuc1sweGExXTtcbiAgdGlsZXNbMHgyOF0gPSAweDlmO1xuICB0aWxlc1sweDM3XSA9IDB4MjM7XG4gIHRpbGVzWzB4MzhdID0gMHgyMzsgLy8gMHg4ZTtcbiAgdGlsZXNbMHgzOV0gPSAweDIxO1xuICB0aWxlc1sweDQ3XSA9IDB4OGQ7XG4gIHRpbGVzWzB4NDhdID0gMHg4ZjtcbiAgdGlsZXNbMHg1Nl0gPSAweDk5O1xuICB0aWxlc1sweDU3XSA9IDB4OWE7XG4gIHRpbGVzWzB4NThdID0gMHg4Yztcbn1cblxuZnVuY3Rpb24gZm9nTGFtcE5vdFJlcXVpcmVkKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCkge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtBbHdheXNUcnVlLCBJbmp1cmVkRG9scGhpbiwgRm9nTGFtcCxcbiAgICAgICAgICAgIEtlbnN1SW5DYWJpbiwgUmV0dXJuZWRGb2dMYW1wfSxcbiAgICBpdGVtczoge1NoZWxsRmx1dGV9LFxuICAgIGxvY2F0aW9uczoge0JvYXRIb3VzZSwgUG9ydG9hX0Zpc2hlcm1hbkhvdXNlfSxcbiAgICBucGNzLFxuICB9ID0gcm9tO1xuICAgIFxuICAvLyBOZWVkIHRvIG1ha2Ugc2V2ZXJhbCBjaGFuZ2VzLlxuICAvLyAoMSkgZG9scGhpbiBvbmx5IHJlcXVpcmVzIHNoZWxsIGZsdXRlLCBtYWtlIHRoZSBmbGFnIGNoZWNrIGZyZWVcbiAgLy8gICAgIHVubGVzcyBoZWFsaW5nIGlzIHJlcXVpcmVkLlxuICBjb25zdCByZXF1aXJlSGVhbGVkID0gZmxhZ3MucmVxdWlyZUhlYWxlZERvbHBoaW5Ub1JpZGUoKTtcbiAgU2hlbGxGbHV0ZS5pdGVtVXNlRGF0YVswXS53YW50ID1cbiAgICAgIHJlcXVpcmVIZWFsZWQgPyBJbmp1cmVkRG9scGhpbi5pZCA6IEFsd2F5c1RydWUuaWQ7XG4gIC8vICgyKSBrZW5zdSA2OCAoQDYxKSBkcm9wcyBhbiBpdGVtICg2NyBtYWdpYyByaW5nKVxuICBucGNzLktlbnN1SW5DYWJpbi5kYXRhWzBdID0gMHg2NztcbiAgbnBjcy5LZW5zdUluQ2FiaW4ubG9jYWxEaWFsb2dzLmdldCgtMSkhWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwYTtcbiAgbnBjcy5LZW5zdUluQ2FiaW4ubG9jYWxEaWFsb2dzLmdldCgtMSkhWzBdLmZsYWdzID0gW107XG4gIG5wY3MuS2Vuc3VJbkNhYmluLnNwYXduQ29uZGl0aW9ucy5zZXQoQm9hdEhvdXNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtSZXR1cm5lZEZvZ0xhbXAuaWQsIH5LZW5zdUluQ2FiaW4uaWRdKTtcbiAgLy8gKDMpIGZpc2hlcm1hbiA2NCBzcGF3bnMgb24gZm9nIGxhbXAgcmF0aGVyIHRoYW4gc2hlbGwgZmx1dGVcbiAgbnBjcy5GaXNoZXJtYW4uc3Bhd25Db25kaXRpb25zLnNldChQb3J0b2FfRmlzaGVybWFuSG91c2UuaWQsIFtGb2dMYW1wLmlkXSk7XG5cbiAgLy8gKDQpIGZpeCB1cCBpdGVtZ2V0IDY3IGZyb20gaXRlbWdldCA2NCAoZGVsZXRlIHRoZSBmbGFnKVxuICByb20uaXRlbUdldHNbMHg2NF0uZmxhZ3MgPSBbXTtcbiAgcm9tLml0ZW1HZXRzWzB4NjddLmNvcHlGcm9tKHJvbS5pdGVtR2V0c1sweDY0XSk7XG4gIC8vcm9tLml0ZW1HZXRzWzB4NjddLmZsYWdzID0gWzB4MGMxXTtcblxuICAvLyBUT0RPIC0gZ3JhcGhpY3Mgc2NyZXdlZCB1cCAtIGZpZ3VyZSBvdXQgaWYgb2JqZWN0IGFjdGlvbiBpcyBjaGFuZ2luZ1xuICAvLyB0aGUgcGF0dGVybiB0YWJsZXMgYmFzZWQgb24gKGUuZy4pICQ2MDAseCBtYXliZT8gIENhbiB3ZSBwcmV2ZW50IGl0P1xuXG4gIC8vIFRPRE8gLSBhZGQgYSBub3RlcyBmaWxlIGFib3V0IHRoaXMuXG5cbn1cblxuLyoqXG4gKiBSZW1vdmUgdGltZXIgc3Bhd25zIGZyb20gYWxsIGNoZXN0cy4gIE1pbWljcyBoYXZlIGFscmVhZHkgYmVlblxuICogcmVudW1iZXJlZCB0byBiZSBldW5pcXVlIChwcmUtcGFyc2UpLiAgTm90ZSB0aGF0IHRoZSByZW51bWJlcmluZ1xuICogcmVxdWlyZXMgYW4gYXNzZW1ibHkgY2hhbmdlICgkM2QzZmQgaW4gcHJlc2h1ZmZsZS5zKS5cbiAqL1xuZnVuY3Rpb24gZml4Q2hlc3RzKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3QgbG9jIG9mIHJvbS5sb2NhdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbG9jLnNwYXducykge1xuICAgICAgaWYgKHMuaXNDaGVzdCgpKSBzLnRpbWVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIFRPRE8gLSBmaW5kIGEgYmV0dGVyIHdheSB0byBidW5kbGUgYXNtIGNoYW5nZXM/IC0gYnV0IGl0J3MgYSBtZXNzXG4gIC8vICAgICAgICB3aXRoIHNoYXJpbmcgbGFiZWxzLCB0cmFja2luZyBjbG9iYmVyaW5nLCBldGMuXG4gIC8vIHJvbS5hc3NlbWJsZSgpXG4gIC8vICAgICAuJCgnYWRjICQxMCcpXG4gIC8vICAgICAuYmVxKCdsYWJlbCcpXG4gIC8vICAgICAubHNoKClcbiAgLy8gICAgIC5sc2goYCR7YWRkcn0seGApXG4gIC8vICAgICAubGFiZWwoJ2xhYmVsJyk7XG4gIC8vIHJvbS5wYXRjaCgpXG4gIC8vICAgICAub3JnKDB4M2QzZmQpXG4gIC8vICAgICAuYnl0ZSgweGIwKTtcblxuICAvLyByb20uY29kZS5yZXBsYWNlKDB4M2MxOTIsIDB4M2MxYTcsIGBcbiAgLy8gICAgIGFzbFxuICAvLyAgICAgYWRjICQxMCAgOyBkbyBzb21ldGhpbmdcbiAgLy8gICAgIGJuZSArXG4gIC8vICAgICAgcnRzXG4gIC8vICAgKyBqbXAgRm9vQmFyYCk7XG4gIC8vIHJvbS5jb2RlLnJlcGxhY2VFeGFjdChzdGFydCwgZW5kLCBjb2RlKTtcbiAgLy8gcm9tLmNvZGUuaW5zZXJ0KHBhZ2UsIGBcbiAgLy8gICAgIExhYmVsOiAgOyB1c2FibGUgZnJvbSBlbHNld2hlcmU/XG4gIC8vICAgICAtIGFzbFxuICAvLyAgICAgICBiY2MgLVxuICAvLyAgICAgICBydHNgKTtcbn1cblxuZnVuY3Rpb24gYWRqdXN0R29hRm9ydHJlc3NUcmlnZ2Vycyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCBsID0gcm9tLmxvY2F0aW9ucztcbiAgLy8gTW92ZSBLZWxiZXNxdWUgMiBvbmUgZnVsbCB0aWxlIGxlZnQuXG4gIGwuR29hRm9ydHJlc3NfS2VsYmVzcXVlLnNwYXduc1swXS54IC09IDE2O1xuICAvLyBSZW1vdmUgc2FnZSBzY3JlZW4gbG9ja3MgKGV4Y2VwdCBLZW5zdSkuXG4gIGwuR29hRm9ydHJlc3NfWmVidS5zcGF3bnMuc3BsaWNlKDEsIDEpOyAvLyB6ZWJ1IHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19Ub3JuZWwuc3Bhd25zLnNwbGljZSgyLCAxKTsgLy8gdG9ybmVsIHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19Bc2luYS5zcGF3bnMuc3BsaWNlKDIsIDEpOyAvLyBhc2luYSBzY3JlZW4gbG9jayB0cmlnZ2VyXG4gIGwuR29hRm9ydHJlc3NfS2Vuc3Uuc3Bhd25zLnNwbGljZSgzLCAxKTsgLy8ga2Vuc3UgaHVtYW4gc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX0tlbnN1LnNwYXducy5zcGxpY2UoMSwgMSk7IC8vIGtlbnN1IHNsaW1lIHNjcmVlbiBsb2NrIHRyaWdnZXJcbn1cblxuZnVuY3Rpb24gYWxhcm1GbHV0ZUlzS2V5SXRlbShyb206IFJvbSwgZmxhZ3M6RmxhZ1NldCk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgaXRlbXM6IHtBbGFybUZsdXRlfSxcbiAgICBmbGFnczoge1RhbGtlZFRvWmVidVN0dWRlbnQsIFplYnVTdHVkZW50fSxcbiAgICBsb2NhdGlvbnM6IHtMZWFmX1N0dWRlbnRIb3VzZSwgV2F0ZXJmYWxsQ2F2ZTQsIFplYnVDYXZlfSxcbiAgICBucGNzOiB7V2luZG1pbGxHdWFyZCwgWmVidX0sXG4gIH0gPSByb207XG5cbiAgLy8gTW92ZSBhbGFybSBmbHV0ZSB0byB0aGlyZCByb3dcbiAgcm9tLml0ZW1HZXRzWzB4MzFdLmludmVudG9yeVJvd1N0YXJ0ID0gMHgyMDtcbiAgLy8gRW5zdXJlIGFsYXJtIGZsdXRlIGNhbm5vdCBiZSBkcm9wcGVkXG4gIC8vIHJvbS5wcmdbMHgyMTAyMV0gPSAweDQzOyAvLyBUT0RPIC0gcm9tLml0ZW1zWzB4MzFdLj8/P1xuICBBbGFybUZsdXRlLnVuaXF1ZSA9IHRydWU7XG4gIC8vIEVuc3VyZSBhbGFybSBmbHV0ZSBjYW5ub3QgYmUgc29sZFxuICBBbGFybUZsdXRlLmJhc2VQcmljZSA9IDA7XG5cbiAgaWYgKGZsYWdzLnplYnVTdHVkZW50R2l2ZXNJdGVtKCkpIHtcbiAgICAvLyBQZXJzb24gMTQgKFplYnUncyBzdHVkZW50KTogc2Vjb25kYXJ5IGl0ZW0gLT4gYWxhcm0gZmx1dGVcbiAgICBXaW5kbWlsbEd1YXJkLmRhdGFbMV0gPSAweDMxO1xuICB9IGVsc2Uge1xuICAgIFdpbmRtaWxsR3VhcmQuZGF0YVsxXSA9IDB4ZmY7IC8vIGluZGljYXRlIG5vdGhpbmcgdGhlcmU6IG5vIHNsb3QuXG4gICAgY29uc3QgZGlhbG9nID0gV2luZG1pbGxHdWFyZC5kaWFsb2coTGVhZl9TdHVkZW50SG91c2UpWzBdO1xuICAgIGRpYWxvZy5jb25kaXRpb24gPSB+VGFsa2VkVG9aZWJ1U3R1ZGVudC5pZDtcbiAgICBkaWFsb2cuZmxhZ3MucHVzaChUYWxrZWRUb1plYnVTdHVkZW50LmlkKTtcbiAgICByZXBsYWNlKFplYnUuc3Bhd25zKFplYnVDYXZlKSwgWmVidVN0dWRlbnQuaWQsIFRhbGtlZFRvWmVidVN0dWRlbnQuaWQpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFsYXJtIGZsdXRlIGZyb20gc2hvcHMgKHJlcGxhY2Ugd2l0aCBvdGhlciBpdGVtcylcbiAgLy8gTk9URSAtIHdlIGNvdWxkIHNpbXBsaWZ5IHRoaXMgd2hvbGUgdGhpbmcgYnkganVzdCBoYXJkY29kaW5nIGluZGljZXMuXG4gIC8vICAgICAgLSBpZiB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gaGFwcGVuIGVhcmx5LCBpdCdzIGFsbCB0aGUgc2FtZS5cbiAgY29uc3QgcmVwbGFjZW1lbnRzID0gW1xuICAgIFsweDIxLCAwLjcyXSwgLy8gZnJ1aXQgb2YgcG93ZXIsIDcyJSBvZiBjb3N0XG4gICAgWzB4MWYsIDAuOV0sIC8vIGx5c2lzIHBsYW50LCA5MCUgb2YgY29zdFxuICBdO1xuICBsZXQgaiA9IDA7XG4gIGZvciAoY29uc3Qgc2hvcCBvZiByb20uc2hvcHMpIHtcbiAgICBpZiAoc2hvcC50eXBlICE9PSBTaG9wVHlwZS5UT09MKSBjb250aW51ZTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc2hvcC5jb250ZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHNob3AuY29udGVudHNbaV0gIT09IDB4MzEpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgW2l0ZW0sIHByaWNlUmF0aW9dID0gcmVwbGFjZW1lbnRzWyhqKyspICUgcmVwbGFjZW1lbnRzLmxlbmd0aF07XG4gICAgICBzaG9wLmNvbnRlbnRzW2ldID0gaXRlbTtcbiAgICAgIGlmIChyb20uc2hvcERhdGFUYWJsZXNBZGRyZXNzKSB7XG4gICAgICAgIC8vIE5PVEU6IHRoaXMgaXMgYnJva2VuIC0gbmVlZCBhIGNvbnRyb2xsZWQgd2F5IHRvIGNvbnZlcnQgcHJpY2UgZm9ybWF0c1xuICAgICAgICBzaG9wLnByaWNlc1tpXSA9IE1hdGgucm91bmQoc2hvcC5wcmljZXNbaV0gKiBwcmljZVJhdGlvKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGFuZ2UgZmx1dGUgb2YgbGltZSBjaGVzdCdzIChub3ctdW51c2VkKSBpdGVtZ2V0IHRvIGhhdmUgbWVkaWNhbCBoZXJiXG4gIHJvbS5pdGVtR2V0c1sweDViXS5pdGVtSWQgPSAweDFkO1xuICAvLyBDaGFuZ2UgdGhlIGFjdHVhbCBzcGF3biBmb3IgdGhhdCBjaGVzdCB0byBiZSB0aGUgbWlycm9yZWQgc2hpZWxkIGNoZXN0XG4gIFdhdGVyZmFsbENhdmU0LnNwYXduKDB4MTkpLmlkID0gMHgxMDtcblxuICAvLyBUT0RPIC0gcmVxdWlyZSBuZXcgY29kZSBmb3IgdHdvIHVzZXNcbn1cblxuZnVuY3Rpb24gYnJva2FoYW5hV2FudHNNYWRvMShyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7ZmxhZ3M6IHtLYXJtaW5lLCBNYWRvMX0sIG5wY3M6IHtCcm9rYWhhbmF9fSA9IHJvbTtcbiAgY29uc3QgZGlhbG9nID0gYXNzZXJ0KEJyb2thaGFuYS5sb2NhbERpYWxvZ3MuZ2V0KC0xKSlbMF07XG4gIGlmIChkaWFsb2cuY29uZGl0aW9uICE9PSB+S2FybWluZS5pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQmFkIGJyb2thaGFuYSBjb25kaXRpb246ICR7ZGlhbG9nLmNvbmRpdGlvbn1gKTtcbiAgfVxuICBkaWFsb2cuY29uZGl0aW9uID0gfk1hZG8xLmlkO1xufVxuXG5mdW5jdGlvbiByZXF1aXJlSGVhbGVkRG9scGhpbihyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtJbmp1cmVkRG9scGhpbiwgU2hlbGxGbHV0ZX0sXG4gICAgbnBjczoge0Zpc2hlcm1hbiwgRmlzaGVybWFuRGF1Z2h0ZXJ9LFxuICB9ID0gcm9tO1xuICAvLyBOb3JtYWxseSB0aGUgZmlzaGVybWFuICgkNjQpIHNwYXducyBpbiBoaXMgaG91c2UgKCRkNikgaWYgeW91IGhhdmVcbiAgLy8gdGhlIHNoZWxsIGZsdXRlICgyMzYpLiAgSGVyZSB3ZSBhbHNvIGFkZCBhIHJlcXVpcmVtZW50IG9uIHRoZSBoZWFsZWRcbiAgLy8gZG9scGhpbiBzbG90ICgwMjUpLCB3aGljaCB3ZSBrZWVwIGFyb3VuZCBzaW5jZSBpdCdzIGFjdHVhbGx5IHVzZWZ1bC5cbiAgRmlzaGVybWFuLnNwYXduQ29uZGl0aW9ucy5zZXQoMHhkNiwgW1NoZWxsRmx1dGUuaWQsIEluanVyZWREb2xwaGluLmlkXSk7XG4gIC8vIEFsc28gZml4IGRhdWdodGVyJ3MgZGlhbG9nICgkN2IpLlxuICBjb25zdCBkYXVnaHRlckRpYWxvZyA9IEZpc2hlcm1hbkRhdWdodGVyLmxvY2FsRGlhbG9ncy5nZXQoLTEpITtcbiAgZGF1Z2h0ZXJEaWFsb2cudW5zaGlmdChkYXVnaHRlckRpYWxvZ1swXS5jbG9uZSgpKTtcbiAgZGF1Z2h0ZXJEaWFsb2dbMF0uY29uZGl0aW9uID0gfkluanVyZWREb2xwaGluLmlkO1xuICBkYXVnaHRlckRpYWxvZ1sxXS5jb25kaXRpb24gPSB+U2hlbGxGbHV0ZS5pZDtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZVRlbGVwYXRoeUZvckRlbyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtUZWxlcGF0aHl9LFxuICAgIG5wY3M6IHtEZW8sIFNhaGFyYUJ1bm55fSxcbiAgfSA9IHJvbTtcbiAgLy8gTm90IGhhdmluZyB0ZWxlcGF0aHkgKDI0Mykgd2lsbCB0cmlnZ2VyIGEgXCJreXUga3l1XCIgKDFhOjEyLCAxYToxMykgZm9yXG4gIC8vIGJvdGggZ2VuZXJpYyBidW5uaWVzICg1OSkgYW5kIGRlbyAoNWEpLlxuICBTYWhhcmFCdW5ueS5nbG9iYWxEaWFsb2dzLnB1c2goR2xvYmFsRGlhbG9nLm9mKH5UZWxlcGF0aHkuaWQsIFsweDFhLCAweDEyXSkpO1xuICBEZW8uZ2xvYmFsRGlhbG9ncy5wdXNoKEdsb2JhbERpYWxvZy5vZih+VGVsZXBhdGh5LmlkLCBbMHgxYSwgMHgxM10pKTtcbn1cblxuZnVuY3Rpb24gdGVsZXBvcnRPblRodW5kZXJTd29yZChyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtXYXJwU2h5cm9ufSxcbiAgfSA9IHJvbTtcbiAgLy8gaXRlbWdldCAwMyBzd29yZCBvZiB0aHVuZGVyID0+IHNldCAyZmQgc2h5cm9uIHdhcnAgcG9pbnRcbiAgcm9tLml0ZW1HZXRzWzB4MDNdLmZsYWdzLnB1c2goV2FycFNoeXJvbi5pZCk7XG59XG5cbmZ1bmN0aW9uIG5vVGVsZXBvcnRPblRodW5kZXJTd29yZChyb206IFJvbSk6IHZvaWQge1xuICAvLyBDaGFuZ2Ugc3dvcmQgb2YgdGh1bmRlcidzIGFjdGlvbiB0byBiYmUgdGhlIHNhbWUgYXMgb3RoZXIgc3dvcmRzICgxNilcbiAgcm9tLml0ZW1HZXRzWzB4MDNdLmFjcXVpc2l0aW9uQWN0aW9uLmFjdGlvbiA9IDB4MTY7XG59XG5cbmZ1bmN0aW9uIGFkanVzdEl0ZW1OYW1lcyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgaWYgKGZsYWdzLmxlYXRoZXJCb290c0dpdmVTcGVlZCgpKSB7XG4gICAgLy8gcmVuYW1lIGxlYXRoZXIgYm9vdHMgdG8gc3BlZWQgYm9vdHNcbiAgICBjb25zdCBsZWF0aGVyQm9vdHMgPSByb20uaXRlbXNbMHgyZl0hO1xuICAgIGxlYXRoZXJCb290cy5tZW51TmFtZSA9ICdTcGVlZCBCb290cyc7XG4gICAgbGVhdGhlckJvb3RzLm1lc3NhZ2VOYW1lID0gJ1NwZWVkIEJvb3RzJztcbiAgICBpZiAoZmxhZ3MuY2hhbmdlR2FzTWFza1RvSGF6bWF0U3VpdCgpKSB7XG4gICAgICBjb25zdCBnYXNNYXNrID0gcm9tLml0ZW1zWzB4MjldO1xuICAgICAgZ2FzTWFzay5tZW51TmFtZSA9ICdIYXptYXQgU3VpdCc7XG4gICAgICBnYXNNYXNrLm1lc3NhZ2VOYW1lID0gJ0hhem1hdCBTdWl0JztcbiAgICB9XG4gIH1cblxuICAvLyByZW5hbWUgYmFsbHMgdG8gb3Jic1xuICBmb3IgKGxldCBpID0gMHgwNTsgaSA8IDB4MGM7IGkgKz0gMikge1xuICAgIHJvbS5pdGVtc1tpXS5tZW51TmFtZSA9IHJvbS5pdGVtc1tpXS5tZW51TmFtZS5yZXBsYWNlKCdCYWxsJywgJ09yYicpO1xuICAgIHJvbS5pdGVtc1tpXS5tZXNzYWdlTmFtZSA9IHJvbS5pdGVtc1tpXS5tZXNzYWdlTmFtZS5yZXBsYWNlKCdCYWxsJywgJ09yYicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VCcmFjZWxldHNQcm9ncmVzc2l2ZShyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtCYWxsT2ZXaW5kLCBUb3JuYWRvQnJhY2VsZXR9LFxuICAgIG5wY3M6IHtUb3JuZWx9LFxuICB9ID0gcm9tO1xuICAvLyB0b3JuZWwncyB0cmlnZ2VyIG5lZWRzIGJvdGggaXRlbXNcbiAgY29uc3QgdmFuaWxsYSA9IFRvcm5lbC5sb2NhbERpYWxvZ3MuZ2V0KDB4MjEpITtcbiAgY29uc3QgcGF0Y2hlZCA9IFtcbiAgICB2YW5pbGxhWzBdLCAvLyBhbHJlYWR5IGxlYXJuZWQgdGVsZXBvcnRcbiAgICB2YW5pbGxhWzJdLCAvLyBkb24ndCBoYXZlIHRvcm5hZG8gYnJhY2VsZXRcbiAgICB2YW5pbGxhWzJdLmNsb25lKCksIC8vIHdpbGwgY2hhbmdlIHRvIGRvbid0IGhhdmUgb3JiXG4gICAgdmFuaWxsYVsxXSwgLy8gaGF2ZSBicmFjZWxldCwgbGVhcm4gdGVsZXBvcnRcbiAgXTtcbiAgcGF0Y2hlZFsxXS5jb25kaXRpb24gPSB+VG9ybmFkb0JyYWNlbGV0LmlkOyAvLyBkb24ndCBoYXZlIGJyYWNlbGV0XG4gIHBhdGNoZWRbMl0uY29uZGl0aW9uID0gfkJhbGxPZldpbmQuaWQ7IC8vIGRvbid0IGhhdmUgb3JiXG4gIHBhdGNoZWRbM10uY29uZGl0aW9uID0gfjA7ICAgICAvLyBkZWZhdWx0XG4gIFRvcm5lbC5sb2NhbERpYWxvZ3Muc2V0KDB4MjEsIHBhdGNoZWQpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGlmeUludmlzaWJsZUNoZXN0cyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7Q29yZGVsUGxhaW5FYXN0LCBLaXJpc2FNZWFkb3csIFVuZGVyZ3JvdW5kQ2hhbm5lbH0gPSByb20ubG9jYXRpb25zO1xuICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIFtDb3JkZWxQbGFpbkVhc3QsIEtpcmlzYU1lYWRvdywgVW5kZXJncm91bmRDaGFubmVsXSkge1xuICAgIGZvciAoY29uc3Qgc3Bhd24gb2YgbG9jYXRpb24uc3Bhd25zKSB7XG4gICAgICAvLyBzZXQgdGhlIG5ldyBcImludmlzaWJsZVwiIGZsYWcgb24gdGhlIGNoZXN0LlxuICAgICAgaWYgKHNwYXduLmlzQ2hlc3QoKSkgc3Bhd24uZGF0YVsyXSB8PSAweDIwO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgdGhlIHN0YXR1ZSBvZiBvbnl4IGFuZCBwb3NzaWJseSB0aGUgdGVsZXBvcnQgYmxvY2sgdHJpZ2dlciB0byBDb3JkZWwgV2VzdFxuZnVuY3Rpb24gYWRkQ29yZGVsV2VzdFRyaWdnZXJzKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCkge1xuICBjb25zdCB7Q29yZGVsUGxhaW5FYXN0LCBDb3JkZWxQbGFpbldlc3R9ID0gcm9tLmxvY2F0aW9ucztcbiAgZm9yIChjb25zdCBzcGF3biBvZiBDb3JkZWxQbGFpbkVhc3Quc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzQ2hlc3QoKSB8fCAoZmxhZ3MuZGlzYWJsZVRlbGVwb3J0U2tpcCgpICYmIHNwYXduLmlzVHJpZ2dlcigpKSkge1xuICAgICAgLy8gQ29weSBpZiAoMSkgaXQncyB0aGUgY2hlc3QsIG9yICgyKSB3ZSdyZSBkaXNhYmxpbmcgdGVsZXBvcnQgc2tpcFxuICAgICAgQ29yZGVsUGxhaW5XZXN0LnNwYXducy5wdXNoKHNwYXduLmNsb25lKCkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaXhSYWJiaXRTa2lwKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2Ygcm9tLmxvY2F0aW9ucy5NdFNhYnJlTm9ydGhfTWFpbi5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4ODYpIHtcbiAgICAgIGlmIChzcGF3bi54ID09PSAweDc0MCkge1xuICAgICAgICBzcGF3bi54ICs9IDE2O1xuICAgICAgICBzcGF3bi55ICs9IDE2O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRUb3dlckV4aXQocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge1Rvd2VyRW50cmFuY2UsIENyeXB0X1RlbGVwb3J0ZXJ9ID0gcm9tLmxvY2F0aW9ucztcbiAgY29uc3QgZW50cmFuY2UgPSBDcnlwdF9UZWxlcG9ydGVyLmVudHJhbmNlcy5sZW5ndGg7XG4gIGNvbnN0IGRlc3QgPSBDcnlwdF9UZWxlcG9ydGVyLmlkO1xuICBDcnlwdF9UZWxlcG9ydGVyLmVudHJhbmNlcy5wdXNoKEVudHJhbmNlLm9mKHt0aWxlOiAweDY4fSkpO1xuICBUb3dlckVudHJhbmNlLmV4aXRzLnB1c2goRXhpdC5vZih7dGlsZTogMHg1NywgZGVzdCwgZW50cmFuY2V9KSk7XG4gIFRvd2VyRW50cmFuY2UuZXhpdHMucHVzaChFeGl0Lm9mKHt0aWxlOiAweDU4LCBkZXN0LCBlbnRyYW5jZX0pKTtcbn1cblxuLy8gUHJvZ3JhbW1hdGljYWxseSBhZGQgYSBob2xlIGJldHdlZW4gdmFsbGV5IG9mIHdpbmQgYW5kIGxpbWUgdHJlZSB2YWxsZXlcbmZ1bmN0aW9uIGNvbm5lY3RMaW1lVHJlZVRvTGVhZihyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7VmFsbGV5T2ZXaW5kLCBMaW1lVHJlZVZhbGxleX0gPSByb20ubG9jYXRpb25zO1xuXG4gIFZhbGxleU9mV2luZC5zY3JlZW5zWzVdWzRdID0gMHgxMDsgLy8gbmV3IGV4aXRcbiAgTGltZVRyZWVWYWxsZXkuc2NyZWVuc1sxXVswXSA9IDB4MWE7IC8vIG5ldyBleGl0XG4gIExpbWVUcmVlVmFsbGV5LnNjcmVlbnNbMl1bMF0gPSAweDBjOyAvLyBuaWNlciBtb3VudGFpbnNcblxuICBjb25zdCB3aW5kRW50cmFuY2UgPVxuICAgICAgVmFsbGV5T2ZXaW5kLmVudHJhbmNlcy5wdXNoKEVudHJhbmNlLm9mKHt4OiAweDRlZiwgeTogMHg1Nzh9KSkgLSAxO1xuICBjb25zdCBsaW1lRW50cmFuY2UgPVxuICAgICAgTGltZVRyZWVWYWxsZXkuZW50cmFuY2VzLnB1c2goRW50cmFuY2Uub2Yoe3g6IDB4MDEwLCB5OiAweDFjMH0pKSAtIDE7XG5cbiAgVmFsbGV5T2ZXaW5kLmV4aXRzLnB1c2goXG4gICAgICBFeGl0Lm9mKHt4OiAweDRmMCwgeTogMHg1NjAsIGRlc3Q6IDB4NDIsIGVudHJhbmNlOiBsaW1lRW50cmFuY2V9KSxcbiAgICAgIEV4aXQub2Yoe3g6IDB4NGYwLCB5OiAweDU3MCwgZGVzdDogMHg0MiwgZW50cmFuY2U6IGxpbWVFbnRyYW5jZX0pKTtcbiAgTGltZVRyZWVWYWxsZXkuZXhpdHMucHVzaChcbiAgICAgIEV4aXQub2Yoe3g6IDB4MDAwLCB5OiAweDFiMCwgZGVzdDogMHgwMywgZW50cmFuY2U6IHdpbmRFbnRyYW5jZX0pLFxuICAgICAgRXhpdC5vZih7eDogMHgwMDAsIHk6IDB4MWMwLCBkZXN0OiAweDAzLCBlbnRyYW5jZTogd2luZEVudHJhbmNlfSkpO1xufVxuXG5mdW5jdGlvbiBjbG9zZUNhdmVFbnRyYW5jZXMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KTogdm9pZCB7XG4gIC8vIERlc3RydWN0dXJlIG91dCBhIGZldyBsb2NhdGlvbnMgYnkgbmFtZVxuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtBbHdheXNUcnVlfSxcbiAgICBsb2NhdGlvbnM6IHtcbiAgICAgIENvcmRlbFBsYWluRWFzdCxcbiAgICAgIENvcmRlbFBsYWluV2VzdCxcbiAgICAgIERlc2VydDIsXG4gICAgICBHb2FWYWxsZXksXG4gICAgICBLaXJpc2FNZWFkb3csXG4gICAgICBMaW1lVHJlZVZhbGxleSxcbiAgICAgIFNhaGFyYU91dHNpZGVDYXZlLFxuICAgICAgVmFsbGV5T2ZXaW5kLFxuICAgICAgV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsXG4gICAgICBXYXRlcmZhbGxWYWxsZXlTb3V0aCxcbiAgICB9LFxuICB9ID0gcm9tO1xuXG4gIC8vIFByZXZlbnQgc29mdGxvY2sgZnJvbSBleGl0aW5nIHNlYWxlZCBjYXZlIGJlZm9yZSB3aW5kbWlsbCBzdGFydGVkXG4gIFZhbGxleU9mV2luZC5lbnRyYW5jZXNbMV0ueSArPSAxNjtcblxuICAvLyBDbGVhciB0aWxlcyAxLDIsMyw0IGZvciBibG9ja2FibGUgY2F2ZXMgaW4gdGlsZXNldHMgOTAsIDk0LCBhbmQgOWNcbiAgcm9tLnN3YXBNZXRhdGlsZXMoWzB4OTBdLFxuICAgICAgICAgICAgICAgICAgICBbMHgwNywgWzB4MDEsIDB4MDBdLCB+MHhjMV0sXG4gICAgICAgICAgICAgICAgICAgIFsweDBlLCBbMHgwMiwgMHgwMF0sIH4weGMxXSxcbiAgICAgICAgICAgICAgICAgICAgWzB4MjAsIFsweDAzLCAweDBhXSwgfjB4ZDddLFxuICAgICAgICAgICAgICAgICAgICBbMHgyMSwgWzB4MDQsIDB4MGFdLCB+MHhkN10pO1xuICByb20uc3dhcE1ldGF0aWxlcyhbMHg5NCwgMHg5Y10sXG4gICAgICAgICAgICAgICAgICAgIFsweDY4LCBbMHgwMSwgMHgwMF0sIH4weGMxXSxcbiAgICAgICAgICAgICAgICAgICAgWzB4ODMsIFsweDAyLCAweDAwXSwgfjB4YzFdLFxuICAgICAgICAgICAgICAgICAgICBbMHg4OCwgWzB4MDMsIDB4MGFdLCB+MHhkN10sXG4gICAgICAgICAgICAgICAgICAgIFsweDg5LCBbMHgwNCwgMHgwYV0sIH4weGQ3XSk7XG5cbiAgLy8gTm93IHJlcGxhY2UgdGhlIHRpbGVzIHdpdGggdGhlIGJsb2NrYWJsZSBvbmVzXG4gIHJvbS5zY3JlZW5zWzB4MGFdLnRpbGVzWzB4MzhdID0gMHgwMTtcbiAgcm9tLnNjcmVlbnNbMHgwYV0udGlsZXNbMHgzOV0gPSAweDAyO1xuICByb20uc2NyZWVuc1sweDBhXS50aWxlc1sweDQ4XSA9IDB4MDM7XG4gIHJvbS5zY3JlZW5zWzB4MGFdLnRpbGVzWzB4NDldID0gMHgwNDtcblxuICByb20uc2NyZWVuc1sweDE1XS50aWxlc1sweDc5XSA9IDB4MDE7XG4gIHJvbS5zY3JlZW5zWzB4MTVdLnRpbGVzWzB4N2FdID0gMHgwMjtcbiAgcm9tLnNjcmVlbnNbMHgxNV0udGlsZXNbMHg4OV0gPSAweDAzO1xuICByb20uc2NyZWVuc1sweDE1XS50aWxlc1sweDhhXSA9IDB4MDQ7XG5cbiAgcm9tLnNjcmVlbnNbMHgxOV0udGlsZXNbMHg0OF0gPSAweDAxO1xuICByb20uc2NyZWVuc1sweDE5XS50aWxlc1sweDQ5XSA9IDB4MDI7XG4gIHJvbS5zY3JlZW5zWzB4MTldLnRpbGVzWzB4NThdID0gMHgwMztcbiAgcm9tLnNjcmVlbnNbMHgxOV0udGlsZXNbMHg1OV0gPSAweDA0O1xuXG4gIHJvbS5zY3JlZW5zWzB4M2VdLnRpbGVzWzB4NTZdID0gMHgwMTtcbiAgcm9tLnNjcmVlbnNbMHgzZV0udGlsZXNbMHg1N10gPSAweDAyO1xuICByb20uc2NyZWVuc1sweDNlXS50aWxlc1sweDY2XSA9IDB4MDM7XG4gIHJvbS5zY3JlZW5zWzB4M2VdLnRpbGVzWzB4NjddID0gMHgwNDtcblxuICAvLyBOT1RFOiBmbGFnIDJmMCBpcyBBTFdBWVMgc2V0IC0gdXNlIGl0IGFzIGEgYmFzZWxpbmUuXG4gIGNvbnN0IGZsYWdzVG9DbGVhcjogW0xvY2F0aW9uLCBudW1iZXJdW10gPSBbXG4gICAgW1ZhbGxleU9mV2luZCwgMHgzMF0sIC8vIHZhbGxleSBvZiB3aW5kLCB6ZWJ1J3MgY2F2ZVxuICAgIFtDb3JkZWxQbGFpbldlc3QsIDB4MzBdLCAvLyBjb3JkZWwgd2VzdCwgdmFtcGlyZSBjYXZlXG4gICAgW0NvcmRlbFBsYWluRWFzdCwgMHgzMF0sIC8vIGNvcmRlbCBlYXN0LCB2YW1waXJlIGNhdmVcbiAgICBbV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsIDB4MDBdLCAvLyB3YXRlcmZhbGwgbm9ydGgsIHByaXNvbiBjYXZlXG4gICAgW1dhdGVyZmFsbFZhbGxleU5vcnRoLCAweDE0XSwgLy8gd2F0ZXJmYWxsIG5vcnRoLCBmb2cgbGFtcFxuICAgIFtXYXRlcmZhbGxWYWxsZXlTb3V0aCwgMHg3NF0sIC8vIHdhdGVyZmFsbCBzb3V0aCwga2lyaXNhXG4gICAgW0tpcmlzYU1lYWRvdywgMHgxMF0sIC8vIGtpcmlzYSBtZWFkb3dcbiAgICBbU2FoYXJhT3V0c2lkZUNhdmUsIDB4MDBdLCAvLyBjYXZlIHRvIGRlc2VydFxuICAgIFtEZXNlcnQyLCAweDQxXSxcbiAgXTtcbiAgaWYgKGZsYWdzLmFkZEVhc3RDYXZlKCkgJiYgZmxhZ3MuY29ubmVjdExpbWVUcmVlVG9MZWFmKCkpIHtcbiAgICBmbGFnc1RvQ2xlYXIucHVzaChbTGltZVRyZWVWYWxsZXksIDB4MTBdKTtcbiAgfVxuICBpZiAoZmxhZ3MuY29ubmVjdEdvYVRvTGVhZigpKSB7XG4gICAgZmxhZ3NUb0NsZWFyLnB1c2goW0dvYVZhbGxleSwgMHgwMV0pO1xuICB9XG4gIGZvciAoY29uc3QgW2xvYywgeXhdIG9mIGZsYWdzVG9DbGVhcikge1xuICAgIGxvYy5mbGFncy5wdXNoKEZsYWcub2Yoe3l4LCBmbGFnOiBBbHdheXNUcnVlLmlkfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVwbGFjZUZsYWcobG9jOiBMb2NhdGlvbiwgeXg6IG51bWJlciwgZmxhZzogbnVtYmVyKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBmIG9mIGxvYy5mbGFncykge1xuICAgICAgaWYgKGYueXggPT09IHl4KSB7XG4gICAgICAgIGYuZmxhZyA9IGZsYWc7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBmbGFnIHRvIHJlcGxhY2UgYXQgJHtsb2N9OiR7eXh9YCk7XG4gIH07XG5cbiAgaWYgKGZsYWdzLnBhcmFseXNpc1JlcXVpcmVzUHJpc29uS2V5KCkpIHsgLy8gY2xvc2Ugb2ZmIHJldmVyc2UgZW50cmFuY2VzXG4gICAgLy8gTk9URTogd2UgY291bGQgYWxzbyBjbG9zZSBpdCBvZmYgdW50aWwgYm9zcyBraWxsZWQuLi4/XG4gICAgLy8gIC0gY29uc3QgdmFtcGlyZUZsYWcgPSB+cm9tLm5wY1NwYXduc1sweGMwXS5jb25kaXRpb25zWzB4MGFdWzBdO1xuICAgIC8vICAtPiBrZWxiZXNxdWUgZm9yIHRoZSBvdGhlciBvbmUuXG4gICAgY29uc3Qgd2luZG1pbGxGbGFnID0gMHgyZWU7XG4gICAgcmVwbGFjZUZsYWcoQ29yZGVsUGxhaW5XZXN0LCAweDMwLCB3aW5kbWlsbEZsYWcpO1xuICAgIHJlcGxhY2VGbGFnKENvcmRlbFBsYWluRWFzdCwgMHgzMCwgd2luZG1pbGxGbGFnKTtcblxuICAgIHJlcGxhY2VGbGFnKFdhdGVyZmFsbFZhbGxleU5vcnRoLCAweDAwLCAweDJkOCk7IC8vIGtleSB0byBwcmlzb24gZmxhZ1xuICAgIGNvbnN0IGV4cGxvc2lvbiA9IFNwYXduLm9mKHt5OiAweDA2MCwgeDogMHgwNjAsIHR5cGU6IDQsIGlkOiAweDJjfSk7XG4gICAgY29uc3Qga2V5VHJpZ2dlciA9IFNwYXduLm9mKHt5OiAweDA3MCwgeDogMHgwNzAsIHR5cGU6IDIsIGlkOiAweGFkfSk7XG4gICAgV2F0ZXJmYWxsVmFsbGV5Tm9ydGguc3Bhd25zLnNwbGljZSgxLCAwLCBleHBsb3Npb24pO1xuICAgIFdhdGVyZmFsbFZhbGxleU5vcnRoLnNwYXducy5wdXNoKGtleVRyaWdnZXIpO1xuICB9XG5cbiAgLy8gcm9tLmxvY2F0aW9uc1sweDE0XS50aWxlRWZmZWN0cyA9IDB4YjM7XG5cbiAgLy8gZDcgZm9yIDM/XG5cbiAgLy8gVE9ETyAtIHRoaXMgZW5kZWQgdXAgd2l0aCBtZXNzYWdlIDAwOjAzIGFuZCBhbiBhY3Rpb24gdGhhdCBnYXZlIGJvdyBvZiBtb29uIVxuXG4gIC8vIHJvbS50cmlnZ2Vyc1sweDE5XS5tZXNzYWdlLnBhcnQgPSAweDFiO1xuICAvLyByb20udHJpZ2dlcnNbMHgxOV0ubWVzc2FnZS5pbmRleCA9IDB4MDg7XG4gIC8vIHJvbS50cmlnZ2Vyc1sweDE5XS5mbGFncy5wdXNoKDB4MmY2LCAweDJmNywgMHgyZjgpO1xufVxuXG5mdW5jdGlvbiBlYXN0Q2F2ZShyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgLy8gVE9ETyBmaWxsIHVwIGdyYXBoaWNzLCBldGMgLS0+ICQxYSwgJDFiLCAkMDUgLyAkODgsICRiNSAvICQxNCwgJDAyXG4gIC8vIFRoaW5rIGFvYnV0IGV4aXRzIGFuZCBlbnRyYW5jZXMuLi4/XG5cbiAgY29uc3Qge1ZhbGxleU9mV2luZCwgTGltZVRyZWVWYWxsZXksIFNlYWxlZENhdmUxfSA9IHJvbS5sb2NhdGlvbnM7XG5cbiAgY29uc3QgbG9jMSA9IHJvbS5sb2NhdGlvbnMuYWxsb2NhdGUocm9tLmxvY2F0aW9ucy5FYXN0Q2F2ZTEpO1xuICBjb25zdCBsb2MyID0gcm9tLmxvY2F0aW9ucy5hbGxvY2F0ZShyb20ubG9jYXRpb25zLkVhc3RDYXZlMik7XG4gIGNvbnN0IGxvYzMgPSByb20ubG9jYXRpb25zLkVhc3RDYXZlMztcblxuICAvLyBOT1RFOiAweDljIGNhbiBiZWNvbWUgMHg5OSBpbiB0b3AgbGVmdCBvciAweDk3IGluIHRvcCByaWdodCBvciBib3R0b20gbWlkZGxlIGZvciBhIGNhdmUgZXhpdFxuICBsb2MxLnNjcmVlbnMgPSBbWzB4OWMsIDB4ODQsIDB4ODAsIDB4ODMsIDB4OWNdLFxuICAgICAgICAgICAgICAgICAgWzB4ODAsIDB4ODEsIDB4ODMsIDB4ODYsIDB4ODBdLFxuICAgICAgICAgICAgICAgICAgWzB4ODMsIDB4ODgsIDB4ODksIDB4ODAsIDB4ODBdLFxuICAgICAgICAgICAgICAgICAgWzB4ODEsIDB4OGMsIDB4ODUsIDB4ODIsIDB4ODRdLFxuICAgICAgICAgICAgICAgICAgWzB4OWUsIDB4ODUsIDB4OWMsIDB4OTgsIDB4ODZdXTtcblxuICBsb2MyLnNjcmVlbnMgPSBbWzB4OWMsIDB4ODQsIDB4OWIsIDB4ODAsIDB4OWJdLFxuICAgICAgICAgICAgICAgICAgWzB4ODAsIDB4ODEsIDB4ODEsIDB4ODAsIDB4ODFdLFxuICAgICAgICAgICAgICAgICAgWzB4ODAsIDB4ODcsIDB4OGIsIDB4OGEsIDB4ODZdLFxuICAgICAgICAgICAgICAgICAgWzB4ODAsIDB4OGMsIDB4ODAsIDB4ODUsIDB4ODRdLFxuICAgICAgICAgICAgICAgICAgWzB4OWMsIDB4ODYsIDB4ODAsIDB4ODAsIDB4OWFdXTtcblxuICBmb3IgKGNvbnN0IGwgb2YgW2xvYzEsIGxvYzIsIGxvYzNdKSB7XG4gICAgbC5iZ20gPSAweDE3OyAvLyBtdCBzYWJyZSBjYXZlIG11c2ljP1xuICAgIGwuZW50cmFuY2VzID0gW107XG4gICAgbC5leGl0cyA9IFtdO1xuICAgIGwucGl0cyA9IFtdO1xuICAgIGwuc3Bhd25zID0gW107XG4gICAgbC5mbGFncyA9IFtdO1xuICAgIGwuaGVpZ2h0ID0gbC5zY3JlZW5zLmxlbmd0aDtcbiAgICBsLndpZHRoID0gbC5zY3JlZW5zWzBdLmxlbmd0aDtcbiAgICBsLmV4dGVuZGVkID0gMDtcbiAgICBsLnRpbGVQYWxldHRlcyA9IFsweDFhLCAweDFiLCAweDA1XTsgLy8gcm9jayB3YWxsXG4gICAgbC50aWxlc2V0ID0gMHg4ODtcbiAgICBsLnRpbGVFZmZlY3RzID0gMHhiNTtcbiAgICBsLnRpbGVQYXR0ZXJucyA9IFsweDE0LCAweDAyXTtcbiAgICBsLnNwcml0ZVBhdHRlcm5zID0gWy4uLlNlYWxlZENhdmUxLnNwcml0ZVBhdHRlcm5zXSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuICAgIGwuc3ByaXRlUGFsZXR0ZXMgPSBbLi4uU2VhbGVkQ2F2ZTEuc3ByaXRlUGFsZXR0ZXNdIGFzIFtudW1iZXIsIG51bWJlcl07XG4gIH1cblxuICAvLyBBZGQgZW50cmFuY2UgdG8gdmFsbGV5IG9mIHdpbmRcbiAgLy8gVE9ETyAtIG1heWJlIGp1c3QgZG8gKDB4MzMsIFtbMHgxOV1dKSBvbmNlIHdlIGZpeCB0aGF0IHNjcmVlbiBmb3IgZ3Jhc3NcbiAgVmFsbGV5T2ZXaW5kLndyaXRlU2NyZWVuczJkKDB4MjMsIFtcbiAgICBbMHgxMSwgMHgwZF0sXG4gICAgWzB4MDksIDB4YzJdXSk7XG4gIHJvbS50aWxlRWZmZWN0c1swXS5lZmZlY3RzWzB4YzBdID0gMDtcbiAgLy8gVE9ETyAtIGRvIHRoaXMgb25jZSB3ZSBmaXggdGhlIHNlYSB0aWxlc2V0XG4gIC8vIHJvbS5zY3JlZW5zWzB4YzJdLnRpbGVzWzB4NWFdID0gMHgwYTtcbiAgLy8gcm9tLnNjcmVlbnNbMHhjMl0udGlsZXNbMHg1Yl0gPSAweDBhO1xuXG4gIC8vIENvbm5lY3QgbWFwc1xuICBsb2MxLmNvbm5lY3QoMHg0MywgbG9jMiwgMHg0NCk7XG4gIGxvYzEuY29ubmVjdCgweDQwLCBWYWxsZXlPZldpbmQsIDB4MzQpO1xuXG4gIGlmIChmbGFncy5jb25uZWN0TGltZVRyZWVUb0xlYWYoKSkge1xuICAgIC8vIEFkZCBlbnRyYW5jZSB0byBsaW1lIHRyZWUgdmFsbGV5XG4gICAgTGltZVRyZWVWYWxsZXkucmVzaXplU2NyZWVucygwLCAxLCAwLCAwKTsgLy8gYWRkIG9uZSBzY3JlZW4gdG8gbGVmdCBlZGdlXG4gICAgTGltZVRyZWVWYWxsZXkud3JpdGVTY3JlZW5zMmQoMHgwMCwgW1xuICAgICAgWzB4MGMsIDB4MTFdLFxuICAgICAgWzB4MTUsIDB4MzZdLFxuICAgICAgWzB4MGUsIDB4MGZdXSk7XG4gICAgbG9jMS5zY3JlZW5zWzBdWzRdID0gMHg5NzsgLy8gZG93biBzdGFpclxuICAgIGxvYzEuY29ubmVjdCgweDA0LCBMaW1lVHJlZVZhbGxleSwgMHgxMCk7XG4gIH1cblxuICAvLyBBZGQgbW9uc3RlcnNcbiAgbG9jMS5zcGF3bnMucHVzaChcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDIxLCB0aWxlOiAweDg3LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MTIsIHRpbGU6IDB4ODgsIHRpbWVkOiBmYWxzZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MTMsIHRpbGU6IDB4ODksIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgzMiwgdGlsZTogMHg2OCwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHg0MSwgdGlsZTogMHg4OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDMzLCB0aWxlOiAweDk4LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MDMsIHRpbGU6IDB4ODgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICk7XG4gIGxvYzIuc3Bhd25zLnB1c2goXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgwMSwgdGlsZTogMHg4OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDExLCB0aWxlOiAweDQ4LCB0aW1lZDogZmFsc2UsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDEyLCB0aWxlOiAweDc3LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MTQsIHRpbGU6IDB4MjgsIHRpbWVkOiBmYWxzZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MjMsIHRpbGU6IDB4ODUsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgzMSwgdGlsZTogMHg4OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDMzLCB0aWxlOiAweDhhLCB0aW1lZDogZmFsc2UsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDM0LCB0aWxlOiAweDk4LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4NDEsIHRpbGU6IDB4ODIsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICk7XG4gIGlmICghZmxhZ3MuemVidVN0dWRlbnRHaXZlc0l0ZW0oKSkge1xuICAgIC8vIGNoZXN0OiBhbGFybSBmbHV0ZVxuICAgIGxvYzIuc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3k6IDB4MTEwLCB4OiAweDQ3OCwgdHlwZTogMiwgaWQ6IDB4MzF9KSk7XG4gIH1cbiAgaWYgKGZsYWdzLmFkZEV4dHJhQ2hlY2tzVG9FYXN0Q2F2ZSgpKSB7XG4gICAgLy8gY2hlc3Q6IG1lZGljYWwgaGVyYlxuICAgIGxvYzIuc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3k6IDB4MTEwLCB4OiAweDQ3OCwgdHlwZTogMiwgaWQ6IDB4NTl9KSk7XG4gICAgLy8gY2hlc3Q6IG1pbWljXG4gICAgbG9jMi5zcGF3bnMucHVzaChTcGF3bi5vZih7eTogMHgwNzAsIHg6IDB4MTA4LCB0eXBlOiAyLCBpZDogMHg3MH0pKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjb25uZWN0R29hVG9MZWFmKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtHb2FWYWxsZXksIEVhc3RDYXZlMiwgRWFzdENhdmUzfSA9IHJvbS5sb2NhdGlvbnM7XG4gIC8vIEFkZCBhIG5ldyBjYXZlIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgR29hIFZhbGxleS5cbiAgR29hVmFsbGV5LndyaXRlU2NyZWVuczJkKDB4MDAsIFtcbiAgICAgIFsweDBjLCAweGMxLCAweDBkXSxcbiAgICAgIFsweDBlLCAweDM3LCAweDM1XV0pO1xuICAvLyBBZGQgYW4gZXh0cmEgZG93bi1zdGFpciB0byBFYXN0Q2F2ZTIgYW5kIGEgbmV3IDMtc2NyZWVuIEVhc3RDYXZlMyBtYXAuXG5cbiAgcm9tLmxvY2F0aW9ucy5hbGxvY2F0ZShFYXN0Q2F2ZTMpO1xuICBFYXN0Q2F2ZTMuc2NyZWVucyA9IFtbMHg5YV0sXG4gICAgICAgICAgICAgICAgICAgICAgIFsweDhmXSxcbiAgICAgICAgICAgICAgICAgICAgICAgWzB4OWVdXTtcbiAgRWFzdENhdmUzLmhlaWdodCA9IDM7XG4gIEVhc3RDYXZlMy53aWR0aCA9IDE7XG5cbiAgLy8gQWRkIGEgcm9jayB3YWxsIChpZD0wKS5cbiAgRWFzdENhdmUzLnNwYXducy5wdXNoKFNwYXduLmZyb20oWzB4MTgsIDB4MDcsIDB4MjMsIDB4MDBdKSk7XG4gIEVhc3RDYXZlMy5mbGFncy5wdXNoKEZsYWcub2Yoe3NjcmVlbjogMHgxMCwgZmxhZzogcm9tLmZsYWdzLmFsbG9jKDB4MjAwKX0pKTtcblxuICAvLyBNYWtlIHRoZSBjb25uZWN0aW9ucy5cbiAgRWFzdENhdmUyLnNjcmVlbnNbNF1bMF0gPSAweDk5O1xuICBFYXN0Q2F2ZTIuY29ubmVjdCgweDQwLCBFYXN0Q2F2ZTMsIH4weDAwKTtcbiAgRWFzdENhdmUzLmNvbm5lY3QoMHgyMCwgR29hVmFsbGV5LCAweDAxKTtcbn1cblxuZnVuY3Rpb24gcGF0Y2hUb29NYW55SXRlbXNNZXNzYWdlKHJvbTogUm9tKSB7XG4gIHJvbS5tZXNzYWdlcy5wYXJ0c1sweDIwXVsweDBmXS50ZXh0ICs9ICdcXG5JdGVtOiBbOklURU06XSc7XG59XG5cbmZ1bmN0aW9uIGFkZFpvbWJpZVdhcnAocm9tOiBSb20pIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7V2FycFpvbWJpZX0sXG4gICAgbG9jYXRpb25zOiB7Wm9tYmllVG93bn0sXG4gIH0gPSByb207XG4gIC8vIE1ha2Ugc3BhY2UgZm9yIHRoZSBuZXcgZmxhZyBiZXR3ZWVuIEpvZWwgYW5kIFN3YW5cbiAgcm9tLmZsYWdzLmluc2VydFpvbWJpZVdhcnBGbGFnKCk7XG4gIC8vIFVwZGF0ZSB0aGUgbWVudVxuICBjb25zdCBtZXNzYWdlID0gcm9tLm1lc3NhZ2VzLnBhcnRzWzB4MjFdWzBdO1xuICBtZXNzYWdlLnRleHQgPSBbXG4gICAgJyB7MWE6TGVhZn0gICAgICB7MTY6QnJ5bm1hZXJ9IHsxZDpPYWt9ICcsXG4gICAgJ3swYzpOYWRhcmV9XFwncyAgezFlOlBvcnRvYX0gICB7MTQ6QW1hem9uZXN9ICcsXG4gICAgJ3sxOTpKb2VsfSAgICAgIFpvbWJpZSAgIHsyMDpTd2FufSAnLFxuICAgICd7MjM6U2h5cm9ufSAgICB7MTg6R29hfSAgICAgIHsyMTpTYWhhcmF9JyxcbiAgXS5qb2luKCdcXG4nKTtcbiAgLy8gQWRkIGEgdHJpZ2dlciB0byB0aGUgZW50cmFuY2UgLSB0aGVyZSdzIGFscmVhZHkgYSBzcGF3biBmb3IgOGFcbiAgLy8gYnV0IHdlIGNhbid0IHJldXNlIHRoYXQgc2luY2UgaXQncyB0aGUgc2FtZSBhcyB0aGUgb25lIG91dHNpZGVcbiAgLy8gdGhlIG1haW4gRVNJIGVudHJhbmNlOyBzbyByZXVzZSBhIGRpZmZlcmVudCBvbmUuXG4gIGNvbnN0IHRyaWdnZXIgPSByb20ubmV4dEZyZWVUcmlnZ2VyKCk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFtdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe30pO1xuICB0cmlnZ2VyLmZsYWdzID0gW1dhcnBab21iaWUuaWRdOyAvLyBuZXcgd2FycCBwb2ludCBmbGFnXG4gIC8vIEFjdHVhbGx5IHJlcGxhY2UgdGhlIHRyaWdnZXIuXG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgWm9tYmllVG93bi5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4OGEpIHtcbiAgICAgIHNwYXduLmlkID0gdHJpZ2dlci5pZDtcbiAgICB9XG4gIH1cbiAgLy8gSW5zZXJ0IGludG8gdGhlIHdhcnAgdGFibGUuXG4gIHJvbS50b3duV2FycC5sb2NhdGlvbnMuc3BsaWNlKDcsIDAsIFpvbWJpZVRvd24uaWQpO1xuICBpZiAocm9tLnRvd25XYXJwLmxvY2F0aW9ucy5wb3AoKSAhPT0gMHhmZikgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkJyk7XG4gIC8vIEFTTSBmaXhlcyBzaG91bGQgaGF2ZSBoYXBwZW5lZCBpbiBwcmVzaHVmZmxlLnNcbn1cblxuZnVuY3Rpb24gZXZpbFNwaXJpdElzbGFuZFJlcXVpcmVzRG9scGhpbihyb206IFJvbSkge1xuICByb20udHJpZ2dlcigweDhhKS5jb25kaXRpb25zID0gW35yb20uZmxhZ3MuQ3VycmVudGx5UmlkaW5nRG9scGhpbi5pZF07XG4gIHJvbS5tZXNzYWdlcy5wYXJ0c1sweDFkXVsweDEwXS50ZXh0ID0gYFRoZSBjYXZlIGVudHJhbmNlIGFwcGVhcnNcbnRvIGJlIHVuZGVyd2F0ZXIuIFlvdSdsbFxubmVlZCB0byBzd2ltLmA7XG59XG5cbmZ1bmN0aW9uIHJldmVyc2libGVTd2FuR2F0ZShyb206IFJvbSkge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtPcGVuZWRTd2FuR2F0ZX0sXG4gICAgbG9jYXRpb25zOiB7U3dhbkdhdGV9LFxuICAgIG5wY3M6IHtTb2xkaWVyR3VhcmR9LFxuICB9ID0gcm9tO1xuICAvLyBBbGxvdyBvcGVuaW5nIFN3YW4gZnJvbSBlaXRoZXIgc2lkZSBieSBhZGRpbmcgYSBwYWlyIG9mIGd1YXJkcyBvbiB0aGVcbiAgLy8gb3Bwb3NpdGUgc2lkZSBvZiB0aGUgZ2F0ZS5cbiAgU3dhbkdhdGUuc3Bhd25zLnB1c2goXG4gICAgLy8gTk9URTogU29sZGllcnMgbXVzdCBjb21lIGluIHBhaXJzICh3aXRoIGluZGV4IF4xIGZyb20gZWFjaCBvdGhlcilcbiAgICBTcGF3bi5vZih7eHQ6IDB4MGEsIHl0OiAweDAyLCB0eXBlOiAxLCBpZDogMHgyZH0pLCAvLyBuZXcgc29sZGllclxuICAgIFNwYXduLm9mKHt4dDogMHgwYiwgeXQ6IDB4MDIsIHR5cGU6IDEsIGlkOiAweDJkfSksIC8vIG5ldyBzb2xkaWVyXG4gICAgLy9TcGF3bi5vZih7eHQ6IDB4MGUsIHl0OiAweDBhLCB0eXBlOiAyLCBpZDogMHhiM30pLCAvLyBuZXcgdHJpZ2dlcjogZXJhc2UgZ3VhcmRzXG4gICk7XG5cbiAgLy8gLy8gTk9URToganVzdCB1c2UgdGhlIGFjdHVhbCBmbGFnIGluc3RlYWQ/XG4gIC8vIC8vIEd1YXJkcyAoJDJkKSBhdCBzd2FuIGdhdGUgKCQ3MykgfiBzZXQgMGVmIGFmdGVyIG9wZW5pbmcgZ2F0ZSA9PiBjb25kaXRpb24gZm9yIGRlc3Bhd25cbiAgLy8gcm9tLm5wY3NbMHgyZF0ubG9jYWxEaWFsb2dzLmdldCgweDczKSFbMF0uZmxhZ3MucHVzaCgweDBlZik7XG4gIC8vIC8vIERlc3Bhd24gZ3VhcmQgdHJpZ2dlciByZXF1aXJlcyAwZWZcbiAgLy8gcm9tLnRyaWdnZXIoMHhiMykuY29uZGl0aW9ucy5wdXNoKDB4MGVmKTtcbiAgU29sZGllckd1YXJkLmxvY2FsRGlhbG9ncy5nZXQoU3dhbkdhdGUuaWQpIVswXS5mbGFncy5wdXNoKE9wZW5lZFN3YW5HYXRlLmlkKTtcbiAgLy9yb20udHJpZ2dlcigweGIzKS5jb25kaXRpb25zLnB1c2goT3BlbmVkU3dhbkdhdGUuaWQpO1xuICAvLyBUT0RPIC0gY2FuIHdlIGRvIGF3YXkgd2l0aCB0aGUgdHJpZ2dlcj8gIEp1c3Qgc3Bhd24gdGhlbSBvbiB0aGUgc2FtZSBjb25kaXRpb24uLi5cbn1cblxuZnVuY3Rpb24gbGVhZkVsZGVySW5TYWJyZUhlYWxzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IGxlYWZFbGRlciA9IHJvbS5ucGNzWzB4MGRdO1xuICBjb25zdCBzdW1taXREaWFsb2cgPSBsZWFmRWxkZXIubG9jYWxEaWFsb2dzLmdldCgweDM1KSFbMF07XG4gIHN1bW1pdERpYWxvZy5tZXNzYWdlLmFjdGlvbiA9IDB4MTc7IC8vIGhlYWwgYW5kIGRpc2FwcGVhci5cbn1cblxuLy8gUHJldmVudCBSYWdlIHNraXAgYnkgYWRkaW5nIHRyZWVzIG9uIGVpdGhlciBzaWRlIG9mIGVudHJhbmNlLlxuLy8gVE9ETyAtIG1ha2UgdGhpcyBvcHRpb25hbD8gYWNjb3VudCBmb3IgaXQgaW4gbG9naWM/XG5mdW5jdGlvbiBwYXRjaExpbWVUcmVlTGFrZShyb206IFJvbSk6IHZvaWQge1xuICByb20uc2NyZWVuc1sweDc0XS5zZXRUaWxlcygweDkwLCBbXG4gICAgWzB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2QsIDB4N2UsXG4gICAgIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2NdLFxuICAgIFsweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCBudWxsLCBudWxsLFxuICAgICAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwXSxcbiAgICBbMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgbnVsbCwgbnVsbCxcbiAgICAgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMF0sXG4gICAgLy8gRGlmZmVyZW50IG9wdGlvbnMgdG8gZmlsbCBpbiB0aGUgc3BhY2VzLi4uXG4gICAgLy8gWzB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzNdLFxuICAgIC8vIFsweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCBudWxsLCBudWxsLFxuICAgIC8vICAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1XSxcbiAgICAvLyBbMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2N10sXG4gICAgLy8gWzB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzBdLFxuICAgIC8vIFsweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCBudWxsLCBudWxsLFxuICAgIC8vICAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmXSxcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHByZXZlbnROcGNEZXNwYXducyhyb206IFJvbSwgb3B0czogRmxhZ1NldCk6IHZvaWQge1xuICBmdW5jdGlvbiByZW1vdmU8VD4oYXJyOiBUW10sIGVsZW06IFQpOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IGFyci5pbmRleE9mKGVsZW0pO1xuICAgIGlmIChpbmRleCA8IDApIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgZWxlbWVudCAke2VsZW19IGluICR7YXJyfWApO1xuICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG4gIGZ1bmN0aW9uIHJlbW92ZUlmPFQ+KGFycjogVFtdLCBwcmVkOiAoZWxlbTogVCkgPT4gYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyLmZpbmRJbmRleChwcmVkKTtcbiAgICBpZiAoaW5kZXggPCAwKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGVsZW1lbnQgaW4gJHthcnJ9YCk7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICAvLyBmdW5jdGlvbiBkaWFsb2coaWQ6IG51bWJlciwgbG9jOiBudW1iZXIgPSAtMSk6IExvY2FsRGlhbG9nW10ge1xuICAvLyAgIGNvbnN0IHJlc3VsdCA9IHJvbS5ucGNzW2lkXS5sb2NhbERpYWxvZ3MuZ2V0KGxvYyk7XG4gIC8vICAgaWYgKCFyZXN1bHQpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBkaWFsb2cgJCR7aGV4KGlkKX0gYXQgJCR7aGV4KGxvYyl9YCk7XG4gIC8vICAgcmV0dXJuIHJlc3VsdDtcbiAgLy8gfVxuICAvLyBmdW5jdGlvbiBzcGF3bnMoaWQ6IG51bWJlciwgbG9jOiBudW1iZXIpOiBudW1iZXJbXSB7XG4gIC8vICAgY29uc3QgcmVzdWx0ID0gcm9tLm5wY3NbaWRdLnNwYXduQ29uZGl0aW9ucy5nZXQobG9jKTtcbiAgLy8gICBpZiAoIXJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHNwYXduIGNvbmRpdGlvbiAkJHtoZXgoaWQpfSBhdCAkJHtoZXgobG9jKX1gKTtcbiAgLy8gICByZXR1cm4gcmVzdWx0O1xuICAvLyB9XG5cbiAgLy8gTGluayBzb21lIHJlZHVuZGFudCBOUENzOiBLZW5zdSAoN2UsIDc0KSBhbmQgQWthaGFuYSAoODgsIDE2KVxuXG4gIGNvbnN0IHtcbiAgICBsb2NhdGlvbnM6IHtcbiAgICAgIEJvYXRIb3VzZSwgQnJ5bm1hZXIsXG4gICAgICBDcnlwdF9EcmF5Z29uMixcbiAgICAgIEpvZWxfU2hlZCxcbiAgICAgIE10U2FicmVOb3J0aF9TdW1taXRDYXZlLCBNdFNhYnJlV2VzdF9VcHBlcixcbiAgICAgIFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLCBQb3J0b2FfQXNpbmFSb29tLCBQb3J0b2FfRm9ydHVuZVRlbGxlcixcbiAgICAgIFNoeXJvbl9UZW1wbGUsIFN0b21Ib3VzZSwgU3dhbl9EYW5jZUhhbGwsIFN3YW5fVGF2ZXJuLFxuICAgICAgV2luZG1pbGxDYXZlLCBXYXRlcmZhbGxDYXZlNCwgV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsXG4gICAgICBaZWJ1Q2F2ZSwgWm9tYmllVG93bl9Ib3VzZUJhc2VtZW50LFxuICAgIH0sXG4gICAgaXRlbXM6IHtcbiAgICAgIEdsb3dpbmdMYW1wLCBLZXlUb1ByaXNvbiwgTG92ZVBlbmRhbnQsIFN0YXR1ZU9mT255eCxcbiAgICB9LFxuICAgIG5wY3M6IHtcbiAgICAgIEFrYWhhbmEgLyogMTYgKi8sIEFrYWhhbmFJbkJyeW5tYWVyLCAvKiA4MiAqLyBBc2luYSAvKiA2MiAqLyxcbiAgICAgIEF6dGVjYUluU2h5cm9uIC8qIDZlICovLFxuICAgICAgQ2xhcmsgLyogNDQgKi8sIERyYXlnb24gLyogY2IgKi8sIEZvcnR1bmVUZWxsZXIgLyogMzkgKi8sXG4gICAgICBLZW5zdSAvKiA3ZSAqLywgS2Vuc3VJbkNhYmluIC8qIDY4ICovLCBLZW5zdUluU3dhbiAvKiA3NCAqLyxcbiAgICAgIExlYWZSYWJiaXQgLyogMTMgKi8sXG4gICAgICBPYWtDaGlsZCAvKiAxZiAqLywgT2FrRWxkZXIgLyogMWQgKi8sIE9ha01vdGhlciAvKiAxZSAqLyxcbiAgICAgIFBvcnRvYVBhbGFjZUZyb250R3VhcmQgLyogMzQgKi8sIFBvcnRvYVF1ZWVuIC8qIDM4ICovLFxuICAgICAgUG9ydG9hVGhyb25lUm9vbUJhY2tEb29yR3VhcmQgLyogMzMgKi8sIFJhZ2UgLyogYzMgKi8sXG4gICAgICBTdG9tIC8qIDYwICovLCBTdG9uZWRBa2FoYW5hIC8qIDg4ICovLFxuICAgICAgVG9ybmVsIC8qIDVmICovLCBXaW5kbWlsbEd1YXJkIC8qIDE0ICovLCBaZWJ1IC8qIDVlICovLFxuICAgIH0sXG4gICAgZmxhZ3MsXG4gIH0gPSByb207XG5cbiAgS2Vuc3UubG9jYWxEaWFsb2dzLmRlbGV0ZShTd2FuX1RhdmVybi5pZCk7IC8vIHVudXNlZCBkaWFsb2dcbiAgS2Vuc3VJblN3YW4ubGluayhLZW5zdS5pZCk7XG4gIEtlbnN1SW5Td2FuLnVzZWQgPSB0cnVlO1xuICBLZW5zdUluU3dhbi5kYXRhID0gWy4uLktlbnN1LmRhdGFdIGFzIGFueTtcbiAgS2Vuc3UuZGF0YVswXSA9IEdsb3dpbmdMYW1wLmlkO1xuICBTd2FuX0RhbmNlSGFsbC5zcGF3bnMuZmluZChzID0+IHMuaXNOcGMoKSAmJiBzLmlkID09PSBLZW5zdS5pZCkhLmlkID1cbiAgICAgIEtlbnN1SW5Td2FuLmlkO1xuICBMb3ZlUGVuZGFudC5pdGVtVXNlRGF0YVswXS53YW50ID0gMHgxMDAgfCBLZW5zdUluU3dhbi5pZDtcblxuICAvLyBkaWFsb2cgaXMgc2hhcmVkIGJldHdlZW4gODggYW5kIDE2LlxuICBTdG9uZWRBa2FoYW5hLmxpbmtEaWFsb2coQWthaGFuYS5pZCk7XG5cbiAgLy8gTWFrZSBhIG5ldyBOUEMgZm9yIEFrYWhhbmEgaW4gQnJ5bm1hZXI7IG90aGVycyB3b24ndCBhY2NlcHQgdGhlIFN0YXR1ZSBvZiBPbnl4LlxuICAvLyBMaW5raW5nIHNwYXduIGNvbmRpdGlvbnMgYW5kIGRpYWxvZ3MgaXMgc3VmZmljaWVudCwgc2luY2UgdGhlIGFjdHVhbCBOUEMgSURcbiAgLy8gKDE2IG9yIDgyKSBpcyB3aGF0IG1hdHRlcnMgZm9yIHRoZSB0cmFkZS1pblxuICBBa2FoYW5hSW5CcnlubWFlci51c2VkID0gdHJ1ZTtcbiAgQWthaGFuYUluQnJ5bm1hZXIubGluayhBa2FoYW5hLmlkKTtcbiAgQWthaGFuYUluQnJ5bm1hZXIuZGF0YSA9IFsuLi5Ba2FoYW5hLmRhdGFdIGFzIGFueTsgLy8gZW5zdXJlIGdpdmUgaXRlbVxuICBCcnlubWFlci5zcGF3bnMuZmluZChzID0+IHMuaXNOcGMoKSAmJiBzLmlkID09PSBBa2FoYW5hLmlkKSEuaWQgPVxuICAgICAgQWthaGFuYUluQnJ5bm1hZXIuaWQ7XG4gIFN0YXR1ZU9mT255eC5pdGVtVXNlRGF0YVswXS53YW50ID0gMHgxMDAgfCBBa2FoYW5hSW5CcnlubWFlci5pZDtcblxuICAvLyBMZWFmIGVsZGVyIGluIGhvdXNlICgkMGQgQCAkYzApIH4gc3dvcmQgb2Ygd2luZCByZWR1bmRhbnQgZmxhZ1xuICAvLyBkaWFsb2coMHgwZCwgMHhjMClbMl0uZmxhZ3MgPSBbXTtcbiAgLy9yb20uaXRlbUdldHNbMHgwMF0uZmxhZ3MgPSBbXTsgLy8gY2xlYXIgcmVkdW5kYW50IGZsYWdcblxuICAvLyBMZWFmIHJhYmJpdCAoJDEzKSBub3JtYWxseSBzdG9wcyBzZXR0aW5nIGl0cyBmbGFnIGFmdGVyIHByaXNvbiBkb29yIG9wZW5lZCxcbiAgLy8gYnV0IHRoYXQgZG9lc24ndCBuZWNlc3NhcmlseSBvcGVuIG10IHNhYnJlLiAgSW5zdGVhZCAoYSkgdHJpZ2dlciBvbiAwNDdcbiAgLy8gKHNldCBieSA4ZCB1cG9uIGVudGVyaW5nIGVsZGVyJ3MgY2VsbCkuICBBbHNvIG1ha2Ugc3VyZSB0aGF0IHRoYXQgcGF0aCBhbHNvXG4gIC8vIHByb3ZpZGVzIHRoZSBuZWVkZWQgZmxhZyB0byBnZXQgaW50byBtdCBzYWJyZS5cbiAgTGVhZlJhYmJpdC5kaWFsb2coKVsyXS5jb25kaXRpb24gPSBmbGFncy5SZXNjdWVkTGVhZkVsZGVyLmlkO1xuICBMZWFmUmFiYml0LmRpYWxvZygpWzJdLmZsYWdzLnB1c2goZmxhZ3MuVGFsa2VkVG9MZWFmUmFiYml0LmlkKTtcbiAgTGVhZlJhYmJpdC5kaWFsb2coKVszXS5mbGFncy5wdXNoKGZsYWdzLlRhbGtlZFRvTGVhZlJhYmJpdC5pZCk7XG5cbiAgLy8gV2luZG1pbGwgZ3VhcmQgKCQxNCBAICQwZSkgc2hvdWxkbid0IGRlc3Bhd24gYWZ0ZXIgYWJkdWN0aW9uICgwMzgpLFxuICAvLyBidXQgaW5zdGVhZCBhZnRlciBnaXZpbmcgdGhlIGl0ZW0gKDA4OClcbiAgV2luZG1pbGxHdWFyZC5zcGF3bnMoV2luZG1pbGxDYXZlKVsxXSA9XG4gICAgICB+ZmxhZ3MuV2luZG1pbGxHdWFyZEFsYXJtRmx1dGVUcmFkZWluLmlkO1xuICAvL2RpYWxvZygweDE0LCAweDBlKVswXS5mbGFncyA9IFtdOyAvLyByZW1vdmUgcmVkdW5kYW50IGZsYWcgfiB3aW5kbWlsbCBrZXlcblxuICAvLyBBa2FoYW5hICgkMTYgLyA4OCkgfiBzaGllbGQgcmluZyByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDE2LCAweDU3KVswXS5mbGFncyA9IFtdO1xuICAvLyBEb24ndCBkaXNhcHBlYXIgYWZ0ZXIgZ2V0dGluZyBiYXJyaWVyIChub3RlIDg4J3Mgc3Bhd25zICpub3QqIGxpbmtlZCB0byAxNilcbiAgcmVtb3ZlKEFrYWhhbmEuc3Bhd25zKFdhdGVyZmFsbENhdmU0KSwgfmZsYWdzLkJlaGluZFdoaXJscG9vbC5pZCk7XG4gIHJlbW92ZShTdG9uZWRBa2FoYW5hLnNwYXducyhXYXRlcmZhbGxDYXZlNCksIH5mbGFncy5CZWhpbmRXaGlybHBvb2wuaWQpO1xuXG4gIGZ1bmN0aW9uIHJldmVyc2VEaWFsb2coZHM6IExvY2FsRGlhbG9nW10pOiB2b2lkIHtcbiAgICBkcy5yZXZlcnNlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmV4dCA9IGRzW2kgKyAxXTtcbiAgICAgIGRzW2ldLmNvbmRpdGlvbiA9IG5leHQgPyB+bmV4dC5jb25kaXRpb24gOiB+MDtcbiAgICB9XG4gIH07XG5cbiAgLy8gT2FrIGVsZGVyICgkMWQpIH4gc3dvcmQgb2YgZmlyZSByZWR1bmRhbnQgZmxhZ1xuICAvL29ha0VsZGVyRGlhbG9nWzRdLmZsYWdzID0gW107XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIHRyeSB0byBnaXZlIHRoZSBpdGVtIGZyb20gKmFsbCogcG9zdC1pbnNlY3QgZGlhbG9nc1xuICBPYWtFbGRlci5kaWFsb2coKVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIE9ha0VsZGVyLmRpYWxvZygpWzFdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgT2FrRWxkZXIuZGlhbG9nKClbMl0ubWVzc2FnZS5hY3Rpb24gPSAweDAzO1xuICBPYWtFbGRlci5kaWFsb2coKVszXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG5cbiAgLy8gT2FrIG1vdGhlciAoJDFlKSB+IGluc2VjdCBmbHV0ZSByZWR1bmRhbnQgZmxhZ1xuICAvLyBUT0RPIC0gcmVhcnJhbmdlIHRoZXNlIGZsYWdzIGEgYml0IChtYXliZSB+MDQ1LCB+MGEwIH4wNDEgLSBzbyByZXZlcnNlKVxuICAvLyAgICAgIC0gd2lsbCBuZWVkIHRvIGNoYW5nZSBiYWxsT2ZGaXJlIGFuZCBpbnNlY3RGbHV0ZSBpbiBkZXBncmFwaFxuICAoKCkgPT4ge1xuICAgIGNvbnN0IFtraWxsZWRJbnNlY3QsIGdvdEl0ZW0sIGdldEl0ZW0sIGZpbmRDaGlsZF0gPSBPYWtNb3RoZXIuZGlhbG9nKCk7XG4gICAgZmluZENoaWxkLmNvbmRpdGlvbiA9IH5mbGFncy5SZXNjdWVkQ2hpbGQuaWQ7XG4gICAgLy9nZXRJdGVtLmNvbmRpdGlvbiA9IH4weDIyNztcbiAgICAvL2dldEl0ZW0uZmxhZ3MgPSBbXTtcbiAgICBnb3RJdGVtLmNvbmRpdGlvbiA9IH4wOyAvLyBhbHdheXMgdHJ1ZVxuICAgIE9ha01vdGhlci5kaWFsb2coKS5zcGxpY2UoMCwgNCwgZmluZENoaWxkLCBnZXRJdGVtLCBraWxsZWRJbnNlY3QsIGdvdEl0ZW0pO1xuICB9KSgpO1xuICAvLy8gb2FrTW90aGVyRGlhbG9nWzJdLmZsYWdzID0gW107XG4gIC8vIC8vIEVuc3VyZSB3ZSBhbHdheXMgZ2l2ZSBpdGVtIGFmdGVyIGluc2VjdC5cbiAgLy8gb2FrTW90aGVyRGlhbG9nWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgLy8gb2FrTW90aGVyRGlhbG9nWzFdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgLy8gcmV2ZXJzZURpYWxvZyhvYWtNb3RoZXJEaWFsb2cpO1xuXG4gIC8vIFJldmVyc2UgdGhlIG90aGVyIG9hayBkaWFsb2dzLCB0b28uXG4gIGZvciAoY29uc3QgaSBvZiBbMHgyMCwgMHgyMSwgMHgyMiwgMHg3YywgMHg3ZF0pIHtcbiAgICByZXZlcnNlRGlhbG9nKHJvbS5ucGNzW2ldLmRpYWxvZygpKTtcbiAgfVxuXG4gIC8vIFN3YXAgdGhlIGZpcnN0IHR3byBvYWsgY2hpbGQgZGlhbG9ncy5cbiAgT2FrQ2hpbGQuZGlhbG9nKCkudW5zaGlmdCguLi5PYWtDaGlsZC5kaWFsb2coKS5zcGxpY2UoMSwgMSkpO1xuXG4gIC8vIFRocm9uZSByb29tIGJhY2sgZG9vciBndWFyZCAoJDMzIEAgJGRmKSBzaG91bGQgaGF2ZSBzYW1lIHNwYXduIGNvbmRpdGlvbiBhcyBxdWVlblxuICAvLyAoMDIwIE5PVCBxdWVlbiBub3QgaW4gdGhyb25lIHJvb20gQU5EIDAxYiBOT1Qgdmlld2VkIG1lc2lhIHJlY29yZGluZylcbiAgUG9ydG9hVGhyb25lUm9vbUJhY2tEb29yR3VhcmQuc3Bhd25Db25kaXRpb25zLnNldChcbiAgICAgIFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLmlkLFxuICAgICAgW35mbGFncy5RdWVlbk5vdEluVGhyb25lUm9vbS5pZCwgfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkXSk7XG5cbiAgLy8gRnJvbnQgcGFsYWNlIGd1YXJkICgkMzQpIHZhY2F0aW9uIG1lc3NhZ2Uga2V5cyBvZmYgMDFiIGluc3RlYWQgb2YgMDFmXG4gIFBvcnRvYVBhbGFjZUZyb250R3VhcmQuZGlhbG9nKClbMV0uY29uZGl0aW9uID0gZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7XG5cbiAgLy8gUXVlZW4ncyAoJDM4KSBkaWFsb2cgbmVlZHMgcXVpdGUgYSBiaXQgb2Ygd29ya1xuICAvLyBHaXZlIGl0ZW0gKGZsdXRlIG9mIGxpbWUpIGV2ZW4gaWYgZ290IHRoZSBzd29yZCBvZiB3YXRlclxuICBQb3J0b2FRdWVlbi5kaWFsb2coKVszXS5jb25kaXRpb24gPSBmbGFncy5Td29yZE9mV2F0ZXIuaWQ7IC8vIFwieW91IGZvdW5kIHN3b3JkXCJcbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbM10ubWVzc2FnZS5hY3Rpb24gPSAweDAzOyAvLyAgPT4gYWN0aW9uIDMgaXRlbWdldFxuICAvLyBFbnN1cmUgeW91IGNhbiBhbHdheXMgbWFrZSB0aGUgcXVlZW4gZ28gYXdheS5cbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbNF0uZmxhZ3MucHVzaChmbGFncy5Qb3J0b2FRdWVlbkdvaW5nQXdheS5pZCk7XG4gIC8vIFF1ZWVuIHNwYXduIGNvbmRpdGlvbiBkZXBlbmRzIG9uIDAxYiAobWVzaWEgcmVjb3JkaW5nKSBub3QgMDFmIChiYWxsIG9mIHdhdGVyKVxuICAvLyBUaGlzIGVuc3VyZXMgeW91IGhhdmUgYm90aCBzd29yZCBhbmQgYmFsbCB0byBnZXQgdG8gaGVyICg/Pz8pXG4gIFBvcnRvYVF1ZWVuLnNwYXducyhQb3J0b2FQYWxhY2VfVGhyb25lUm9vbSlbMV0gPSB+ZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7XG4gIFBvcnRvYVF1ZWVuLnNwYXducyhQb3J0b2FfQXNpbmFSb29tKVswXSA9IGZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuICBQb3J0b2FRdWVlbi5kaWFsb2coKVsxXS5jb25kaXRpb24gPSBmbGFncy5NZXNpYVJlY29yZGluZy5pZDsgLy8gcmV2ZWFsXG5cbiAgLy8gRm9ydHVuZSB0ZWxsZXIgKCQzOSkgc2hvdWxkIGFsc28gbm90IHNwYXduIGJhc2VkIG9uIG1lc2lhIHJlY29yZGluZyByYXRoZXIgdGhhbiBvcmJcbiAgRm9ydHVuZVRlbGxlci5zcGF3bnMoUG9ydG9hX0ZvcnR1bmVUZWxsZXIpWzFdID0gfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuXG4gIC8vIENsYXJrICgkNDQpIG1vdmVzIGFmdGVyIHRhbGtpbmcgdG8gaGltICgwOGQpIHJhdGhlciB0aGFuIGNhbG1pbmcgc2VhICgwOGYpLlxuICAvLyBUT0RPIC0gY2hhbmdlIDA4ZCB0byB3aGF0ZXZlciBhY3R1YWwgaXRlbSBoZSBnaXZlcywgdGhlbiByZW1vdmUgYm90aCBmbGFnc1xuICBDbGFyay5zcGF3bkNvbmRpdGlvbnMuc2V0KFpvbWJpZVRvd25fSG91c2VCYXNlbWVudC5pZCwgW35mbGFncy5DbGFyay5pZF0pO1xuICBDbGFyay5zcGF3bkNvbmRpdGlvbnMuc2V0KEpvZWxfU2hlZC5pZCwgW2ZsYWdzLkNsYXJrLmlkXSk7XG4gIC8vZGlhbG9nKDB4NDQsIDB4ZTkpWzFdLmZsYWdzLnBvcCgpOyAvLyByZW1vdmUgcmVkdW5kYW50IGl0ZW1nZXQgZmxhZ1xuXG4gIC8vIEJyb2thaGFuYSAoJDU0KSB+IHdhcnJpb3IgcmluZyByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDU0KVsyXS5mbGFncyA9IFtdO1xuXG4gIC8vIERlbyAoJDVhKSB+IHBlbmRhbnQgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg1YSlbMV0uZmxhZ3MgPSBbXTtcblxuICAvLyBaZWJ1ICgkNWUpIGNhdmUgZGlhbG9nIChAICQxMClcbiAgLy8gVE9ETyAtIGRpYWxvZ3MoMHg1ZSwgMHgxMCkucmVhcnJhbmdlKH4weDAzYSwgMHgwMGQsIDB4MDM4LCAweDAzOSwgMHgwMGEsIH4weDAwMCk7XG4gIFplYnUubG9jYWxEaWFsb2dzLnNldChaZWJ1Q2F2ZS5pZCwgW1xuICAgIExvY2FsRGlhbG9nLm9mKH5mbGFncy5UYWxrZWRUb1plYnVJbkNhdmUuaWQsXG4gICAgICAgICAgICAgICAgICAgWzB4MDAsIDB4MWFdLCBbZmxhZ3MuVGFsa2VkVG9aZWJ1SW5DYXZlLmlkXSksXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuTGVhZlZpbGxhZ2Vyc1Jlc2N1ZWQuaWQsIFsweDAwLCAweDFkXSksXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuTGVhZkFiZHVjdGlvbi5pZCwgWzB4MDAsIDB4MWNdKSwgLy8gMDM4IGxlYWYgYXR0YWNrZWRcbiAgICBMb2NhbERpYWxvZy5vZihmbGFncy5aZWJ1QXRXaW5kbWlsbC5pZCwgWzB4MDAsIDB4MWRdKSwgLy8gMDM5IGxlYXJuZWQgcmVmcmVzaFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLlVzZWRXaW5kbWlsbEtleS5pZCwgWzB4MDAsIDB4MWIsIDB4MDNdKSwgLy8gPT4gcmVmcmVzaFxuICAgIExvY2FsRGlhbG9nLm9mKH4wLCBbMHgwMCwgMHgxZF0pLFxuICBdKTtcbiAgLy8gRG9uJ3QgZGVzcGF3biBvbiBnZXR0aW5nIGJhcnJpZXJcbiAgcmVtb3ZlKFplYnUuc3Bhd25zKFplYnVDYXZlKSwgfmZsYWdzLkJlaGluZFdoaXJscG9vbC5pZCk7IC8vIHJlbW92ZSAwNTEgTk9UIGxlYXJuZWQgYmFycmllclxuXG4gIC8vIFRvcm5lbCAoJDVmKSBpbiBzYWJyZSB3ZXN0ICgkMjEpIH4gdGVsZXBvcnQgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg1ZiwgMHgyMSlbMV0uZmxhZ3MgPSBbXTtcbiAgLy8gRG9uJ3QgZGVzcGF3biBvbiBnZXR0aW5nIGJhcnJpZXJcbiAgVG9ybmVsLnNwYXduQ29uZGl0aW9ucy5kZWxldGUoTXRTYWJyZVdlc3RfVXBwZXIuaWQpOyAvLyBhbHdheXMgc3Bhd25cblxuICAvLyBTdG9tICgkNjApOiBkb24ndCBkZXNwYXduIG9uIGdldHRpbmcgYmFycmllclxuICBTdG9tLnNwYXduQ29uZGl0aW9ucy5kZWxldGUoU3RvbUhvdXNlLmlkKTsgLy8gcmVtb3ZlIDA1MSBOT1QgbGVhcm5lZCBiYXJyaWVyXG5cbiAgLy8gQXNpbmEgKCQ2MikgaW4gYmFjayByb29tICgkZTEpIGdpdmVzIGZsdXRlIG9mIGxpbWVcbiAgQXNpbmEuZGF0YVsxXSA9IHJvbS5pdGVtcy5GbHV0ZU9mTGltZS5pZDtcbiAgQXNpbmEuZGlhbG9nKFBvcnRvYV9Bc2luYVJvb20pWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgxMTtcbiAgQXNpbmEuZGlhbG9nKFBvcnRvYV9Bc2luYVJvb20pWzJdLm1lc3NhZ2UuYWN0aW9uID0gMHgxMTtcbiAgLy8gUHJldmVudCBkZXNwYXduIGZyb20gYmFjayByb29tIGFmdGVyIGNhbG1pbmcgc2VhICh+MDhmIG9yIH4yODMpXG4gIHJlbW92ZShBc2luYS5zcGF3bnMoUG9ydG9hX0FzaW5hUm9vbSksIH5mbGFncy5DYWxtZWRBbmdyeVNlYS5pZCk7XG5cbiAgLy8gS2Vuc3UgaW4gY2FiaW4gKCQ2OCBAICQ2MSkgbmVlZHMgdG8gYmUgYXZhaWxhYmxlIGV2ZW4gYWZ0ZXIgdmlzaXRpbmcgSm9lbC5cbiAgLy8gQ2hhbmdlIGhpbSB0byBqdXN0IGRpc2FwcGVhciBhZnRlciBzZXR0aW5nIHRoZSByaWRlYWJsZSBkb2xwaGluIGZsYWcgKDA5YiksXG4gIC8vIGFuZCB0byBub3QgZXZlbiBzaG93IHVwIGF0IGFsbCB1bmxlc3MgdGhlIGZvZyBsYW1wIHdhcyByZXR1cm5lZCAoMDIxKS5cbiAgS2Vuc3VJbkNhYmluLnNwYXduQ29uZGl0aW9ucy5zZXQoQm9hdEhvdXNlLmlkLCBbfmZsYWdzLkFibGVUb1JpZGVEb2xwaGluLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5SZXR1cm5lZEZvZ0xhbXAuaWRdKTtcbiAgS2Vuc3VJbkNhYmluLmRpYWxvZygpWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMjsgLy8gZGlzYXBwZWFyXG5cbiAgLy8gQXp0ZWNhIGluIFNoeXJvbiAoNmUpIHNob3VsZG4ndCBzcGF3biBhZnRlciBtYXNzYWNyZSAoMDI3KVxuICBBenRlY2FJblNoeXJvbi5zcGF3bnMoU2h5cm9uX1RlbXBsZSkucHVzaCh+ZmxhZ3MuU2h5cm9uTWFzc2FjcmUuaWQpO1xuICAvLyBBbHNvIHRoZSBkaWFsb2cgdHJpZ2dlciAoODIpIHNob3VsZG4ndCBoYXBwZW5cbiAgcm9tLnRyaWdnZXIoMHg4MikuY29uZGl0aW9ucy5wdXNoKH5mbGFncy5TaHlyb25NYXNzYWNyZS5pZCk7XG5cbiAgLy8gS2Vuc3UgaW4gbGlnaHRob3VzZSAoJDc0LyQ3ZSBAICQ2MikgfiByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDc0LCAweDYyKVswXS5mbGFncyA9IFtdO1xuXG4gIC8vIEF6dGVjYSAoJDgzKSBpbiBweXJhbWlkIH4gYm93IG9mIHRydXRoIHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4ODMpWzBdLmNvbmRpdGlvbiA9IH4weDI0MDsgIC8vIDI0MCBOT1QgYm93IG9mIHRydXRoXG4gIC8vZGlhbG9nKDB4ODMpWzBdLmZsYWdzID0gW107XG5cbiAgLy8gUmFnZSBibG9ja3Mgb24gc3dvcmQgb2Ygd2F0ZXIsIG5vdCByYW5kb20gaXRlbSBmcm9tIHRoZSBjaGVzdFxuICBSYWdlLmRpYWxvZygpWzBdLmNvbmRpdGlvbiA9IGZsYWdzLlN3b3JkT2ZXYXRlci5pZDtcblxuICAvLyBSZW1vdmUgdXNlbGVzcyBzcGF3biBjb25kaXRpb24gZnJvbSBNYWRvIDFcbiAgLy8gcm9tLm5wY3NbMHhjNF0uc3Bhd25Db25kaXRpb25zLmRlbGV0ZSgweGYyKTsgLy8gYWx3YXlzIHNwYXduXG5cbiAgLy8gRHJheWdvbiAyICgkY2IgQCBsb2NhdGlvbiAkYTYpIHNob3VsZCBkZXNwYXduIGFmdGVyIGJlaW5nIGRlZmVhdGVkLlxuICBEcmF5Z29uLnNwYXduQ29uZGl0aW9ucy5zZXQoQ3J5cHRfRHJheWdvbjIuaWQsIFt+ZmxhZ3MuRHJheWdvbjIuaWRdKTtcblxuICAvLyBGaXggWmVidSB0byBnaXZlIGtleSB0byBzdHh5IGV2ZW4gaWYgdGh1bmRlciBzd29yZCBpcyBnb3R0ZW4gKGp1c3Qgc3dpdGNoIHRoZVxuICAvLyBvcmRlciBvZiB0aGUgZmlyc3QgdHdvKS4gIEFsc28gZG9uJ3QgYm90aGVyIHNldHRpbmcgMDNiIHNpbmNlIHRoZSBuZXcgSXRlbUdldFxuICAvLyBsb2dpYyBvYnZpYXRlcyB0aGUgbmVlZC5cbiAgWmVidS5kaWFsb2coU2h5cm9uX1RlbXBsZSlcbiAgICAgIC51bnNoaWZ0KC4uLlplYnUuZGlhbG9nKFNoeXJvbl9UZW1wbGUpLnNwbGljZSgxLCAxKSk7XG4gIC8vIHplYnVTaHlyb25bMF0uZmxhZ3MgPSBbXTtcblxuICAvLyBTaHlyb24gbWFzc2FjcmUgKCQ4MCkgcmVxdWlyZXMga2V5IHRvIHN0eHlcbiAgcm9tLnRyaWdnZXIoMHg4MCkuY29uZGl0aW9ucyA9IFtcbiAgICB+ZmxhZ3MuU2h5cm9uTWFzc2FjcmUuaWQsXG4gICAgZmxhZ3MuVGFsa2VkVG9aZWJ1SW5TaHlyb24uaWQsXG4gICAgZmxhZ3MuU3dvcmRPZlRodW5kZXIuaWQsXG4gIF07XG5cbiAgLy8gRW50ZXIgc2h5cm9uICgkODEpIHNob3VsZCBzZXQgd2FycCBubyBtYXR0ZXIgd2hhdFxuICByb20udHJpZ2dlcigweDgxKS5jb25kaXRpb25zID0gW107XG5cbiAgaWYgKG9wdHMuYmFycmllclJlcXVpcmVzQ2FsbVNlYSgpKSB7XG4gICAgLy8gTGVhcm4gYmFycmllciAoJDg0KSByZXF1aXJlcyBjYWxtIHNlYVxuICAgIHJvbS50cmlnZ2VyKDB4ODQpLmNvbmRpdGlvbnMucHVzaChmbGFncy5DYWxtZWRBbmdyeVNlYS5pZCk7XG4gICAgLy8gVE9ETyAtIGNvbnNpZGVyIG5vdCBzZXR0aW5nIDA1MSBhbmQgY2hhbmdpbmcgdGhlIGNvbmRpdGlvbiB0byBtYXRjaCB0aGUgaXRlbVxuICB9XG4gIC8vcm9tLnRyaWdnZXIoMHg4NCkuZmxhZ3MgPSBbXTtcblxuICAvLyBBZGQgYW4gZXh0cmEgY29uZGl0aW9uIHRvIHRoZSBMZWFmIGFiZHVjdGlvbiB0cmlnZ2VyIChiZWhpbmQgemVidSkuICBUaGlzIGVuc3VyZXNcbiAgLy8gYWxsIHRoZSBpdGVtcyBpbiBMZWFmIHByb3BlciAoZWxkZXIgYW5kIHN0dWRlbnQpIGFyZSBnb3R0ZW4gYmVmb3JlIHRoZXkgZGlzYXBwZWFyLlxuICByb20udHJpZ2dlcigweDhjKS5jb25kaXRpb25zLnB1c2goZmxhZ3MuVGFsa2VkVG9aZWJ1SW5DYXZlLmlkKTtcblxuICAvLyBNb3JlIHdvcmsgb24gYWJkdWN0aW9uIHRyaWdnZXJzOlxuICAvLyAxLiBSZW1vdmUgdGhlIDhkIHRyaWdnZXIgaW4gdGhlIGZyb250IG9mIHRoZSBjZWxsLCBzd2FwIGl0IG91dFxuICAvLyAgICBmb3IgYjIgKGxlYXJuIHBhcmFseXNpcykuXG4gIHJvbS50cmlnZ2VyKDB4OGQpLnVzZWQgPSBmYWxzZTtcbiAgZm9yIChjb25zdCBzcGF3biBvZiBNdFNhYnJlTm9ydGhfU3VtbWl0Q2F2ZS5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4OGQpIHNwYXduLmlkID0gMHhiMjtcbiAgfVxuICByZW1vdmVJZihXYXRlcmZhbGxWYWxsZXlOb3J0aC5zcGF3bnMsXG4gICAgICAgICAgIHNwYXduID0+IHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLmlkID09PSAweDhkKTtcbiAgLy8gMi4gU2V0IHRoZSB0cmlnZ2VyIHRvIHJlcXVpcmUgaGF2aW5nIGtpbGxlZCBrZWxiZXNxdWUuXG4gIHJvbS50cmlnZ2VyKDB4YjIpLmNvbmRpdGlvbnMucHVzaChmbGFncy5LZWxiZXNxdWUxLmlkKTtcbiAgLy8gMy4gQWxzbyBzZXQgdGhlIHRyaWdnZXIgdG8gZnJlZSB0aGUgdmlsbGFnZXJzIGFuZCB0aGUgZWxkZXIuXG4gIHJvbS50cmlnZ2VyKDB4YjIpLmZsYWdzLnB1c2goXG4gICAgfmZsYWdzLkxlYWZWaWxsYWdlcnNDdXJyZW50bHlBYmR1Y3RlZC5pZCxcbiAgICB+ZmxhZ3MuTGVhZkVsZGVyQ3VycmVudGx5QWJkdWN0ZWQuaWQsXG4gICAgZmxhZ3MuTGVhZlZpbGxhZ2Vyc1Jlc2N1ZWQuaWQpO1xuICAvLyA0LiBEb24ndCB0cmlnZ2VyIHRoZSBhYmR1Y3Rpb24gaW4gdGhlIGZpcnN0IHBsYWNlIGlmIGtlbGJlc3F1ZSBkZWFkXG4gIHJvbS50cmlnZ2VyKDB4OGMpLmNvbmRpdGlvbnMucHVzaCh+ZmxhZ3MuS2VsYmVzcXVlMS5pZCk7XG4gIC8vIDUuIERvbid0IHRyaWdnZXIgcmFiYml0IGJsb2NrIGlmIGtlbGJlc3F1ZSBkZWFkXG4gIHJvbS50cmlnZ2VyKDB4ODYpLmNvbmRpdGlvbnMucHVzaCh+ZmxhZ3MuS2VsYmVzcXVlMS5pZCk7IC8vIGtpbGxlZCBrZWxiZXNxdWVcbiAgLy8gNi4gRG9uJ3QgZnJlZSB2aWxsYWdlcnMgZnJvbSB1c2luZyBwcmlzb24ga2V5XG4gIHJlbW92ZShLZXlUb1ByaXNvbi5pdGVtVXNlRGF0YVswXS5mbGFncyxcbiAgICAgICAgIH5mbGFncy5MZWFmVmlsbGFnZXJzQ3VycmVudGx5QWJkdWN0ZWQuaWQpO1xuICAvLyByb20ucHJnWzB4MWUwYTNdID0gMHhjMDtcbiAgLy8gcm9tLnByZ1sweDFlMGE0XSA9IDB4MDA7XG5cbiAgLy8gVE9ETyAtIGFkZGl0aW9uYWwgd29yayBvbiBhYmR1Y3Rpb24gdHJpZ2dlcjpcbiAgLy8gICAtIGdldCByaWQgb2YgdGhlIGZsYWdzIG9uIGtleSB0byBwcmlzb24gdXNlXG4gIC8vICAgLSBhZGQgYSBjb25kaXRpb24gdGhhdCBhYmR1Y3Rpb24gZG9lc24ndCBoYXBwZW4gaWYgcmVzY3VlZFxuICAvLyBHZXQgcmlkIG9mIEJPVEggdHJpZ2dlcnMgaW4gc3VtbWl0IGNhdmUsICBJbnN0ZWFkLCB0aWUgZXZlcnl0aGluZ1xuICAvLyB0byB0aGUgZWxkZXIgZGlhbG9nIG9uIHRvcFxuICAvLyAgIC0gaWYga2VsYmVzcXVlIHN0aWxsIGFsaXZlLCBtYXliZSBnaXZlIGEgaGludCBhYm91dCB3ZWFrbmVzc1xuICAvLyAgIC0gaWYga2VsYmVzcXVlIGRlYWQgdGhlbiB0ZWFjaCBwYXJhbHlzaXMgYW5kIHNldC9jbGVhciBmbGFnc1xuICAvLyAgIC0gaWYgcGFyYWx5c2lzIGxlYXJuZWQgdGhlbiBzYXkgc29tZXRoaW5nIGdlbmVyaWNcbiAgLy8gU3RpbGwgbmVlZCB0byBrZWVwIHRoZSB0cmlnZ2VyIGluIHRoZSBmcm9udCBpbiBjYXNlIG5vXG4gIC8vIGFiZHVjdGlvbiB5ZXRcbiAgLy8gICAtIGlmIE5PVCBwYXJhbHlzaXMgQU5EIGlmIE5PVCBlbGRlciBtaXNzaW5nIEFORCBpZiBrZWxiZXF1ZSBkZWFkXG4gIC8vIC0tLT4gbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciB0d28gd2F5cyB0byBnZXQgKGxpa2UgcmVmcmVzaCk/XG4gIC8vXG4gIC8vIEFsc28gYWRkIGEgY2hlY2sgdGhhdCB0aGUgcmFiYml0IHRyaWdnZXIgaXMgZ29uZSBpZiByZXNjdWVkIVxuXG5cblxuICAvLyBQYXJhbHlzaXMgdHJpZ2dlciAoJGIyKSB+IHJlbW92ZSByZWR1bmRhbnQgaXRlbWdldCBmbGFnXG4gIC8vcm9tLnRyaWdnZXIoMHhiMikuY29uZGl0aW9uc1swXSA9IH4weDI0MjtcbiAgLy9yb20udHJpZ2dlcigweGIyKS5mbGFncy5zaGlmdCgpOyAvLyByZW1vdmUgMDM3IGxlYXJuZWQgcGFyYWx5c2lzXG5cbiAgLy8gTGVhcm4gcmVmcmVzaCB0cmlnZ2VyICgkYjQpIH4gcmVtb3ZlIHJlZHVuZGFudCBpdGVtZ2V0IGZsYWdcbiAgLy9yb20udHJpZ2dlcigweGI0KS5jb25kaXRpb25zWzFdID0gfjB4MjQxO1xuICAvL3JvbS50cmlnZ2VyKDB4YjQpLmZsYWdzID0gW107IC8vIHJlbW92ZSAwMzkgbGVhcm5lZCByZWZyZXNoXG5cbiAgLy8gVGVsZXBvcnQgYmxvY2sgb24gbXQgc2FicmUgaXMgZnJvbSBzcGVsbCwgbm90IHNsb3RcbiAgcm9tLnRyaWdnZXIoMHhiYSkuY29uZGl0aW9uc1swXSA9IH5mbGFncy5UZWxlcG9ydC5pZDtcblxuICAvLyBQb3J0b2EgcGFsYWNlIGd1YXJkIG1vdmVtZW50IHRyaWdnZXIgKCRiYikgc3RvcHMgb24gMDFiIChtZXNpYSkgbm90IDAxZiAob3JiKVxuICByb20udHJpZ2dlcigweGJiKS5jb25kaXRpb25zWzFdID0gfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuXG4gIC8vIFJlbW92ZSByZWR1bmRhbnQgdHJpZ2dlciA4YSAoc2xvdCAxNikgaW4gem9tYmlldG93biAoJDY1KVxuICAvLyAgLS0gbm90ZTogbm8gbG9uZ2VyIG5lY2Vzc2FyeSBzaW5jZSB3ZSByZXB1cnBvc2UgaXQgaW5zdGVhZC5cbiAgLy8gY29uc3Qge3pvbWJpZVRvd259ID0gcm9tLmxvY2F0aW9ucztcbiAgLy8gem9tYmllVG93bi5zcGF3bnMgPSB6b21iaWVUb3duLnNwYXducy5maWx0ZXIoeCA9PiAheC5pc1RyaWdnZXIoKSB8fCB4LmlkICE9IDB4OGEpO1xuXG4gIC8vIC8vIFJlcGxhY2UgYWxsIGRpYWxvZyBjb25kaXRpb25zIGZyb20gMDBlIHRvIDI0M1xuICAvLyBmb3IgKGNvbnN0IG5wYyBvZiByb20ubnBjcykge1xuICAvLyAgIGZvciAoY29uc3QgZCBvZiBucGMuYWxsRGlhbG9ncygpKSB7XG4gIC8vICAgICBpZiAoZC5jb25kaXRpb24gPT09IDB4MDBlKSBkLmNvbmRpdGlvbiA9IDB4MjQzO1xuICAvLyAgICAgaWYgKGQuY29uZGl0aW9uID09PSB+MHgwMGUpIGQuY29uZGl0aW9uID0gfjB4MjQzO1xuICAvLyAgIH1cbiAgLy8gfVxufVxuXG4vLyBIYXJkIG1vZGUgZmxhZzogSGMgLSB6ZXJvIG91dCB0aGUgc3dvcmQncyBjb2xsaXNpb24gcGxhbmVcbmZ1bmN0aW9uIGRpc2FibGVTdGFicyhyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IG8gb2YgWzB4MDgsIDB4MDksIDB4MjddKSB7XG4gICAgcm9tLm9iamVjdHNbb10uY29sbGlzaW9uUGxhbmUgPSAwO1xuICB9XG4gIC8vIEFsc28gdGFrZSB3YXJyaW9yIHJpbmcgb3V0IG9mIHRoZSBwaWN0dXJlLi4uIDp0cm9sbDpcbiAgLy8gcm9tLml0ZW1HZXRzWzB4MmJdLmlkID0gMHg1YjsgLy8gbWVkaWNhbCBoZXJiIGZyb20gc2Vjb25kIGZsdXRlIG9mIGxpbWUgY2hlY2tcbiAgcm9tLm5wY3MuQnJva2FoYW5hLmRhdGFbMF0gPSByb20uaXRlbXMuRnJ1aXRPZkxpbWUuaWQ7XG59XG5cbmZ1bmN0aW9uIG9yYnNPcHRpb25hbChyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IG9iaiBvZiBbMHgxMCwgMHgxNCwgMHgxOCwgMHgxZF0pIHtcbiAgICAvLyAxLiBMb29zZW4gdGVycmFpbiBzdXNjZXB0aWJpbGl0eSBvZiBsZXZlbCAxIHNob3RzXG4gICAgcm9tLm9iamVjdHNbb2JqXS50ZXJyYWluU3VzY2VwdGliaWxpdHkgJj0gfjB4MDQ7XG4gICAgLy8gMi4gSW5jcmVhc2UgdGhlIGxldmVsIHRvIDJcbiAgICByb20ub2JqZWN0c1tvYmpdLmxldmVsID0gMjtcbiAgfVxufVxuXG5mdW5jdGlvbiBub0Jvd01vZGUocm9tOiBSb20pOiB2b2lkIHtcbiAgLy8gSW5pdGlhbCB0cmlnZ2VyIGdpdmVzIFwidXNlZCBib3cgb2YgdHJ1dGhcIi5cbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7VXNlZEJvd09mVHJ1dGh9LFxuICAgIGxvY2F0aW9uczoge0NyeXB0X0RyYXlnb24yLCBDcnlwdF9IYWxsMiwgTWV6YW1lU2hyaW5lfSxcbiAgfSA9IHJvbTtcbiAgbGV0IHRyaWdnZXIhOiBUcmlnZ2VyO1xuICBmb3IgKGNvbnN0IHNwYXduIG9mIE1lemFtZVNocmluZS5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24udGlsZSA9PT0gMHg4OCkge1xuICAgICAgdHJpZ2dlciA9IHJvbS50cmlnZ2VyKHNwYXduLmlkKTtcbiAgICB9XG4gIH1cbiAgaWYgKCF0cmlnZ2VyKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIHN0YXJ0IHRyaWdnZXJgKTtcbiAgdHJpZ2dlci5mbGFncy5wdXNoKFVzZWRCb3dPZlRydXRoLmlkKTtcbiAgLy8gQWRkIGFuIGV4aXQgc3RyYWlnaHQgdG8gZHJheWdvblxuICAvL01lemFtZVNocmluZS5lbnRyYW5jZXNbMV0udGlsZSA9IDB4OTg7XG4gIHJvbS50aWxlRWZmZWN0c1sweGI5IC0gMHhiM10uZWZmZWN0c1sweDU4XSA9IDA7XG4gIE1lemFtZVNocmluZS5leGl0cy5wdXNoKFxuICAgICAgRXhpdC5vZih7dGlsZTogMHg2OCwgZGVzdDogQ3J5cHRfRHJheWdvbjIuaWQsIGVudHJhbmNlOiAwfSkpO1xuICBmb3IgKGxldCBleGl0IG9mIENyeXB0X0RyYXlnb24yLmV4aXRzKSB7XG4gICAgaWYgKGV4aXQuZGVzdCA9PT0gQ3J5cHRfSGFsbDIuaWQpIHtcbiAgICAgIGV4aXQuZGVzdCA9IE1lemFtZVNocmluZS5pZDtcbiAgICAgIGV4aXQuZW50cmFuY2UgPSAxO1xuICAgIH1cbiAgfVxuICBmb3IgKGxldCBleGl0IG9mIENyeXB0X0hhbGwyLmV4aXRzKSB7XG4gICAgaWYgKGV4aXQuZGVzdCA9PT0gQ3J5cHRfRHJheWdvbjIuaWQpIHtcbiAgICAgIGV4aXQuZGVzdCA9IE1lemFtZVNocmluZS5pZDtcbiAgICAgIGV4aXQuZW50cmFuY2UgPSAwO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlPFQ+KGFycmF5OiBUW10sIG9sZDogVCwgcmVwbGFjZW1lbnQ6IFQpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJheVtpXSAhPT0gb2xkKSBjb250aW51ZTtcbiAgICBhcnJheVtpXSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybjtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kICR7b2xkfSBpbiAke2FycmF5LmpvaW4oJywnKX1gKTsgICAgICBcbn1cbiJdfQ==