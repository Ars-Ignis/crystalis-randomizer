import { Constraint } from '../rom/constraint.js';
import { Graphics } from '../rom/graphics.js';
import { Monster } from '../rom/monster.js';
import { SCALED_MONSTERS } from './rescalemonsters.js';
export function shuffleMonsters(rom, flags, random) {
    const graphics = new Graphics(rom);
    if (flags.shuffleSpritePalettes())
        graphics.shufflePalettes(random);
    const pool = new MonsterPool(flags, {});
    for (const loc of rom.locations) {
        if (loc.used)
            pool.populate(loc);
    }
    pool.shuffle(random, graphics);
}
class MonsterPool {
    constructor(flags, report) {
        this.flags = flags;
        this.report = report;
        this.monsters = [];
        this.used = [];
        this.locations = [];
    }
    populate(location) {
        const { maxFlyers = 0, nonFlyers = {}, skip = false, tower = false, fixedSlots = {}, ...unexpected } = MONSTER_ADJUSTMENTS[location.id] || {};
        for (const u of Object.keys(unexpected)) {
            throw new Error(`Unexpected property '${u}' in MONSTER_ADJUSTMENTS[${location.id}]`);
        }
        const skipMonsters = (skip === true ||
            (!this.flags.shuffleTowerMonsters() && tower) ||
            !location.spritePatterns ||
            !location.spritePalettes);
        const monsters = [];
        let slots = [];
        let slot = 0x0c;
        for (const spawn of skipMonsters ? [] : location.spawns) {
            ++slot;
            if (!spawn.used || !spawn.isMonster())
                continue;
            const id = spawn.monsterId;
            if (!SCALED_MONSTERS.has(id) ||
                SCALED_MONSTERS.get(id).type !== 'm')
                continue;
            const object = location.rom.objects[id];
            if (!(object instanceof Monster))
                continue;
            const patBank = spawn.patternBank;
            const pat = location.spritePatterns[patBank];
            const pal = object.palettes(true);
            const pal2 = pal.includes(2) ? location.spritePalettes[0] : undefined;
            const pal3 = pal.includes(3) ? location.spritePalettes[1] : undefined;
            monsters.push({ id, pat, pal2, pal3, patBank });
            (this.report[`start-${id.toString(16)}`] = this.report[`start-${id.toString(16)}`] || [])
                .push('$' + location.id.toString(16));
            slots.push(slot);
        }
        if (!monsters.length || skip)
            slots = [];
        this.locations.push({ location, slots });
        this.monsters.push(...monsters);
    }
    shuffle(random, graphics) {
        const rom = graphics.rom;
        this.report['pre-shuffle locations'] = this.locations.map(l => l.location.id);
        this.report['pre-shuffle monsters'] = this.monsters.map(m => m.id);
        random.shuffle(this.locations);
        random.shuffle(this.monsters);
        this.report['post-shuffle locations'] = this.locations.map(l => l.location.id);
        this.report['post-shuffle monsters'] = this.monsters.map(m => m.id);
        while (this.locations.length) {
            const { location, slots } = this.locations.pop();
            const report = this.report['$' + location.id.toString(16).padStart(2, '0')] = [];
            const { maxFlyers = 0, nonFlyers = {}, tower = false } = MONSTER_ADJUSTMENTS[location.id] || {};
            if (tower)
                continue;
            let flyers = maxFlyers;
            let constraint = Constraint.forLocation(location.id);
            if (location.bossId() != null) {
            }
            for (const spawn of location.spawns) {
                if (spawn.isChest() && !spawn.isInvisible()) {
                    if (rom.slots[spawn.id] < 0x70) {
                        constraint = constraint.meet(Constraint.TREASURE_CHEST, true);
                    }
                    else {
                        constraint = constraint.meet(Constraint.MIMIC, true);
                    }
                }
                else if (spawn.isNpc() || spawn.isBoss()) {
                    const c = graphics.getNpcConstraint(location.id, spawn.id);
                    constraint = constraint.meet(c, true);
                    if (spawn.isNpc() && (spawn.id === 0x6b || spawn.id === 0x68)) {
                        constraint = constraint.meet(Constraint.KENSU_CHEST, true);
                    }
                }
                else if (spawn.isMonster() &&
                    !(rom.objects[spawn.monsterId] instanceof Monster)) {
                    const c = graphics.getMonsterConstraint(location.id, spawn.monsterId);
                    constraint = constraint.meet(c, true);
                }
                else if (spawn.isShootingWall(location)) {
                    constraint = constraint.meet(Constraint.SHOOTING_WALL, true);
                }
            }
            report.push(`Initial pass: ${constraint.fixed.map(s => s.size < Infinity ? '[' + [...s].join(', ') + ']' : 'all')}`);
            const classes = new Map();
            const tryAddMonster = (m) => {
                const monster = rom.objects[m.id];
                if (monster.monsterClass) {
                    const representative = classes.get(monster.monsterClass);
                    if (representative != null && representative !== m.id)
                        return false;
                }
                const flyer = FLYERS.has(m.id);
                const moth = MOTHS_AND_BATS.has(m.id);
                if (flyer) {
                    if (!flyers)
                        return false;
                    --flyers;
                }
                const c = graphics.getMonsterConstraint(location.id, m.id);
                let meet = constraint.tryMeet(c);
                if (!meet && constraint.pal2.size < Infinity && constraint.pal3.size < Infinity) {
                    if (this.flags.shuffleSpritePalettes()) {
                        meet = constraint.tryMeet(c, true);
                    }
                }
                if (!meet)
                    return false;
                let pos;
                if (monsterPlacer) {
                    const monster = rom.objects[m.id];
                    if (!(monster instanceof Monster)) {
                        throw new Error(`non-monster: ${monster}`);
                    }
                    pos = monsterPlacer(monster);
                    if (pos == null)
                        return false;
                }
                report.push(`  Adding ${m.id.toString(16)}: ${meet}`);
                constraint = meet;
                if (monster.monsterClass)
                    classes.set(monster.monsterClass, m.id);
                let eligible = 0;
                if (flyer || moth) {
                    for (let i = 0; i < slots.length; i++) {
                        if (slots[i] in nonFlyers) {
                            eligible = i;
                            break;
                        }
                    }
                }
                else {
                    for (let i = 0; i < slots.length; i++) {
                        if (slots[i] in nonFlyers)
                            continue;
                        eligible = i;
                        break;
                    }
                }
                (this.report[`mon-${m.id.toString(16)}`] = this.report[`mon-${m.id.toString(16)}`] || [])
                    .push('$' + location.id.toString(16));
                const slot = slots[eligible];
                const spawn = location.spawns[slot - 0x0d];
                if (monsterPlacer) {
                    spawn.screen = pos >>> 8;
                    spawn.tile = pos & 0xff;
                }
                else if (slot in nonFlyers) {
                    spawn.y += nonFlyers[slot][0] * 16;
                    spawn.x += nonFlyers[slot][1] * 16;
                }
                spawn.monsterId = m.id;
                report.push(`    slot ${slot.toString(16)}: ${spawn}`);
                slots.splice(eligible, 1);
                return true;
            };
            const monsterPlacer = slots.length && this.flags.randomizeMaps() ?
                location.monsterPlacer(random) : null;
            if (flyers && slots.length) {
                for (let i = 0; i < Math.min(40, this.monsters.length); i++) {
                    if (FLYERS.has(this.monsters[i].id)) {
                        if (tryAddMonster(this.monsters[i])) {
                            this.monsters.splice(i, 1);
                        }
                    }
                }
            }
            for (let i = 0; i < this.monsters.length; i++) {
                if (!slots.length)
                    break;
                if (tryAddMonster(this.monsters[i])) {
                    const [used] = this.monsters.splice(i, 1);
                    if (!FLYERS.has(used.id))
                        this.used.push(used);
                    i--;
                }
            }
            for (let i = 0; i < this.used.length; i++) {
                if (!slots.length)
                    break;
                if (tryAddMonster(this.used[i])) {
                    this.used.push(...this.used.splice(i, 1));
                    i--;
                }
            }
            constraint.fix(location, random);
            if (slots.length) {
                console.error(`Failed to fill location ${location.id.toString(16)}: ${slots.length} remaining`);
                for (const slot of slots) {
                    const spawn = location.spawns[slot - 0x0d];
                    spawn.x = spawn.y = 0;
                    spawn.id = 0xb0;
                    spawn.data[0] = 0xfe;
                }
            }
            for (const spawn of location.spawns) {
                graphics.configure(location, spawn);
            }
        }
    }
}
const FLYERS = new Set([0x59, 0x5c, 0x6e, 0x6f, 0x81, 0x8a, 0xa3, 0xc4]);
const MOTHS_AND_BATS = new Set([0x55, 0x5d, 0x7c, 0xbc, 0xc1]);
const MONSTER_ADJUSTMENTS = {
    [0x03]: {
        fixedSlots: {
            pat1: 0x60,
        },
        maxFlyers: 2,
    },
    [0x07]: {
        nonFlyers: {
            [0x0f]: [0, -3],
            [0x10]: [-10, 0],
            [0x11]: [0, 4],
        },
    },
    [0x14]: {
        maxFlyers: 2,
    },
    [0x15]: {
        maxFlyers: 2,
    },
    [0x1a]: {
        fixedSlots: {
            pal3: 0x23,
            pat1: 0x4f,
        },
        maxFlyers: 2,
        nonFlyers: {
            [0x10]: [4, 0],
            [0x11]: [5, 0],
            [0x12]: [4, 0],
            [0x13]: [5, 0],
            [0x14]: [4, 0],
            [0x15]: [4, 0],
        },
    },
    [0x1b]: {
        skip: true,
    },
    [0x20]: {
        maxFlyers: 1,
    },
    [0x21]: {
        fixedSlots: {
            pat1: 0x50,
        },
        maxFlyers: 1,
    },
    [0x27]: {
        nonFlyers: {
            [0x0d]: [0, 0x10],
        },
    },
    [0x28]: {
        maxFlyers: 1,
    },
    [0x29]: {
        maxFlyers: 1,
    },
    [0x2b]: {
        nonFlyers: {
            [0x14]: [0x20, -8],
        },
    },
    [0x40]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x13]: [12, -0x10],
        },
    },
    [0x41]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x15]: [0, -6],
        },
    },
    [0x42]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x0d]: [0, 8],
            [0x0e]: [-8, 8],
        },
    },
    [0x47]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x0d]: [-8, -8],
        },
    },
    [0x4a]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x0e]: [4, 0],
            [0x0f]: [0, -3],
            [0x10]: [0, 4],
        },
    },
    [0x4c]: {},
    [0x4d]: {
        maxFlyers: 1,
    },
    [0x4e]: {
        maxFlyers: 1,
    },
    [0x4f]: {},
    [0x57]: {
        fixedSlots: {
            pat1: 0x4d,
        },
    },
    [0x59]: {
        tower: true,
    },
    [0x5a]: {
        tower: true,
    },
    [0x5b]: {
        tower: true,
    },
    [0x60]: {
        fixedSlots: {
            pal3: 0x08,
            pat1: 0x52,
        },
        maxFlyers: 2,
        skip: true,
    },
    [0x64]: {
        fixedSlots: {
            pal3: 0x08,
            pat1: 0x52,
        },
        skip: true,
    },
    [0x68]: {
        fixedSlots: {
            pal3: 0x08,
            pat1: 0x52,
        },
        skip: true,
    },
    [0x69]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x17]: [4, 6],
        },
    },
    [0x6a]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x15]: [0, 0x18],
        },
    },
    [0x6c]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x17]: [0, 0x18],
        },
    },
    [0x6d]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x11]: [0x10, 0],
            [0x1b]: [0, 0],
            [0x1c]: [6, 0],
        },
    },
    [0x78]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x16]: [-8, -8],
        },
    },
    [0x7c]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x15]: [-0x27, 0x54],
        },
    },
    [0x84]: {
        nonFlyers: {
            [0x12]: [0, -4],
            [0x13]: [0, 4],
            [0x14]: [-6, 0],
            [0x15]: [14, 12],
        },
    },
    [0x88]: {
        maxFlyers: 1,
    },
    [0x89]: {
        maxFlyers: 1,
    },
    [0x8a]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x0d]: [7, 0],
            [0x0e]: [0, 0],
            [0x0f]: [7, 3],
            [0x10]: [0, 6],
            [0x11]: [11, -0x10],
        },
    },
    [0x8f]: {
        skip: true,
    },
    [0x90]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x14]: [-0xb, -3],
            [0x15]: [0, 0x10],
        },
    },
    [0x91]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x18]: [0, 14],
            [0x19]: [4, -0x10],
        },
    },
    [0x98]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x14]: [-6, 6],
            [0x15]: [0, -0x10],
        },
    },
    [0x9e]: {
        maxFlyers: 2,
    },
    [0xa2]: {
        maxFlyers: 1,
        nonFlyers: {
            [0x12]: [0, 11],
            [0x13]: [6, 0],
        },
    },
    [0xa5]: {
        nonFlyers: {
            [0x17]: [6, 6],
            [0x18]: [-6, 0],
            [0x19]: [-1, -7],
        },
    },
    [0xa6]: {
        skip: true,
    },
    [0xa8]: {
        skip: true,
    },
    [0xa9]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x16]: [0x1a, -0x10],
            [0x17]: [0, 0x20],
        },
    },
    [0xab]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x0d]: [1, 0],
            [0x0e]: [2, -2],
        },
    },
    [0xad]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x18]: [0, 8],
            [0x19]: [0, -8],
        },
    },
    [0xaf]: {
        nonFlyers: {
            [0x0d]: [0, 0],
            [0x0e]: [0, 0],
            [0x13]: [0x3b, -0x26],
        },
    },
    [0xb4]: {
        maxFlyers: 2,
        nonFlyers: {
            [0x11]: [6, 0],
            [0x12]: [0, 6],
        },
    },
    [0xd7]: {
        skip: true,
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2h1ZmZsZW1vbnN0ZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3Bhc3Mvc2h1ZmZsZW1vbnN0ZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUNoRCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFNUMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzFDLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUVyRCxNQUFNLFVBQVUsZUFBZSxDQUFDLEdBQVEsRUFBRSxLQUFjLEVBQUUsTUFBYztJQUV0RSxNQUFNLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVuQyxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsRUFBRTtRQUFFLFFBQVEsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEUsTUFBTSxJQUFJLEdBQUcsSUFBSSxXQUFXLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLEtBQUssTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLFNBQVMsRUFBRTtRQUMvQixJQUFJLEdBQUcsQ0FBQyxJQUFJO1lBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNsQztJQUNELElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQ2pDLENBQUM7QUFhRCxNQUFNLFdBQVc7SUFTZixZQUNhLEtBQWMsRUFDZCxNQUFtRTtRQURuRSxVQUFLLEdBQUwsS0FBSyxDQUFTO1FBQ2QsV0FBTSxHQUFOLE1BQU0sQ0FBNkQ7UUFSdkUsYUFBUSxHQUF3QixFQUFFLENBQUM7UUFFbkMsU0FBSSxHQUF3QixFQUFFLENBQUM7UUFFL0IsY0FBUyxHQUE0QyxFQUFFLENBQUM7SUFJa0Is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QUFDLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDZjtLQUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO0tBQ2I7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sU0FBUyxFQUFFLENBQUM7S0FDYjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFFTixVQUFVLEVBQUU7WUFDVixJQUFJLEVBQUUsSUFBSTtZQUNWLElBQUksRUFBRSxJQUFJO1NBQ1g7UUFDRCxTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDZCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDZCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNmO0tBQ0Y7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBRU4sSUFBSSxFQUFFLElBQUk7S0FDWDtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztLQUNiO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFVBQVUsRUFBRTtZQUNWLElBQUksRUFBRSxJQUFJO1NBRVg7UUFDRCxTQUFTLEVBQUUsQ0FBQztLQUNiO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDO1NBQ2xCO0tBQ0Y7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sU0FBUyxFQUFFLENBQUM7S0FDYjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztLQUNiO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbkI7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUM7U0FDcEI7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDaEI7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNoQjtLQUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO1FBQ1osU0FBUyxFQUFFO1lBQ1QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2pCO0tBQ0Y7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sU0FBUyxFQUFFLENBQUM7UUFDWixTQUFTLEVBQUU7WUFDVCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDZixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNmO0tBQ0Y7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFLEVBRVA7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sU0FBUyxFQUFFLENBQUM7S0FDYjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztLQUNiO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUVQO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFVBQVUsRUFBRTtZQUNWLElBQUksRUFBRSxJQUFJO1NBQ1g7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFFTixLQUFLLEVBQUUsSUFBSTtLQUNaO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUVOLEtBQUssRUFBRSxJQUFJO0tBQ1o7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBRU4sS0FBSyxFQUFFLElBQUk7S0FDWjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixVQUFVLEVBQUU7WUFDVixJQUFJLEVBQUUsSUFBSTtZQUNWLElBQUksRUFBRSxJQUFJO1NBQ1g7UUFDRCxTQUFTLEVBQUUsQ0FBQztRQUNaLElBQUksRUFBRSxJQUFJO0tBQ1g7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sVUFBVSxFQUFFO1lBQ1YsSUFBSSxFQUFFLElBQUk7WUFDVixJQUFJLEVBQUUsSUFBSTtTQUNYO1FBQ0QsSUFBSSxFQUFFLElBQUk7S0FDWDtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixVQUFVLEVBQUU7WUFDVixJQUFJLEVBQUUsSUFBSTtZQUNWLElBQUksRUFBRSxJQUFJO1NBQ1g7UUFDRCxJQUFJLEVBQUUsSUFBSTtLQUNYO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO1FBQ1osU0FBUyxFQUFFO1lBQ1QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDZjtLQUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO1FBQ1osU0FBUyxFQUFFO1lBQ1QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUM7U0FDbEI7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDO1NBQ2xCO0tBQ0Y7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sU0FBUyxFQUFFLENBQUM7UUFDWixTQUFTLEVBQUU7WUFDVCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNqQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ2Y7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUUsQ0FBQztRQUNaLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNqQjtLQUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO1FBQ1osU0FBUyxFQUFFO1lBQ1QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztTQUN0QjtLQUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRTtZQUNULENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDZixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMs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QUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO1FBQ1osU0FBUyxFQUFFO1lBQ1QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDZCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2hCO0tBQ0Y7SUFFRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ04sU0FBUyxFQUFFLENBQUM7UUFDWixTQUFTLEVBQUU7WUFDVCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDaEI7S0FDRjtJQUNELENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDTixTQUFTLEVBQUU7WUFDVCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNkLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQztTQUV0QjtLQUNGO0lBQ0QsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNOLFNBQVMsRUFBRSxDQUFDO1FBQ1osU0FBUyxFQUFFO1lBQ1QsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDZCxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNmO0tBQ0Y7SUFDRCxDQUFDLElBQUksQ0FBQyxFQUFFO1FBRU4sSUFBSSxFQUFFLElBQUk7S0FDWDtDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZsYWdTZXR9IGZyb20gJy4uL2ZsYWdzZXQuanMnO1xuaW1wb3J0IHtSYW5kb219IGZyb20gJy4uL3JhbmRvbS5qcyc7XG5pbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7Q29uc3RyYWludH0gZnJvbSAnLi4vcm9tL2NvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHtHcmFwaGljc30gZnJvbSAnLi4vcm9tL2dyYXBoaWNzLmpzJztcbmltcG9ydCB7TG9jYXRpb259IGZyb20gJy4uL3JvbS9sb2NhdGlvbi5qcyc7XG5pbXBvcnQge01vbnN0ZXJ9IGZyb20gJy4uL3JvbS9tb25zdGVyLmpzJztcbmltcG9ydCB7U0NBTEVEX01PTlNURVJTfSBmcm9tICcuL3Jlc2NhbGVtb25zdGVycy5qcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlTW9uc3RlcnMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0LCByYW5kb206IFJhbmRvbSkge1xuICAvLyBUT0RPOiBvbmNlIHdlIGhhdmUgbG9jYXRpb24gbmFtZXMsIGNvbXBpbGUgYSBzcG9pbGVyIG9mIHNodWZmbGVkIG1vbnN0ZXJzXG4gIGNvbnN0IGdyYXBoaWNzID0gbmV3IEdyYXBoaWNzKHJvbSk7XG4gIC8vICh3aW5kb3cgYXMgYW55KS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuICBpZiAoZmxhZ3Muc2h1ZmZsZVNwcml0ZVBhbGV0dGVzKCkpIGdyYXBoaWNzLnNodWZmbGVQYWxldHRlcyhyYW5kb20pO1xuICBjb25zdCBwb29sID0gbmV3IE1vbnN0ZXJQb29sKGZsYWdzLCB7fSk7XG4gIGZvciAoY29uc3QgbG9jIG9mIHJvbS5sb2NhdGlvbnMpIHtcbiAgICBpZiAobG9jLnVzZWQpIHBvb2wucG9wdWxhdGUobG9jKTtcbiAgfVxuICBwb29sLnNodWZmbGUocmFuZG9tLCBncmFwaGljcyk7XG59XG5cbmludGVyZmFjZSBNb25zdGVyQ29uc3RyYWludCB7XG4gIGlkOiBudW1iZXI7XG4gIHBhdDogbnVtYmVyO1xuICBwYWwyOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHBhbDM6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcGF0QmFuazogbnVtYmVyIHwgdW5kZWZpbmVkO1xufVxuXG4vLyBBIHBvb2wgb2YgbW9uc3RlciBzcGF3bnMsIGJ1aWx0IHVwIGZyb20gdGhlIGxvY2F0aW9ucyBpbiB0aGUgcm9tLlxuLy8gUGFzc2VzIHRocm91Z2ggdGhlIGxvY2F0aW9ucyB0d2ljZSwgZmlyc3QgdG8gYnVpbGQgYW5kIHRoZW4gdG9cbi8vIHJlYXNzaWduIG1vbnN0ZXJzLlxuY2xhc3MgTW9uc3RlclBvb2wge1xuXG4gIC8vIGF2YWlsYWJsZSBtb25zdGVyc1xuICByZWFkb25seSBtb25zdGVyczogTW9uc3RlckNvbnN0cmFpbnRbXSA9IFtdO1xuICAvLyB1c2VkIG1vbnN0ZXJzIC0gYXMgYSBiYWNrdXAgaWYgbm8gYXZhaWxhYmxlIG1vbnN0ZXJzIGZpdFxuICByZWFkb25seSB1c2VkOiBNb25zdGVyQ29uc3RyYWludFtdID0gW107XG4gIC8vIGFsbCBsb2NhdGlvbnNcbiAgcmVhZG9ubHkgbG9jYXRpb25zOiB7bG9jYXRpb246IExvY2F0aW9uLCBzbG90czogbnVtYmVyW119W10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIHJlYWRvbmx5IGZsYWdzOiBGbGFnU2V0LFxuICAgICAgcmVhZG9ubHkgcmVwb3J0OiB7W2xvYzogbnVtYmVyXTogc3RyaW5nW10sIFtrZXk6IHN0cmluZ106IChzdHJpbmd8bnVtYmVyKVtdfSkge31cblxuICAvLyBUT0RPIC0gbW9uc3RlcnMgdy8gcHJvamVjdGlsZXMgbWF5IGhhdmUgYSBzcGVjaWZpYyBiYW5rIHRoZXkgbmVlZCB0byBhcHBlYXIgaW4sXG4gIC8vIHNpbmNlIHRoZSBwcm9qZWN0aWxlIGRvZXNuJ3Qga25vdyB3aGVyZSBpdCBjYW1lIGZyb20uLi4/XG4gIC8vICAgLSBmb3Igbm93LCBqdXN0IGFzc3VtZSBpZiBpdCBoYXMgYSBjaGlsZCB0aGVuIGl0IG11c3Qga2VlcCBzYW1lIHBhdHRlcm4gYmFuayFcblxuICBwb3B1bGF0ZShsb2NhdGlvbjogTG9jYXRpb24pIHtcbiAgICBjb25zdCB7bWF4Rmx5ZXJzID0gMCxcbiAgICAgICAgICAgbm9uRmx5ZXJzID0ge30sXG4gICAgICAgICAgIHNraXAgPSBmYWxzZSxcbiAgICAgICAgICAgdG93ZXIgPSBmYWxzZSxcbiAgICAgICAgICAgZml4ZWRTbG90cyA9IHt9LFxuICAgICAgICAgICAuLi51bmV4cGVjdGVkfSA9IE1PTlNURVJfQURKVVNUTUVOVFNbbG9jYXRpb24uaWRdIHx8IHt9O1xuICAgIGZvciAoY29uc3QgdSBvZiBPYmplY3Qua2V5cyh1bmV4cGVjdGVkKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBVbmV4cGVjdGVkIHByb3BlcnR5ICcke3V9JyBpbiBNT05TVEVSX0FESlVTVE1FTlRTWyR7bG9jYXRpb24uaWR9XWApO1xuICAgIH1cbiAgICBjb25zdCBza2lwTW9uc3RlcnMgPVxuICAgICAgICAoc2tpcCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgKCF0aGlzLmZsYWdzLnNodWZmbGVUb3dlck1vbnN0ZXJzKCkgJiYgdG93ZXIpIHx8XG4gICAgICAgICAgICAhbG9jYXRpb24uc3ByaXRlUGF0dGVybnMgfHxcbiAgICAgICAgICAgICFsb2NhdGlvbi5zcHJpdGVQYWxldHRlcyk7XG4gICAgY29uc3QgbW9uc3RlcnMgPSBbXTtcbiAgICBsZXQgc2xvdHMgPSBbXTtcbiAgICAvLyBjb25zdCBjb25zdHJhaW50cyA9IHt9O1xuICAgIC8vIGxldCB0cmVhc3VyZUNoZXN0ID0gZmFsc2U7XG4gICAgbGV0IHNsb3QgPSAweDBjO1xuICAgIGZvciAoY29uc3Qgc3Bhd24gb2Ygc2tpcE1vbnN0ZXJzID8gW10gOiBsb2NhdGlvbi5zcGF3bnMpIHtcbiAgICAgICsrc2xvdDtcbiAgICAgIGlmICghc3Bhd24udXNlZCB8fCAhc3Bhd24uaXNNb25zdGVyKCkpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgaWQgPSBzcGF3bi5tb25zdGVySWQ7XG4gICAgICBpZiAoIVNDQUxFRF9NT05TVEVSUy5oYXMoaWQpIHx8XG4gICAgICAgICAgU0NBTEVEX01PTlNURVJTLmdldChpZCkhLnR5cGUgIT09ICdtJykgY29udGludWU7XG4gICAgICBjb25zdCBvYmplY3QgPSBsb2NhdGlvbi5yb20ub2JqZWN0c1tpZF07XG4gICAgICBpZiAoIShvYmplY3QgaW5zdGFuY2VvZiBNb25zdGVyKSkgY29udGludWU7XG4gICAgICBjb25zdCBwYXRCYW5rID0gc3Bhd24ucGF0dGVybkJhbms7XG4gICAgICBjb25zdCBwYXQgPSBsb2NhdGlvbi5zcHJpdGVQYXR0ZXJuc1twYXRCYW5rXTtcbiAgICAgIGNvbnN0IHBhbCA9IG9iamVjdC5wYWxldHRlcyh0cnVlKTtcbiAgICAgIGNvbnN0IHBhbDIgPSBwYWwuaW5jbHVkZXMoMikgPyBsb2NhdGlvbi5zcHJpdGVQYWxldHRlc1swXSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IHBhbDMgPSBwYWwuaW5jbHVkZXMoMykgPyBsb2NhdGlvbi5zcHJpdGVQYWxldHRlc1sxXSA6IHVuZGVmaW5lZDtcbiAgICAgIG1vbnN0ZXJzLnB1c2goe2lkLCBwYXQsIHBhbDIsIHBhbDMsIHBhdEJhbmt9KTtcbiAgICAgICh0aGlzLnJlcG9ydFtgc3RhcnQtJHtpZC50b1N0cmluZygxNil9YF0gPSB0aGlzLnJlcG9ydFtgc3RhcnQtJHtpZC50b1N0cmluZygxNil9YF0gfHwgW10pXG4gICAgICAgICAgLnB1c2goJyQnICsgbG9jYXRpb24uaWQudG9TdHJpbmcoMTYpKTtcbiAgICAgIHNsb3RzLnB1c2goc2xvdCk7XG4gICAgfVxuICAgIGlmICghbW9uc3RlcnMubGVuZ3RoIHx8IHNraXApIHNsb3RzID0gW107XG4gICAgdGhpcy5sb2NhdGlvbnMucHVzaCh7bG9jYXRpb24sIHNsb3RzfSk7XG4gICAgdGhpcy5tb25zdGVycy5wdXNoKC4uLm1vbnN0ZXJzKTtcbiAgfVxuXG4gIHNodWZmbGUocmFuZG9tOiBSYW5kb20sIGdyYXBoaWNzOiBHcmFwaGljcykge1xuICAgIGNvbnN0IHJvbSA9IGdyYXBoaWNzLnJvbTtcbiAgICB0aGlzLnJlcG9ydFsncHJlLXNodWZmbGUgbG9jYXRpb25zJ10gPSB0aGlzLmxvY2F0aW9ucy5tYXAobCA9PiBsLmxvY2F0aW9uLmlkKTtcbiAgICB0aGlzLnJlcG9ydFsncHJlLXNodWZmbGUgbW9uc3RlcnMnXSA9IHRoaXMubW9uc3RlcnMubWFwKG0gPT4gbS5pZCk7XG4gICAgcmFuZG9tLnNodWZmbGUodGhpcy5sb2NhdGlvbnMpO1xuICAgIHJhbmRvbS5zaHVmZmxlKHRoaXMubW9uc3RlcnMpO1xuICAgIHRoaXMucmVwb3J0Wydwb3N0LXNodWZmbGUgbG9jYXRpb25zJ10gPSB0aGlzLmxvY2F0aW9ucy5tYXAobCA9PiBsLmxvY2F0aW9uLmlkKTtcbiAgICB0aGlzLnJlcG9ydFsncG9zdC1zaHVmZmxlIG1vbnN0ZXJzJ10gPSB0aGlzLm1vbnN0ZXJzLm1hcChtID0+IG0uaWQpO1xuICAgIHdoaWxlICh0aGlzLmxvY2F0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHtsb2NhdGlvbiwgc2xvdHN9ID0gdGhpcy5sb2NhdGlvbnMucG9wKCkhO1xuICAgICAgY29uc3QgcmVwb3J0OiBzdHJpbmdbXSA9IHRoaXMucmVwb3J0WyckJyArIGxvY2F0aW9uLmlkLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpXSA9IFtdO1xuICAgICAgY29uc3Qge21heEZseWVycyA9IDAsIG5vbkZseWVycyA9IHt9LCB0b3dlciA9IGZhbHNlfSA9XG4gICAgICAgICAgICBNT05TVEVSX0FESlVTVE1FTlRTW2xvY2F0aW9uLmlkXSB8fCB7fTtcbiAgICAgIGlmICh0b3dlcikgY29udGludWU7XG4gICAgICBsZXQgZmx5ZXJzID0gbWF4Rmx5ZXJzOyAvLyBjb3VudCBkb3duLi4uXG5cbiAgICAgIC8vIERldGVybWluZSBsb2NhdGlvbiBjb25zdHJhaW50c1xuICAgICAgbGV0IGNvbnN0cmFpbnQgPSBDb25zdHJhaW50LmZvckxvY2F0aW9uKGxvY2F0aW9uLmlkKTtcbiAgICAgIGlmIChsb2NhdGlvbi5ib3NzSWQoKSAhPSBudWxsKSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBib3NzZXMgYWx3YXlzIGxlYXZlIGNoZXN0cy5cbiAgICAgICAgLy8gVE9ETyAtIGl0J3MgcG9zc2libGUgdGhpcyBpcyBvdXQgb2Ygb3JkZXIgdy5yLnQuIHdyaXRpbmcgdGhlIGJvc3M/XG4gICAgICAgIC8vICAgIGNvbnN0cmFpbnQgPSBjb25zdHJhaW50Lm1lZXQoQ29uc3RyYWludC5CT1NTLCB0cnVlKTtcbiAgICAgICAgLy8gTk9URTogdGhpcyBkb2VzIG5vdCB3b3JrIGZvciAoZS5nLikgbWFkbyAxLCB3aGVyZSBhenRlY2EgcmVxdWlyZXNcbiAgICAgICAgLy8gNTMgd2hpY2ggaXMgbm90IGEgY29tcGF0aWJsZSBjaGVzdCBwYWdlLlxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBzcGF3biBvZiBsb2NhdGlvbi5zcGF3bnMpIHtcbiAgICAgICAgaWYgKHNwYXduLmlzQ2hlc3QoKSAmJiAhc3Bhd24uaXNJbnZpc2libGUoKSkge1xuICAgICAgICAgIGlmIChyb20uc2xvdHNbc3Bhd24uaWRdIDwgMHg3MCkge1xuICAgICAgICAgICAgY29uc3RyYWludCA9IGNvbnN0cmFpbnQubWVldChDb25zdHJhaW50LlRSRUFTVVJFX0NIRVNULCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3RyYWludCA9IGNvbnN0cmFpbnQubWVldChDb25zdHJhaW50Lk1JTUlDLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc3Bhd24uaXNOcGMoKSB8fCBzcGF3bi5pc0Jvc3MoKSkge1xuICAgICAgICAgIGNvbnN0IGMgPSBncmFwaGljcy5nZXROcGNDb25zdHJhaW50KGxvY2F0aW9uLmlkLCBzcGF3bi5pZCk7XG4gICAgICAgICAgY29uc3RyYWludCA9IGNvbnN0cmFpbnQubWVldChjLCB0cnVlKTtcbiAgICAgICAgICBpZiAoc3Bhd24uaXNOcGMoKSAmJiAoc3Bhd24uaWQgPT09IDB4NmIgfHwgc3Bhd24uaWQgPT09IDB4NjgpKSB7XG4gICAgICAgICAgICAvLyBzbGVlcGluZyBrZW5zdSAoNmIpIGxlYXZlcyBiZWhpbmQgYSB0cmVhc3VyZSBjaGVzdFxuICAgICAgICAgICAgY29uc3RyYWludCA9IGNvbnN0cmFpbnQubWVldChDb25zdHJhaW50LktFTlNVX0NIRVNULCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc3Bhd24uaXNNb25zdGVyKCkgJiZcbiAgICAgICAgICAgICAgICAgICAhKHJvbS5vYmplY3RzW3NwYXduLm1vbnN0ZXJJZF0gaW5zdGFuY2VvZiBNb25zdGVyKSkge1xuICAgICAgICAgIGNvbnN0IGMgPSBncmFwaGljcy5nZXRNb25zdGVyQ29uc3RyYWludChsb2NhdGlvbi5pZCwgc3Bhd24ubW9uc3RlcklkKTtcbiAgICAgICAgICBjb25zdHJhaW50ID0gY29uc3RyYWludC5tZWV0KGMsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHNwYXduLmlzU2hvb3RpbmdXYWxsKGxvY2F0aW9uKSkge1xuICAgICAgICAgIGNvbnN0cmFpbnQgPSBjb25zdHJhaW50Lm1lZXQoQ29uc3RyYWludC5TSE9PVElOR19XQUxMLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXBvcnQucHVzaChgSW5pdGlhbCBwYXNzOiAke2NvbnN0cmFpbnQuZml4ZWQubWFwKHM9PnMuc2l6ZTxJbmZpbml0eT8nWycrWy4uLnNdLmpvaW4oJywgJykrJ10nOidhbGwnKX1gKTtcblxuICAgICAgY29uc3QgY2xhc3NlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgICBjb25zdCB0cnlBZGRNb25zdGVyID0gKG06IE1vbnN0ZXJDb25zdHJhaW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG1vbnN0ZXIgPSByb20ub2JqZWN0c1ttLmlkXSBhcyBNb25zdGVyO1xuICAgICAgICBpZiAobW9uc3Rlci5tb25zdGVyQ2xhc3MpIHtcbiAgICAgICAgICBjb25zdCByZXByZXNlbnRhdGl2ZSA9IGNsYXNzZXMuZ2V0KG1vbnN0ZXIubW9uc3RlckNsYXNzKTtcbiAgICAgICAgICBpZiAocmVwcmVzZW50YXRpdmUgIT0gbnVsbCAmJiByZXByZXNlbnRhdGl2ZSAhPT0gbS5pZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZseWVyID0gRkxZRVJTLmhhcyhtLmlkKTtcbiAgICAgICAgY29uc3QgbW90aCA9IE1PVEhTX0FORF9CQVRTLmhhcyhtLmlkKTtcbiAgICAgICAgaWYgKGZseWVyKSB7XG4gICAgICAgICAgLy8gVE9ETyAtIGFkZCBhIHNtYWxsIHByb2JhYmlsaXR5IG9mIGFkZGluZyBpdCBhbnl3YXksIG1heWJlXG4gICAgICAgICAgLy8gYmFzZWQgb24gdGhlIG1hcCBhcmVhPyAgMjUgc2VlbXMgYSBnb29kIHRocmVzaG9sZC5cbiAgICAgICAgICBpZiAoIWZseWVycykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIC0tZmx5ZXJzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGMgPSBncmFwaGljcy5nZXRNb25zdGVyQ29uc3RyYWludChsb2NhdGlvbi5pZCwgbS5pZCk7XG4gICAgICAgIGxldCBtZWV0ID0gY29uc3RyYWludC50cnlNZWV0KGMpO1xuICAgICAgICBpZiAoIW1lZXQgJiYgY29uc3RyYWludC5wYWwyLnNpemUgPCBJbmZpbml0eSAmJiBjb25zdHJhaW50LnBhbDMuc2l6ZSA8IEluZmluaXR5KSB7XG4gICAgICAgICAgaWYgKHRoaXMuZmxhZ3Muc2h1ZmZsZVNwcml0ZVBhbGV0dGVzKCkpIHtcbiAgICAgICAgICAgIG1lZXQgPSBjb25zdHJhaW50LnRyeU1lZXQoYywgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbWVldCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgZWFybHkgaWYgdGhlIG1vbnN0ZXIgaXMgcGxhY2VhYmxlLlxuICAgICAgICBsZXQgcG9zOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChtb25zdGVyUGxhY2VyKSB7XG4gICAgICAgICAgY29uc3QgbW9uc3RlciA9IHJvbS5vYmplY3RzW20uaWRdO1xuICAgICAgICAgIGlmICghKG1vbnN0ZXIgaW5zdGFuY2VvZiBNb25zdGVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBub24tbW9uc3RlcjogJHttb25zdGVyfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwb3MgPSBtb25zdGVyUGxhY2VyKG1vbnN0ZXIpO1xuICAgICAgICAgIGlmIChwb3MgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwb3J0LnB1c2goYCAgQWRkaW5nICR7bS5pZC50b1N0cmluZygxNil9OiAke21lZXR9YCk7XG4gICAgICAgIGNvbnN0cmFpbnQgPSBtZWV0O1xuXG4gICAgICAgIC8vIFBpY2sgdGhlIHNsb3Qgb25seSBhZnRlciB3ZSBrbm93IGZvciBzdXJlIHRoYXQgaXQgd2lsbCBmaXQuXG4gICAgICAgIGlmIChtb25zdGVyLm1vbnN0ZXJDbGFzcykgY2xhc3Nlcy5zZXQobW9uc3Rlci5tb25zdGVyQ2xhc3MsIG0uaWQpXG4gICAgICAgIGxldCBlbGlnaWJsZSA9IDA7XG4gICAgICAgIGlmIChmbHllciB8fCBtb3RoKSB7XG4gICAgICAgICAgLy8gbG9vayBmb3IgYSBmbHllciBzbG90IGlmIHBvc3NpYmxlLlxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xvdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzbG90c1tpXSBpbiBub25GbHllcnMpIHtcbiAgICAgICAgICAgICAgZWxpZ2libGUgPSBpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUHJlZmVyIG5vbi1mbHllciBzbG90cywgYnV0IGFkanVzdCBpZiB3ZSBnZXQgYSBmbHllci5cbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc2xvdHNbaV0gaW4gbm9uRmx5ZXJzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGVsaWdpYmxlID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAodGhpcy5yZXBvcnRbYG1vbi0ke20uaWQudG9TdHJpbmcoMTYpfWBdID0gdGhpcy5yZXBvcnRbYG1vbi0ke20uaWQudG9TdHJpbmcoMTYpfWBdIHx8IFtdKVxuICAgICAgICAgICAgLnB1c2goJyQnICsgbG9jYXRpb24uaWQudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgY29uc3Qgc2xvdCA9IHNsb3RzW2VsaWdpYmxlXTtcbiAgICAgICAgY29uc3Qgc3Bhd24gPSBsb2NhdGlvbi5zcGF3bnNbc2xvdCAtIDB4MGRdO1xuICAgICAgICBpZiAobW9uc3RlclBsYWNlcikgeyAvLyBwb3MgPT0gbnVsbCByZXR1cm5lZCBmYWxzZSBlYXJsaWVyXG4gICAgICAgICAgc3Bhd24uc2NyZWVuID0gcG9zISA+Pj4gODtcbiAgICAgICAgICBzcGF3bi50aWxlID0gcG9zISAmIDB4ZmY7XG4gICAgICAgIH0gZWxzZSBpZiAoc2xvdCBpbiBub25GbHllcnMpIHtcbiAgICAgICAgICBzcGF3bi55ICs9IG5vbkZseWVyc1tzbG90XVswXSAqIDE2O1xuICAgICAgICAgIHNwYXduLnggKz0gbm9uRmx5ZXJzW3Nsb3RdWzFdICogMTY7XG4gICAgICAgIH1cbiAgICAgICAgc3Bhd24ubW9uc3RlcklkID0gbS5pZDtcbiAgICAgICAgcmVwb3J0LnB1c2goYCAgICBzbG90ICR7c2xvdC50b1N0cmluZygxNil9OiAke3NwYXdufWApO1xuXG4gICAgICAgIC8vIFRPRE8gLSBhbnl0aGluZyBlbHNlIG5lZWQgc3BsaWNpbmc/XG5cbiAgICAgICAgc2xvdHMuc3BsaWNlKGVsaWdpYmxlLCAxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuXG4gICAgICAvLyBGb3IgZWFjaCBsb2NhdGlvbi4uLi4gdHJ5IHRvIGZpbGwgdXAgdGhlIHNsb3RzXG4gICAgICBjb25zdCBtb25zdGVyUGxhY2VyID1cbiAgICAgICAgICBzbG90cy5sZW5ndGggJiYgdGhpcy5mbGFncy5yYW5kb21pemVNYXBzKCkgP1xuICAgICAgICAgICAgICBsb2NhdGlvbi5tb25zdGVyUGxhY2VyKHJhbmRvbSkgOiBudWxsO1xuXG4gICAgICBpZiAoZmx5ZXJzICYmIHNsb3RzLmxlbmd0aCkge1xuICAgICAgICAvLyBsb29rIGZvciBhbiBlbGlnaWJsZSBmbHllciBpbiB0aGUgZmlyc3QgNDAuICBJZiBpdCdzIHRoZXJlLCBhZGQgaXQgZmlyc3QuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4oNDAsIHRoaXMubW9uc3RlcnMubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgICAgaWYgKEZMWUVSUy5oYXModGhpcy5tb25zdGVyc1tpXS5pZCkpIHtcbiAgICAgICAgICAgIGlmICh0cnlBZGRNb25zdGVyKHRoaXMubW9uc3RlcnNbaV0pKSB7XG4gICAgICAgICAgICAgIHRoaXMubW9uc3RlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByYW5kb20uc2h1ZmZsZSh0aGlzLm1vbnN0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1heWJlIGFkZGVkIGEgc2luZ2xlIGZseWVyLCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgcnVuIG91dC4gIE5vdyBqdXN0IHdvcmsgbm9ybWFsbHlcblxuICAgICAgICAvLyBkZWNpZGUgaWYgd2UncmUgZ29pbmcgdG8gYWRkIGFueSBmbHllcnMuXG5cbiAgICAgICAgLy8gYWxzbyBjb25zaWRlciBhbGxvd2luZyBhIHNpbmdsZSByYW5kb20gZmx5ZXIgdG8gYmUgYWRkZWQgb3V0IG9mIGJhbmQgaWZcbiAgICAgICAgLy8gdGhlIHNpemUgb2YgdGhlIG1hcCBleGNlZWRzIDI1P1xuXG4gICAgICAgIC8vIHByb2JhYmx5IGRvbid0IGFkZCBmbHllcnMgdG8gdXNlZD9cblxuICAgICAgfVxuXG4gICAgICAvLyBpdGVyYXRlIG92ZXIgbW9uc3RlcnMgdW50aWwgd2UgZmluZCBvbmUgdGhhdCdzIGFsbG93ZWQuLi5cbiAgICAgIC8vIE5PVEU6IGZpbGwgdGhlIG5vbi1mbHllciBzbG90cyBmaXJzdCAoZXhjZXB0IGlmIHdlIHBpY2sgYSBmbHllcj8/KVxuICAgICAgLy8gICAtIG1heSBuZWVkIHRvIHdlaWdodCBmbHllcnMgc2xpZ2h0bHkgaGlnaGVyIG9yIGZpbGwgdGhlbSBkaWZmZXJlbnRseT9cbiAgICAgIC8vICAgICBvdGhlcndpc2Ugd2UnbGwgbGlrZWx5IG5vdCBnZXQgdGhlbSB3aGVuIHdlJ3JlIGFsbG93ZWQuLi4/XG4gICAgICAvLyAgIC0gb3IganVzdCBkbyB0aGUgbm9uLWZseWVyICpsb2NhdGlvbnMqIGZpcnN0P1xuICAgICAgLy8gLSBvciBqdXN0IGZpbGwgdXAgZmx5ZXJzIHVudGlsIHdlIHJ1biBvdXQuLi4gMTAwJSBjaGFuY2Ugb2YgZmlyc3QgZmx5ZXIsXG4gICAgICAvLyAgIDUwJSBjaGFuY2Ugb2YgZ2V0dGluZyBhIHNlY29uZCBmbHllciBpZiBhbGxvd2VkLi4uXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubW9uc3RlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzbG90cy5sZW5ndGgpIGJyZWFrO1xuICAgICAgICBpZiAodHJ5QWRkTW9uc3Rlcih0aGlzLm1vbnN0ZXJzW2ldKSkge1xuICAgICAgICAgIGNvbnN0IFt1c2VkXSA9IHRoaXMubW9uc3RlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGlmICghRkxZRVJTLmhhcyh1c2VkLmlkKSkgdGhpcy51c2VkLnB1c2godXNlZCk7XG4gICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGJhY2t1cCBsaXN0XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudXNlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNsb3RzLmxlbmd0aCkgYnJlYWs7XG4gICAgICAgIGlmICh0cnlBZGRNb25zdGVyKHRoaXMudXNlZFtpXSkpIHtcbiAgICAgICAgICB0aGlzLnVzZWQucHVzaCguLi50aGlzLnVzZWQuc3BsaWNlKGksIDEpKTtcbiAgICAgICAgICBpLS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0cmFpbnQuZml4KGxvY2F0aW9uLCByYW5kb20pO1xuXG4gICAgICBpZiAoc2xvdHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IvKnJlcG9ydC5wdXNoKi8oYEZhaWxlZCB0byBmaWxsIGxvY2F0aW9uICR7bG9jYXRpb24uaWQudG9TdHJpbmcoMTYpfTogJHtzbG90cy5sZW5ndGh9IHJlbWFpbmluZ2ApO1xuICAgICAgICBmb3IgKGNvbnN0IHNsb3Qgb2Ygc2xvdHMpIHtcbiAgICAgICAgICBjb25zdCBzcGF3biA9IGxvY2F0aW9uLnNwYXduc1tzbG90IC0gMHgwZF07XG4gICAgICAgICAgc3Bhd24ueCA9IHNwYXduLnkgPSAwO1xuICAgICAgICAgIHNwYXduLmlkID0gMHhiMDtcbiAgICAgICAgICBzcGF3bi5kYXRhWzBdID0gMHhmZTsgLy8gaW5kaWNhdGUgdW51c2VkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qgc3Bhd24gb2YgbG9jYXRpb24uc3Bhd25zKSB7XG4gICAgICAgIGdyYXBoaWNzLmNvbmZpZ3VyZShsb2NhdGlvbiwgc3Bhd24pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBGTFlFUlM6IFNldDxudW1iZXI+ID0gbmV3IFNldChbMHg1OSwgMHg1YywgMHg2ZSwgMHg2ZiwgMHg4MSwgMHg4YSwgMHhhMywgMHhjNF0pO1xuY29uc3QgTU9USFNfQU5EX0JBVFM6IFNldDxudW1iZXI+ID0gbmV3IFNldChbMHg1NSwgLyogc3dhbXAgcGxhbnQgKi8gMHg1ZCwgMHg3YywgMHhiYywgMHhjMV0pO1xuLy8gY29uc3QgU1dJTU1FUlM6IFNldDxudW1iZXI+ID0gbmV3IFNldChbMHg3NSwgMHg3Nl0pO1xuLy8gY29uc3QgU1RBVElPTkFSWTogU2V0PG51bWJlcj4gPSBuZXcgU2V0KFsweDc3LCAweDg3XSk7ICAvLyBrcmFrZW4sIHNvcmNlcm9yXG5cbmludGVyZmFjZSBNb25zdGVyQWRqdXN0bWVudCB7XG4gIG1heEZseWVycz86IG51bWJlcjtcbiAgc2tpcD86IGJvb2xlYW47XG4gIHRvd2VyPzogYm9vbGVhbjtcbiAgZml4ZWRTbG90cz86IHtwYXQwPzogbnVtYmVyLCBwYXQxPzogbnVtYmVyLCBwYWwyPzogbnVtYmVyLCBwYWwzPzogbnVtYmVyfTtcbiAgbm9uRmx5ZXJzPzoge1tpZDogbnVtYmVyXTogW251bWJlciwgbnVtYmVyXX07XG59XG5jb25zdCBNT05TVEVSX0FESlVTVE1FTlRTOiB7W2xvYzogbnVtYmVyXTogTW9uc3RlckFkanVzdG1lbnR9ID0ge1xuICBbMHgwM106IHsgLy8gVmFsbGV5IG9mIFdpbmRcbiAgICBmaXhlZFNsb3RzOiB7XG4gICAgICBwYXQxOiAweDYwLCAvLyByZXF1aXJlZCBieSB3aW5kbWlsbFxuICAgIH0sXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICB9LFxuICBbMHgwN106IHsgLy8gU2VhbGVkIENhdmUgNFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MGZdOiBbMCwgLTNdLCAgLy8gYmF0XG4gICAgICBbMHgxMF06IFstMTAsIDBdLCAvLyBiYXRcbiAgICAgIFsweDExXTogWzAsIDRdLCAgIC8vIGJhdFxuICAgIH0sXG4gIH0sXG4gIFsweDE0XTogeyAvLyBDb3JkZWwgV2VzdFxuICAgIG1heEZseWVyczogMixcbiAgfSxcbiAgWzB4MTVdOiB7IC8vIENvcmRlbCBFYXN0XG4gICAgbWF4Rmx5ZXJzOiAyLFxuICB9LFxuICBbMHgxYV06IHsgLy8gU3dhbXBcbiAgICAvLyBza2lwOiAnYWRkJyxcbiAgICBmaXhlZFNsb3RzOiB7XG4gICAgICBwYWwzOiAweDIzLFxuICAgICAgcGF0MTogMHg0ZixcbiAgICB9LFxuICAgIG1heEZseWVyczogMixcbiAgICBub25GbHllcnM6IHsgLy8gVE9ETyAtIG1pZ2h0IGJlIG5pY2UgdG8ga2VlcCBwdWZmcyB3b3JraW5nP1xuICAgICAgWzB4MTBdOiBbNCwgMF0sXG4gICAgICBbMHgxMV06IFs1LCAwXSxcbiAgICAgIFsweDEyXTogWzQsIDBdLFxuICAgICAgWzB4MTNdOiBbNSwgMF0sXG4gICAgICBbMHgxNF06IFs0LCAwXSxcbiAgICAgIFsweDE1XTogWzQsIDBdLFxuICAgIH0sXG4gIH0sXG4gIFsweDFiXTogeyAvLyBBbWF6b25lc1xuICAgIC8vIFJhbmRvbSBibHVlIHNsaW1lIHNob3VsZCBiZSBpZ25vcmVkXG4gICAgc2tpcDogdHJ1ZSxcbiAgfSxcbiAgWzB4MjBdOiB7IC8vIE10IFNhYnJlIFdlc3QgTG93ZXJcbiAgICBtYXhGbHllcnM6IDEsXG4gIH0sXG4gIFsweDIxXTogeyAvLyBNdCBTYWJyZSBXZXN0IFVwcGVyXG4gICAgZml4ZWRTbG90czoge1xuICAgICAgcGF0MTogMHg1MCxcbiAgICAgIC8vIHBhbDI6IDB4MDYsIC8vIG1pZ2h0IGJlIGZpbmUgdG8gY2hhbmdlIHRvcm5lbCdzIGNvbG9yLi4uXG4gICAgfSxcbiAgICBtYXhGbHllcnM6IDEsXG4gIH0sXG4gIFsweDI3XTogeyAvLyBNdCBTYWJyZSBXZXN0IENhdmUgN1xuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MGRdOiBbMCwgMHgxMF0sIC8vIHJhbmRvbSBlbmVteSBzdHVjayBpbiB3YWxsXG4gICAgfSxcbiAgfSxcbiAgWzB4MjhdOiB7IC8vIE10IFNhYnJlIE5vcnRoIE1haW5cbiAgICBtYXhGbHllcnM6IDEsXG4gIH0sXG4gIFsweDI5XTogeyAvLyBNdCBTYWJyZSBOb3J0aCBNaWRkbGVcbiAgICBtYXhGbHllcnM6IDEsXG4gIH0sXG4gIFsweDJiXTogeyAvLyBNdCBTYWJyZSBOb3J0aCBDYXZlIDJcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDE0XTogWzB4MjAsIC04XSwgLy8gYmF0XG4gICAgfSxcbiAgfSxcbiAgWzB4NDBdOiB7IC8vIFdhdGVyZmFsbCBWYWxsZXkgTm9ydGhcbiAgICBtYXhGbHllcnM6IDIsXG4gICAgbm9uRmx5ZXJzOiB7XG4gICAgICBbMHgxM106IFsxMiwgLTB4MTBdLCAvLyBtZWR1c2EgaGVhZFxuICAgIH0sXG4gIH0sXG4gIFsweDQxXTogeyAvLyBXYXRlcmZhbGwgVmFsbGV5IFNvdXRoXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MTVdOiBbMCwgLTZdLCAvLyBtZWR1c2EgaGVhZFxuICAgIH0sXG4gIH0sXG4gIFsweDQyXTogeyAvLyBMaW1lIFRyZWUgVmFsbGV5XG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MGRdOiBbMCwgOF0sIC8vIGV2aWwgYmlyZFxuICAgICAgWzB4MGVdOiBbLTgsIDhdLCAvLyBldmlsIGJpcmRcbiAgICB9LFxuICB9LFxuICBbMHg0N106IHsgLy8gS2lyaXNhIE1lYWRvd1xuICAgIG1heEZseWVyczogMSxcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDBkXTogWy04LCAtOF0sXG4gICAgfSxcbiAgfSxcbiAgWzB4NGFdOiB7IC8vIEZvZyBMYW1wIENhdmUgM1xuICAgIG1heEZseWVyczogMSxcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDBlXTogWzQsIDBdLCAgLy8gYmF0XG4gICAgICBbMHgwZl06IFswLCAtM10sIC8vIGJhdFxuICAgICAgWzB4MTBdOiBbMCwgNF0sICAvLyBiYXRcbiAgICB9LFxuICB9LFxuICBbMHg0Y106IHsgLy8gRm9nIExhbXAgQ2F2ZSA0XG4gICAgLy8gbWF4Rmx5ZXJzOiAxLFxuICB9LFxuICBbMHg0ZF06IHsgLy8gRm9nIExhbXAgQ2F2ZSA1XG4gICAgbWF4Rmx5ZXJzOiAxLFxuICB9LFxuICBbMHg0ZV06IHsgLy8gRm9nIExhbXAgQ2F2ZSA2XG4gICAgbWF4Rmx5ZXJzOiAxLFxuICB9LFxuICBbMHg0Zl06IHsgLy8gRm9nIExhbXAgQ2F2ZSA3XG4gICAgLy8gbWF4Rmx5ZXJzOiAxLFxuICB9LFxuICBbMHg1N106IHsgLy8gV2F0ZXJmYWxsIENhdmUgNFxuICAgIGZpeGVkU2xvdHM6IHtcbiAgICAgIHBhdDE6IDB4NGQsXG4gICAgfSxcbiAgfSxcbiAgWzB4NTldOiB7IC8vIFRvd2VyIEZsb29yIDFcbiAgICAvLyBza2lwOiB0cnVlLFxuICAgIHRvd2VyOiB0cnVlLFxuICB9LFxuICBbMHg1YV06IHsgLy8gVG93ZXIgRmxvb3IgMlxuICAgIC8vIHNraXA6IHRydWUsXG4gICAgdG93ZXI6IHRydWUsXG4gIH0sXG4gIFsweDViXTogeyAvLyBUb3dlciBGbG9vciAzXG4gICAgLy8gc2tpcDogdHJ1ZSxcbiAgICB0b3dlcjogdHJ1ZSxcbiAgfSxcbiAgWzB4NjBdOiB7IC8vIEFuZ3J5IFNlYVxuICAgIGZpeGVkU2xvdHM6IHtcbiAgICAgIHBhbDM6IDB4MDgsXG4gICAgICBwYXQxOiAweDUyLCAvLyAoYXMgb3Bwb3NlZCB0byBwYXQwKVxuICAgIH0sXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIHNraXA6IHRydWUsIC8vIG5vdCBzdXJlIGhvdyB0byByYW5kb21pemUgdGhlc2Ugd2VsbFxuICB9LFxuICBbMHg2NF06IHsgLy8gVW5kZXJncm91bmQgQ2hhbm5lbFxuICAgIGZpeGVkU2xvdHM6IHtcbiAgICAgIHBhbDM6IDB4MDgsXG4gICAgICBwYXQxOiAweDUyLCAvLyAoYXMgb3Bwb3NlZCB0byBwYXQwKVxuICAgIH0sXG4gICAgc2tpcDogdHJ1ZSxcbiAgfSxcbiAgWzB4NjhdOiB7IC8vIEV2aWwgU3Bpcml0IElzbGFuZCAxXG4gICAgZml4ZWRTbG90czoge1xuICAgICAgcGFsMzogMHgwOCxcbiAgICAgIHBhdDE6IDB4NTIsIC8vIChhcyBvcHBvc2VkIHRvIHBhdDApXG4gICAgfSxcbiAgICBza2lwOiB0cnVlLFxuICB9LFxuICBbMHg2OV06IHsgLy8gRXZpbCBTcGlyaXQgSXNsYW5kIDJcbiAgICBtYXhGbHllcnM6IDEsXG4gICAgbm9uRmx5ZXJzOiB7XG4gICAgICBbMHgxN106IFs0LCA2XSwgIC8vIG1lZHVzYSBoZWFkXG4gICAgfSxcbiAgfSxcbiAgWzB4NmFdOiB7IC8vIEV2aWwgU3Bpcml0IElzbGFuZCAzXG4gICAgbWF4Rmx5ZXJzOiAxLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MTVdOiBbMCwgMHgxOF0sICAvLyBtZWR1c2EgaGVhZFxuICAgIH0sXG4gIH0sXG4gIFsweDZjXTogeyAvLyBTYWJlcmEgUGFsYWNlIDFcbiAgICBtYXhGbHllcnM6IDEsXG4gICAgbm9uRmx5ZXJzOiB7XG4gICAgICBbMHgxN106IFswLCAweDE4XSwgLy8gZXZpbCBiaXJkXG4gICAgfSxcbiAgfSxcbiAgWzB4NmRdOiB7IC8vIFNhYmVyYSBQYWxhY2UgMlxuICAgIG1heEZseWVyczogMSxcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDExXTogWzB4MTAsIDBdLCAvLyBtb3RoXG4gICAgICBbMHgxYl06IFswLCAwXSwgICAgLy8gbW90aCAtIG9rIGFscmVhZHlcbiAgICAgIFsweDFjXTogWzYsIDBdLCAgICAvLyBtb3RoXG4gICAgfSxcbiAgfSxcbiAgWzB4NzhdOiB7IC8vIEdvYSBWYWxsZXlcbiAgICBtYXhGbHllcnM6IDEsXG4gICAgbm9uRmx5ZXJzOiB7XG4gICAgICBbMHgxNl06IFstOCwgLThdLCAvLyBldmlsIGJpcmRcbiAgICB9LFxuICB9LFxuICBbMHg3Y106IHsgLy8gTXQgSHlkcmFcbiAgICBtYXhGbHllcnM6IDEsXG4gICAgbm9uRmx5ZXJzOiB7XG4gICAgICBbMHgxNV06IFstMHgyNywgMHg1NF0sIC8vIGV2aWwgYmlyZFxuICAgIH0sXG4gIH0sXG4gIFsweDg0XTogeyAvLyBNdCBIeWRyYSBDYXZlIDdcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDEyXTogWzAsIC00XSxcbiAgICAgIFsweDEzXTogWzAsIDRdLFxuICAgICAgWzB4MTRdOiBbLTYsIDBdLFxuICAgICAgWzB4MTVdOiBbMTQsIDEyXSxcbiAgICB9LFxuICB9LFxuICBbMHg4OF06IHsgLy8gU3R5eCAxXG4gICAgbWF4Rmx5ZXJzOiAxLFxuICB9LFxuICBbMHg4OV06IHsgLy8gU3R5eCAyXG4gICAgbWF4Rmx5ZXJzOiAxLFxuICB9LFxuICBbMHg4YV06IHsgLy8gU3R5eCAxXG4gICAgbWF4Rmx5ZXJzOiAxLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MGRdOiBbNywgMF0sIC8vIG1vdGhcbiAgICAgIFsweDBlXTogWzAsIDBdLCAvLyBtb3RoIC0gb2tcbiAgICAgIFsweDBmXTogWzcsIDNdLCAvLyBtb3RoXG4gICAgICBbMHgxMF06IFswLCA2XSwgLy8gbW90aFxuICAgICAgWzB4MTFdOiBbMTEsIC0weDEwXSwgLy8gbW90aFxuICAgIH0sXG4gIH0sXG4gIFsweDhmXTogeyAvLyBHb2EgRm9ydHJlc3MgLSBPYXNpcyBDYXZlIEVudHJhbmNlXG4gICAgc2tpcDogdHJ1ZSxcbiAgfSxcbiAgWzB4OTBdOiB7IC8vIERlc2VydCAxXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MTRdOiBbLTB4YiwgLTNdLCAvLyBib21iZXIgYmlyZFxuICAgICAgWzB4MTVdOiBbMCwgMHgxMF0sICAvLyBib21iZXIgYmlyZFxuICAgIH0sXG4gIH0sXG4gIFsweDkxXTogeyAvLyBPYXNpcyBDYXZlXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MThdOiBbMCwgMTRdLCAgICAvLyBpbnNlY3RcbiAgICAgIFsweDE5XTogWzQsIC0weDEwXSwgLy8gaW5zZWN0XG4gICAgfSxcbiAgfSxcbiAgWzB4OThdOiB7IC8vIERlc2VydCAyXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MTRdOiBbLTYsIDZdLCAgICAvLyBkZXZpbFxuICAgICAgWzB4MTVdOiBbMCwgLTB4MTBdLCAvLyBkZXZpbFxuICAgIH0sXG4gIH0sXG4gIFsweDllXTogeyAvLyBQeXJhbWlkIEZyb250IC0gTWFpblxuICAgIG1heEZseWVyczogMixcbiAgfSxcbiAgWzB4YTJdOiB7IC8vIFB5cmFtaWQgQmFjayAtIEJyYW5jaFxuICAgIG1heEZseWVyczogMSxcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDEyXTogWzAsIDExXSwgLy8gbW90aFxuICAgICAgWzB4MTNdOiBbNiwgMF0sICAvLyBtb3RoXG4gICAgfSxcbiAgfSxcbiAgWzB4YTVdOiB7IC8vIFB5cmFtaWQgQmFjayAtIEhhbGwgMlxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MTddOiBbNiwgNl0sICAgLy8gbW90aFxuICAgICAgWzB4MThdOiBbLTYsIDBdLCAgLy8gbW90aFxuICAgICAgWzB4MTldOiBbLTEsIC03XSwgLy8gbW90aFxuICAgIH0sXG4gIH0sXG4gIFsweGE2XTogeyAvLyBEcmF5Z29uIDJcbiAgICAvLyBIYXMgYSBmZXcgYmx1ZSBzbGltZXMgdGhhdCBhcmVuJ3QgcmVhbCBhbmQgc2hvdWxkIGJlIGlnbm9yZWQuXG4gICAgc2tpcDogdHJ1ZSxcbiAgfSxcbiAgWzB4YThdOiB7IC8vIEdvYSBGb3J0cmVzcyAtIEVudHJhbmNlXG4gICAgc2tpcDogdHJ1ZSxcbiAgfSxcbiAgWzB4YTldOiB7IC8vIEdvYSBGb3J0cmVzcyAtIEtlbGJlc3F1ZVxuICAgIG1heEZseWVyczogMixcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDE2XTogWzB4MWEsIC0weDEwXSwgLy8gZGV2aWxcbiAgICAgIFsweDE3XTogWzAsIDB4MjBdLCAgICAgLy8gZGV2aWxcbiAgICB9LFxuICB9LFxuICBbMHhhYl06IHsgLy8gR29hIEZvcnRyZXNzIC0gU2FiZXJhXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MGRdOiBbMSwgMF0sICAvLyBpbnNlY3RcbiAgICAgIFsweDBlXTogWzIsIC0yXSwgLy8gaW5zZWN0XG4gICAgfSxcbiAgfSxcblxuICBbMHhhZF06IHsgLy8gR29hIEZvcnRyZXNzIC0gTWFkbyAxXG4gICAgbWF4Rmx5ZXJzOiAyLFxuICAgIG5vbkZseWVyczoge1xuICAgICAgWzB4MThdOiBbMCwgOF0sICAvLyBkZXZpbFxuICAgICAgWzB4MTldOiBbMCwgLThdLCAvLyBkZXZpbFxuICAgIH0sXG4gIH0sXG4gIFsweGFmXTogeyAvLyBHb2EgRm9ydHJlc3MgLSBNYWRvIDNcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDBkXTogWzAsIDBdLCAgLy8gbW90aCAtIG9rXG4gICAgICBbMHgwZV06IFswLCAwXSwgIC8vIGJyb2tlbiAtIGJ1dCByZXBsYWNlP1xuICAgICAgWzB4MTNdOiBbMHgzYiwgLTB4MjZdLCAvLyBzaGFkb3cgLSBlbWJlZGRlZCBpbiB3YWxsXG4gICAgICAvLyBUT0RPIC0gMHgwZSBnbGl0Y2hlZCwgZG9uJ3QgcmFuZG9taXplXG4gICAgfSxcbiAgfSxcbiAgWzB4YjRdOiB7IC8vIEdvYSBGb3J0cmVzcyAtIEthcm1pbmUgNVxuICAgIG1heEZseWVyczogMixcbiAgICBub25GbHllcnM6IHtcbiAgICAgIFsweDExXTogWzYsIDBdLCAgLy8gbW90aFxuICAgICAgWzB4MTJdOiBbMCwgNl0sICAvLyBtb3RoXG4gICAgfSxcbiAgfSxcbiAgWzB4ZDddOiB7IC8vIFBvcnRvYSBQYWxhY2UgLSBFbnRyeVxuICAgIC8vIFRoZXJlJ3MgYSByYW5kb20gc2xpbWUgaW4gdGhpcyByb29tIHRoYXQgd291bGQgY2F1c2UgZ2xpdGNoZXNcbiAgICBza2lwOiB0cnVlLFxuICB9LFxufTtcbiJdfQ==