import { Flag, Spawn } from '../rom/locationtables.js';
import { Metalocation } from '../rom/metalocation.js';
import { cloneArray } from '../rom/util.js';
export function standardMapEdits(rom, opts) {
    if (opts.eastCave) {
        eastCave(rom, opts.eastCave);
    }
    else if (opts.classicLimeTreeToLeaf) {
        connectLimeTreeToLeaf(rom);
    }
    addTowerExit(rom);
    reversibleSwanGate(rom);
    shrinkMado2(rom);
    removeUnusedGoaKensuExits(rom);
    adjustAbductionTrigger(rom);
    splitSaberaPalace2(rom);
}
(function (standardMapEdits) {
    function generateOptions(flags, random) {
        const options = {};
        if (flags.addEastCave()) {
            options.eastCave = {};
            const exits = ['cordel', 'lime', 'goa', 'desert'];
            let i = random.nextInt(4);
            [options.eastCave.exit1] = exits.splice(i, 1);
            options.eastCave.exit2 = random.pick(exits);
        }
        else if (flags.connectLimeTreeToLeaf()) {
            options.classicLimeTreeToLeaf = true;
        }
        return options;
    }
    standardMapEdits.generateOptions = generateOptions;
})(standardMapEdits || (standardMapEdits = {}));
function eastCave(rom, opts) {
    const { locations: { EastCave1, EastCave2, EastCave3, SealedCave1, ValleyOfWind }, metascreens: { boundaryE_cave, branchNSE, branchNWE, branchNWSE, branchNWS, branchWSE, caveEmpty, deadEndE, deadEndE_downStair, deadEndE_upStair, deadEndN_stairs, deadEndS, deadEndS_stairs, deadEndW, deadEndW_downStair, hallNE, hallNS, hallNW, hallSE, hallWS, hallWE, hallNS_entrance, hallNS_ramp, hallNS_wall, }, } = rom;
    rom.locations.allocate(EastCave1);
    rom.locations.allocate(EastCave2);
    if (opts.exit2)
        rom.locations.allocate(EastCave3);
    for (const l of [EastCave1, EastCave2, EastCave3]) {
        l.bgm = l.originalBgm = 0x17;
        l.entrances = [];
        l.exits = [];
        l.pits = [];
        l.spawns = [];
        l.flags = [];
        l.width = l.height = 1;
        l.screens = [[0x80]];
        l.tilePalettes = [0x1a, 0x1b, 0x05];
        l.originalTilePalettes = [0x1a, 0x1b, 0x05];
        l.tileset = 0x88;
        l.tileEffects = 0xb5;
        l.tilePatterns = [0x14, 0x02];
        l.spritePatterns = [...SealedCave1.spritePatterns];
        l.spritePalettes = [...SealedCave1.spritePalettes];
    }
    EastCave1.meta = new Metalocation(EastCave1.id, rom.metatilesets.cave, 5, 5);
    EastCave1.meta.set2d(0x00, [
        [deadEndE, hallWS, caveEmpty, hallSE, deadEndW],
        [caveEmpty, hallNS, hallSE, hallNW, caveEmpty],
        [hallSE, branchNWSE, branchNWS, caveEmpty, caveEmpty],
        [hallNS, hallNS_ramp, hallNE, hallWE, hallWS],
        [hallNS_entrance, hallNE, deadEndW, deadEndE_upStair, hallNW],
    ]);
    EastCave2.meta = new Metalocation(EastCave2.id, rom.metatilesets.cave, 5, 5);
    EastCave2.meta.set2d(0x00, [
        [deadEndE, hallWS, deadEndS, caveEmpty, deadEndS],
        [caveEmpty, hallNS, hallNS, caveEmpty, hallNS],
        [caveEmpty, branchNSE, branchNWE, branchWSE, hallNW],
        [caveEmpty, hallNS_ramp, caveEmpty, hallNE, hallWS],
        [deadEndE, hallNW, caveEmpty, caveEmpty, deadEndN_stairs],
    ]);
    ValleyOfWind.meta.set2d(0x33, [[boundaryE_cave]]);
    rom.tileEffects[0].effects[0xc0] = 0;
    EastCave1.meta.attach(0x43, EastCave2.meta, 0x44);
    EastCave1.meta.attach(0x40, ValleyOfWind.meta, 0x33);
    if (opts.exit1) {
        EastCave1.meta.set2d(0x04, [[deadEndW_downStair]]);
        connectEastCaveExit(EastCave1, 0x04, opts.exit1);
    }
    if (opts.exit2) {
        EastCave3.meta = new Metalocation(EastCave3.id, rom.metatilesets.cave, 3, 1);
        EastCave3.meta.set2d(0x00, [
            [deadEndS_stairs],
            [hallNS_wall],
            [hallNS_entrance],
        ]);
        EastCave3.spawns.push(Spawn.from([0x18, 0x07, 0x23, 0x00]));
        EastCave3.flags.push(Flag.of({ screen: 0x10, flag: rom.flags.alloc(0x200) }));
        EastCave2.meta.set2d(0x40, [[deadEndE_downStair]]);
        EastCave2.meta.attach(0x40, EastCave3.meta, 0x00);
        connectEastCaveExit(EastCave3, 0x20, opts.exit2);
    }
    EastCave1.spawns.push(Spawn.of({ screen: 0x21, tile: 0x87, timed: true, id: 0x2 }), Spawn.of({ screen: 0x12, tile: 0x88, timed: false, id: 0x2 }), Spawn.of({ screen: 0x13, tile: 0x89, timed: true, id: 0x2 }), Spawn.of({ screen: 0x32, tile: 0x68, timed: false, id: 0x2 }), Spawn.of({ screen: 0x41, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x33, tile: 0x98, timed: true, id: 0x2 }), Spawn.of({ screen: 0x03, tile: 0x88, timed: true, id: 0x2 }));
    EastCave2.spawns.push(Spawn.of({ screen: 0x01, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x11, tile: 0x48, timed: false, id: 0x2 }), Spawn.of({ screen: 0x12, tile: 0x77, timed: true, id: 0x2 }), Spawn.of({ screen: 0x14, tile: 0x28, timed: false, id: 0x2 }), Spawn.of({ screen: 0x23, tile: 0x85, timed: true, id: 0x2 }), Spawn.of({ screen: 0x31, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x33, tile: 0x8a, timed: false, id: 0x2 }), Spawn.of({ screen: 0x34, tile: 0x98, timed: true, id: 0x2 }), Spawn.of({ screen: 0x41, tile: 0x82, timed: true, id: 0x2 }), Spawn.of({ y: 0x110, x: 0x478, type: 2, id: 0x59 }), Spawn.of({ y: 0x070, x: 0x108, type: 2, id: 0x7c }));
    rom.slots.swap(0x31, 0x59);
}
function connectEastCaveExit(loc, scr, exit) {
    const { locations: { CordelPlainEast, CordelPlainWest, Desert2, GoaValley, LimeTreeValley, }, metascreens: { bendNE, bendSE, boundaryN_trees, boundaryW_cave, cornerNE, cornerNW, cornerSE, cornerSE_cave, cornerSW, } } = loc.rom;
    let dest;
    let destScr;
    switch (exit) {
        case 'lime':
            dest = LimeTreeValley;
            destScr = 0x10;
            dest.resizeScreens(0, 1, 0, 0);
            dest.meta.spliceColumns(0, 1, 2, [
                [cornerNW, boundaryN_trees],
                [boundaryW_cave, bendSE],
                [cornerSW, cornerSE],
            ]);
            break;
        case 'cordel':
            const mapEdit = [
                [boundaryW_cave, bendSE],
                [cornerSW, cornerSE],
            ];
            dest = CordelPlainEast;
            destScr = 0x55;
            dest.meta.set2d(0x55, mapEdit);
            CordelPlainWest.meta.set2d(0x55, mapEdit);
            break;
        case 'goa':
            dest = GoaValley;
            destScr = 0x11;
            dest.meta.set2d(0x01, [
                [cornerNW, cornerNE],
                [boundaryW_cave, bendNE]
            ]);
            break;
        case 'desert':
            dest = Desert2;
            destScr = 0x53;
            dest.meta.set2d(0x53, [[cornerSE_cave]]);
            break;
    }
    loc.meta.attach(scr, dest.meta, destScr);
}
function connectLimeTreeToLeaf(rom) {
    const { locations: { ValleyOfWind, LimeTreeValley }, metascreens: { exitE, exitW_southwest, overworldEmpty_alt }, } = rom;
    ValleyOfWind.meta.set2d(0x54, [[exitE]]);
    LimeTreeValley.meta.set2d(0x10, [[exitW_southwest],
        [overworldEmpty_alt]]);
    ValleyOfWind.meta.attach(0x54, LimeTreeValley.meta, 0x10);
}
function addTowerExit(rom) {
    const { TowerEntrance, Crypt_Teleporter } = rom.locations;
    Crypt_Teleporter.meta.attach(0x00, TowerEntrance.meta, 0x00, 'teleporter', 'teleporter');
}
function reversibleSwanGate(rom) {
    const { flags: { OpenedSwanGate }, locations: { SwanGate }, npcs: { SoldierGuard }, } = rom;
    SwanGate.spawns.push(Spawn.of({ xt: 0x0a, yt: 0x02, type: 1, id: 0x2d }), Spawn.of({ xt: 0x0b, yt: 0x02, type: 1, id: 0x2d }));
    SoldierGuard.localDialogs.get(SwanGate.id)[0].flags.push(OpenedSwanGate.id);
}
function splitSaberaPalace2(rom) {
    splitMap(rom.locations.SaberaPalace2_West, rom.locations.SaberaPalace2, 0x00, 0x01, 0x10, 0x20, 0x30, 0x31, 0x41, 0x51, 0x61);
}
function splitMap(newLoc, loc, ...splitPos) {
    const rom = newLoc.rom;
    rom.locations.allocate(newLoc, loc);
    newLoc.bgm = loc.bgm;
    newLoc.entrances = [];
    newLoc.exits = [];
    newLoc.pits = [];
    newLoc.spawns = [];
    newLoc.flags = [];
    newLoc.width = newLoc.height = 1;
    newLoc.screens = [[0x80]];
    newLoc.tilePalettes = cloneArray(loc.tilePalettes);
    newLoc.originalTilePalettes = cloneArray(loc.originalTilePalettes);
    newLoc.tileset = loc.tileset;
    newLoc.tileEffects = loc.tileEffects;
    newLoc.tilePatterns = cloneArray(loc.tilePatterns);
    newLoc.spritePatterns = cloneArray(loc.spritePatterns);
    newLoc.spritePalettes = cloneArray(loc.spritePalettes);
    let h = 0;
    let w = 0;
    for (const pos of splitPos) {
        h = Math.max(h, (pos >>> 4) + 1);
        w = Math.max(w, (pos & 0xf) + 1);
    }
    newLoc.meta = new Metalocation(newLoc.id, loc.meta.tileset, h, w);
    for (const pos of splitPos) {
        newLoc.meta.set(pos, loc.meta.get(pos));
        loc.meta.set(pos, loc.meta.tileset.empty);
    }
    const posSet = new Set(splitPos);
    newLoc.flags = loc.flags.filter(f => posSet.has(f.screen));
    loc.flags = loc.flags.filter(f => !posSet.has(f.screen));
    newLoc.spawns = loc.spawns.filter(s => posSet.has(s.screen));
    loc.spawns = loc.spawns.filter(s => !posSet.has(s.screen));
    loc.meta.moveExitsAndPitsTo(newLoc.meta);
}
function shrinkMado2(rom) {
}
function removeUnusedGoaKensuExits(rom) {
    const loc = rom.locations.GoaFortress_Kensu;
    loc.exits.splice(0, loc.exits.length - 4);
    loc.meta = Metalocation.of(loc);
}
function adjustAbductionTrigger(rom) {
    rom.locations.ZebuCave.spawns.find(s => s.isTrigger()).yt += 3;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhbmRhcmRtYXBlZGl0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL3N0YW5kYXJkbWFwZWRpdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsTUFBTSwwQkFBMEIsQ0FBQztBQUVyRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDcEQsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBYzFDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxHQUFRLEVBQUUsSUFBYTtJQUN0RCxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDakIsUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDOUI7U0FBTSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtRQUNyQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUM1QjtJQUNELFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNsQixrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QixXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIseUJBQXlCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0Isc0JBQXNCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFNUIsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUM7QUFHMUIsQ0FBQztBQUVELFdBQWlCLGdCQUFnQjtJQUMvQixTQUFnQixlQUFlLENBQUMsS0FBYyxFQUFFLE1BQWM7UUFDNUQsTUFBTSxPQUFPLEdBQVksRUFBRSxDQUFDO1FBQzVCLElBQUksS0FBSyxDQUFDLFdBQVcsRUFBRSxFQUFFO1lBQ3ZCLE9BQU8sQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1lBQ3RCLE1BQU0sS0FBSyxHQUFtQixDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFFBQVEs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RUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1RCxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFHNUUsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRCxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNsRCxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNsRDtJQUdELFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNuQixLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDM0QsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzNELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLENBQzNELENBQUM7SUFDRixTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDbkIsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzNELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFFMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUMsQ0FBQyxFQUVqRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBQyxDQUFDLENBQ2xELENBQUM7SUFDRixHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFJN0IsQ0FBQztBQUVELFNBQVMsbUJBQW1CLENBQUMsR0FB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QUMsQ0FBQztJQUN2RCxNQUFNLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7SUFFdkQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ1YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ1YsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7UUFDMUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNsQztJQUNELE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDbEUsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQzNDO0lBQ0QsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakMsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDM0QsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN6RCxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUM3RCxHQUFHLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQzNELEdBQUcsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNDLENBQUM7QUFJRCxTQUFTLFdBQVcsQ0FBQyxHQUFRO0FBRzdCLENBQUM7QUE4REQsU0FBUyx5QkFBeUIsQ0FBQyxHQUFRO0lBS3pDLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUM7SUFDNUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUtsQyxDQUFDO0FBRUQsU0FBUyxzQkFBc0IsQ0FBQyxHQUFRO0lBR3RDLEdBQUcsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ2xFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0ZsYWdTZXR9IGZyb20gJy4uL2ZsYWdzZXQuanMnO1xuaW1wb3J0IHtSYW5kb219IGZyb20gJy4uL3JhbmRvbS5qcyc7XG5pbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7RmxhZywgU3Bhd259IGZyb20gJy4uL3JvbS9sb2NhdGlvbnRhYmxlcy5qcyc7XG5pbXBvcnQge0xvY2F0aW9ufSBmcm9tICcuLi9yb20vbG9jYXRpb24uanMnO1xuaW1wb3J0IHtNZXRhbG9jYXRpb259IGZyb20gJy4uL3JvbS9tZXRhbG9jYXRpb24uanMnO1xuaW1wb3J0IHtjbG9uZUFycmF5fSBmcm9tICcuLi9yb20vdXRpbC5qcyc7XG5cbnR5cGUgRWFzdENhdmVFeGl0ID0gJ2NvcmRlbCcgfCAnbGltZScgfCAnZ29hJyB8ICdkZXNlcnQnO1xuXG5pbnRlcmZhY2UgRWFzdENhdmVPcHRpb25zIHtcbiAgZXhpdDE/OiBFYXN0Q2F2ZUV4aXQ7XG4gIGV4aXQyPzogRWFzdENhdmVFeGl0O1xufVxuXG5pbnRlcmZhY2UgT3B0aW9ucyB7XG4gIGVhc3RDYXZlPzogRWFzdENhdmVPcHRpb25zO1xuICBjbGFzc2ljTGltZVRyZWVUb0xlYWY/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhbmRhcmRNYXBFZGl0cyhyb206IFJvbSwgb3B0czogT3B0aW9ucykge1xuICBpZiAob3B0cy5lYXN0Q2F2ZSkge1xuICAgIGVhc3RDYXZlKHJvbSwgb3B0cy5lYXN0Q2F2ZSk7XG4gIH0gZWxzZSBpZiAob3B0cy5jbGFzc2ljTGltZVRyZWVUb0xlYWYpIHtcbiAgICBjb25uZWN0TGltZVRyZWVUb0xlYWYocm9tKTtcbiAgfVxuICBhZGRUb3dlckV4aXQocm9tKTtcbiAgcmV2ZXJzaWJsZVN3YW5HYXRlKHJvbSk7XG4gIHNocmlua01hZG8yKHJvbSk7XG4gIHJlbW92ZVVudXNlZEdvYUtlbnN1RXhpdHMocm9tKTtcbiAgYWRqdXN0QWJkdWN0aW9uVHJpZ2dlcihyb20pO1xuXG4gIHNwbGl0U2FiZXJhUGFsYWNlMihyb20pO1xuICAvL3NwbGl0U3R5eDIocm9tKTsgLy8gZG9uJ3QgYWN0dWFsbHkgZG8gdGhpcyBvbmU/XG4gIC8vIGNsb3NlQ2F2ZUVudHJhbmNlcyhyb20pOyAvLyBOT1RFOiBhZnRlciBvdGhlciBtYXAgZWRpdHNcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBzdGFuZGFyZE1hcEVkaXRzIHtcbiAgZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlT3B0aW9ucyhmbGFnczogRmxhZ1NldCwgcmFuZG9tOiBSYW5kb20pOiBPcHRpb25zIHtcbiAgICBjb25zdCBvcHRpb25zOiBPcHRpb25zID0ge307XG4gICAgaWYgKGZsYWdzLmFkZEVhc3RDYXZlKCkpIHtcbiAgICAgIG9wdGlvbnMuZWFzdENhdmUgPSB7fTtcbiAgICAgIGNvbnN0IGV4aXRzOiBFYXN0Q2F2ZUV4aXRbXSA9IFsnY29yZGVsJywgJ2xpbWUnLCAnZ29hJywgJ2Rlc2VydCddO1xuICAgICAgbGV0IGkgPSByYW5kb20ubmV4dEludCg0KTtcbiAgICAgIFtvcHRpb25zLmVhc3RDYXZlLmV4aXQxXSA9IGV4aXRzLnNwbGljZShpLCAxKTtcbiAgICAgIG9wdGlvbnMuZWFzdENhdmUuZXhpdDIgPSByYW5kb20ucGljayhleGl0cyk7XG4gICAgfSBlbHNlIGlmIChmbGFncy5jb25uZWN0TGltZVRyZWVUb0xlYWYoKSkge1xuICAgICAgb3B0aW9ucy5jbGFzc2ljTGltZVRyZWVUb0xlYWYgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxufVxuXG5mdW5jdGlvbiBlYXN0Q2F2ZShyb206IFJvbSwgb3B0czogRWFzdENhdmVPcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBsb2NhdGlvbnM6IHtFYXN0Q2F2ZTEsIEVhc3RDYXZlMiwgRWFzdENhdmUzLCBTZWFsZWRDYXZlMSwgVmFsbGV5T2ZXaW5kfSxcbiAgICBtZXRhc2NyZWVuczoge2JvdW5kYXJ5RV9jYXZlLFxuICAgICAgICAgICAgICAgICAgYnJhbmNoTlNFLCBicmFuY2hOV0UsIGJyYW5jaE5XU0UsIGJyYW5jaE5XUywgYnJhbmNoV1NFLFxuICAgICAgICAgICAgICAgICAgY2F2ZUVtcHR5LFxuICAgICAgICAgICAgICAgICAgZGVhZEVuZEUsIGRlYWRFbmRFX2Rvd25TdGFpciwgZGVhZEVuZEVfdXBTdGFpcixcbiAgICAgICAgICAgICAgICAgIGRlYWRFbmROX3N0YWlycywgZGVhZEVuZFMsIGRlYWRFbmRTX3N0YWlycyxcbiAgICAgICAgICAgICAgICAgIGRlYWRFbmRXLCBkZWFkRW5kV19kb3duU3RhaXIsXG4gICAgICAgICAgICAgICAgICBoYWxsTkUsIGhhbGxOUywgaGFsbE5XLCBoYWxsU0UsIGhhbGxXUywgaGFsbFdFLFxuICAgICAgICAgICAgICAgICAgaGFsbE5TX2VudHJhbmNlLCBoYWxsTlNfcmFtcCwgaGFsbE5TX3dhbGwsXG4gICAgICAgICAgICAgICAgIH0sXG4gICAgLy9mbGFnczoge0Fsd2F5c1RydWV9LFxuICB9ID0gcm9tO1xuXG4gIHJvbS5sb2NhdGlvbnMuYWxsb2NhdGUoRWFzdENhdmUxKTtcbiAgcm9tLmxvY2F0aW9ucy5hbGxvY2F0ZShFYXN0Q2F2ZTIpO1xuICBpZiAob3B0cy5leGl0Mikgcm9tLmxvY2F0aW9ucy5hbGxvY2F0ZShFYXN0Q2F2ZTMpO1xuXG4gIGZvciAoY29uc3QgbCBvZiBbRWFzdENhdmUxLCBFYXN0Q2F2ZTIsIEVhc3RDYXZlM10pIHtcbiAgICBsLmJnbSA9IGwub3JpZ2luYWxCZ20gPSAweDE3OyAvLyBtdCBzYWJyZSBjYXZlIG11c2ljP1xuICAgIGwuZW50cmFuY2VzID0gW107XG4gICAgbC5leGl0cyA9IFtdO1xuICAgIGwucGl0cyA9IFtdO1xuICAgIGwuc3Bhd25zID0gW107XG4gICAgbC5mbGFncyA9IFtdO1xuICAgIGwud2lkdGggPSBsLmhlaWdodCA9IDE7XG4gICAgbC5zY3JlZW5zID0gW1sweDgwXV07XG4gICAgbC50aWxlUGFsZXR0ZXMgPSBbMHgxYSwgMHgxYiwgMHgwNV07IC8vIHJvY2sgd2FsbFxuICAgIGwub3JpZ2luYWxUaWxlUGFsZXR0ZXMgPSBbMHgxYSwgMHgxYiwgMHgwNV07IC8vIHJvY2sgd2FsbFxuICAgIGwudGlsZXNldCA9IDB4ODg7XG4gICAgbC50aWxlRWZmZWN0cyA9IDB4YjU7XG4gICAgbC50aWxlUGF0dGVybnMgPSBbMHgxNCwgMHgwMl07XG4gICAgbC5zcHJpdGVQYXR0ZXJucyA9IFsuLi5TZWFsZWRDYXZlMS5zcHJpdGVQYXR0ZXJuc10gYXMgW251bWJlciwgbnVtYmVyXTtcbiAgICBsLnNwcml0ZVBhbGV0dGVzID0gWy4uLlNlYWxlZENhdmUxLnNwcml0ZVBhbGV0dGVzXSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuICB9XG5cbiAgLy8gTk9URTogMHg5YyBjYW4gYmVjb21lIDB4OTkgaW4gdG9wIGxlZnQgb3IgMHg5NyBpbiB0b3AgcmlnaHQgb3IgYm90dG9tIG1pZGRsZSBmb3IgYSBjYXZlIGV4aXRcbiAgRWFzdENhdmUxLm1ldGEgPSBuZXcgTWV0YWxvY2F0aW9uKEVhc3RDYXZlMS5pZCwgcm9tLm1ldGF0aWxlc2V0cy5jYXZlLCA1LCA1KTtcbiAgRWFzdENhdmUxLm1ldGEuc2V0MmQoMHgwMCwgW1xuICAgIFtkZWFkRW5kRSwgICAgICAgIGhhbGxXUywgICAgICBjYXZlRW1wdHksIGhhbGxTRSwgICAgICAgICAgIGRlYWRFbmRXXSxcbiAgICBbY2F2ZUVtcHR5LCAgICAgICBoYWxsTlMsICAgICAgaGFsbFNFLCAgICBoYWxsTlcsICAgICAgICAgICBjYXZlRW1wdHldLFxuICAgIFtoYWxsU0UsICAgICAgICAgIGJyYW5jaE5XU0UsICBicmFuY2hOV1MsIGNhdmVFbXB0eSwgICAgICAgIGNhdmVFbXB0eV0sXG4gICAgW2hhbGxOUywgICAgICAgICAgaGFsbE5TX3JhbXAsIGhhbGxORSwgICAgaGFsbFdFLCAgICAgICAgICAgaGFsbFdTXSxcbiAgICBbaGFsbE5TX2VudHJhbmNlLCBoYWxsTkUsICAgICAgZGVhZEVuZFcsICBkZWFkRW5kRV91cFN0YWlyLCBoYWxsTlddLFxuICBdKTtcblxuICBFYXN0Q2F2ZTIubWV0YSA9IG5ldyBNZXRhbG9jYXRpb24oRWFzdENhdmUyLmlkLCByb20ubWV0YXRpbGVzZXRzLmNhdmUsIDUsIDUpO1xuICBFYXN0Q2F2ZTIubWV0YS5zZXQyZCgweDAwLCBbXG4gICAgW2RlYWRFbmRFLCAgaGFsbFdTLCAgICAgIGRlYWRFbmRTLCAgY2F2ZUVtcHR5LCBkZWFkRW5kU10sXG4gICAgW2NhdmVFbXB0eSwgaGFsbE5TLCAgICAgIGhhbGxOUywgICAgY2F2ZUVtcHR5LCBoYWxsTlNdLFxuICAgIFtjYXZlRW1wdHksIGJyYW5jaE5TRSwgICBicmFuY2hOV0UsIGJyYW5jaFdTRSwgaGFsbE5XXSxcbiAgICBbY2F2ZUVtcHR5LCBoYWxsTlNfcmFtcCwgY2F2ZUVtcHR5LCBoYWxsTkUsICAgIGhhbGxXU10sXG4gICAgW2RlYWRFbmRFLCAgaGFsbE5XLCAgICAgIGNhdmVFbXB0eSwgY2F2ZUVtcHR5LCBkZWFkRW5kTl9zdGFpcnNdLFxuICBdKTtcblxuICAvLyBBZGQgZW50cmFuY2UgdG8gdmFsbGV5IG9mIHdpbmRcbiAgVmFsbGV5T2ZXaW5kLm1ldGEuc2V0MmQoMHgzMywgW1tib3VuZGFyeUVfY2F2ZV1dKTtcbiAgcm9tLnRpbGVFZmZlY3RzWzBdLmVmZmVjdHNbMHhjMF0gPSAwO1xuICAvLyBUT0RPIC0gZG8gdGhpcyBvbmNlIHdlIGZpeCB0aGUgc2VhIHRpbGVzZXRcbiAgLy8gcm9tLnNjcmVlbnNbMHhjMl0udGlsZXNbMHg1YV0gPSAweDBhO1xuICAvLyByb20uc2NyZWVuc1sweGMyXS50aWxlc1sweDViXSA9IDB4MGE7XG5cbiAgLy8gQ29ubmVjdCBtYXBzXG4gIEVhc3RDYXZlMS5tZXRhLmF0dGFjaCgweDQzLCBFYXN0Q2F2ZTIubWV0YSwgMHg0NCk7XG4gIEVhc3RDYXZlMS5tZXRhLmF0dGFjaCgweDQwLCBWYWxsZXlPZldpbmQubWV0YSwgMHgzMyk7XG5cbiAgaWYgKG9wdHMuZXhpdDEpIHtcbiAgICBFYXN0Q2F2ZTEubWV0YS5zZXQyZCgweDA0LCBbW2RlYWRFbmRXX2Rvd25TdGFpcl1dKTsgLy8gZG93biBzdGFpclxuICAgIGNvbm5lY3RFYXN0Q2F2ZUV4aXQoRWFzdENhdmUxLCAweDA0LCBvcHRzLmV4aXQxKTtcbiAgfVxuXG4gIGlmIChvcHRzLmV4aXQyKSB7XG4gICAgRWFzdENhdmUzLm1ldGEgPSBuZXcgTWV0YWxvY2F0aW9uKEVhc3RDYXZlMy5pZCwgcm9tLm1ldGF0aWxlc2V0cy5jYXZlLCAzLCAxKTtcbiAgICBFYXN0Q2F2ZTMubWV0YS5zZXQyZCgweDAwLCBbXG4gICAgICBbZGVhZEVuZFNfc3RhaXJzXSxcbiAgICAgIFtoYWxsTlNfd2FsbF0sXG4gICAgICBbaGFsbE5TX2VudHJhbmNlXSxcbiAgICBdKTtcblxuICAgIC8vIEFkZCBhIHJvY2sgd2FsbCAoaWQ9MCkuXG4gICAgRWFzdENhdmUzLnNwYXducy5wdXNoKFNwYXduLmZyb20oWzB4MTgsIDB4MDcsIDB4MjMsIDB4MDBdKSk7XG4gICAgRWFzdENhdmUzLmZsYWdzLnB1c2goRmxhZy5vZih7c2NyZWVuOiAweDEwLCBmbGFnOiByb20uZmxhZ3MuYWxsb2MoMHgyMDApfSkpO1xuXG4gICAgLy8gTWFrZSB0aGUgY29ubmVjdGlvbnMuXG4gICAgRWFzdENhdmUyLm1ldGEuc2V0MmQoMHg0MCwgW1tkZWFkRW5kRV9kb3duU3RhaXJdXSk7XG4gICAgRWFzdENhdmUyLm1ldGEuYXR0YWNoKDB4NDAsIEVhc3RDYXZlMy5tZXRhLCAweDAwKTtcbiAgICBjb25uZWN0RWFzdENhdmVFeGl0KEVhc3RDYXZlMywgMHgyMCwgb3B0cy5leGl0Mik7XG4gIH1cblxuICAvLyBBZGQgbW9uc3RlcnNcbiAgRWFzdENhdmUxLnNwYXducy5wdXNoKFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MjEsIHRpbGU6IDB4ODcsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMiwgdGlsZTogMHg4OCwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMywgdGlsZTogMHg4OSwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDMyLCB0aWxlOiAweDY4LCB0aW1lZDogZmFsc2UsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDQxLCB0aWxlOiAweDg4LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MzMsIHRpbGU6IDB4OTgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgwMywgdGlsZTogMHg4OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgKTtcbiAgRWFzdENhdmUyLnNwYXducy5wdXNoKFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MDEsIHRpbGU6IDB4ODgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMSwgdGlsZTogMHg0OCwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMiwgdGlsZTogMHg3NywgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDE0LCB0aWxlOiAweDI4LCB0aW1lZDogZmFsc2UsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDIzLCB0aWxlOiAweDg1LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MzEsIHRpbGU6IDB4ODgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgzMywgdGlsZTogMHg4YSwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgzNCwgdGlsZTogMHg5OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDQxLCB0aWxlOiAweDgyLCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIC8vIGNoZXN0OiBtZWRpY2FsIGhlcmJcbiAgICBTcGF3bi5vZih7eTogMHgxMTAsIHg6IDB4NDc4LCB0eXBlOiAyLCBpZDogMHg1OX0pLFxuICAgIC8vIGNoZXN0OiBtaW1pY1xuICAgIFNwYXduLm9mKHt5OiAweDA3MCwgeDogMHgxMDgsIHR5cGU6IDIsIGlkOiAweDdjfSksXG4gICk7XG4gIHJvbS5zbG90cy5zd2FwKDB4MzEsIDB4NTkpO1xuICAvLyBzd2FwIG91dCBhbGFybSBmbHV0ZSBmb3IgbWVkaWNhbCBoZXJiIC0gdGhpcyBtYWtlcyBpdCBhIHVuaXF1ZSBjaGVjay5cbiAgLy8gV2luZG1pbGxHdWFyZC5kYXRhWzFdID0gMHg1OTsgLy8gYWxhcm0gZmx1dGUgLT4gbWVkaWNhbCBoZXJiXG4gIC8vIFdpbmRtaWxsR3VhcmQuZGlhbG9nKExlYWZfU3R1ZGVudEhvdXNlKVswXS5jb25kaXRpb24gPSB+MHgxNTk7XG59XG5cbmZ1bmN0aW9uIGNvbm5lY3RFYXN0Q2F2ZUV4aXQobG9jOiBMb2NhdGlvbiwgc2NyOiBudW1iZXIsIGV4aXQ6IEVhc3RDYXZlRXhpdCkge1xuICBjb25zdCB7XG4gICAgbG9jYXRpb25zOiB7XG4gICAgICBDb3JkZWxQbGFpbkVhc3QsIENvcmRlbFBsYWluV2VzdCwgRGVzZXJ0MiwgR29hVmFsbGV5LCBMaW1lVHJlZVZhbGxleSxcbiAgICB9LFxuICAgIG1ldGFzY3JlZW5zOiB7XG4gICAgICBiZW5kTkUsIGJlbmRTRSxcbiAgICAgIGJvdW5kYXJ5Tl90cmVlcywgYm91bmRhcnlXX2NhdmUsXG4gICAgICBjb3JuZXJORSwgY29ybmVyTlcsIGNvcm5lclNFLCBjb3JuZXJTRV9jYXZlLCBjb3JuZXJTVyxcbiAgICB9fSA9IGxvYy5yb207XG4gIGxldCBkZXN0OiBMb2NhdGlvbjtcbiAgbGV0IGRlc3RTY3I6IG51bWJlcjtcbiAgc3dpdGNoIChleGl0KSB7XG4gICAgY2FzZSAnbGltZSc6XG4gICAgICAvLyBBZGQgZW50cmFuY2UgdG8gbGltZSB0cmVlIHZhbGxleVxuICAgICAgZGVzdCA9IExpbWVUcmVlVmFsbGV5O1xuICAgICAgZGVzdFNjciA9IDB4MTA7XG4gICAgICBkZXN0LnJlc2l6ZVNjcmVlbnMoMCwgMSwgMCwgMCk7IC8vIGFkZCBvbmUgc2NyZWVuIHRvIGxlZnQgZWRnZVxuICAgICAgZGVzdC5tZXRhLnNwbGljZUNvbHVtbnMoMCwgMSwgMiwgW1xuICAgICAgICBbY29ybmVyTlcsICAgICAgIGJvdW5kYXJ5Tl90cmVlc10sXG4gICAgICAgIFtib3VuZGFyeVdfY2F2ZSwgYmVuZFNFXSxcbiAgICAgICAgW2Nvcm5lclNXLCAgICAgICBjb3JuZXJTRV0sXG4gICAgICBdKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnY29yZGVsJzpcbiAgICAgIGNvbnN0IG1hcEVkaXQgPSBbXG4gICAgICAgIFtib3VuZGFyeVdfY2F2ZSwgYmVuZFNFXSxcbiAgICAgICAgW2Nvcm5lclNXLCAgICAgICBjb3JuZXJTRV0sXG4gICAgICBdO1xuICAgICAgZGVzdCA9IENvcmRlbFBsYWluRWFzdDtcbiAgICAgIGRlc3RTY3IgPSAweDU1O1xuICAgICAgZGVzdC5tZXRhLnNldDJkKDB4NTUsIG1hcEVkaXQpO1xuICAgICAgLy8gQWxzbyBuZWVkIHRvIG1pcnJvciB0aGUgbWFwIGVkaXQgb24gd2VzdFxuICAgICAgQ29yZGVsUGxhaW5XZXN0Lm1ldGEuc2V0MmQoMHg1NSwgbWFwRWRpdCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2dvYSc6XG4gICAgICBkZXN0ID0gR29hVmFsbGV5O1xuICAgICAgZGVzdFNjciA9IDB4MTE7XG4gICAgICBkZXN0Lm1ldGEuc2V0MmQoMHgwMSwgW1xuICAgICAgICBbY29ybmVyTlcsICAgICAgIGNvcm5lck5FXSxcbiAgICAgICAgW2JvdW5kYXJ5V19jYXZlLCBiZW5kTkVdXSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2Rlc2VydCc6XG4gICAgICBkZXN0ID0gRGVzZXJ0MjtcbiAgICAgIGRlc3RTY3IgPSAweDUzO1xuICAgICAgZGVzdC5tZXRhLnNldDJkKDB4NTMsIFtbY29ybmVyU0VfY2F2ZV1dKTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIGxvYy5tZXRhLmF0dGFjaChzY3IsIGRlc3QubWV0YSwgZGVzdFNjcik7XG59XG5cbi8vIFByb2dyYW1tYXRpY2FsbHkgYWRkIGEgaG9sZSBiZXR3ZWVuIHZhbGxleSBvZiB3aW5kIGFuZCBsaW1lIHRyZWUgdmFsbGV5XG5mdW5jdGlvbiBjb25uZWN0TGltZVRyZWVUb0xlYWYocm9tOiBSb20pIHtcbiAgY29uc3Qge1xuICAgIGxvY2F0aW9uczoge1ZhbGxleU9mV2luZCwgTGltZVRyZWVWYWxsZXl9LFxuICAgIG1ldGFzY3JlZW5zOiB7ZXhpdEUsIGV4aXRXX3NvdXRod2VzdCwgb3ZlcndvcmxkRW1wdHlfYWx0fSxcbiAgfSA9IHJvbTtcblxuICBWYWxsZXlPZldpbmQubWV0YS5zZXQyZCgweDU0LCBbW2V4aXRFXV0pO1xuICBMaW1lVHJlZVZhbGxleS5tZXRhLnNldDJkKDB4MTAsIFtbZXhpdFdfc291dGh3ZXN0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW292ZXJ3b3JsZEVtcHR5X2FsdF1dKTtcbiAgVmFsbGV5T2ZXaW5kLm1ldGEuYXR0YWNoKDB4NTQsIExpbWVUcmVlVmFsbGV5Lm1ldGEsIDB4MTApO1xufVxuXG5mdW5jdGlvbiBhZGRUb3dlckV4aXQocm9tOiBSb20pIHtcbiAgY29uc3Qge1Rvd2VyRW50cmFuY2UsIENyeXB0X1RlbGVwb3J0ZXJ9ID0gcm9tLmxvY2F0aW9ucztcbiAgQ3J5cHRfVGVsZXBvcnRlci5tZXRhLmF0dGFjaCgweDAwLCBUb3dlckVudHJhbmNlLm1ldGEsIDB4MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbGVwb3J0ZXInLCAndGVsZXBvcnRlcicpO1xufVxuXG5mdW5jdGlvbiByZXZlcnNpYmxlU3dhbkdhdGUocm9tOiBSb20pIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7T3BlbmVkU3dhbkdhdGV9LFxuICAgIGxvY2F0aW9uczoge1N3YW5HYXRlfSxcbiAgICBucGNzOiB7U29sZGllckd1YXJkfSxcbiAgfSA9IHJvbTtcbiAgLy8gQWxsb3cgb3BlbmluZyBTd2FuIGZyb20gZWl0aGVyIHNpZGUgYnkgYWRkaW5nIGEgcGFpciBvZiBndWFyZHMgb24gdGhlXG4gIC8vIG9wcG9zaXRlIHNpZGUgb2YgdGhlIGdhdGUuXG4gIFN3YW5HYXRlLnNwYXducy5wdXNoKFxuICAgIC8vIE5PVEU6IFNvbGRpZXJzIG11c3QgY29tZSBpbiBwYWlycyAod2l0aCBpbmRleCBeMSBmcm9tIGVhY2ggb3RoZXIpXG4gICAgU3Bhd24ub2Yoe3h0OiAweDBhLCB5dDogMHgwMiwgdHlwZTogMSwgaWQ6IDB4MmR9KSwgLy8gbmV3IHNvbGRpZXJcbiAgICBTcGF3bi5vZih7eHQ6IDB4MGIsIHl0OiAweDAyLCB0eXBlOiAxLCBpZDogMHgyZH0pLCAvLyBuZXcgc29sZGllclxuICAgIC8vU3Bhd24ub2Yoe3h0OiAweDBlLCB5dDogMHgwYSwgdHlwZTogMiwgaWQ6IDB4YjN9KSwgLy8gbmV3IHRyaWdnZXI6IGVyYXNlIGd1YXJkc1xuICApO1xuXG4gIC8vIC8vIE5PVEU6IGp1c3QgdXNlIHRoZSBhY3R1YWwgZmxhZyBpbnN0ZWFkP1xuICAvLyAvLyBHdWFyZHMgKCQyZCkgYXQgc3dhbiBnYXRlICgkNzMpIH4gc2V0IDBlZiBhZnRlciBvcGVuaW5nIGdhdGUgPT4gY29uZGl0aW9uIGZvciBkZXNwYXduXG4gIC8vIHJvbS5ucGNzWzB4MmRdLmxvY2FsRGlhbG9ncy5nZXQoMHg3MykhWzBdLmZsYWdzLnB1c2goMHgwZWYpO1xuICAvLyAvLyBEZXNwYXduIGd1YXJkIHRyaWdnZXIgcmVxdWlyZXMgMGVmXG4gIC8vIHJvbS50cmlnZ2VyKDB4YjMpLmNvbmRpdGlvbnMucHVzaCgweDBlZik7XG4gIFNvbGRpZXJHdWFyZC5sb2NhbERpYWxvZ3MuZ2V0KFN3YW5HYXRlLmlkKSFbMF0uZmxhZ3MucHVzaChPcGVuZWRTd2FuR2F0ZS5pZCk7XG4gIC8vcm9tLnRyaWdnZXIoMHhiMykuY29uZGl0aW9ucy5wdXNoKE9wZW5lZFN3YW5HYXRlLmlkKTtcbiAgLy8gVE9ETyAtIGNhbiB3ZSBkbyBhd2F5IHdpdGggdGhlIHRyaWdnZXI/ICBKdXN0IHNwYXduIHRoZW0gb24gdGhlIHNhbWUgY29uZGl0aW9uLi4uXG59XG5cbmZ1bmN0aW9uIHNwbGl0U2FiZXJhUGFsYWNlMihyb206IFJvbSkge1xuICBzcGxpdE1hcChyb20ubG9jYXRpb25zLlNhYmVyYVBhbGFjZTJfV2VzdCwgcm9tLmxvY2F0aW9ucy5TYWJlcmFQYWxhY2UyLFxuICAgICAgICAgICAweDAwLCAweDAxLCAweDEwLCAweDIwLCAweDMwLCAweDMxLCAweDQxLCAweDUxLCAweDYxKTtcbn1cblxuLy8gZnVuY3Rpb24gc3BsaXRTdHl4Mihyb206IFJvbSkge1xuLy8gICBjb25zdCB7cml2ZXJDYXZlX2RlYWRFbmRzRSwgcml2ZXJDYXZlX2RlYWRFbmRzV30gPSByb20ubWV0YXNjcmVlbnM7XG4vLyAgIHNwbGl0TWFwKHJvbS5sb2NhdGlvbnMuU3R5eDJfRWFzdCwgcm9tLmxvY2F0aW9ucy5TdHl4Mixcbi8vICAgICAgICAgICAgMHgyNCwgMHgzMywgMHgzNCwgMHg0MywgMHg0NCwgMHg1Myk7XG4vLyAgIHJvbS5sb2NhdGlvbnMuU3R5eDIubWV0YS5zZXQoMHg0Miwgcml2ZXJDYXZlX2RlYWRFbmRzVyk7XG4vLyAgIHJvbS5sb2NhdGlvbnMuU3R5eDJfRWFzdC5tZXRhLnNldCgweDQyLCByaXZlckNhdmVfZGVhZEVuZHNFKTtcbi8vIH1cblxuZnVuY3Rpb24gc3BsaXRNYXAobmV3TG9jOiBMb2NhdGlvbiwgbG9jOiBMb2NhdGlvbiwgLi4uc3BsaXRQb3M6IG51bWJlcltdKSB7XG4gIGNvbnN0IHJvbSA9IG5ld0xvYy5yb207XG4gIHJvbS5sb2NhdGlvbnMuYWxsb2NhdGUobmV3TG9jLCBsb2MpO1xuICBuZXdMb2MuYmdtID0gbG9jLmJnbTtcbiAgbmV3TG9jLmVudHJhbmNlcyA9IFtdO1xuICBuZXdMb2MuZXhpdHMgPSBbXTtcbiAgbmV3TG9jLnBpdHMgPSBbXTtcbiAgbmV3TG9jLnNwYXducyA9IFtdO1xuICBuZXdMb2MuZmxhZ3MgPSBbXTtcbiAgbmV3TG9jLndpZHRoID0gbmV3TG9jLmhlaWdodCA9IDE7XG4gIG5ld0xvYy5zY3JlZW5zID0gW1sweDgwXV07XG4gIG5ld0xvYy50aWxlUGFsZXR0ZXMgPSBjbG9uZUFycmF5KGxvYy50aWxlUGFsZXR0ZXMpO1xuICBuZXdMb2Mub3JpZ2luYWxUaWxlUGFsZXR0ZXMgPSBjbG9uZUFycmF5KGxvYy5vcmlnaW5hbFRpbGVQYWxldHRlcyk7XG4gIG5ld0xvYy50aWxlc2V0ID0gbG9jLnRpbGVzZXQ7XG4gIG5ld0xvYy50aWxlRWZmZWN0cyA9IGxvYy50aWxlRWZmZWN0cztcbiAgbmV3TG9jLnRpbGVQYXR0ZXJucyA9IGNsb25lQXJyYXkobG9jLnRpbGVQYXR0ZXJucyk7XG4gIG5ld0xvYy5zcHJpdGVQYXR0ZXJucyA9IGNsb25lQXJyYXkobG9jLnNwcml0ZVBhdHRlcm5zKTtcbiAgbmV3TG9jLnNwcml0ZVBhbGV0dGVzID0gY2xvbmVBcnJheShsb2Muc3ByaXRlUGFsZXR0ZXMpO1xuXG4gIGxldCBoID0gMDtcbiAgbGV0IHcgPSAwO1xuICBmb3IgKGNvbnN0IHBvcyBvZiBzcGxpdFBvcykge1xuICAgIGggPSBNYXRoLm1heChoLCAocG9zID4+PiA0KSArIDEpO1xuICAgIHcgPSBNYXRoLm1heCh3LCAocG9zICYgMHhmKSArIDEpO1xuICB9XG4gIG5ld0xvYy5tZXRhID0gbmV3IE1ldGFsb2NhdGlvbihuZXdMb2MuaWQsIGxvYy5tZXRhLnRpbGVzZXQsIGgsIHcpO1xuICBmb3IgKGNvbnN0IHBvcyBvZiBzcGxpdFBvcykge1xuICAgIG5ld0xvYy5tZXRhLnNldChwb3MsIGxvYy5tZXRhLmdldChwb3MpKTtcbiAgICBsb2MubWV0YS5zZXQocG9zLCBsb2MubWV0YS50aWxlc2V0LmVtcHR5KTtcbiAgfVxuICBjb25zdCBwb3NTZXQgPSBuZXcgU2V0KHNwbGl0UG9zKTtcbiAgbmV3TG9jLmZsYWdzID0gbG9jLmZsYWdzLmZpbHRlcihmID0+IHBvc1NldC5oYXMoZi5zY3JlZW4pKTtcbiAgbG9jLmZsYWdzID0gbG9jLmZsYWdzLmZpbHRlcihmID0+ICFwb3NTZXQuaGFzKGYuc2NyZWVuKSk7XG4gIG5ld0xvYy5zcGF3bnMgPSBsb2Muc3Bhd25zLmZpbHRlcihzID0+IHBvc1NldC5oYXMocy5zY3JlZW4pKTtcbiAgbG9jLnNwYXducyA9IGxvYy5zcGF3bnMuZmlsdGVyKHMgPT4gIXBvc1NldC5oYXMocy5zY3JlZW4pKTtcbiAgbG9jLm1ldGEubW92ZUV4aXRzQW5kUGl0c1RvKG5ld0xvYy5tZXRhKTtcbn1cblxuXG4vKiogTWFkbyAyJ3MgYXJlYSBoYXMgYSA0eDQgc2VjdGlvbiBvZiB1bnVzZWQgdGlsZXMgYXQgdGhlIHRvcC4gIERlbGV0ZSB0aGVtLiAqL1xuZnVuY3Rpb24gc2hyaW5rTWFkbzIocm9tOiBSb20pIHtcbiAgLy8gVE9ETyAtIGltcGxlbWVudCBzcGxpY2VSb3dzXG4gIC8vIHJvbS5sb2NhdGlvbnMuR29hRm9ydHJlc3NfTWFkbzMubWV0YS5zcGxpY2VSb3dzKDAsIDQsIDAsIFtdKTtcbn1cblxuLy8gZnVuY3Rpb24gY2xvc2VDYXZlRW50cmFuY2VzKHJvbTogUm9tKTogdm9pZCB7XG4vLyAgIC8vIERlc3RydWN0dXJlIG91dCBhIGZldyBsb2NhdGlvbnMgYnkgbmFtZVxuLy8gICBjb25zdCB7XG4vLyAgICAgZmxhZ3M6IHtBbHdheXNUcnVlLCBPcGVuZWRTZWFsZWRDYXZlLCBPcGVuZWRQcmlzb259LFxuLy8gICAgIGxvY2F0aW9uczoge1xuLy8gICAgICAgQ29yZGVsUGxhaW5FYXN0LCBDb3JkZWxQbGFpbldlc3QsIERlc2VydDIsXG4vLyAgICAgICBLaXJpc2FNZWFkb3csIFNhaGFyYU91dHNpZGVDYXZlLCBWYWxsZXlPZldpbmQsXG4vLyAgICAgICBXYXRlcmZhbGxWYWxsZXlOb3J0aCwgV2F0ZXJmYWxsVmFsbGV5U291dGgsXG4vLyAgICAgfSxcbi8vICAgfSA9IHJvbTtcblxuLy8gICAvLyAvLyBQcmV2ZW50IHNvZnRsb2NrIGZyb20gZXhpdGluZyBzZWFsZWQgY2F2ZSBiZWZvcmUgd2luZG1pbGwgc3RhcnRlZFxuLy8gICAvLyBWYWxsZXlPZldpbmQuZW50cmFuY2VzWzFdLnkgKz0gMTY7IC8vIHVubmVlZGVkIGFmdGVyIGVudHJhbmNlIG5vcm1hbGl6YXRpb25cblxuLy8gICAvLyBDbGVhciB0aWxlcyAxLDIsMyw0IGZvciBibG9ja2FibGUgY2F2ZXMgaW4gdGlsZXNldHMgOTAsIDk0LCBhbmQgOWNcblxuLy8gICAvLyAvLyBOT1RFOiBmbGFnIDJmMCBpcyBBTFdBWVMgc2V0IC0gdXNlIGl0IGFzIGEgYmFzZWxpbmUuXG4vLyAgIC8vIGNvbnN0IGZsYWdzVG9DbGVhcjogW0xvY2F0aW9uLCBudW1iZXJdW10gPSBbXG4vLyAgIC8vICAgW1ZhbGxleU9mV2luZCwgMHgzMF0sIC8vIHZhbGxleSBvZiB3aW5kLCB6ZWJ1J3MgY2F2ZVxuLy8gICAvLyAgIC8vW0NvcmRlbFBsYWluV2VzdCwgMHgzMF0sIC8vIGNvcmRlbCB3ZXN0LCB2YW1waXJlIGNhdmVcbi8vICAgLy8gICAvL1tDb3JkZWxQbGFpbkVhc3QsIDB4MzBdLCAvLyBjb3JkZWwgZWFzdCwgdmFtcGlyZSBjYXZlXG4vLyAgIC8vICAgLy9bV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsIDB4MDBdLCAvLyB3YXRlcmZhbGwgbm9ydGgsIHByaXNvbiBjYXZlXG4vLyAgIC8vICAgW1dhdGVyZmFsbFZhbGxleU5vcnRoLCAweDE0XSwgLy8gd2F0ZXJmYWxsIG5vcnRoLCBmb2cgbGFtcFxuLy8gICAvLyAgIFtXYXRlcmZhbGxWYWxsZXlTb3V0aCwgMHg3NF0sIC8vIHdhdGVyZmFsbCBzb3V0aCwga2lyaXNhXG4vLyAgIC8vICAgW0tpcmlzYU1lYWRvdywgMHgxMF0sIC8vIGtpcmlzYSBtZWFkb3dcbi8vICAgLy8gICBbU2FoYXJhT3V0c2lkZUNhdmUsIDB4MDBdLCAvLyBjYXZlIHRvIGRlc2VydFxuLy8gICAvLyAgIFtEZXNlcnQyLCAweDQxXSxcbi8vICAgLy8gXTtcbi8vICAgLy8gZnVuY3Rpb24gcHVzaEZsYWcobG9jOiBMb2NhdGlvbiwgc2NyZWVuOiBudW1iZXIsIGZsYWc6IGZsYWdzLkZsYWcpIHtcbi8vICAgLy8gICBsb2MuZmxhZ3MucHVzaChGbGFnLm9mKHtzY3JlZW4sIGZsYWc6IGZsYWcuaWR9KSk7XG4vLyAgIC8vIH1cblxuLy8gICAvLyBmb3IgKGNvbnN0IFtsb2MsIHNjcmVlbl0gb2YgZmxhZ3NUb0NsZWFyKSB7XG4vLyAgIC8vICAgcHVzaEZsYWcobG9jLCBzY3JlZW4sIEFsd2F5c1RydWUpO1xuLy8gICAvLyB9XG5cbi8vICAgLy8gTk9URSAtIHRoaXMgdXNlZCB0byBiZSBjb25maWd1cmFibGUuLi5cblxuLy8gICAvLyBmdW5jdGlvbiByZXBsYWNlRmxhZyhsb2M6IExvY2F0aW9uLCB5eDogbnVtYmVyLCBmbGFnOiBudW1iZXIpOiB2b2lkIHtcbi8vICAgLy8gICBmb3IgKGNvbnN0IGYgb2YgbG9jLmZsYWdzKSB7XG4vLyAgIC8vICAgICBpZiAoZi55eCA9PT0geXgpIHtcbi8vICAgLy8gICAgICAgZi5mbGFnID0gZmxhZztcbi8vICAgLy8gICAgICAgcmV0dXJuO1xuLy8gICAvLyAgICAgfVxuLy8gICAvLyAgIH1cbi8vICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGZsYWcgdG8gcmVwbGFjZSBhdCAke2xvY306JHt5eH1gKTtcbi8vICAgLy8gfTtcblxuLy8gICAvLyBOT1RFOiB3ZSBjb3VsZCBhbHNvIGNsb3NlIGl0IG9mZiB1bnRpbCBib3NzIGtpbGxlZC4uLj9cbi8vICAgLy8gIC0gY29uc3QgdmFtcGlyZUZsYWcgPSB+cm9tLm5wY1NwYXduc1sweGMwXS5jb25kaXRpb25zWzB4MGFdWzBdO1xuLy8gICAvLyAgLT4ga2VsYmVzcXVlIGZvciB0aGUgb3RoZXIgb25lLlxuLy8gICBwdXNoRmxhZyhDb3JkZWxQbGFpbldlc3QsIDB4MzAsIE9wZW5lZFNlYWxlZENhdmUpO1xuLy8gICBwdXNoRmxhZyhDb3JkZWxQbGFpbkVhc3QsIDB4MzAsIE9wZW5lZFNlYWxlZENhdmUpO1xuLy8gICBwdXNoRmxhZyhXYXRlcmZhbGxWYWxsZXlOb3J0aCwgMHgwMCwgT3BlbmVkUHJpc29uKTtcbi8vICAgY29uc3QgZXhwbG9zaW9uID0gU3Bhd24ub2Yoe3k6IDB4MDYwLCB4OiAweDA2MCwgdHlwZTogNCwgaWQ6IDB4MmN9KTtcbi8vICAgY29uc3Qga2V5VHJpZ2dlciA9IFNwYXduLm9mKHt5OiAweDA3MCwgeDogMHgwNzAsIHR5cGU6IDIsIGlkOiAweGFkfSk7XG4vLyAgIFdhdGVyZmFsbFZhbGxleU5vcnRoLnNwYXducy5zcGxpY2UoMSwgMCwgZXhwbG9zaW9uKTtcbi8vICAgV2F0ZXJmYWxsVmFsbGV5Tm9ydGguc3Bhd25zLnB1c2goa2V5VHJpZ2dlcik7XG4vLyB9XG5cbmZ1bmN0aW9uIHJlbW92ZVVudXNlZEdvYUtlbnN1RXhpdHMocm9tOiBSb20pIHtcbiAgLy8gVGhlc2UgZXhpdHMgYXJlIG5ldmVyIGFjdHVhbGx5IHJlYWNoYWJsZSwgYW5kIHRoZXkgY2F1c2UgcHJvYmxlbXNcbiAgLy8gd2hlbiB0aGVpciBvdGhlciBzaWRlIGVuZHMgdXAgZ2V0dGluZyBzaHVmZmxlZC4gIFBvc3NpYmx5IHRoZSBiZXN0XG4gIC8vIG9wdGlvbiBpcyB0byBkZXRlY3QgdGhlIHVucmVjaXByb2NhdGVkIGV4aXRzIGFuZCB1cGRhdGUgdGhlbSB3aGVuXG4gIC8vIHdlIHRyYW5zZmVyLiAgQnV0IGZvciBub3cgdGhpcyBpcyBhbGwgdGhhdCdzIHJlYWxseSBuZWVkZWQuXG4gIGNvbnN0IGxvYyA9IHJvbS5sb2NhdGlvbnMuR29hRm9ydHJlc3NfS2Vuc3U7XG4gIGxvYy5leGl0cy5zcGxpY2UoMCwgbG9jLmV4aXRzLmxlbmd0aCAtIDQpO1xuICBsb2MubWV0YSA9IE1ldGFsb2NhdGlvbi5vZihsb2MpO1xuXG4gIC8vIE5PVEU6IG1hcHMgJDIxIGFuZCAkYmEgYXJlIHNlYW1sZXNzIHBhaXJzIG9mIG1hcHMgd2l0aCBmbGFncywgYnV0IHRoZXlcbiAgLy8gbGFjayB0aGUgYWN0dWFsIHNhbWUgZmxhZ3MuICBXZSBuZWVkIHRvIGtlZXAgdGhlbSBpbiBzeW5jLi4uPyAgUHJvYmFibHlcbiAgLy8gc2hvdWxkbid0IGFsbG9jYXRlIGEgc2VwYXJhdGUgZmxhZyBmb3IgdGhlbSAtIGp1c3QgcmV1c2UgdGhlIG90aGVyIG9uZS5cbn1cblxuZnVuY3Rpb24gYWRqdXN0QWJkdWN0aW9uVHJpZ2dlcihyb206IFJvbSkge1xuICAvLyBFbnN1cmUgd2UgY2FuIHN0ZXAgb24gaXQgZXZlbiB3aGVuIHRoZXJlJ3MganVzdCBhIHNvbGlkIHdhbGwgYmVoaW5kIHRoZVxuICAvLyBicmVha2FibGUgd2FsbC5cbiAgcm9tLmxvY2F0aW9ucy5aZWJ1Q2F2ZS5zcGF3bnMuZmluZChzID0+IHMuaXNUcmlnZ2VyKCkpIS55dCArPSAzO1xufVxuIl19