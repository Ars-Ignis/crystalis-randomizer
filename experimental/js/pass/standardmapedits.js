import { Entrance, Exit, Flag, Spawn } from '../rom/location.js';
export function standardMapEdits(rom, opts) {
    if (opts.eastCave) {
        eastCave(rom, opts.eastCave);
    }
    else if (opts.classicLimeTreeToLeaf) {
        connectLimeTreeToLeaf(rom);
    }
    addTowerExit(rom);
    reversibleSwanGate(rom);
    closeCaveEntrances(rom);
}
(function (standardMapEdits) {
    function generateOptions(flags, random) {
        const options = {};
        if (flags.addEastCave()) {
            options.eastCave = {};
            const exits = ['cordel', 'lime', 'goa', 'desert'];
            let i = random.nextInt(4);
            [options.eastCave.exit1] = exits.splice(i, 1);
            options.eastCave.exit2 = random.pick(exits);
        }
        else if (flags.connectLimeTreeToLeaf()) {
            options.classicLimeTreeToLeaf = true;
        }
        return options;
    }
    standardMapEdits.generateOptions = generateOptions;
})(standardMapEdits || (standardMapEdits = {}));
function eastCave(rom, opts) {
    const { locations: { EastCave1, EastCave2, EastCave3, SealedCave1, ValleyOfWind }, } = rom;
    rom.locations.allocate(rom.locations.EastCave1);
    rom.locations.allocate(rom.locations.EastCave2);
    if (opts.exit2)
        rom.locations.allocate(rom.locations.EastCave3);
    EastCave1.screens = [[0x9c, 0x84, 0x80, 0x83, 0x9c],
        [0x80, 0x81, 0x83, 0x86, 0x80],
        [0x83, 0x88, 0x89, 0x80, 0x80],
        [0x81, 0x8c, 0x85, 0x82, 0x84],
        [0x9e, 0x85, 0x9c, 0x98, 0x86]];
    EastCave2.screens = [[0x9c, 0x84, 0x9b, 0x80, 0x9b],
        [0x80, 0x81, 0x81, 0x80, 0x81],
        [0x80, 0x87, 0x8b, 0x8a, 0x86],
        [0x80, 0x8c, 0x80, 0x85, 0x84],
        [0x9c, 0x86, 0x80, 0x80, 0x9a]];
    for (const l of [EastCave1, EastCave2, EastCave3]) {
        l.bgm = l.originalBgm = 0x17;
        l.entrances = [];
        l.exits = [];
        l.pits = [];
        l.spawns = [];
        l.flags = [];
        l.height = l.screens.length;
        l.width = l.screens[0].length;
        l.extended = 0;
        l.tilePalettes = [0x1a, 0x1b, 0x05];
        l.originalTilePalettes = [0x1a, 0x1b, 0x05];
        l.tileset = 0x88;
        l.tileEffects = 0xb5;
        l.tilePatterns = [0x14, 0x02];
        l.spritePatterns = [...SealedCave1.spritePatterns];
        l.spritePalettes = [...SealedCave1.spritePalettes];
    }
    ValleyOfWind.writeScreens2d(0x23, [
        [0x11, 0x0d],
        [0x09, ~0xc2]
    ]);
    rom.tileEffects[0].effects[0xc0] = 0;
    EastCave1.connect(0x43, EastCave2, 0x44);
    EastCave1.connect(0x40, ValleyOfWind, 0x34);
    if (opts.exit1) {
        EastCave1.screens[0][4] = 0x97;
        connectEastCaveExit(EastCave1, 0x04, opts.exit1);
    }
    if (opts.exit2) {
        rom.locations.allocate(EastCave3);
        EastCave3.screens = [[0x9a],
            [0x8f],
            [0x9e]];
        EastCave3.height = 3;
        EastCave3.width = 1;
        EastCave3.spawns.push(Spawn.from([0x18, 0x07, 0x23, 0x00]));
        EastCave3.flags.push(Flag.of({ screen: 0x10, flag: rom.flags.alloc(0x200) }));
        EastCave2.screens[4][0] = 0x99;
        EastCave2.connect(0x40, EastCave3, ~0x00);
        connectEastCaveExit(EastCave3, 0x20, opts.exit2);
    }
    EastCave1.spawns.push(Spawn.of({ screen: 0x21, tile: 0x87, timed: true, id: 0x2 }), Spawn.of({ screen: 0x12, tile: 0x88, timed: false, id: 0x2 }), Spawn.of({ screen: 0x13, tile: 0x89, timed: true, id: 0x2 }), Spawn.of({ screen: 0x32, tile: 0x68, timed: false, id: 0x2 }), Spawn.of({ screen: 0x41, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x33, tile: 0x98, timed: true, id: 0x2 }), Spawn.of({ screen: 0x03, tile: 0x88, timed: true, id: 0x2 }));
    EastCave2.spawns.push(Spawn.of({ screen: 0x01, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x11, tile: 0x48, timed: false, id: 0x2 }), Spawn.of({ screen: 0x12, tile: 0x77, timed: true, id: 0x2 }), Spawn.of({ screen: 0x14, tile: 0x28, timed: false, id: 0x2 }), Spawn.of({ screen: 0x23, tile: 0x85, timed: true, id: 0x2 }), Spawn.of({ screen: 0x31, tile: 0x88, timed: true, id: 0x2 }), Spawn.of({ screen: 0x33, tile: 0x8a, timed: false, id: 0x2 }), Spawn.of({ screen: 0x34, tile: 0x98, timed: true, id: 0x2 }), Spawn.of({ screen: 0x41, tile: 0x82, timed: true, id: 0x2 }), Spawn.of({ y: 0x110, x: 0x478, type: 2, id: 0x31 }), Spawn.of({ y: 0x070, x: 0x108, type: 2, id: 0x70 }));
    rom.npcs.WindmillGuard.data[1] = 0x59;
}
function connectEastCaveExit(loc, scr, exit) {
    let dest;
    let destScr;
    switch (exit) {
        case 'lime':
            dest = loc.rom.locations.LimeTreeValley;
            destScr = 0x10;
            dest.resizeScreens(0, 1, 0, 0);
            dest.writeScreens2d(0x00, [
                [0x0c, 0x11],
                [~0x15, 0x36],
                [0x0e, 0x0f]
            ]);
            break;
        case 'cordel':
            dest = loc.rom.locations.CordelPlainEast;
            destScr = 0x55;
            dest.writeScreens2d(0x55, [
                [~0x15, 0x36],
                [0x0e, 0x0f]
            ]);
            break;
        case 'goa':
            dest = loc.rom.locations.GoaValley;
            destScr = 0x11;
            dest.writeScreens2d(0x01, [
                [0x0c, 0x0d],
                [~0x15, 0x35]
            ]);
            break;
        case 'desert':
            dest = loc.rom.locations.Desert2;
            destScr = 0x53;
            dest.writeScreens2d(0x53, [[~0xc2]]);
            break;
    }
    loc.connect(scr, dest, destScr);
}
function connectLimeTreeToLeaf(rom) {
    const { ValleyOfWind, LimeTreeValley } = rom.locations;
    ValleyOfWind.screens[5][4] = 0x10;
    LimeTreeValley.screens[1][0] = 0x1a;
    LimeTreeValley.screens[2][0] = 0x0c;
    const windEntrance = ValleyOfWind.entrances.push(Entrance.of({ x: 0x4ef, y: 0x578 })) - 1;
    const limeEntrance = LimeTreeValley.entrances.push(Entrance.of({ x: 0x010, y: 0x1c0 })) - 1;
    ValleyOfWind.exits.push(Exit.of({ x: 0x4f0, y: 0x560, dest: 0x42, entrance: limeEntrance }), Exit.of({ x: 0x4f0, y: 0x570, dest: 0x42, entrance: limeEntrance }));
    LimeTreeValley.exits.push(Exit.of({ x: 0x000, y: 0x1b0, dest: 0x03, entrance: windEntrance }), Exit.of({ x: 0x000, y: 0x1c0, dest: 0x03, entrance: windEntrance }));
}
function addTowerExit(rom) {
    const { TowerEntrance, Crypt_Teleporter } = rom.locations;
    const entrance = Crypt_Teleporter.entrances.length;
    const dest = Crypt_Teleporter.id;
    Crypt_Teleporter.entrances.push(Entrance.of({ tile: 0x68 }));
    TowerEntrance.exits.push(Exit.of({ tile: 0x57, dest, entrance }));
    TowerEntrance.exits.push(Exit.of({ tile: 0x58, dest, entrance }));
}
function reversibleSwanGate(rom) {
    const { flags: { OpenedSwanGate }, locations: { SwanGate }, npcs: { SoldierGuard }, } = rom;
    SwanGate.spawns.push(Spawn.of({ xt: 0x0a, yt: 0x02, type: 1, id: 0x2d }), Spawn.of({ xt: 0x0b, yt: 0x02, type: 1, id: 0x2d }));
    SoldierGuard.localDialogs.get(SwanGate.id)[0].flags.push(OpenedSwanGate.id);
}
function closeCaveEntrances(rom) {
    const { flags: { AlwaysTrue, OpenedSealedCave, OpenedPrison }, locations: { CordelPlainEast, CordelPlainWest, Desert2, KirisaMeadow, SaharaOutsideCave, ValleyOfWind, WaterfallValleyNorth, WaterfallValleySouth, }, } = rom;
    ValleyOfWind.entrances[1].y += 16;
    rom.swapMetatiles([0x90], [0x07, [0x01, 0x00], ~0xc1], [0x0e, [0x02, 0x00], ~0xc1], [0x20, [0x03, 0x0a], ~0xd7], [0x21, [0x04, 0x0a], ~0xd7]);
    rom.swapMetatiles([0x94, 0x9c], [0x68, [0x01, 0x00], ~0xc1], [0x83, [0x02, 0x00], ~0xc1], [0x88, [0x03, 0x0a], ~0xd7], [0x89, [0x04, 0x0a], ~0xd7]);
    rom.screens[0x0a].tiles[0x38] = 0x01;
    rom.screens[0x0a].tiles[0x39] = 0x02;
    rom.screens[0x0a].tiles[0x48] = 0x03;
    rom.screens[0x0a].tiles[0x49] = 0x04;
    rom.screens[0x15].tiles[0x79] = 0x01;
    rom.screens[0x15].tiles[0x7a] = 0x02;
    rom.screens[0x15].tiles[0x89] = 0x03;
    rom.screens[0x15].tiles[0x8a] = 0x04;
    rom.screens[0x19].tiles[0x48] = 0x01;
    rom.screens[0x19].tiles[0x49] = 0x02;
    rom.screens[0x19].tiles[0x58] = 0x03;
    rom.screens[0x19].tiles[0x59] = 0x04;
    rom.screens[0x3e].tiles[0x56] = 0x01;
    rom.screens[0x3e].tiles[0x57] = 0x02;
    rom.screens[0x3e].tiles[0x66] = 0x03;
    rom.screens[0x3e].tiles[0x67] = 0x04;
    const flagsToClear = [
        [ValleyOfWind, 0x30],
        [WaterfallValleyNorth, 0x14],
        [WaterfallValleySouth, 0x74],
        [KirisaMeadow, 0x10],
        [SaharaOutsideCave, 0x00],
        [Desert2, 0x41],
    ];
    for (const [loc, yx] of flagsToClear) {
        loc.flags.push(Flag.of({ yx, flag: AlwaysTrue.id }));
    }
    CordelPlainWest.flags.push(Flag.of({ yx: 0x30, flag: OpenedSealedCave.id }));
    CordelPlainEast.flags.push(Flag.of({ yx: 0x30, flag: OpenedSealedCave.id }));
    WaterfallValleyNorth.flags.push(Flag.of({ yx: 0x00, flag: OpenedPrison.id }));
    const explosion = Spawn.of({ y: 0x060, x: 0x060, type: 4, id: 0x2c });
    const keyTrigger = Spawn.of({ y: 0x070, x: 0x070, type: 2, id: 0xad });
    WaterfallValleyNorth.spawns.splice(1, 0, explosion);
    WaterfallValleyNorth.spawns.push(keyTrigger);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhbmRhcmRtYXBlZGl0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL3N0YW5kYXJkbWFwZWRpdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFZLEtBQUssRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBY3pFLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxHQUFRLEVBQUUsSUFBYTtJQUN0RCxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7UUFDakIsUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDOUI7U0FBTSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtRQUNyQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUM1QjtJQUNELFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNsQixrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QixrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMxQixDQUFDO0FBRUQsV0FBaUIsZ0JBQWdCO0lBQy9CLFNBQWdCLGVBQWUsQ0FBQyxLQUFjLEVBQUUsTUFBYztRQUM1RCxNQUFNLE9BQU8sR0FBWSxFQUFFLENBQUM7UUFDNUIsSUFBSSxLQUFLLENBQUMsV0FBVyxFQUFFLEVBQUU7WUFDdkIsT0FBTyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDdEIsTUFBTSxLQUFLLEdBQW1CLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDbEUsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDOUMs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QUFTLENBQUMsQ0FBQztRQUNsQyxTQUFTLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDTixDQUFDLElBQUksQ0FBQztZQUNOLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUM3QixTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNyQixTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUdwQixTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUc1RSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUMvQixTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMxQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNsRDtJQUdELFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNuQixLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDM0QsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzNELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLENBQzNELENBQUM7SUFDRixTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDbkIsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMxRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzNELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFDMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUMzRCxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBQyxDQUFDLEVBQzFELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFDLENBQUMsRUFFMUQsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUMsQ0FBQyxFQUVqRCxL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LENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBRXJDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFFckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNyQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3JDLE1BQU0sWUFBWSxHQUF5QjtRQUN6QyxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUM7UUFJcEIsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUM7UUFDNUIsQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUM7UUFDNUIsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDO1FBQ3BCLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDO1FBQ3pCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQztLQUNoQixDQUFDO0lBQ0YsS0FBSyxNQUFNLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLFlBQVksRUFBRTtRQUNwQyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLENBQUMsRUFBRSxFQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3BEO0lBaUJELGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0UsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLGdCQUFnQixDQUFDLEVBQUUsRUFBQyxDQUFDLENBQUMsQ0FBQztJQUMzRSxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsRUFBRSxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVFLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztJQUNwRSxNQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7SUFDckUsb0JBQW9CLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3BELG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDL0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RmxhZ1NldH0gZnJvbSAnLi4vZmxhZ3NldC5qcyc7XG5pbXBvcnQge1JhbmRvbX0gZnJvbSAnLi4vcmFuZG9tLmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuLi9yb20uanMnO1xuaW1wb3J0IHtFbnRyYW5jZSwgRXhpdCwgRmxhZywgTG9jYXRpb24sIFNwYXdufSBmcm9tICcuLi9yb20vbG9jYXRpb24uanMnO1xuXG50eXBlIEVhc3RDYXZlRXhpdCA9ICdjb3JkZWwnIHwgJ2xpbWUnIHwgJ2dvYScgfCAnZGVzZXJ0JztcblxuaW50ZXJmYWNlIEVhc3RDYXZlT3B0aW9ucyB7XG4gIGV4aXQxPzogRWFzdENhdmVFeGl0O1xuICBleGl0Mj86IEVhc3RDYXZlRXhpdDtcbn1cblxuaW50ZXJmYWNlIE9wdGlvbnMge1xuICBlYXN0Q2F2ZT86IEVhc3RDYXZlT3B0aW9ucztcbiAgY2xhc3NpY0xpbWVUcmVlVG9MZWFmPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YW5kYXJkTWFwRWRpdHMocm9tOiBSb20sIG9wdHM6IE9wdGlvbnMpIHtcbiAgaWYgKG9wdHMuZWFzdENhdmUpIHtcbiAgICBlYXN0Q2F2ZShyb20sIG9wdHMuZWFzdENhdmUpO1xuICB9IGVsc2UgaWYgKG9wdHMuY2xhc3NpY0xpbWVUcmVlVG9MZWFmKSB7XG4gICAgY29ubmVjdExpbWVUcmVlVG9MZWFmKHJvbSk7XG4gIH1cbiAgYWRkVG93ZXJFeGl0KHJvbSk7XG4gIHJldmVyc2libGVTd2FuR2F0ZShyb20pO1xuICBjbG9zZUNhdmVFbnRyYW5jZXMocm9tKTsgLy8gTk9URTogYWZ0ZXIgb3RoZXIgbWFwIGVkaXRzXG59XG5cbmV4cG9ydCBuYW1lc3BhY2Ugc3RhbmRhcmRNYXBFZGl0cyB7XG4gIGV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZU9wdGlvbnMoZmxhZ3M6IEZsYWdTZXQsIHJhbmRvbTogUmFuZG9tKTogT3B0aW9ucyB7XG4gICAgY29uc3Qgb3B0aW9uczogT3B0aW9ucyA9IHt9O1xuICAgIGlmIChmbGFncy5hZGRFYXN0Q2F2ZSgpKSB7XG4gICAgICBvcHRpb25zLmVhc3RDYXZlID0ge307XG4gICAgICBjb25zdCBleGl0czogRWFzdENhdmVFeGl0W10gPSBbJ2NvcmRlbCcsICdsaW1lJywgJ2dvYScsICdkZXNlcnQnXTtcbiAgICAgIGxldCBpID0gcmFuZG9tLm5leHRJbnQoNCk7XG4gICAgICBbb3B0aW9ucy5lYXN0Q2F2ZS5leGl0MV0gPSBleGl0cy5zcGxpY2UoaSwgMSk7XG4gICAgICBvcHRpb25zLmVhc3RDYXZlLmV4aXQyID0gcmFuZG9tLnBpY2soZXhpdHMpO1xuICAgIH0gZWxzZSBpZiAoZmxhZ3MuY29ubmVjdExpbWVUcmVlVG9MZWFmKCkpIHtcbiAgICAgIG9wdGlvbnMuY2xhc3NpY0xpbWVUcmVlVG9MZWFmID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cbn1cblxuZnVuY3Rpb24gZWFzdENhdmUocm9tOiBSb20sIG9wdHM6IEVhc3RDYXZlT3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgbG9jYXRpb25zOiB7RWFzdENhdmUxLCBFYXN0Q2F2ZTIsIEVhc3RDYXZlMywgU2VhbGVkQ2F2ZTEsIFZhbGxleU9mV2luZH0sXG4gICAgLy9mbGFnczoge0Fsd2F5c1RydWV9LFxuICB9ID0gcm9tO1xuXG4gIHJvbS5sb2NhdGlvbnMuYWxsb2NhdGUocm9tLmxvY2F0aW9ucy5FYXN0Q2F2ZTEpO1xuICByb20ubG9jYXRpb25zLmFsbG9jYXRlKHJvbS5sb2NhdGlvbnMuRWFzdENhdmUyKTtcbiAgaWYgKG9wdHMuZXhpdDIpIHJvbS5sb2NhdGlvbnMuYWxsb2NhdGUocm9tLmxvY2F0aW9ucy5FYXN0Q2F2ZTMpO1xuXG4gIC8vIE5PVEU6IDB4OWMgY2FuIGJlY29tZSAweDk5IGluIHRvcCBsZWZ0IG9yIDB4OTcgaW4gdG9wIHJpZ2h0IG9yIGJvdHRvbSBtaWRkbGUgZm9yIGEgY2F2ZSBleGl0XG4gIEVhc3RDYXZlMS5zY3JlZW5zID0gW1sweDljLCAweDg0LCAweDgwLCAweDgzLCAweDljXSxcbiAgICAgICAgICAgICAgICAgICAgICAgWzB4ODAsIDB4ODEsIDB4ODMsIDB4ODYsIDB4ODBdLFxuICAgICAgICAgICAgICAgICAgICAgICBbMHg4MywgMHg4OCwgMHg4OSwgMHg4MCwgMHg4MF0sXG4gICAgICAgICAgICAgICAgICAgICAgIFsweDgxLCAweDhjLCAweDg1LCAweDgyLCAweDg0XSxcbiAgICAgICAgICAgICAgICAgICAgICAgWzB4OWUsIDB4ODUsIDB4OWMsIDB4OTgsIDB4ODZdXTtcblxuICBFYXN0Q2F2ZTIuc2NyZWVucyA9IFtbMHg5YywgMHg4NCwgMHg5YiwgMHg4MCwgMHg5Yl0sXG4gICAgICAgICAgICAgICAgICAgICAgIFsweDgwLCAweDgxLCAweDgxLCAweDgwLCAweDgxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgWzB4ODAsIDB4ODcsIDB4OGIsIDB4OGEsIDB4ODZdLFxuICAgICAgICAgICAgICAgICAgICAgICBbMHg4MCwgMHg4YywgMHg4MCwgMHg4NSwgMHg4NF0sXG4gICAgICAgICAgICAgICAgICAgICAgIFsweDljLCAweDg2LCAweDgwLCAweDgwLCAweDlhXV07XG5cbiAgZm9yIChjb25zdCBsIG9mIFtFYXN0Q2F2ZTEsIEVhc3RDYXZlMiwgRWFzdENhdmUzXSkge1xuICAgIGwuYmdtID0gbC5vcmlnaW5hbEJnbSA9IDB4MTc7IC8vIG10IHNhYnJlIGNhdmUgbXVzaWM/XG4gICAgbC5lbnRyYW5jZXMgPSBbXTtcbiAgICBsLmV4aXRzID0gW107XG4gICAgbC5waXRzID0gW107XG4gICAgbC5zcGF3bnMgPSBbXTtcbiAgICBsLmZsYWdzID0gW107XG4gICAgbC5oZWlnaHQgPSBsLnNjcmVlbnMubGVuZ3RoO1xuICAgIGwud2lkdGggPSBsLnNjcmVlbnNbMF0ubGVuZ3RoO1xuICAgIGwuZXh0ZW5kZWQgPSAwO1xuICAgIGwudGlsZVBhbGV0dGVzID0gWzB4MWEsIDB4MWIsIDB4MDVdOyAvLyByb2NrIHdhbGxcbiAgICBsLm9yaWdpbmFsVGlsZVBhbGV0dGVzID0gWzB4MWEsIDB4MWIsIDB4MDVdOyAvLyByb2NrIHdhbGxcbiAgICBsLnRpbGVzZXQgPSAweDg4O1xuICAgIGwudGlsZUVmZmVjdHMgPSAweGI1O1xuICAgIGwudGlsZVBhdHRlcm5zID0gWzB4MTQsIDB4MDJdO1xuICAgIGwuc3ByaXRlUGF0dGVybnMgPSBbLi4uU2VhbGVkQ2F2ZTEuc3ByaXRlUGF0dGVybnNdIGFzIFtudW1iZXIsIG51bWJlcl07XG4gICAgbC5zcHJpdGVQYWxldHRlcyA9IFsuLi5TZWFsZWRDYXZlMS5zcHJpdGVQYWxldHRlc10gYXMgW251bWJlciwgbnVtYmVyXTtcbiAgfVxuXG4gIC8vIEFkZCBlbnRyYW5jZSB0byB2YWxsZXkgb2Ygd2luZFxuICAvLyBUT0RPIC0gbWF5YmUganVzdCBkbyAoMHgzMywgW1sweDE5XV0pIG9uY2Ugd2UgZml4IHRoYXQgc2NyZWVuIGZvciBncmFzc1xuICBWYWxsZXlPZldpbmQud3JpdGVTY3JlZW5zMmQoMHgyMywgW1xuICAgIFsweDExLCAweDBkXSxcbiAgICBbMHgwOSwgfjB4YzJdXSk7XG4gIHJvbS50aWxlRWZmZWN0c1swXS5lZmZlY3RzWzB4YzBdID0gMDtcbiAgLy8gVE9ETyAtIGRvIHRoaXMgb25jZSB3ZSBmaXggdGhlIHNlYSB0aWxlc2V0XG4gIC8vIHJvbS5zY3JlZW5zWzB4YzJdLnRpbGVzWzB4NWFdID0gMHgwYTtcbiAgLy8gcm9tLnNjcmVlbnNbMHhjMl0udGlsZXNbMHg1Yl0gPSAweDBhO1xuXG4gIC8vIENvbm5lY3QgbWFwc1xuICBFYXN0Q2F2ZTEuY29ubmVjdCgweDQzLCBFYXN0Q2F2ZTIsIDB4NDQpO1xuICBFYXN0Q2F2ZTEuY29ubmVjdCgweDQwLCBWYWxsZXlPZldpbmQsIDB4MzQpO1xuXG4gIGlmIChvcHRzLmV4aXQxKSB7XG4gICAgRWFzdENhdmUxLnNjcmVlbnNbMF1bNF0gPSAweDk3OyAvLyBkb3duIHN0YWlyXG4gICAgY29ubmVjdEVhc3RDYXZlRXhpdChFYXN0Q2F2ZTEsIDB4MDQsIG9wdHMuZXhpdDEpO1xuICB9XG5cbiAgaWYgKG9wdHMuZXhpdDIpIHtcbiAgICByb20ubG9jYXRpb25zLmFsbG9jYXRlKEVhc3RDYXZlMyk7XG4gICAgRWFzdENhdmUzLnNjcmVlbnMgPSBbWzB4OWFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgIFsweDhmXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBbMHg5ZV1dO1xuICAgIEVhc3RDYXZlMy5oZWlnaHQgPSAzO1xuICAgIEVhc3RDYXZlMy53aWR0aCA9IDE7XG5cbiAgICAvLyBBZGQgYSByb2NrIHdhbGwgKGlkPTApLlxuICAgIEVhc3RDYXZlMy5zcGF3bnMucHVzaChTcGF3bi5mcm9tKFsweDE4LCAweDA3LCAweDIzLCAweDAwXSkpO1xuICAgIEVhc3RDYXZlMy5mbGFncy5wdXNoKEZsYWcub2Yoe3NjcmVlbjogMHgxMCwgZmxhZzogcm9tLmZsYWdzLmFsbG9jKDB4MjAwKX0pKTtcblxuICAgIC8vIE1ha2UgdGhlIGNvbm5lY3Rpb25zLlxuICAgIEVhc3RDYXZlMi5zY3JlZW5zWzRdWzBdID0gMHg5OTtcbiAgICBFYXN0Q2F2ZTIuY29ubmVjdCgweDQwLCBFYXN0Q2F2ZTMsIH4weDAwKTtcbiAgICBjb25uZWN0RWFzdENhdmVFeGl0KEVhc3RDYXZlMywgMHgyMCwgb3B0cy5leGl0Mik7XG4gIH1cblxuICAvLyBBZGQgbW9uc3RlcnNcbiAgRWFzdENhdmUxLnNwYXducy5wdXNoKFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MjEsIHRpbGU6IDB4ODcsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMiwgdGlsZTogMHg4OCwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMywgdGlsZTogMHg4OSwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDMyLCB0aWxlOiAweDY4LCB0aW1lZDogZmFsc2UsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDQxLCB0aWxlOiAweDg4LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MzMsIHRpbGU6IDB4OTgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgwMywgdGlsZTogMHg4OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgKTtcbiAgRWFzdENhdmUyLnNwYXducy5wdXNoKFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MDEsIHRpbGU6IDB4ODgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMSwgdGlsZTogMHg0OCwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgxMiwgdGlsZTogMHg3NywgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDE0LCB0aWxlOiAweDI4LCB0aW1lZDogZmFsc2UsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDIzLCB0aWxlOiAweDg1LCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIFNwYXduLm9mKHtzY3JlZW46IDB4MzEsIHRpbGU6IDB4ODgsIHRpbWVkOiB0cnVlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgzMywgdGlsZTogMHg4YSwgdGltZWQ6IGZhbHNlLCBpZDogMHgyfSksXG4gICAgU3Bhd24ub2Yoe3NjcmVlbjogMHgzNCwgdGlsZTogMHg5OCwgdGltZWQ6IHRydWUsIGlkOiAweDJ9KSxcbiAgICBTcGF3bi5vZih7c2NyZWVuOiAweDQxLCB0aWxlOiAweDgyLCB0aW1lZDogdHJ1ZSwgaWQ6IDB4Mn0pLFxuICAgIC8vIGNoZXN0OiBhbGFybSBmbHV0ZVxuICAgIFNwYXduLm9mKHt5OiAweDExMCwgeDogMHg0NzgsIHR5cGU6IDIsIGlkOiAweDMxfSksXG4gICAgLy8gY2hlc3Q6IG1pbWljXG4gICAgU3Bhd24ub2Yoe3k6IDB4MDcwLCB4OiAweDEwOCwgdHlwZTogMiwgaWQ6IDB4NzB9KSxcbiAgKTtcbiAgcm9tLm5wY3MuV2luZG1pbGxHdWFyZC5kYXRhWzFdID0gMHg1OTsgLy8gYWxhcm0gZmx1dGUgLT4gbWVkaWNhbCBoZXJiXG59XG5cbmZ1bmN0aW9uIGNvbm5lY3RFYXN0Q2F2ZUV4aXQobG9jOiBMb2NhdGlvbiwgc2NyOiBudW1iZXIsIGV4aXQ6IEVhc3RDYXZlRXhpdCkge1xuICBsZXQgZGVzdDogTG9jYXRpb247XG4gIGxldCBkZXN0U2NyOiBudW1iZXI7XG4gIHN3aXRjaCAoZXhpdCkge1xuICAgIGNhc2UgJ2xpbWUnOlxuICAgICAgLy8gQWRkIGVudHJhbmNlIHRvIGxpbWUgdHJlZSB2YWxsZXlcbiAgICAgIGRlc3QgPSBsb2Mucm9tLmxvY2F0aW9ucy5MaW1lVHJlZVZhbGxleTtcbiAgICAgIGRlc3RTY3IgPSAweDEwO1xuICAgICAgZGVzdC5yZXNpemVTY3JlZW5zKDAsIDEsIDAsIDApOyAvLyBhZGQgb25lIHNjcmVlbiB0byBsZWZ0IGVkZ2VcbiAgICAgIGRlc3Qud3JpdGVTY3JlZW5zMmQoMHgwMCwgW1xuICAgICAgICBbIDB4MGMsIDB4MTFdLFxuICAgICAgICBbfjB4MTUsIDB4MzZdLFxuICAgICAgICBbIDB4MGUsIDB4MGZdXSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2NvcmRlbCc6XG4gICAgICBkZXN0ID0gbG9jLnJvbS5sb2NhdGlvbnMuQ29yZGVsUGxhaW5FYXN0O1xuICAgICAgZGVzdFNjciA9IDB4NTU7XG4gICAgICBkZXN0LndyaXRlU2NyZWVuczJkKDB4NTUsIFtcbiAgICAgICAgW34weDE1LCAweDM2XSxcbiAgICAgICAgWyAweDBlLCAweDBmXV0pO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdnb2EnOlxuICAgICAgZGVzdCA9IGxvYy5yb20ubG9jYXRpb25zLkdvYVZhbGxleTtcbiAgICAgIGRlc3RTY3IgPSAweDExO1xuICAgICAgZGVzdC53cml0ZVNjcmVlbnMyZCgweDAxLCBbXG4gICAgICAgIFsgMHgwYywgMHgwZF0sXG4gICAgICAgIFt+MHgxNSwgMHgzNV1dKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnZGVzZXJ0JzpcbiAgICAgIGRlc3QgPSBsb2Mucm9tLmxvY2F0aW9ucy5EZXNlcnQyO1xuICAgICAgZGVzdFNjciA9IDB4NTM7XG4gICAgICBkZXN0LndyaXRlU2NyZWVuczJkKDB4NTMsIFtbfjB4YzJdXSk7XG4gICAgICBicmVhaztcbiAgfVxuICBsb2MuY29ubmVjdChzY3IsIGRlc3QsIGRlc3RTY3IpO1xufVxuXG4vLyBQcm9ncmFtbWF0aWNhbGx5IGFkZCBhIGhvbGUgYmV0d2VlbiB2YWxsZXkgb2Ygd2luZCBhbmQgbGltZSB0cmVlIHZhbGxleVxuZnVuY3Rpb24gY29ubmVjdExpbWVUcmVlVG9MZWFmKHJvbTogUm9tKSB7XG4gIGNvbnN0IHtWYWxsZXlPZldpbmQsIExpbWVUcmVlVmFsbGV5fSA9IHJvbS5sb2NhdGlvbnM7XG5cbiAgVmFsbGV5T2ZXaW5kLnNjcmVlbnNbNV1bNF0gPSAweDEwOyAvLyBuZXcgZXhpdFxuICBMaW1lVHJlZVZhbGxleS5zY3JlZW5zWzFdWzBdID0gMHgxYTsgLy8gbmV3IGV4aXRcbiAgTGltZVRyZWVWYWxsZXkuc2NyZWVuc1syXVswXSA9IDB4MGM7IC8vIG5pY2VyIG1vdW50YWluc1xuXG4gIGNvbnN0IHdpbmRFbnRyYW5jZSA9XG4gICAgICBWYWxsZXlPZldpbmQuZW50cmFuY2VzLnB1c2goRW50cmFuY2Uub2Yoe3g6IDB4NGVmLCB5OiAweDU3OH0pKSAtIDE7XG4gIGNvbnN0IGxpbWVFbnRyYW5jZSA9XG4gICAgICBMaW1lVHJlZVZhbGxleS5lbnRyYW5jZXMucHVzaChFbnRyYW5jZS5vZih7eDogMHgwMTAsIHk6IDB4MWMwfSkpIC0gMTtcblxuICBWYWxsZXlPZldpbmQuZXhpdHMucHVzaChcbiAgICAgIEV4aXQub2Yoe3g6IDB4NGYwLCB5OiAweDU2MCwgZGVzdDogMHg0MiwgZW50cmFuY2U6IGxpbWVFbnRyYW5jZX0pLFxuICAgICAgRXhpdC5vZih7eDogMHg0ZjAsIHk6IDB4NTcwLCBkZXN0OiAweDQyLCBlbnRyYW5jZTogbGltZUVudHJhbmNlfSkpO1xuICBMaW1lVHJlZVZhbGxleS5leGl0cy5wdXNoKFxuICAgICAgRXhpdC5vZih7eDogMHgwMDAsIHk6IDB4MWIwLCBkZXN0OiAweDAzLCBlbnRyYW5jZTogd2luZEVudHJhbmNlfSksXG4gICAgICBFeGl0Lm9mKHt4OiAweDAwMCwgeTogMHgxYzAsIGRlc3Q6IDB4MDMsIGVudHJhbmNlOiB3aW5kRW50cmFuY2V9KSk7XG59XG5cbmZ1bmN0aW9uIGFkZFRvd2VyRXhpdChyb206IFJvbSkge1xuICBjb25zdCB7VG93ZXJFbnRyYW5jZSwgQ3J5cHRfVGVsZXBvcnRlcn0gPSByb20ubG9jYXRpb25zO1xuICBjb25zdCBlbnRyYW5jZSA9IENyeXB0X1RlbGVwb3J0ZXIuZW50cmFuY2VzLmxlbmd0aDtcbiAgY29uc3QgZGVzdCA9IENyeXB0X1RlbGVwb3J0ZXIuaWQ7XG4gIENyeXB0X1RlbGVwb3J0ZXIuZW50cmFuY2VzLnB1c2goRW50cmFuY2Uub2Yoe3RpbGU6IDB4Njh9KSk7XG4gIFRvd2VyRW50cmFuY2UuZXhpdHMucHVzaChFeGl0Lm9mKHt0aWxlOiAweDU3LCBkZXN0LCBlbnRyYW5jZX0pKTtcbiAgVG93ZXJFbnRyYW5jZS5leGl0cy5wdXNoKEV4aXQub2Yoe3RpbGU6IDB4NTgsIGRlc3QsIGVudHJhbmNlfSkpO1xufVxuXG5mdW5jdGlvbiByZXZlcnNpYmxlU3dhbkdhdGUocm9tOiBSb20pIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7T3BlbmVkU3dhbkdhdGV9LFxuICAgIGxvY2F0aW9uczoge1N3YW5HYXRlfSxcbiAgICBucGNzOiB7U29sZGllckd1YXJkfSxcbiAgfSA9IHJvbTtcbiAgLy8gQWxsb3cgb3BlbmluZyBTd2FuIGZyb20gZWl0aGVyIHNpZGUgYnkgYWRkaW5nIGEgcGFpciBvZiBndWFyZHMgb24gdGhlXG4gIC8vIG9wcG9zaXRlIHNpZGUgb2YgdGhlIGdhdGUuXG4gIFN3YW5HYXRlLnNwYXducy5wdXNoKFxuICAgIC8vIE5PVEU6IFNvbGRpZXJzIG11c3QgY29tZSBpbiBwYWlycyAod2l0aCBpbmRleCBeMSBmcm9tIGVhY2ggb3RoZXIpXG4gICAgU3Bhd24ub2Yoe3h0OiAweDBhLCB5dDogMHgwMiwgdHlwZTogMSwgaWQ6IDB4MmR9KSwgLy8gbmV3IHNvbGRpZXJcbiAgICBTcGF3bi5vZih7eHQ6IDB4MGIsIHl0OiAweDAyLCB0eXBlOiAxLCBpZDogMHgyZH0pLCAvLyBuZXcgc29sZGllclxuICAgIC8vU3Bhd24ub2Yoe3h0OiAweDBlLCB5dDogMHgwYSwgdHlwZTogMiwgaWQ6IDB4YjN9KSwgLy8gbmV3IHRyaWdnZXI6IGVyYXNlIGd1YXJkc1xuICApO1xuXG4gIC8vIC8vIE5PVEU6IGp1c3QgdXNlIHRoZSBhY3R1YWwgZmxhZyBpbnN0ZWFkP1xuICAvLyAvLyBHdWFyZHMgKCQyZCkgYXQgc3dhbiBnYXRlICgkNzMpIH4gc2V0IDBlZiBhZnRlciBvcGVuaW5nIGdhdGUgPT4gY29uZGl0aW9uIGZvciBkZXNwYXduXG4gIC8vIHJvbS5ucGNzWzB4MmRdLmxvY2FsRGlhbG9ncy5nZXQoMHg3MykhWzBdLmZsYWdzLnB1c2goMHgwZWYpO1xuICAvLyAvLyBEZXNwYXduIGd1YXJkIHRyaWdnZXIgcmVxdWlyZXMgMGVmXG4gIC8vIHJvbS50cmlnZ2VyKDB4YjMpLmNvbmRpdGlvbnMucHVzaCgweDBlZik7XG4gIFNvbGRpZXJHdWFyZC5sb2NhbERpYWxvZ3MuZ2V0KFN3YW5HYXRlLmlkKSFbMF0uZmxhZ3MucHVzaChPcGVuZWRTd2FuR2F0ZS5pZCk7XG4gIC8vcm9tLnRyaWdnZXIoMHhiMykuY29uZGl0aW9ucy5wdXNoKE9wZW5lZFN3YW5HYXRlLmlkKTtcbiAgLy8gVE9ETyAtIGNhbiB3ZSBkbyBhd2F5IHdpdGggdGhlIHRyaWdnZXI/ICBKdXN0IHNwYXduIHRoZW0gb24gdGhlIHNhbWUgY29uZGl0aW9uLi4uXG59XG5cbmZ1bmN0aW9uIGNsb3NlQ2F2ZUVudHJhbmNlcyhyb206IFJvbSk6IHZvaWQge1xuICAvLyBEZXN0cnVjdHVyZSBvdXQgYSBmZXcgbG9jYXRpb25zIGJ5IG5hbWVcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7QWx3YXlzVHJ1ZSwgT3BlbmVkU2VhbGVkQ2F2ZSwgT3BlbmVkUHJpc29ufSxcbiAgICBsb2NhdGlvbnM6IHtcbiAgICAgIENvcmRlbFBsYWluRWFzdCwgQ29yZGVsUGxhaW5XZXN0LCBEZXNlcnQyLFxuICAgICAgS2lyaXNhTWVhZG93LCBTYWhhcmFPdXRzaWRlQ2F2ZSwgVmFsbGV5T2ZXaW5kLFxuICAgICAgV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsIFdhdGVyZmFsbFZhbGxleVNvdXRoLFxuICAgIH0sXG4gIH0gPSByb207XG5cbiAgLy8gUHJldmVudCBzb2Z0bG9jayBmcm9tIGV4aXRpbmcgc2VhbGVkIGNhdmUgYmVmb3JlIHdpbmRtaWxsIHN0YXJ0ZWRcbiAgVmFsbGV5T2ZXaW5kLmVudHJhbmNlc1sxXS55ICs9IDE2O1xuXG4gIC8vIENsZWFyIHRpbGVzIDEsMiwzLDQgZm9yIGJsb2NrYWJsZSBjYXZlcyBpbiB0aWxlc2V0cyA5MCwgOTQsIGFuZCA5Y1xuICByb20uc3dhcE1ldGF0aWxlcyhbMHg5MF0sXG4gICAgICAgICAgICAgICAgICAgIFsweDA3LCBbMHgwMSwgMHgwMF0sIH4weGMxXSxcbiAgICAgICAgICAgICAgICAgICAgWzB4MGUsIFsweDAyLCAweDAwXSwgfjB4YzFdLFxuICAgICAgICAgICAgICAgICAgICBbMHgyMCwgWzB4MDMsIDB4MGFdLCB+MHhkN10sXG4gICAgICAgICAgICAgICAgICAgIFsweDIxLCBbMHgwNCwgMHgwYV0sIH4weGQ3XSk7XG4gIHJvbS5zd2FwTWV0YXRpbGVzKFsweDk0LCAweDljXSxcbiAgICAgICAgICAgICAgICAgICAgWzB4NjgsIFsweDAxLCAweDAwXSwgfjB4YzFdLFxuICAgICAgICAgICAgICAgICAgICBbMHg4MywgWzB4MDIsIDB4MDBdLCB+MHhjMV0sXG4gICAgICAgICAgICAgICAgICAgIFsweDg4LCBbMHgwMywgMHgwYV0sIH4weGQ3XSxcbiAgICAgICAgICAgICAgICAgICAgWzB4ODksIFsweDA0LCAweDBhXSwgfjB4ZDddKTtcblxuICAvLyBOb3cgcmVwbGFjZSB0aGUgdGlsZXMgd2l0aCB0aGUgYmxvY2thYmxlIG9uZXNcbiAgcm9tLnNjcmVlbnNbMHgwYV0udGlsZXNbMHgzOF0gPSAweDAxO1xuICByb20uc2NyZWVuc1sweDBhXS50aWxlc1sweDM5XSA9IDB4MDI7XG4gIHJvbS5zY3JlZW5zWzB4MGFdLnRpbGVzWzB4NDhdID0gMHgwMztcbiAgcm9tLnNjcmVlbnNbMHgwYV0udGlsZXNbMHg0OV0gPSAweDA0O1xuXG4gIHJvbS5zY3JlZW5zWzB4MTVdLnRpbGVzWzB4NzldID0gMHgwMTtcbiAgcm9tLnNjcmVlbnNbMHgxNV0udGlsZXNbMHg3YV0gPSAweDAyO1xuICByb20uc2NyZWVuc1sweDE1XS50aWxlc1sweDg5XSA9IDB4MDM7XG4gIHJvbS5zY3JlZW5zWzB4MTVdLnRpbGVzWzB4OGFdID0gMHgwNDtcblxuICByb20uc2NyZWVuc1sweDE5XS50aWxlc1sweDQ4XSA9IDB4MDE7XG4gIHJvbS5zY3JlZW5zWzB4MTldLnRpbGVzWzB4NDldID0gMHgwMjtcbiAgcm9tLnNjcmVlbnNbMHgxOV0udGlsZXNbMHg1OF0gPSAweDAzO1xuICByb20uc2NyZWVuc1sweDE5XS50aWxlc1sweDU5XSA9IDB4MDQ7XG5cbiAgcm9tLnNjcmVlbnNbMHgzZV0udGlsZXNbMHg1Nl0gPSAweDAxO1xuICByb20uc2NyZWVuc1sweDNlXS50aWxlc1sweDU3XSA9IDB4MDI7XG4gIHJvbS5zY3JlZW5zWzB4M2VdLnRpbGVzWzB4NjZdID0gMHgwMztcbiAgcm9tLnNjcmVlbnNbMHgzZV0udGlsZXNbMHg2N10gPSAweDA0O1xuXG4gIC8vIE5PVEU6IGZsYWcgMmYwIGlzIEFMV0FZUyBzZXQgLSB1c2UgaXQgYXMgYSBiYXNlbGluZS5cbiAgY29uc3QgZmxhZ3NUb0NsZWFyOiBbTG9jYXRpb24sIG51bWJlcl1bXSA9IFtcbiAgICBbVmFsbGV5T2ZXaW5kLCAweDMwXSwgLy8gdmFsbGV5IG9mIHdpbmQsIHplYnUncyBjYXZlXG4gICAgLy9bQ29yZGVsUGxhaW5XZXN0LCAweDMwXSwgLy8gY29yZGVsIHdlc3QsIHZhbXBpcmUgY2F2ZVxuICAgIC8vW0NvcmRlbFBsYWluRWFzdCwgMHgzMF0sIC8vIGNvcmRlbCBlYXN0LCB2YW1waXJlIGNhdmVcbiAgICAvL1tXYXRlcmZhbGxWYWxsZXlOb3J0aCwgMHgwMF0sIC8vIHdhdGVyZmFsbCBub3J0aCwgcHJpc29uIGNhdmVcbiAgICBbV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsIDB4MTRdLCAvLyB3YXRlcmZhbGwgbm9ydGgsIGZvZyBsYW1wXG4gICAgW1dhdGVyZmFsbFZhbGxleVNvdXRoLCAweDc0XSwgLy8gd2F0ZXJmYWxsIHNvdXRoLCBraXJpc2FcbiAgICBbS2lyaXNhTWVhZG93LCAweDEwXSwgLy8ga2lyaXNhIG1lYWRvd1xuICAgIFtTYWhhcmFPdXRzaWRlQ2F2ZSwgMHgwMF0sIC8vIGNhdmUgdG8gZGVzZXJ0XG4gICAgW0Rlc2VydDIsIDB4NDFdLFxuICBdO1xuICBmb3IgKGNvbnN0IFtsb2MsIHl4XSBvZiBmbGFnc1RvQ2xlYXIpIHtcbiAgICBsb2MuZmxhZ3MucHVzaChGbGFnLm9mKHt5eCwgZmxhZzogQWx3YXlzVHJ1ZS5pZH0pKTtcbiAgfVxuXG4gIC8vIE5PVEUgLSB0aGlzIHVzZWQgdG8gYmUgY29uZmlndXJhYmxlLi4uXG5cbiAgLy8gZnVuY3Rpb24gcmVwbGFjZUZsYWcobG9jOiBMb2NhdGlvbiwgeXg6IG51bWJlciwgZmxhZzogbnVtYmVyKTogdm9pZCB7XG4gIC8vICAgZm9yIChjb25zdCBmIG9mIGxvYy5mbGFncykge1xuICAvLyAgICAgaWYgKGYueXggPT09IHl4KSB7XG4gIC8vICAgICAgIGYuZmxhZyA9IGZsYWc7XG4gIC8vICAgICAgIHJldHVybjtcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBmbGFnIHRvIHJlcGxhY2UgYXQgJHtsb2N9OiR7eXh9YCk7XG4gIC8vIH07XG5cbiAgLy8gTk9URTogd2UgY291bGQgYWxzbyBjbG9zZSBpdCBvZmYgdW50aWwgYm9zcyBraWxsZWQuLi4/XG4gIC8vICAtIGNvbnN0IHZhbXBpcmVGbGFnID0gfnJvbS5ucGNTcGF3bnNbMHhjMF0uY29uZGl0aW9uc1sweDBhXVswXTtcbiAgLy8gIC0+IGtlbGJlc3F1ZSBmb3IgdGhlIG90aGVyIG9uZS5cbiAgQ29yZGVsUGxhaW5XZXN0LmZsYWdzLnB1c2goRmxhZy5vZih7eXg6IDB4MzAsIGZsYWc6IE9wZW5lZFNlYWxlZENhdmUuaWR9KSk7XG4gIENvcmRlbFBsYWluRWFzdC5mbGFncy5wdXNoKEZsYWcub2Yoe3l4OiAweDMwLCBmbGFnOiBPcGVuZWRTZWFsZWRDYXZlLmlkfSkpO1xuICBXYXRlcmZhbGxWYWxsZXlOb3J0aC5mbGFncy5wdXNoKEZsYWcub2Yoe3l4OiAweDAwLCBmbGFnOiBPcGVuZWRQcmlzb24uaWR9KSk7XG4gIGNvbnN0IGV4cGxvc2lvbiA9IFNwYXduLm9mKHt5OiAweDA2MCwgeDogMHgwNjAsIHR5cGU6IDQsIGlkOiAweDJjfSk7XG4gIGNvbnN0IGtleVRyaWdnZXIgPSBTcGF3bi5vZih7eTogMHgwNzAsIHg6IDB4MDcwLCB0eXBlOiAyLCBpZDogMHhhZH0pO1xuICBXYXRlcmZhbGxWYWxsZXlOb3J0aC5zcGF3bnMuc3BsaWNlKDEsIDAsIGV4cGxvc2lvbik7XG4gIFdhdGVyZmFsbFZhbGxleU5vcnRoLnNwYXducy5wdXNoKGtleVRyaWdnZXIpO1xufVxuIl19