export var ScreenFix;
(function (ScreenFix) {
    ScreenFix[ScreenFix["Unknown"] = 0] = "Unknown";
    ScreenFix[ScreenFix["GrassLongGrass"] = 1] = "GrassLongGrass";
    ScreenFix[ScreenFix["GrassLongGrassRemapping"] = 2] = "GrassLongGrassRemapping";
    ScreenFix[ScreenFix["RiverShortGrass"] = 3] = "RiverShortGrass";
    ScreenFix[ScreenFix["SeaCaveEntrance"] = 4] = "SeaCaveEntrance";
    ScreenFix[ScreenFix["SeaRocks"] = 5] = "SeaRocks";
    ScreenFix[ScreenFix["SeaMarsh"] = 6] = "SeaMarsh";
    ScreenFix[ScreenFix["SeaTrees"] = 7] = "SeaTrees";
    ScreenFix[ScreenFix["DesertShortGrass"] = 8] = "DesertShortGrass";
    ScreenFix[ScreenFix["DesertLongGrass"] = 9] = "DesertLongGrass";
    ScreenFix[ScreenFix["DesertMarsh"] = 10] = "DesertMarsh";
    ScreenFix[ScreenFix["DesertRocks"] = 11] = "DesertRocks";
    ScreenFix[ScreenFix["DesertTrees"] = 12] = "DesertTrees";
    ScreenFix[ScreenFix["DesertTownEntrance"] = 13] = "DesertTownEntrance";
    ScreenFix[ScreenFix["LabyrinthParapets"] = 14] = "LabyrinthParapets";
    ScreenFix[ScreenFix["SwampDoors"] = 15] = "SwampDoors";
    ScreenFix[ScreenFix["ExtraSpikes"] = 16] = "ExtraSpikes";
})(ScreenFix || (ScreenFix = {}));
export function withRequire(requirement, props) {
    for (const key in props) {
        props[key].requires = [requirement];
    }
    return props;
}
export function fixTilesets(rom) {
    const { desert, grass, sea } = rom.metatilesets;
    const $ = rom.metascreens;
    $.registerFix(ScreenFix.DesertRocks);
    desert.getTile(0x5f).copyFrom(0x5b).replaceIn($.oasisCave, $.oasisLake);
    desert.getTile(0x5a).copyFrom(0x98).setTiles([, , 0x1a, 0x18]);
    desert.getTile(0x5b).copyFrom(0x80).setTiles([0x34, 0x32, ,]);
    desert.getTile(0x5c).copyFrom(0x80).setTiles([, , 0x37, 0x35]);
    desert.getTile(0x5d).copyFrom(0x80).setTiles([, 0x37, , 0x34]);
    desert.getTile(0x5e).copyFrom(0x80).setTiles([0x35, , 0x32,]);
    $.registerFix(ScreenFix.DesertTrees);
    desert.getTile(0x63).copyFrom(0x71);
    desert.getTile(0x68).copyFrom(0x70);
    desert.getTile(0x69).copyFrom(0x60);
    desert.getTile(0x6a).copyFrom(0x65);
    desert.getTile(0x6c).copyFrom(0x70);
    desert.getTile(0x6e).copyFrom(0x76);
    desert.getTile(0x6f).copyFrom(0x78);
    $.registerFix(ScreenFix.GrassLongGrass);
    grass.getTile(0x40).copyFrom(0x51);
    grass.getTile(0x41).copyFrom(0x52);
    grass.getTile(0x42).copyFrom(0x53);
    grass.getTile(0x43).copyFrom(0x54);
    grass.getTile(0x44).copyFrom(0x55);
    grass.getTile(0x45).copyFrom(0x56);
    grass.getTile(0x46).copyFrom(0x58);
    grass.getTile(0x47).copyFrom(0x59);
    $.registerFix(ScreenFix.SeaCaveEntrance);
    sea.getTile(0xad).copyFrom(0x0a)
        .replaceIn($.beachExitN, $.lighthouseEntrance, $.oceanShrine);
    sea.getTile(0x0a).copyFrom(0xa2);
    $.boundaryN_cave.screen.set2d(0x39, [[0x00, 0x00], [0x0a, 0x0a]]);
    $.boundarySE_cave.screen.set2d(0x4a, [[0x00, 0x00], [0x0a, 0x0a]]);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyZWVuZml4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3JvbS9zY3JlZW5maXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsTUFBTSxDQUFOLElBQVksU0F5RFg7QUF6REQsV0FBWSxTQUFTO0lBQ25CLCtDQUFPLENBQUE7SUFHUCw2REFBYyxDQUFBO0lBS2QsK0VBQXVCLENBQUE7SUFJdkIsK0RBQWUsQ0FBQTtJQUtmLCtEQUFlLENBQUE7SUFNZixpREFBUSxDQUFBO0lBR1IsaURBQVEsQ0FBQTtJQUlSLGlEQUFRLENBQUE7SUFHUixpRUFBZ0IsQ0FBQTtJQUdoQiwrREFBZSxDQUFBO0lBSWYsd0RBQVcsQ0FBQTtJQUdYLHdEQUFXLENBQUE7SUFHWCx3REFBVyxDQUFBO0lBR1gsc0VBQWtCLENBQUE7SUFFbEIsb0VBQWlCLENBQUE7SUFFakIsc0RBQVUsQ0FBQTtJQUVWLHdEQUFXLENBQUE7QUFDYixDQUFDLEVBekRXLFNBQVMsS0FBVCxTQUFTLFFBeURwQjtBQUdELE1BQU0sVUFBVSxXQUFXLENBQWlCLFdBQXNCLEVBQUUsS0FBUTtJQUMxRSxLQUFLLE1BQU0sR0FBRyxJQUFJLEtBQUssRUFBRTtRQUN2QixLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDckM7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUEyQ0QsTUFBTSxVQUFVLFdBQVcsQ0FBQyxHQUFRO0lBQ2xDLE1BQU0sRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBQyxHQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUM7SUFDOUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQztJQUkxQixDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNyQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7SUFFeEUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxBQUFELEVBQUcsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxBQUFELEVBQUksQ0FBQyxDQUFDO0lBQy9ELE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQUFBRCxFQUFHLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9ELE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEFBQUQsRUFBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9ELE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksRUFBRSxBQUFELEVBQUcsSUFBSSxFQUFHLENBQUMsQ0FBQztJQUUvRCxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNyQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUlwQyxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUN4QyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUtuQyxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN6QyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7U0FDM0IsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNsRSxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqQyxDQUFDLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUE2Q3JFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcblxuLy8gU2ltcGxlIHRpbGVzZXQtb25seSBmaXhlcyB0aGF0IHVubG9jayBzb21lIHNjcmVlbi10aWxlc2V0IGNvbWJpbmF0aW9uc1xuZXhwb3J0IGVudW0gU2NyZWVuRml4IHtcbiAgVW5rbm93bixcbiAgLy8gU3VwcG9ydCBcImxvbmcgZ3Jhc3NcIiByaXZlciBzY3JlZW5zIG9uIHRoZSBncmFzcyB0aWxlc2V0IGJ5IGNvcHlpbmdcbiAgLy8gc29tZSB0aWxlcyBmcm9tIDUxLi41OSBpbnRvIDQwLi40Ny5cbiAgR3Jhc3NMb25nR3Jhc3MsXG4gIC8vIEluIGFkZGl0aW9uIHRvIGp1c3QgbWFraW5nIHRoZSBuZXcgbG9uZyBncmFzcyB0aWxlcywgd2UgbmVlZCB0b1xuICAvLyBhbHNvIHJlbWFwIHRoZSBleGlzdGluZyBvbmVzIGluIHNvbWUgc2l0dWF0aW9ucyB0byBwb2ludCB0byB0aGVcbiAgLy8gbmV3IG9uZXMsIGUuZy4gZm9yIHNjcmVlbnMgMWQsMjkgdG8gd29yayBvbiByaXZlciwgd2UgbmVlZCB0byB1c2VcbiAgLy8gdGhlIDR4IHRpbGVzIGluc3RlYWQgb2YgdGhlIDV4IG9uZXMgdG8gZml4IHRoZSBzdXJyb3VuZGluZy5cbiAgR3Jhc3NMb25nR3Jhc3NSZW1hcHBpbmcsXG4gIC8vIFJpdmVyIHRpbGVzZXRzIGRvbid0IGRlZmluZSAxMCwxMiwxNCwxNiwxNywxYSwxYiwxYywyMiwyMywyNCwyNSwyNixcbiAgLy8gd2hpY2ggYXJlIHVzZWQgZm9yIHRoZSBcInNob3J0IGdyYXNzXCIgaW4gdGhlIGdyYXNzIHRpbGVzZXQuICBUaGVzZVxuICAvLyB3b3VsZCBiZSBlYXN5IHRvIGNvcHkgZnJvbSBzb21ld2hlcmUgZWxzZSB0byBvcGVuIHVwIGEgZmV3IHNjcmVlbnMuXG4gIFJpdmVyU2hvcnRHcmFzcyxcbiAgLy8gQW5ncnkgc2VhIHVzZXMgMGEgb2RkbHkgZm9yIGEgc2ltcGxlIGRpYWdvbmFsIGJlYWNoL21vdW50YWluIHRpbGUsXG4gIC8vIHByZXZlbnRpbmcgcGFyaXR5IHdpdGggZ3Jhc3Mvcml2ZXIgY2F2ZSBlbnRyYW5jZSBib3R0b21zLiAgTW92ZSB0aGlzXG4gIC8vIHRpbGUgZWxzZXdoZXJlIChhZCkgYW5kIGZpeCB0aGUgZ3JhcGhpY3MvZWZmZWN0cy4gIE5vdGUgdGhhdCB0aGVcbiAgLy8gYWN0dWFsIGZpeCBpcyBub3QgZW50aXJlbHkgc2F0aXNmeWluZy5cbiAgU2VhQ2F2ZUVudHJhbmNlLFxuICAvLyBBbmdyeSBzZWEgZG9lcyBub3QgaGFuZGxlIHJvY2tzIGNvcnJlY3RseS4gIEZpeCA1YS4uNWUgZm9yIHBhcml0eVxuICAvLyB3aXRoIGdyYXNzL3JpdmVyIHRpbGVzZXRzLiAgVE9ETyAtIGltcGxlbWVudCB0aGUgZml4ICh3ZSBjb3VsZCBtb3ZlXG4gIC8vIHRoZSBleGlzdGluZyB0aWxlcywgdXNlZCBieSBtb3VudGFpbiBnYXRlcywgZWxzZXdoZXJlIHByZXR0eSBlYXNpbHksXG4gIC8vIG9yIGFsdGVybmF0aXZlbHkgbW92ZSBhbGwgdGhlIDVhLi41ZSBpbiBhbGwgb3RoZXIgdGlsZXNldHMgaW50b1xuICAvLyA4OSw4YSw5MCw5OSw5ZCxkMSxkMiB3aGljaCBhcmUgZnJlZSBpbiA4MCw5MCw5NCw5YykuXG4gIFNlYVJvY2tzLFxuICAvLyBBbGxvdyB0aGUgc2VhIHRvIHN1cHBvcnQgMzQsMzgsM2MuLjNmLCB1c2VkIGFzIG1hcnNoIGluIHJpdmVyIHRpbGVzZXQuXG4gIC8vIFRoZXNlIHdvdWQgbmVlZCB0byBtYXAgdG8gc2ltcGxlIG9jZWFuIHRpbGVzLiAgVE9ETyAtIGltcGxlbWVudC5cbiAgU2VhTWFyc2gsXG4gIC8vIFN1cHBvcnQgNngsN3ggdGlsZXMgKHRyZWVzKSBvbiBhbmdyeSBzZWEuICBQcm9iYWJseSBub3Qgd29ydGggaXQuXG4gIC8vIFdvdWxkIG5lZWQgdG8gbW92ZSAoZS5nLikgTGltZSBUcmVlIExha2UgdG8gYSB0b3RhbGx5IGRpZmZlcmVudCB0aWxlc2V0XG4gIC8vIHRvIGZyZWUgdXAgdGhlIG1ldGF0aWxlcy5cbiAgU2VhVHJlZXMsXG4gIC8vIEZpeGluZyBSaXZlclNob3J0R3Jhc3MgZm9yIGRlc2VydCBpcyBhIGxvdCBoYXJkZXIgYmVjYXVzZSBpdCB0b3VjaGVzIGFcbiAgLy8gYnVuY2ggb2YgdGlsZXMgdXNlZCBieSB0aGUgbW91bnRhaW5SaXZlciB0aWxlc2V0ICgxMCwxNCwyeCkuXG4gIERlc2VydFNob3J0R3Jhc3MsXG4gIC8vIEZpeGluZyBHcmFzc0xvbmdHcmFzcyBmb3IgZGVzZXJ0IGlzIGRpZmZpY3VsdCBiZWNhdXNlIHRoZSA0eCB0aWxlc1xuICAvLyBhcmUgdXNlZCBieSBtb3VudGFpblJpdmVyLlxuICBEZXNlcnRMb25nR3Jhc3MsXG4gIC8vIERlc2VydCBkb2Vzbid0IHN1cHBvcnQgdGhlIDN4IG1hcnNoIHRpbGVzIChjbGFzaCB3aXRoIG1vdW50YWluUml2ZXIpLlxuICAvLyBJdCdzIHByb2JhYmx5IG5vdCBmZWFzaWJsZSB0byBhZGQgc3VwcG9ydCAtIGl0IHdvdWxkIGFsbG93IHNjcmVlbiAzMyxcbiAgLy8gYnV0IHRoZXJlJ3MgYSBzaW1pbGFyIHNvdXRoLWVkZ2UtZXhpdCBzY3JlZW4gd2l0aCBEZXNlcnRUb3duRW50cmFuY2UuXG4gIERlc2VydE1hcnNoLFxuICAvLyBGaXggNWEuLjVlIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBncmFzcy9yaXZlci4gIDViIGlzIGFscmVhZHkgaW4gdXNlXG4gIC8vIG9uIHRoZSB0d28gb2FzaXMgc2NyZWVucywgc28gdGhhdCB0aWxlIGlzIG1vdmVkIHRvIDVmIHRvIG1ha2Ugc3BhY2UuXG4gIERlc2VydFJvY2tzLFxuICAvLyBBZGQgc29tZSBtaXNzaW5nIHRyZWUgdGlsZXMgaW4gNjMsNjgsNjksNmEsNmMsNmUsNmYsIHJlcXVpcmVkIGZvclxuICAvLyBwYXJpdHkgd2l0aCBzb21lIHJpdmVyIHNjcmVlbnMuXG4gIERlc2VydFRyZWVzLFxuICAvLyBTb3V0aC1mYWNpbmcgdG93biBlbnRyYW5jZXMgdXNlIDA3IGZvciB0aGUgdG9wIG9mIHRoZSB0b3duIHdhbGwuXG4gIC8vIFRoaXMgY291bGQgYmUgcmVwbGFjZWQgd2l0aCAoZS5nLiA4Yykgb3IgbWF5YmUgc29tZXRoaW5nIGJldHRlci5cbiAgRGVzZXJ0VG93bkVudHJhbmNlLFxuICAvLyBMYWJ5cmludGggcGFyYXBldHMgY2FuIGJlIGJsb2NrZWQvdW5ibG9ja2VkIHdpdGggYSBmbGFnLlxuICBMYWJ5cmludGhQYXJhcGV0cyxcbiAgLy8gQWRkcyBmbGFnZ2FibGUgZG9vcnMgdG8gdmFyaW91cyBzY3JlZW5zLlxuICBTd2FtcERvb3JzLFxuICAvLyBBZGRzIHNvbWUgZXh0cmEgc3Bpa2Ugc2NyZWVucy5cbiAgRXh0cmFTcGlrZXMsXG59XG5cbnR5cGUgUmVxcyA9IFJlY29yZDxhbnksIHtyZXF1aXJlcz86IFNjcmVlbkZpeFtdfT5cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmVxdWlyZTxUIGV4dGVuZHMgUmVxcz4ocmVxdWlyZW1lbnQ6IFNjcmVlbkZpeCwgcHJvcHM6IFQpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICBwcm9wc1trZXldLnJlcXVpcmVzID0gW3JlcXVpcmVtZW50XTtcbiAgfVxuICByZXR1cm4gcHJvcHM7XG59XG5cblxuICAvLyAvLyBBZGRzIGFiaWxpdHkgdG8gY2xvc2UgY2F2ZXMuXG4gIC8vIENsb3NlQ2F2ZXMsXG5cblxuLy8gLyoqIEFkZHMgYSAnQ2xvc2VDYXZlcycgcmVxdWlyZW1lbnQgb24gYWxsIHRoZSBwcm9wZXJ0aWVzLiAqL1xuLy8gZnVuY3Rpb24gY2xvc2VDYXZlczxUIGV4dGVuZHMgUmVjb3JkPGFueSwge3JlcXVpcmVzOiBTY3JlZW5GaXhbXX0+Pihwcm9wczogVCkge1xuLy8gICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuLy8gICAgIHByb3BzW2tleV0ucmVxdWlyZXMgPSBbU2NyZWVuRml4LkNsb3NlQ2F2ZXNdO1xuLy8gICB9XG4vLyAgIHJldHVybiBwcm9wcztcbi8vIH1cblxuXG4vLyBOT1RFOiBMaXN0aW5nIGV4cGxpY2l0IGZsYWdzIGRvZXNuJ3QgcXVpdGUgd29yay5cbi8vIGVudW0gRmxhZyB7XG4vLyAgIEFsd2F5cyA9IDB4MmYwLFxuLy8gICBXaW5kbWlsbCA9IDB4MmVlLFxuLy8gICBQcmlzb24gPSAweDJkOCxcbi8vICAgQ2FsbSA9IDB4MjgzLFxuLy8gICBTdHl4ID0gMHgyYjAsXG4vLyAgIERyYXlnb24xID0gMHgyOGYsXG4vLyAgIERyYXlnb24yID0gMHgyOGQsXG4vLyB9XG5cbi8vIGNvbnN0IEdSQVNTID0gMHg4MDtcbi8vIGNvbnN0IFRPV04gPSAweDg0O1xuLy8gY29uc3QgQ0FWRSA9IDB4ODg7XG4vLyBjb25zdCBQWVJBTUlEID0gMHg4Yztcbi8vIGNvbnN0IFJJVkVSID0gMHg5MDtcbi8vIGNvbnN0IE1PVU5UQUlOID0gMHg5NDtcbi8vIGNvbnN0IFNFQSA9IDB4OTQ7XG4vLyBjb25zdCBTSFJJTkUgPSAweDk4O1xuLy8gY29uc3QgREVTRVJUID0gMHg5Yztcbi8vIGNvbnN0IE1PVU5UQUlOX1JJVkVSID0gMHg5Yztcbi8vIGNvbnN0IFNXQU1QID0gMHhhMDtcbi8vIGNvbnN0IEhPVVNFID0gMHhhMDtcbi8vIGNvbnN0IEZPUlRSRVNTID0gMHhhNDtcbi8vIGNvbnN0IElDRV9DQVZFID0gMHhhODtcbi8vIGNvbnN0IFRPV0VSID0gMHhhYztcblxuZXhwb3J0IGZ1bmN0aW9uIGZpeFRpbGVzZXRzKHJvbTogUm9tKSB7XG4gIGNvbnN0IHtkZXNlcnQsIGdyYXNzLCBzZWF9ID0gcm9tLm1ldGF0aWxlc2V0cztcbiAgY29uc3QgJCA9IHJvbS5tZXRhc2NyZWVucztcblxuICAvLyBTZXZlcmFsIG9mIHRoZSBncmFzcy9yaXZlciBzY3JlZW5zIHdpdGggZm9yZXN0IHRpbGVzIGRvbid0IHdvcmsgb25cbiAgLy8gZGVzZXJ0LiAgRml4IHRoZW0gYnkgbWFraW5nIDVhLi42ZiB3b3JrIGNvcnJlY3RseS5cbiAgJC5yZWdpc3RlckZpeChTY3JlZW5GaXguRGVzZXJ0Um9ja3MpO1xuICBkZXNlcnQuZ2V0VGlsZSgweDVmKS5jb3B5RnJvbSgweDViKS5yZXBsYWNlSW4oJC5vYXNpc0NhdmUsICQub2FzaXNMYWtlKTtcblxuICBkZXNlcnQuZ2V0VGlsZSgweDVhKS5jb3B5RnJvbSgweDk4KS5zZXRUaWxlcyhbLCAsIDB4MWEsIDB4MThdKTtcbiAgZGVzZXJ0LmdldFRpbGUoMHg1YikuY29weUZyb20oMHg4MCkuc2V0VGlsZXMoWzB4MzQsIDB4MzIsICwgXSk7XG4gIGRlc2VydC5nZXRUaWxlKDB4NWMpLmNvcHlGcm9tKDB4ODApLnNldFRpbGVzKFssICwgMHgzNywgMHgzNV0pO1xuICBkZXNlcnQuZ2V0VGlsZSgweDVkKS5jb3B5RnJvbSgweDgwKS5zZXRUaWxlcyhbLCAweDM3LCAsIDB4MzRdKTtcbiAgZGVzZXJ0LmdldFRpbGUoMHg1ZSkuY29weUZyb20oMHg4MCkuc2V0VGlsZXMoWzB4MzUsICwgMHgzMiwgXSk7XG5cbiAgJC5yZWdpc3RlckZpeChTY3JlZW5GaXguRGVzZXJ0VHJlZXMpO1xuICBkZXNlcnQuZ2V0VGlsZSgweDYzKS5jb3B5RnJvbSgweDcxKTtcbiAgZGVzZXJ0LmdldFRpbGUoMHg2OCkuY29weUZyb20oMHg3MCk7XG4gIGRlc2VydC5nZXRUaWxlKDB4NjkpLmNvcHlGcm9tKDB4NjApO1xuICBkZXNlcnQuZ2V0VGlsZSgweDZhKS5jb3B5RnJvbSgweDY1KTtcbiAgZGVzZXJ0LmdldFRpbGUoMHg2YykuY29weUZyb20oMHg3MCk7XG4gIGRlc2VydC5nZXRUaWxlKDB4NmUpLmNvcHlGcm9tKDB4NzYpO1xuICBkZXNlcnQuZ2V0VGlsZSgweDZmKS5jb3B5RnJvbSgweDc4KTtcblxuICAvLyBMb25nIGdyYXNzIHNjcmVlbnMgZG9uJ3Qgd29yayBvbiBncmFzcyB0aWxlc2V0cyBiZWNhdXNlIG9mIGEgZmV3XG4gIC8vIGRpZmZlcmVudCB0aWxlcyAtIGNvcHkgdGhlbSB3aGVyZSB0aGV5IG5lZWQgdG8gZ28uXG4gICQucmVnaXN0ZXJGaXgoU2NyZWVuRml4LkdyYXNzTG9uZ0dyYXNzKTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQwKS5jb3B5RnJvbSgweDUxKTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQxKS5jb3B5RnJvbSgweDUyKTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQyKS5jb3B5RnJvbSgweDUzKTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQzKS5jb3B5RnJvbSgweDU0KTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQ0KS5jb3B5RnJvbSgweDU1KTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQ1KS5jb3B5RnJvbSgweDU2KTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQ2KS5jb3B5RnJvbSgweDU4KTtcbiAgZ3Jhc3MuZ2V0VGlsZSgweDQ3KS5jb3B5RnJvbSgweDU5KTtcblxuICAvLyBBbmdyeSBzZWEgdGlsZXNldCBkb2Vzbid0IHN1cHBvcnQgdGlsZSAwYSAodXNlZCBlbHNld2hlcmUgZm9yIHRoZVxuICAvLyBib3R0b20gdGlsZSBpbiBjYXZlIGVudHJhbmNlcykgYmVjYXVzZSBpdCdzIGFscmVhZHkgaW4gdXNlIChidXRcbiAgLy8gbm90IGFzIGFuIGFsdGVybmF0aXZlKS4gIE1vdmUgaXQgdG8gYWQgYW5kIGdldCAwYSBiYWNrLlxuICAkLnJlZ2lzdGVyRml4KFNjcmVlbkZpeC5TZWFDYXZlRW50cmFuY2UpO1xuICBzZWEuZ2V0VGlsZSgweGFkKS5jb3B5RnJvbSgweDBhKVxuICAgICAgLnJlcGxhY2VJbigkLmJlYWNoRXhpdE4sICQubGlnaHRob3VzZUVudHJhbmNlLCAkLm9jZWFuU2hyaW5lKTtcbiAgc2VhLmdldFRpbGUoMHgwYSkuY29weUZyb20oMHhhMik7IC8vIGRvbid0IGJvdGhlciBzZXR0aW5nIGFuIGFsdGVybmF0aXZlLlxuICAkLmJvdW5kYXJ5Tl9jYXZlLnNjcmVlbi5zZXQyZCgweDM5LCBbWzB4MDAsIDB4MDBdLCBbMHgwYSwgMHgwYV1dKTtcbiAgJC5ib3VuZGFyeVNFX2NhdmUuc2NyZWVuLnNldDJkKDB4NGEsIFtbMHgwMCwgMHgwMF0sIFsweDBhLCAweDBhXV0pO1xuICAgICAvLyAsIFsweGY4LCAweGY4XSwgW251bGwsIDB4ZmRdXSk7XG4gIC8vIHNlYS5zY3JlZW5zLmFkZCgkLmJvdW5kYXJ5V19jYXZlKTtcbiAgLy8gc2VhLnNjcmVlbnMuYWRkKCQuZGVzZXJ0Q2F2ZUVudHJhbmNlKTtcblxuICAvLyBzZWEuZ2V0VGlsZSgweDBhKS5jb3B5RnJvbSgweGEyKS5zZXRUaWxlcyhbLCwweDkxLDB4OTFdKS5zZXRBdHRycygwKTtcbiAgLy8gVGhpcyBkb2VzIG9wZW4gdXAgc2NyZWVuICRjZSAoZGVzZXJ0IGNhdmUgZW50cmFuY2UpIGZvciB1c2UgaW4gdGhlIHNlYSxcbiAgLy8gd2hpY2ggaXMgaW50ZXJlc3RpbmcgYmVjYXVzZSB3aGlybHBvb2xzIGNhbid0IGJlIGZsb3duIHBhc3QgLSB3ZSdkIG5lZWRcbiAgLy8gdG8gYWRkIGZsYWdzIHRvIGNsZWFyIHRoZSB3aGlybHBvb2xzLCBidXQgaXQgd291bGQgYmUgYSBjYXZlIHRoYXQnc1xuICAvLyBibG9ja2VkIG9uIGNhbG1pbmcgdGhlIHNlYS4uLlxuXG4gIC8vIFdlIGNvdWxkIGFkZCBhIG51bWJlciBvZiBzY3JlZW5zIHRvIHRoZSBzZWEgaWYgd2UgY291bGQgbW92ZSA1YS4uNWVcbiAgLy8gKHdoaWNoIGNvbGxpZGVzIHdpdGggbW91bnRhaW4gZ2F0ZXMpLiAgODksOGEsOTAsOTksOWQsZDEsZDIgYXJlIGZyZWVcbiAgLy8gaW4gODAgKGdyYXNzKSwgOTAgKHJpdmVyKSwgYW5kIDljIChkZXNlcnQpLiAgVGhlIG1haW4gcHJvYmxlbSBpcyB0aGF0XG4gIC8vIGF0IGxlYXN0IHRoZSBjYXZlIGVudHJhbmNlcyBkb24ndCBxdWl0ZSB3b3JrIGZvciB0aGVzZSAtIHRoZXkgZW5kIHVwXG4gIC8vIGluIHNoYWxsb3cgd2F0ZXIsIGFyZSBhIGxpdHRsZSB0b28gc2hvcnQsIGFuZCBpdCBzZWVtcyB0byBiZSBpbXBvc3NpYmxlXG4gIC8vIHRvIHBpY2sgYSBwYWxldHRlIHRoYXQgaXMgbGlnaHQgYmx1ZSBvbiBib3R0b20gYW5kIGJsYWNrIG9uIHRvcC5cbiAgLy9cbiAgLy8gT3RoZXIgb3B0aW9ucyBmb3IgdGhlIHNlYSBhcmUgMzQsMzgsM2MuLjNmIHdoaWNoIGFyZSBtYXJzaCB0aWxlcyBpblxuICAvLyByaXZlciAtIHdvdWxkIG9wZW4gdXAgc29tZSBuYXJyb3cgcGFzc2FnZXMgKDMzLCBcblxuXG4gIC8vICByb20ubWV0YXNjcmVlbnM7XG5cbiAgLy8gZm9yIChjb25zdCB4IG9mIE9iamVjdC52YWx1ZXMoVElMRVNFVF9GSVhFUykpIHtcbiAgLy8gICBjb25zdCBpZCA9IHguaWQ7XG4gIC8vICAgY29uc3QgdHMgPSByb20udGlsZXNldHNbaWRdO1xuICAvLyAgIGNvbnN0IHRlID0gdHMuZWZmZWN0cygpO1xuICAvLyAgIGZvciAoY29uc3QgdHN0ciBpbiB4KSB7XG4gIC8vICAgICBjb25zdCB0ID0gTnVtYmVyKHRzdHIpO1xuICAvLyAgICAgaWYgKGlzTmFOKHQpKSBjb250aW51ZTtcbiAgLy8gICAgIGNvbnN0IHk6IG51bWJlcnx7YmFzZTogbnVtYmVyfSA9ICh4IGFzIGFueSlbdF07XG4gIC8vICAgICBjb25zdCBiYXNlID0gdHlwZW9mIHkgPT09ICdudW1iZXInID8geSA6ICh5IGFzIGFueSkuYmFzZTtcbiAgLy8gICAgIGNvbnN0IHJlc3Q6IGFueSA9IHR5cGVvZiB5ID09PSAnbnVtYmVyJyA/IHt9IDogeTtcbiAgLy8gICAgIHRzLmF0dHJzW3RdID0gdHMuYXR0cnNbYmFzZV07XG4gIC8vICAgICB0ZS5lZmZlY3RzW3RdID0gdGUuZWZmZWN0c1tiYXNlXTtcbiAgLy8gICAgIFtyZXN0LnRsLCByZXN0LnRyLCByZXN0LmJsLCByZXN0LmJyXS5mb3JFYWNoKChtLCBpKSA9PiB7XG4gIC8vICAgICAgIHRzLnRpbGVzW2ldW3RdID0gdHMudGlsZXNbaV1bbSAhPSBudWxsID8gbSA6IGJhc2VdO1xuICAvLyAgICAgfSk7XG4gIC8vICAgICBpZiAocmVzdC5tb3ZlKSB7fVxuICAvLyAgICAgLy8gaWYgKHJlc3QudGlsZXMpIHtcbiAgLy8gICAgIC8vICAgcmVzdC50aWxlcy5mb3JFYWNoKChzOiBudW1iZXIsIGk6IG51bWJlcikgPT4gdm9pZCAodHMudGlsZXNbaV1bdF0gPSBzKSk7XG4gIC8vICAgICAvLyB9XG4gIC8vICAgfVxuICAvLyB9XG59XG5cblxuLy8gY29uc3QgVElMRVNFVF9GSVhFUyA9IHtcbi8vICAgZ3Jhc3M6IHtcbi8vICAgICBpZDogMHg4MCxcbi8vICAgICAweDQwOiAweDUxLFxuLy8gICAgIDB4NDE6IDB4NTIsXG4vLyAgICAgMHg0MjogMHg1Myxcbi8vICAgICAweDQzOiAweDU0LFxuLy8gICAgIDB4NDQ6IDB4NTUsXG4vLyAgICAgMHg0NTogMHg1Nixcbi8vICAgICAweDQ2OiAweDU4LFxuLy8gICAgIDB4NDc6IDB4NTksXG4vLyAgIH0sXG4vLyAgIGRlc2VydDoge1xuLy8gICAgIGlkOiAweDljLFxuLy8gICAgIDB4NWE6IHtiYXNlOiAweDk4LCBibDogMHg5NCwgYnI6IDB4OTR9LFxuLy8gICAgIDB4NWI6IHtiYXNlOiAweDgwLCB0bDogMHhmZCwgdHI6IDB4ZmN9LFxuLy8gICAgIDB4NWM6IHtiYXNlOiAweDgwLCBibDogMHhmZiwgYnI6IDB4ZmV9LFxuLy8gICAgIDB4NWQ6IHtiYXNlOiAweDgwLCB0cjogMHhmZiwgYnI6IDB4ZmR9LFxuLy8gICAgIDB4NWU6IHtiYXNlOiAweDgwLCB0bDogMHhmZSwgYmw6IDB4ZmN9LFxuLy8gICAgIDB4NjM6IDB4NzEsXG4vLyAgICAgMHg2ODogMHg3MCxcbi8vICAgICAweDY5OiAweDYwLFxuLy8gICAgIDB4NmE6IDB4NjUsXG4vLyAgICAgMHg2YzogMHg3MCxcbi8vICAgICAweDZlOiAweDc2LFxuLy8gICAgIDB4NmY6IDB4NzgsXG4vLyAgIH0sXG4vLyB9IGFzIGNvbnN0O1xuXG4vLyBjb25zdCBTQ1JFRU5fUkVNQVBTID0gW1xuLy8gICB7dGlsZXNldHM6IFsweDljXSwgc3JjOiAweDViLCBkZXN0OiAweDVmLCBzY3JlZW5zOiBbMHhjZl19LFxuLy8gXTtcbi8vIGNvbnN0IFtdID0gU0NSRUVOX1JFTUFQUztcblxuLy8gVE9ETyAtIGNvcHkgNWYgPC0gNWIgaW4gOWMsIHRoZW4gcmVtYXAgaW4gc2NyZWVuIGNmXG4vLyAgICAgIC0gYmV0dGVyIG5vdGF0aW9uP1xuLy8gQ29uc2lkZXIgZG9pbmcgdGhpcyBwcm9ncmFtbWF0aWNhbGx5LCB0aG91Z2ggd2UnZCB3YW50IHRvIHVzZVxuLy8gdGhlIF9hY3R1YWxfIHNjcmVlbi10aWxlc2V0IHVzYWdlcyByYXRoZXIgdGhhbiBkZWNsYXJlZCBvcHRpb25zXG5cbi8vIGNsYXNzIFgge1xuLy8gICByZWFkb25seSBtOiBNZXRhc2NyZWVucztcbi8vICAgY29uc3RydWN0b3IocjogUm9tKSB7XG4vLyAgICAgdGhpcy5tID0gbmV3IE1ldGFzY3JlZW5zKHIpO1xuLy8gICB9XG4vLyB9XG4iXX0=