import { Entity } from './entity.js';
import { MapScreen } from './mapscreen.js';
import { seq, tuple } from './util.js';
export class Tilesets {
    constructor(rom) {
        this.rom = rom;
        this.tilesets = [];
        for (let i = 0x80; i < 0xb0; i += 4) {
            this.tilesets.push((this[i] = new Tileset(rom, i)));
        }
    }
    [Symbol.iterator]() {
        return this.tilesets[Symbol.iterator]();
    }
}
export class Tileset extends Entity {
    constructor(rom, id) {
        super(rom, id);
        const map = id & 0x3f;
        this.tileBase = 0x10000 | map << 8;
        this.attrBase = 0x13000 | map << 4;
        this.alternatesBase = 0x13e00 | map << 3;
        this.tiles = seq(4, q => tuple(rom.prg, this.tileBase | q << 8, 256));
        this.attrs = seq(256, i => rom.prg[this.attrBase | i >> 2] >> ((i & 3) << 1) & 3);
        this.alternates = tuple(rom.prg, this.alternatesBase, 32);
    }
    get screens() {
        if (this.lazyScreens)
            return this.lazyScreens;
        return this.lazyScreens =
            seq(256, i => new MapScreen(this.rom.screens[i], this));
    }
    write(writer) {
        for (let i = 0; i < 0x100; i++) {
            if (i < 0x20) {
                writer.rom[this.alternatesBase + i] = this.alternates[i];
            }
            for (let j = 0; j < 4; j++) {
                writer.rom[this.tileBase + (j << 8) + i] = this.tiles[j][i];
            }
        }
        for (let i = 0; i < 0x40; i++) {
            const j = i << 2;
            writer.rom[this.attrBase + i] =
                (this.attrs[j] & 3) | (this.attrs[j + 1] & 3) << 2 |
                    (this.attrs[j + 2] & 3) << 4 | (this.attrs[j + 3] & 3) << 6;
        }
    }
    effects() {
        let index = (this.id >>> 2) & 0xf;
        if (this.id === 0xa8)
            index = 2;
        if (this.id === 0xac)
            index--;
        return this.rom.tileEffects[index];
    }
}
const NONE = 0;
const TRIM = 1;
const MAIN = 2;
export function paletteTypes(tileset, location) {
    switch (location) {
        case 0x1a:
            return [MAIN, MAIN, TRIM, (p0, p1, p2) => p0[3] === p1[3] && p1[3] === p2[3]];
        case 0x43:
            return [MAIN, TRIM, TRIM];
        case 0x57:
            return [MAIN, NONE, NONE];
        case 0x60:
            return [MAIN, MAIN, MAIN, (p0, _p1, p2) => p0[2] === p2[2]];
        case 0x64:
        case 0x68:
            return [MAIN, NONE, TRIM];
        case 0x7c:
            return [MAIN, TRIM, TRIM];
    }
    switch (tileset) {
        case 0x80:
        case 0x84:
            return [MAIN, MAIN, TRIM, (p0, p1) => p0[3] === p1[3]];
        case 0x88:
            return [MAIN, TRIM, NONE];
        case 0x8c: return [MAIN, TRIM, MAIN];
        case 0x90: return [MAIN, MAIN, MAIN];
        case 0x94: return [MAIN, TRIM, TRIM, (p0, p1) => p0[3] === p1[3]];
        case 0x98: return [TRIM, TRIM, TRIM];
        case 0x9c: return [MAIN, TRIM, MAIN];
        case 0xa0: return [TRIM, TRIM, TRIM];
        case 0xa4: return [MAIN, MAIN, TRIM];
        case 0xa8: return [MAIN, MAIN, TRIM];
        case 0xac: return [MAIN, TRIM, MAIN];
    }
    throw new Error(`unxpected: ${tileset}`);
}
const ALLOWED_PALETTES = new Map([
    ['path', [...r(0x00, 0x12), ...r(0x15, 0x1b), ...r(0x1e, 0x25),
            ...r(0x26, 0x2b), ...r(0x2c, 0x30), ...r(0x39, 0x3f),
            0x42, ...r(0x44, 0x48), ...r(0x4d, 0x59), ...r(0x80, 0x84),
            0x87, ...r(0x8b, 0x93)]],
    ['mountain', [0x01, ...r(0x03, 0x07), ...r(0x08, 0x0b), 0x0c, 0x0d, 0x0e,
            ...r(0x11, 0x18), 0x19, 0x1a, 0x1c, 0x1d, 0x1e, 0x20, 0x21,
            0x23, 0x27, 0x2a, 0x2b, 0x2f, 0x31, 0x33, 0x36, 0x37, 0x38,
            0x39, 0x3c, 0x42, 0x44, 0x46, 0x4b, 0x4c, 0x4f, 0x53, 0x58,
            ...r(0x80, 0x85), 0x87, 0x88, 0x8b, 0x8e]],
    ['trees', [0x01, 0x02, 0x04, 0x06, ...r(0x07, 0x0f), ...r(0x14, 0x18),
            0x1a, 0x1c, 0x1e, 0x20, 0x23, 0x27, 0x29, 0x2a, 0x2b, 0x2e,
            0x2f, 0x31, 0x33, 0x37, 0x38, 0x39, 0x3c, 0x3d, 0x43, 0x44,
            0x46, 0x49, 0x4a, 0x4b, 0x4f, 0x52, 0x57, 0x6e,
            ...r(0x80, 0x85), 0x87, 0x88, ...r(0x8b, 0x90)]],
]);
const TERRAIN_BY_PALETTE = new Map([
    [0x80, ['path', 'mountain', 'trees']],
    [0x84, ['mountain-path', 'brick', 'trees']],
    [0x88, ['cave wall/ground', 'cave bridge', '']],
    [0x8c, ['floor', 'fire', 'accept']],
    [0x90, ['trees', 'mountain', 'grass']],
    [0x94, ['water/ground', 'mountain', 'shallows']],
    [0x98, ['door', 'room', 'rocks']],
    [0x9c, ['mountain/ground', 'trees', 'desert']],
    [0xa0, ['ground', 'trees', 'some haze']],
    [0xa4, ['', '', '']],
    [0xa8, ['', '', '']],
    [0xac, ['', '', '']],
]);
function r(a, b) {
    return new Array(b - a).fill(0).map((_x, i) => i + a);
}
const [] = [TERRAIN_BY_PALETTE, ALLOWED_PALETTES];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGlsZXNldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9yb20vdGlsZXNldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBQ25DLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUV6QyxPQUFPLEVBQUMsR0FBRyxFQUFFLEtBQUssRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUlyQyxNQUFNLE9BQU8sUUFBUTtJQU1uQixZQUFxQixHQUFRO1FBQVIsUUFBRyxHQUFILEdBQUcsQ0FBSztRQUpyQixhQUFRLEdBQWMsRUFBRSxDQUFDO1FBSy9CLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFFLElBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzlEO0lBQ0gsQ0FBQztJQUVELENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUNmLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztJQUMxQyxDQUFDO0NBQ0Y7QUFHRCxNQUFNLE9BQU8sT0FBUSxTQUFRLE1BQU07SUFpQmpDLFlBQVksR0FBUSxFQUFFLEVBQVU7UUFFOUIsS0FBSyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNmLE1BQU0sR0FBRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sR0FBRyxHQUFHLElBQUksQ0FBQyxD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LE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzNCO0lBRUQsUUFBUSxPQUFPLEVBQUU7UUFDakIsS0FBSyxJQUFJLENBQUM7UUFBQyxLQUFLLElBQUk7WUFDbEIsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pELEtBQUssSUFBSTtZQUNQLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzVCLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsS0FBSyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyQyxLQUFLLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRSxLQUFLLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3JDLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsS0FBSyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyQyxLQUFLLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3JDLEtBQUssSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDckMsS0FBSyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNwQztJQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsY0FBYyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0FBQzNDLENBQUM7QUFZRCxNQUFNLGdCQUFnQixHQUFHLElBQUksR0FBRyxDQUE0QjtJQUMxRCxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztZQUNwRCxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7WUFDcEQsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztZQUMxRCxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7WUFDM0QsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7WUFDMUQsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSTtZQUMxRCxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO1lBQzFELEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN2RCxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztZQUMxRCxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJO1lBQzFELElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7WUFDMUQsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUk7WUFDOUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7Q0FFNUQsQ0FBQyxDQUFDO0FBY0gsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLEdBQUcsQ0FBNEM7SUFDNUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3JDLENBQUMsSUFBSSxFQUFFLENBQUMsZUFBZSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMzQyxDQUFDLElBQUksRUFBRSxDQUFDLGtCQUFrQixFQUFFLGFBQWEsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUvQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDbkMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBS3RDLENBQUMsSUFBSSxFQUFFLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUNoRCxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFakMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFHOUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ3hDLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwQixDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDcEIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0NBQ3JCLENBQUMsQ0FBQztBQUVILFNBQVMsQ0FBQyxDQUFDLENBQVMsRUFBRSxDQUFTO0lBQzdCLE9BQU8sSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDeEQsQ0FBQztBQUVELE1BQU0sRUFBRSxHQUFHLENBQUMsa0JBQWtCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RW50aXR5fSBmcm9tICcuL2VudGl0eS5qcyc7XG5pbXBvcnQge01hcFNjcmVlbn0gZnJvbSAnLi9tYXBzY3JlZW4uanMnO1xuaW1wb3J0IHtUaWxlRWZmZWN0c30gZnJvbSAnLi90aWxlZWZmZWN0cy5qcyc7XG5pbXBvcnQge3NlcSwgdHVwbGV9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQge1dyaXRlcn0gZnJvbSAnLi93cml0ZXIuanMnO1xuaW1wb3J0IHtSb219IGZyb20gJy4uL3JvbS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBUaWxlc2V0cyBpbXBsZW1lbnRzIEl0ZXJhYmxlPFRpbGVzZXQ+IHtcblxuICBwcml2YXRlIHRpbGVzZXRzOiBUaWxlc2V0W10gPSBbXTtcblxuICByZWFkb25seSBbaWQ6IG51bWJlcl06IFRpbGVzZXQ7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgcm9tOiBSb20pIHtcbiAgICBmb3IgKGxldCBpID0gMHg4MDsgaSA8IDB4YjA7IGkgKz0gNCkge1xuICAgICAgdGhpcy50aWxlc2V0cy5wdXNoKCgodGhpcyBhcyBhbnkpW2ldID0gbmV3IFRpbGVzZXQocm9tLCBpKSkpO1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhYmxlSXRlcmF0b3I8VGlsZXNldD4ge1xuICAgIHJldHVybiB0aGlzLnRpbGVzZXRzW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgfVxufVxuXG4vLyBNYXBwcGluZyBmcm9tIG1ldGF0aWxlIElEIHRvIHRpbGUgcXVhZHMgYW5kIHBhbGV0dGUgbnVtYmVyLlxuZXhwb3J0IGNsYXNzIFRpbGVzZXQgZXh0ZW5kcyBFbnRpdHkge1xuXG4gIC8vIFRPRE8gLSBwZXJtYW5lbnRseSBhdHRhY2ggYmVoYXZpb3JcbiAgLy8gU3RvcmUgbW9yZSBpbmZvcm1hdGlvbiwgc3VjaCBhcyBzY3JlZW4gdHlwZXMsIGVkZ2UgdHlwZXMsIGV0Yy5cbiAgLy8gTmFtZXMuLi5cbiAgLy8gRG9lcyBwYWxldHRlIGluZm8gYmVsb25nIGhlcmU/ICBNYXliZS4uLlxuXG4gIHRpbGVCYXNlOiBudW1iZXI7XG4gIGF0dHJCYXNlOiBudW1iZXI7XG4gIGFsdGVybmF0ZXNCYXNlOiBudW1iZXI7XG5cbiAgdGlsZXM6IG51bWJlcltdW107ICAgIC8vIHRpbGUgaW5mbywgb3V0ZXIgaXMgNCBxdWFkcmFudHMgKFRMLCBUUiwgQkwsIEJSKVxuICBhdHRyczogbnVtYmVyW107ICAgICAgLy8gcGFsZXR0ZSBpbmZvXG4gIGFsdGVybmF0ZXM6IG51bWJlcltdOyAvLyAzMi1lbGVtZW50IG1hcHBpbmcgZm9yIGZsYWctYmFzZWQgYWx0ZXJuYXRlc1xuXG4gIHByaXZhdGUgbGF6eVNjcmVlbnM/OiByZWFkb25seSBNYXBTY3JlZW5bXTtcblxuICBjb25zdHJ1Y3Rvcihyb206IFJvbSwgaWQ6IG51bWJlcikge1xuICAgIC8vIGBpZGAgaXMgTWFwRGF0YVsxXVszXSwgcmFuZ2VzIGZyb20gJDgwLi4kYmMgaW4gaW5jcmVtZW50cyBvZiA0LlxuICAgIHN1cGVyKHJvbSwgaWQpO1xuICAgIGNvbnN0IG1hcCA9IGlkICYgMHgzZjtcbiAgICB0aGlzLnRpbGVCYXNlID0gMHgxMDAwMCB8IG1hcCA8PCA4O1xuICAgIHRoaXMuYXR0ckJhc2UgPSAweDEzMDAwIHwgbWFwIDw8IDQ7XG4gICAgdGhpcy5hbHRlcm5hdGVzQmFzZSA9IDB4MTNlMDAgfCBtYXAgPDwgMztcbiAgICB0aGlzLnRpbGVzID0gc2VxKDQsIHEgPT4gdHVwbGUocm9tLnByZywgdGhpcy50aWxlQmFzZSB8IHEgPDwgOCAsIDI1NikpO1xuICAgIHRoaXMuYXR0cnMgPSBzZXEoMjU2LCBpID0+IHJvbS5wcmdbdGhpcy5hdHRyQmFzZSB8IGkgPj4gMl0gPj4gKChpICYgMykgPDwgMSkgJiAzKTtcbiAgICB0aGlzLmFsdGVybmF0ZXMgPSB0dXBsZShyb20ucHJnLCB0aGlzLmFsdGVybmF0ZXNCYXNlLCAzMik7XG4gIH1cblxuICAvLyBUT0RPIC0gaXMgdGhpcyB1bnVzZWQ/XG4gIGdldCBzY3JlZW5zKCk6IHJlYWRvbmx5IE1hcFNjcmVlbltdIHtcbiAgICBpZiAodGhpcy5sYXp5U2NyZWVucykgcmV0dXJuIHRoaXMubGF6eVNjcmVlbnM7XG4gICAgcmV0dXJuIHRoaXMubGF6eVNjcmVlbnMgPVxuICAgICAgICBzZXEoMjU2LCBpID0+IG5ldyBNYXBTY3JlZW4odGhpcy5yb20uc2NyZWVuc1tpXSwgdGhpcykpO1xuICB9XG5cbiAgd3JpdGUod3JpdGVyOiBXcml0ZXIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDB4MTAwOyBpKyspIHtcbiAgICAgIGlmIChpIDwgMHgyMCkge1xuICAgICAgICB3cml0ZXIucm9tW3RoaXMuYWx0ZXJuYXRlc0Jhc2UgKyBpXSA9IHRoaXMuYWx0ZXJuYXRlc1tpXTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHdyaXRlci5yb21bdGhpcy50aWxlQmFzZSArIChqIDw8IDgpICsgaV0gPSB0aGlzLnRpbGVzW2pdW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDB4NDA7IGkrKykge1xuICAgICAgY29uc3QgaiA9IGkgPDwgMjtcbiAgICAgIHdyaXRlci5yb21bdGhpcy5hdHRyQmFzZSArIGldID1cbiAgICAgICAgICAodGhpcy5hdHRyc1tqXSAmIDMpIHwgKHRoaXMuYXR0cnNbaiArIDFdICYgMykgPDwgMiB8XG4gICAgICAgICAgKHRoaXMuYXR0cnNbaiArIDJdICYgMykgPDwgNCB8ICh0aGlzLmF0dHJzW2ogKyAzXSAmIDMpIDw8IDY7XG4gICAgfVxuICB9XG5cbiAgZWZmZWN0cygpOiBUaWxlRWZmZWN0cyB7XG4gICAgLy8gTk9URTogaXQncyBwb3NzaWJsZSB0aGlzIGNvdWxkIGdldCBvdXQgb2Ygc3luYy4uLlxuICAgIGxldCBpbmRleCA9ICh0aGlzLmlkID4+PiAyKSAmIDB4ZjtcbiAgICBpZiAodGhpcy5pZCA9PT0gMHhhOCkgaW5kZXggPSAyO1xuICAgIGlmICh0aGlzLmlkID09PSAweGFjKSBpbmRleC0tO1xuICAgIHJldHVybiB0aGlzLnJvbS50aWxlRWZmZWN0c1tpbmRleF07XG4gIH1cblxuICAvLyBwYXNzYWdlKHRpbGVJZDogbnVtYmVyLCB0aWxlRWZmZWN0cyA9IHRoaXMuZWZmZWN0cygpKTogVGVycmFpbiB7XG4gIC8vICAgY29uc3QgZWZmZWN0cyA9IHRpbGVFZmZlY3RzLmVmZmVjdHM7XG4gIC8vICAgLy8gTm90ZTogZm9yIHRoaXMgcHVycG9zZSwgcGl0cyBjYW4gYmUgdHJhdmVyc2VkIGJlY2F1c2UgdGhlcmUgc2hvdWxkIGFsd2F5c1xuICAvLyAgIC8vIGJlIGEgcGxhdGZvcm0gYWNyb3NzIGl0LiAgVGhlIGRvbHBoaW4gY291bnRzIGFzIGZseWluZywgYW5kIHdlIGhhdmVcbiAgLy8gICAvLyBzcGVjaWFsIGxvZ2ljIHRvIHRyYW5zbGF0ZSB0aGF0LlxuICAvLyAgIGNvbnN0IGJpdHMgPSBlZmZlY3RzW3RpbGVJZF0gJiAweDI2O1xuICAvLyAgIGlmICghYml0cykgcmV0dXJuIFBhc3NhZ2UuQUxXQVlTO1xuICAvLyAgIC8vIE5vdGU6IHRoaXMgd2lsbCBsb3NlIHRoZSBmbGlnaHQgYml0IGZyb20gYW5ncnkgc2VhIHdhdGVyZmFsbCwgYnV0XG4gIC8vICAgLy8gdGhhdCdzIHByb2JhYmx5IGZpbmUuXG4gIC8vICAgaWYgKGJpdHMgJiAweDIwKSByZXR1cm4gUGFzc2FnZS5TTE9QRTtcbiAgLy8gICAvLyBUT0RPIC0gcmVxdWlyZSB0aGUgMHgwOCBiaXQgYmVmb3JlIGNoZWNraW5nIGFsdGVybmF0ZT9cbiAgLy8gICBpZiAodGlsZUlkIDwgMHgyMCAmJiB0aGlzLmFsdGVybmF0ZXNbdGlsZUlkXSAhPT0gdGlsZUlkKSB7XG4gIC8vICAgICBjb25zdCBhbHRCaXRzID0gZWZmZWN0c1t0aGlzLmFsdGVybmF0ZXNbdGlsZUlkXV0gJiAweDI2O1xuICAvLyAgICAgaWYgKCFhbHRCaXRzKSByZXR1cm4gUGFzc2FnZS5GTEFHO1xuICAvLyAgIH1cbiAgLy8gICBpZiAoIShiaXRzICYgMHgwNCkpIHJldHVybiBQYXNzYWdlLkZMWTtcbiAgLy8gICByZXR1cm4gUGFzc2FnZS5ORVZFUjtcbiAgLy8gfVxufVxuXG4vLyBleHBvcnQgY2xhc3MgTWV0YXRpbGVzZXQge1xuLy8gICAvLyBUT0RPIC0gZXh0cmEgc3R1ZmYsIGluZm8gYWJvdXQgY2FwYWJpbGl0aWVzLCBldGM/XG5cbi8vICAgY29uc3RydWN0b3IocmVhZG9ubHkgdGlsZXNldDogVGlsZXNldCwgcmVhZG9ubHkgZGF0YTogTWV0YXRpbGVzZXREYXRhKSB7fVxuXG4vLyAgIGdldFRpbGUoaWQ6IG51bWJlcik6IE1ldGF0aWxlIHtcbi8vICAgICByZXR1cm4gbmV3IE1ldGF0aWxlKHRoaXMudGlsZXNldCwgaWQpO1xuLy8gICB9XG5cbi8vIH1cblxuLy8gZXhwb3J0IGNsYXNzIE1ldGF0aWxlIHtcbi8vICAgcHJpdmF0ZSBjb3BpZWRGcm9tID0gLTE7XG4vLyAgIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHRpbGVzZXQ6IFRpbGVzZXQsIHJlYWRvbmx5IGlkOiBudW1iZXIpIHt9XG5cbi8vICAgLy8gZ2V0IHRvcExlZnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMudGlsZXNldC50aWxlc2V0LnRpbGVzWzBdW3RoaXMuaWRdOyB9XG4vLyAgIC8vIHNldCB0b3BMZWZ0KHg6IG51bWJlcikgeyB0aGlzLnRpbGVzZXQudGlsZXNldC50aWxlc1swXVt0aGlzLmlkXSA9IHg7IH1cblxuLy8gICAvLyBnZXQgdG9wUmlnaHQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMudGlsZXNldC50aWxlc2V0LnRpbGVzWzFdW3RoaXMuaWRdOyB9XG4vLyAgIC8vIHNldCB0b3BSaWdodCh4OiBudW1iZXIpIHsgdGhpcy50aWxlc2V0LnRpbGVzZXQudGlsZXNbMV1bdGhpcy5pZF0gPSB4OyB9XG5cbi8vICAgLy8gZ2V0IGJvdHRvbUxlZnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMudGlsZXNldC50aWxlc2V0LnRpbGVzWzJdW3RoaXMuaWRdOyB9XG4vLyAgIC8vIHNldCBib3R0b21MZWZ0KHg6IG51bWJlcikgeyB0aGlzLnRpbGVzZXQudGlsZXNldC50aWxlc1syXVt0aGlzLmlkXSA9IHg7IH1cblxuLy8gICAvLyBnZXQgYm90dG9tUmlnaHQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMudGlsZXNldC50aWxlc2V0LnRpbGVzWzNdW3RoaXMuaWRdOyB9XG4vLyAgIC8vIHNldCBib3R0b21SaWdodCh4OiBudW1iZXIpIHsgdGhpcy50aWxlc2V0LnRpbGVzZXQudGlsZXNbM11bdGhpcy5pZF0gPSB4OyB9XG5cbi8vICAgLy8gVE9ETyAtIGdldHRlcnM/XG5cbi8vICAgZ2V0IHRpbGVzKCk6IHJlYWRvbmx5IG51bWJlcltdIHtcbi8vICAgICByZXR1cm4gWzAsIDEsIDIsIDNdLm1hcChpID0+IHRoaXMudGlsZXNldC50aWxlc1tpXVt0aGlzLmlkXSk7XG4vLyAgIH1cbi8vICAgc2V0VGlsZXModGlsZXM6IFJlYWRvbmx5QXJyYXk8bnVtYmVyfHVuZGVmaW5lZD4pOiB0aGlzIHtcbi8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuLy8gICAgICAgY29uc3QgdGlsZSA9IHRpbGVzW2ldO1xuLy8gICAgICAgaWYgKHRpbGUgIT0gbnVsbCkgdGhpcy50aWxlc2V0LnRpbGVzW2ldW3RoaXMuaWRdID0gdGlsZTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIHRoaXM7XG4vLyAgIH1cblxuLy8gICBnZXQgYWx0ZXJuYXRpdmUoKTogbnVtYmVyfG51bGwge1xuLy8gICAgIGNvbnN0IGFsdCA9IHRoaXMuaWQgPCAweDIwID8gdGhpcy50aWxlc2V0LmFsdGVybmF0ZXNbdGhpcy5pZF0gOiB0aGlzLmlkO1xuLy8gICAgIHJldHVybiBhbHQgIT09IHRoaXMuaWQgPyBhbHQgOiBudWxsO1xuLy8gICB9XG4vLyAgIHNldEFsdGVybmF0aXZlKHRpbGU6IG51bWJlcnxudWxsKTogdGhpcyB7XG4vLyAgICAgaWYgKHRoaXMuaWQgPj0gMHgyMCkgcmV0dXJuIHRoaXM7XG4vLyAgICAgdGhpcy50aWxlc2V0LmFsdGVybmF0ZXNbdGhpcy5pZF0gPSB0aWxlICE9IG51bGwgPyB0aWxlIDogdGhpcy5pZDtcbi8vICAgICByZXR1cm4gdGhpcztcbi8vICAgfVxuXG4vLyAgIGdldCBhdHRycygpOiBudW1iZXIge1xuLy8gICAgIHJldHVybiB0aGlzLnRpbGVzZXQuYXR0cnNbdGhpcy5pZF07XG4vLyAgIH1cbi8vICAgc2V0QXR0cnMoYXR0cnM6IG51bWJlcik6IHRoaXMge1xuLy8gICAgIHRoaXMudGlsZXNldC5hdHRyc1t0aGlzLmlkXSA9IGF0dHJzO1xuLy8gICAgIHJldHVybiB0aGlzO1xuLy8gICB9XG5cbi8vICAgZ2V0IGVmZmVjdHMoKTogbnVtYmVyIHtcbi8vICAgICByZXR1cm4gdGhpcy50aWxlc2V0LmVmZmVjdHMoKS5lZmZlY3RzW3RoaXMuaWRdO1xuLy8gICB9XG4vLyAgIHNldEVmZmVjdHMoZWZmZWN0czogbnVtYmVyKTogdGhpcyB7XG4vLyAgICAgdGhpcy50aWxlc2V0LmVmZmVjdHMoKS5lZmZlY3RzW3RoaXMuaWRdID0gZWZmZWN0cztcbi8vICAgICByZXR1cm4gdGhpcztcbi8vICAgfVxuXG4vLyAgIGNvcHlGcm9tKG90aGVyOiBudW1iZXIpOiB0aGlzIHtcbi8vICAgICBjb25zdCB0aGF0ID0gbmV3IE1ldGF0aWxlKHRoaXMudGlsZXNldCwgb3RoZXIpO1xuLy8gICAgIHRoaXMuY29waWVkRnJvbSA9IG90aGVyO1xuLy8gICAgIHRoaXMuc2V0VGlsZXModGhhdC50aWxlcyk7XG4vLyAgICAgaWYgKCh0aGlzLmlkIHwgdGhhdC5pZCkgPCAweDIwKSB7XG4vLyAgICAgICB0aGlzLnNldEFsdGVybmF0aXZlKHRoYXQuYWx0ZXJuYXRpdmUpO1xuLy8gICAgIH1cbi8vICAgICB0aGlzLnNldEF0dHJzKHRoYXQuYXR0cnMpO1xuLy8gICAgIHRoaXMuc2V0RWZmZWN0cyh0aGF0LmVmZmVjdHMpO1xuLy8gICAgIHJldHVybiB0aGlzO1xuLy8gICB9XG5cbi8vICAgcmVwbGFjZUluKC4uLnNjcmVlbnM6IE1ldGFzY3JlZW5bXSk6IHRoaXMge1xuLy8gICAgIGlmICh0aGlzLmNvcGllZEZyb20gPCAwKSB0aHJvdyBuZXcgRXJyb3IoYE11c3QgY29weUZyb20gZmlyc3QuYCk7XG4vLyAgICAgZm9yIChjb25zdCBzY3JlZW4gb2Ygc2NyZWVucykge1xuLy8gICAgICAgc2NyZWVuLnJlcGxhY2UodGhpcy5jb3BpZWRGcm9tLCB0aGlzLmlkKTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIHRoaXM7XG4vLyAgIH1cbi8vIH1cblxuLy8gaW50ZXJmYWNlIE1ldGF0aWxlc2V0RGF0YSB7XG4vLyAgIGlkOiBudW1iZXI7XG4vLyAgIHBhdHRlcm5zPzogcmVhZG9ubHkgW251bWJlciwgbnVtYmVyXTtcbi8vICAgYW5pbWF0ZWQ/OiByZWFkb25seSBudW1iZXJbXTtcbi8vIH1cblxuLy8gLy8gVE9ETyAtIFRpbGVzZXRzIGNsYXNzIGV4dGVuZGluZyBTcGFyc2VBcnJheTxUaWxlc2V0PlxuLy8gLy8gICAgICAtIHNvbWUgVGlsZXNldCBhcmUgTXVsdGlUaWxlc2V0IHdpdGggc2VwYXJhdGUgc2VtYW50aWMgdGlsZXNldHMgaW5zaWRlP1xuLy8gY29uc3QgVElMRVNFVFMgPSB7XG4vLyAgIGdyYXNzOiB7IC8vIGhhcyB2YXJpb3VzIGZlYXR1cmVzOiB3aW5kbWlsbCwgZm9ydHJlc3MsIGZsb3dlcnNcbi8vICAgICBpZDogMHg4MCxcbi8vICAgICAvLyB0aWxlczogeyAvLyB9IGFzIEZpbHRlcjx7Z3Jhc3M6dHJ1ZX0+LFxuLy8gICAgIC8vICAgbW91bnRhaW46IDB4MDAsXG4vLyAgICAgLy8gfSxcbi8vICAgICBwYXR0ZXJuczogWzB4MDAsIDB4MGNdLFxuLy8gICB9LFxuLy8gICB0b3duOiB7XG4vLyAgICAgaWQ6IDB4ODQsXG4vLyAgIH0sXG4vLyAgIGNhdmU6IHsgLy8gc3VwcG9ydHMgd2F0ZXIsIGJ1dCBoYXMgdWdseSB3YWxsXG4vLyAgICAgaWQ6IDB4ODgsXG4vLyAgIH0sXG4vLyAgIHB5cmFtaWQ6IHtcbi8vICAgICBpZDogMHg4Yyxcbi8vICAgfSxcbi8vICAgcml2ZXI6IHtcbi8vICAgICBpZDogMHg5MCxcbi8vICAgICBwYXR0ZXJuczogWzB4MTQsIDB4MDBdLCAvLyBUT0RPIC0gYW5pbWF0ZWQgY2xvYmJlcnMgMm5kIGVudHJ5IGFueXdheVxuLy8gICAgIGFuaW1hdGVkOiBbMCwgMV0sXG4vLyAgIH0sXG4vLyAgIHNlYToge1xuLy8gICAgIGlkOiAweDk0LCAvLyBwcmltYXJpbHkgdGlsZXMgODAuLmZmXG4vLyAgIH0sXG4vLyAgIG1vdW50YWluOiB7IC8vIHBhcnRzIHdpdGggXCJmZWF0dXJlc1wiIGxpa2UgZW50cmFuY3dheXMgYW5kIGhvdXNlc1xuLy8gICAgIGlkOiAweDk0LCAvLyBwcmltYXJpbHkgdGlsZXMgMC4uNWZcbi8vICAgfSxcbi8vICAgc2hyaW5lOiB7XG4vLyAgICAgaWQ6IDB4OTgsIC8vIE5PVEU6IGZyZWUgc3BhY2UgZnJvbSA5MC4uZmZcbi8vICAgfSxcbi8vICAgZGVzZXJ0OiB7XG4vLyAgICAgaWQ6IDB4OWMsIC8vIHByaW1hcmlseSB0aWxlcyA1MC4uZmZcbi8vICAgfSxcbi8vICAgbW91bnRhaW5SaXZlcjogeyAvLyBnaXZlcyB1cCBvdGhlciBmZWF0dXJlcyB0byBhbGxvdyBjcm9zc2FibGUgcml2ZXJzXG4vLyAgICAgaWQ6IDB4OWMsIC8vIHByaW1hcmlseSB0aWxlcyAwMC4uNGZcbi8vICAgfSxcbi8vICAgc3dhbXA6IHtcbi8vICAgICBpZDogMHgxYTAsIC8vIHRpbGVzIGEwLi5mZlxuLy8gICB9LFxuLy8gICBob3VzZToge1xuLy8gICAgIGlkOiAweGEwLCAvLyB0aWxlcyAwMC4uOWZcbi8vICAgfSxcbi8vICAgZm9ydHJlc3M6IHtcbi8vICAgICBpZDogMHhhNCxcbi8vICAgfSxcbi8vICAgZ29hMToge1xuLy8gICAgIGlkOiAweGE0LFxuLy8gICB9LFxuLy8gICBpY2VDYXZlOiB7IC8vIG5vIHdhdGVyLCBidXQgcHJldHRpZXIgaWNlIHdhbGwgLSBzYW1lIGJlaGF2aW9yIGFzIDg4XG4vLyAgICAgaWQ6IDB4YTgsXG4vLyAgIH0sXG4vLyAgIHRvd2VyOiB7XG4vLyAgICAgaWQ6IDB4YWMsXG4vLyAgIH0sXG4vLyB9IGFzIGNvbnN0O1xuLy8gY29uc3QgaW5kZXhlZFRpbGVzZXRzOiB7W25hbWU6IHN0cmluZ106IE1ldGF0aWxlc2V0RGF0YX0gPSBUSUxFU0VUUyBhcyBhbnk7XG5cbi8vIGFzc2VydFR5cGU8e1tuYW1lIGluIGtleW9mIHR5cGVvZiBUSUxFU0VUU106IE1ldGF0aWxlc2V0RGF0YX0+KFRJTEVTRVRTKTtcblxuLy8gTk9URTogVGhpcyBjb3VsZCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgdGhlIGFib3ZlIG5hbWVzIGludG9cbi8vIHByb3BlcnRpZXMgb24gZXhhY3RseSB0aGUgY29ycmVjdCB0aWxlc2V0cywgdGhvdWdoIHdlIGxpa2VseVxuLy8gd2FudCB0byBjaGFuZ2UgdGhlbSBkeW5hbWljYWxseSwgc28gaXQncyBtYXliZSBsZXNzIHJlbGV2YW50P1xuLy8gICAtIHRob3VnaCB3ZSBzaG91bGQgc2V0IHRoZW0gYWxsIHVwZnJvbnQsIGluY2x1ZGluZyB1bmF2YWlsYWJsZSBvbmVzLi4uXG4vLyBjb25zdCBYID0ge1xuLy8gICBhOiB7XG4vLyAgICAgZ3Jhc3M6IHRydWUsXG4vLyAgIH0sXG4vLyAgIGI6IHtcbi8vICAgICB0b3dlcjogdHJ1ZSxcbi8vICAgfSxcbi8vIH0gYXMgY29uc3Q7XG4vLyB0eXBlIFhUeXBlID0gdHlwZW9mIFg7XG4vLyB0eXBlIEZpbHRlcjE8VD4gPSB7W0sgaW4ga2V5b2YgWFR5cGVdOiBYVHlwZVtLXVsndGlsZXNldHMnXSBleHRlbmRzIFQgPyBudW1iZXIgOiBuZXZlcn07XG4vLyB0eXBlIEZpbHRlcjI8VD4gPSAoe1tQIGluIGtleW9mIFRdOiBUW1BdIGV4dGVuZHMgbmV2ZXIgPyBuZXZlciA6IFB9KVtrZXlvZiBUXTsgXG4vLyB0eXBlIEZpbHRlcjxUPiA9IFBpY2s8RmlsdGVyMTxUPiwgRmlsdGVyMjxGaWx0ZXIxPFQ+Pj47XG4vLyBpbnRlcmZhY2UgUyB7XG4vLyAgIHRvd2VyOiBGaWx0ZXI8e3Rvd2VyOiB0cnVlfT47XG4vLyAgIGdyYXNzOiBGaWx0ZXI8e2dyYXNzOiB0cnVlfT47XG4vLyB9XG4vLyB0eXBlIEZpbHRlcjxUPiA9IHtbSyBpbiB0eXBlb2YgWF06ICh0eXBlb2YgWClbS10gZXh0ZW5kcyBUID8gbnVtYmVyIDogbmV2ZXI7XG4vLyBpbnRlcmZhY2UgUyB7XG4vLyAgIHRvd2VyOiBGaWx0ZXI8e3Rvd2VyOiB0cnVlfT47XG4vLyAgIGdyYXNzOiBGaWx0ZXI8e2dyYXNzOiB0cnVlfT47XG4vLyB9XG5cblxuLy8gZXhwb3J0IGVudW0gUGFzc2FnZSB7XG4vLyAgIEFMV0FZUyA9IDAsXG4vLyAgIFNMT1BFID0gMSxcbi8vICAgRkxBRyA9IDIsXG4vLyAgIEZMWSA9IDMsXG4vLyAgIE5FVkVSID0gNCxcbi8vIH1cblxuLy8gaW50ZXJmYWNlIFBhbGV0dGVIYW5kbGVyIHtcbi8vICAgZG9ub3I6IHN0cmluZ1tdO1xuLy8gICByZWNlaXZlcjogc3RyaW5nW107XG4vLyB9XG5cbi8vIGNvbnN0IE1BSU4gPSB7ZG9ub3I6IFsnbWFpbicsICd0cmltJ10sIHJlY2VpdmVyOiBbJ21haW4nXX07XG4vLyBjb25zdCBUUklNID0ge2Rvbm9yOiBbJ3RyaW0nXSwgcmVjZWl2ZXI6IFsndHJpbSddfTtcbi8vIGNvbnN0IE5PTkUgPSB7ZG9ub3I6IFtdLCByZWNlaXZlcjogW119O1xuY29uc3QgTk9ORSA9IDA7XG5jb25zdCBUUklNID0gMTtcbmNvbnN0IE1BSU4gPSAyO1xudHlwZSBQYWxldHRlSGFuZGxlciA9IG51bWJlcjtcblxudHlwZSBQYWxldHRlID0gcmVhZG9ubHkgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG50eXBlIFBhbGV0dGVWYWxpZGF0b3IgPSAocDA6IFBhbGV0dGUsIHAxOiBQYWxldHRlLCBwMjogUGFsZXR0ZSkgPT4gYm9vbGVhbjtcblxudHlwZSBQYWxldHRlU3BlYyA9IHJlYWRvbmx5IFtQYWxldHRlSGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFsZXR0ZUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhbGV0dGVIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYWxldHRlVmFsaWRhdG9yP107XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWxldHRlVHlwZXModGlsZXNldDogbnVtYmVyLCBsb2NhdGlvbjogbnVtYmVyKTogUGFsZXR0ZVNwZWMge1xuICAvLyBQdWxsIG91dCBhIGZldyBzcGVjaWFsLWNhc2UgbG9jYXRpb25zLlxuICAvLyBOT1RFOiB1bmRlcmdyb3VuZCBjYXZlcm4gJDY0IGhhcyBtaWRkbGUgZm9yIHdhdGVyLCBtdXN0IGJlICQxZlxuICBzd2l0Y2ggKGxvY2F0aW9uKSB7XG4gIGNhc2UgMHgxYTogLy8gdGlsZXNldCBhMCBzd2FtcFxuICAgIHJldHVybiBbTUFJTiwgTUFJTiwgVFJJTSwgKHAwLCBwMSwgcDIpID0+IHAwWzNdID09PSBwMVszXSAmJiBwMVszXSA9PT0gcDJbM11dO1xuICBjYXNlIDB4NDM6IC8vIHRpbGVzZXQgOTRcbiAgICByZXR1cm4gW01BSU4sIFRSSU0sIFRSSU1dO1xuICBjYXNlIDB4NTc6IC8vIHRpbGVldCA4OFxuICAgIC8vIGRvbid0IGluY2x1ZGUgdGhlIHdhdGVyIGluIHRoZSBub3JtYWwgcG9vbC4uLlxuICAgIHJldHVybiBbTUFJTiwgTk9ORSwgTk9ORV07XG4gIGNhc2UgMHg2MDogLy8gdGlsZXNldCA5NFxuICAgIHJldHVybiBbTUFJTiwgTUFJTiwgTUFJTiwgKHAwLCBfcDEsIHAyKSA9PiBwMFsyXSA9PT0gcDJbMl1dO1xuICBjYXNlIDB4NjQ6IGNhc2UgMHg2ODogLy8gdGlsZXNldCA4OFxuICAgIC8vIHNvbWUgd2F0ZXIgaW4gdGhpcyBjYXZlIHVzZXMgdGhlIEhVRCdzIHBhbGV0dGUgc28gZG9uJ3Qgc2h1ZmZsZSBpdFxuICAgIHJldHVybiBbTUFJTiwgTk9ORSwgVFJJTV07XG4gIGNhc2UgMHg3YzogLy8gdGlsZXNldCA5Y1xuICAgIHJldHVybiBbTUFJTiwgVFJJTSwgVFJJTV07XG4gIH1cblxuICBzd2l0Y2ggKHRpbGVzZXQpIHtcbiAgY2FzZSAweDgwOiBjYXNlIDB4ODQ6XG4gICAgcmV0dXJuIFtNQUlOLCBNQUlOLCBUUklNLCAocDAsIHAxKSA9PiBwMFszXSA9PT0gcDFbM11dO1xuICBjYXNlIDB4ODg6XG4gICAgcmV0dXJuIFtNQUlOLCBUUklNLCBOT05FXTtcbiAgY2FzZSAweDhjOiByZXR1cm4gW01BSU4sIFRSSU0sIE1BSU5dO1xuICBjYXNlIDB4OTA6IHJldHVybiBbTUFJTiwgTUFJTiwgTUFJTl07XG4gIGNhc2UgMHg5NDogcmV0dXJuIFtNQUlOLCBUUklNLCBUUklNLCAocDAsIHAxKSA9PiBwMFszXSA9PT0gcDFbM11dO1xuICBjYXNlIDB4OTg6IHJldHVybiBbVFJJTSwgVFJJTSwgVFJJTV07IC8vIFRPRE8gLSB2YWxpZGF0ZT8hP1xuICBjYXNlIDB4OWM6IHJldHVybiBbTUFJTiwgVFJJTSwgTUFJTl07XG4gIGNhc2UgMHhhMDogcmV0dXJuIFtUUklNLCBUUklNLCBUUklNXTtcbiAgY2FzZSAweGE0OiByZXR1cm4gW01BSU4sIE1BSU4sIFRSSU1dO1xuICBjYXNlIDB4YTg6IHJldHVybiBbTUFJTiwgTUFJTiwgVFJJTV07XG4gIGNhc2UgMHhhYzogcmV0dXJuIFtNQUlOLCBUUklNLCBNQUlOXTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYHVueHBlY3RlZDogJHt0aWxlc2V0fWApO1xufVxuLy8gICBbMHg5OCwgWydkb29yJywgJ3Jvb20nLCAncm9ja3MnXV0sIC8vIHNocmluZVxuLy8gICAvLyBOT1RFOiBoeWRyYSB2ZXJ5IGRpZmY6IChyb2NrL2dyb3VuZCwgYnJpZGdlLCByaXZlcilcbi8vICAgWzB4OWMsIFsnbW91bnRhaW4vZ3JvdW5kJywgJ3RyZWVzJywgJ2Rlc2VydCddXSxcbi8vICAgLy8gTk9URTogdGhpcyBpcyBzd2FtcCwgYnV0IGFsc28gaW5jbHVkZXMgYWxsIGluZG9vcnNcbi8vICAgLy8gYWxsIDMgbmVlZCBzYW1lIGJnIGZvciBzd2FtcFxuLy8gICBbMHhhMCwgWydncm91bmQnLCAndHJlZXMnLCAnc29tZSBoYXplJ11dLFxuLy8gICBbMHhhNCwgWycnLCAnJywgJyddXSwgLy8gZm9ydHJlc3Ncbi8vICAgWzB4YTgsIFsnJywgJycsICcnXV0sIC8vIGljZSBjYXZlXG4vLyAgIFsweGFjLCBbJycsICcnLCAnJ11dLCAvLyBlbmRnYW1lXG4vLyBdKTtcblxuY29uc3QgQUxMT1dFRF9QQUxFVFRFUyA9IG5ldyBNYXA8c3RyaW5nLCByZWFkb25seSBudW1iZXJbXT4oW1xuICBbJ3BhdGgnLCBbLi4ucigweDAwLCAweDEyKSwgLi4ucigweDE1LCAweDFiKSwgLi4ucigweDFlLCAweDI1KSxcbiAgICAgICAgICAgIC4uLnIoMHgyNiwgMHgyYiksIC4uLnIoMHgyYywgMHgzMCksIC4uLnIoMHgzOSwgMHgzZiksXG4gICAgICAgICAgICAweDQyLCAuLi5yKDB4NDQsIDB4NDgpLCAuLi5yKDB4NGQsIDB4NTkpLCAuLi5yKDB4ODAsIDB4ODQpLFxuICAgICAgICAgICAgMHg4NywgLi4ucigweDhiLCAweDkzKV1dLFxuICBbJ21vdW50YWluJywgWzB4MDEsIC4uLnIoMHgwMywgMHgwNyksIC4uLnIoMHgwOCwgMHgwYiksIDB4MGMsIDB4MGQsIDB4MGUsXG4gICAgICAgICAgICAgICAuLi5yKDB4MTEsIDB4MTgpLCAweDE5LCAweDFhLCAweDFjLCAweDFkLCAweDFlLCAweDIwLCAweDIxLFxuICAgICAgICAgICAgICAgMHgyMywgMHgyNywgMHgyYSwgMHgyYiwgMHgyZiwgMHgzMSwgMHgzMywgMHgzNiwgMHgzNywgMHgzOCxcbiAgICAgICAgICAgICAgIDB4MzksIDB4M2MsIDB4NDIsIDB4NDQsIDB4NDYsIDB4NGIsIDB4NGMsIDB4NGYsIDB4NTMsIDB4NTgsXG4gICAgICAgICAgICAgICAuLi5yKDB4ODAsIDB4ODUpLCAweDg3LCAweDg4LCAweDhiLCAweDhlXV0sXG4gIFsndHJlZXMnLCBbMHgwMSwgMHgwMiwgMHgwNCwgMHgwNiwgLi4ucigweDA3LCAweDBmKSwgLi4ucigweDE0LCAweDE4KSxcbiAgICAgICAgICAgICAweDFhLCAweDFjLCAweDFlLCAweDIwLCAweDIzLCAweDI3LCAweDI5LCAweDJhLCAweDJiLCAweDJlLFxuICAgICAgICAgICAgIDB4MmYsIDB4MzEsIDB4MzMsIDB4MzcsIDB4MzgsIDB4MzksIDB4M2MsIDB4M2QsIDB4NDMsIDB4NDQsXG4gICAgICAgICAgICAgMHg0NiwgMHg0OSwgMHg0YSwgMHg0YiwgMHg0ZiwgMHg1MiwgMHg1NywgMHg2ZSxcbiAgICAgICAgICAgICAuLi5yKDB4ODAsIDB4ODUpLCAweDg3LCAweDg4LCAuLi5yKDB4OGIsIDB4OTApXV0sXG5cbl0pO1xuXG4vLyBpbmZlciBjb25zdHJhaW50cz9cbi8vICAtIHRyZWF0IEJHIGNvbG9yIHNlcGFyYXRlbHlcbi8vICAgIC0gZmlndXJlIG91dCB3aGljaCBwYWxzIG9uIGEgbWFwIHNoYXJlIHNhbWUgYmdcbi8vICAgIC0ga2VlcCBibGFjayBvbmVzIGJsYWNrXG4vLyAgICAtIGtlZXAgbGlnaHQgb25lcyBsaWdodCwgZGFyayBvbmVzIGRhcms/XG4vLyAgLSBhbGwgc2hhcmVkIGNvbG9ycyBtb3ZlZCBpbiBsb2Nrc3RlcD9cbi8vICAtIGNhdGVnb3JpemUgaW5kaXZpZHVhbCBjb2xvcnM/XG4vLyAgICBsb29rIGF0IGhvdyBtdWNoIGlzIHVzZWQ/ICBubyBicmlnaHQgY29sb3JzIGZvciB2ZXJ5IGNvbW1vbj9cbi8vICBUT0RPIC0gZml4IHRoZSBuby1pY2UgQkcgZm9yIGh5ZHJhL3N0eHkvZ29hIGluIHRoZSB0aWxlc2V0XG5cbi8vIG5leHQgc3RlcCAtIG1ha2UgcGF0dGVybi9wYWxldHRlIHZpZXdlciAoZWRpdG9yPylcblxuY29uc3QgVEVSUkFJTl9CWV9QQUxFVFRFID0gbmV3IE1hcDxudW1iZXIsIHJlYWRvbmx5IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXT4oW1xuICBbMHg4MCwgWydwYXRoJywgJ21vdW50YWluJywgJ3RyZWVzJ11dLFxuICBbMHg4NCwgWydtb3VudGFpbi1wYXRoJywgJ2JyaWNrJywgJ3RyZWVzJ11dLFxuICBbMHg4OCwgWydjYXZlIHdhbGwvZ3JvdW5kJywgJ2NhdmUgYnJpZGdlJywgJyddXSxcbiAgLy8gTk9URTogdW5kZXJncm91bmQgY2F2ZXJuICQ2NCBoYXMgbWlkZGxlIGZvciB3YXRlciwgbXVzdCBiZSAkMWZcbiAgWzB4OGMsIFsnZmxvb3InLCAnZmlyZScsICdhY2NlcHQnXV0sXG4gIFsweDkwLCBbJ3RyZWVzJywgJ21vdW50YWluJywgJ2dyYXNzJ11dLFxuICAvLyBOT1RFOiAwIGFuZCAyIG5lZWQgc2FtZSBiYWNrZ3JvdW5kIGZvciBvY2VhblxuICAvLyBsaW1lIHRyZWUgaXMgdmVyeSBkaWZmZXJlbnQgdXNhZ2U6ICh3YXRlciwgdHJlZSB0cnVuaywgdHJlZXMpLlxuICAvLyBtb3VudGFpbnMgYWxzbyBkaWZmZXJlbnQgKHJvY2ssIHRyaW0gKG9uIDI4LzdjKSwgYnJpZGdlKVxuICAvLyBmb3IgbW91bnRhaW5zLCAwIGFuZCAxIGFyZSBzYW1lLWJnXG4gIFsweDk0LCBbJ3dhdGVyL2dyb3VuZCcsICdtb3VudGFpbicsICdzaGFsbG93cyddXSxcbiAgWzB4OTgsIFsnZG9vcicsICdyb29tJywgJ3JvY2tzJ11dLCAvLyBzaHJpbmVcbiAgLy8gTk9URTogaHlkcmEgdmVyeSBkaWZmOiAocm9jay9ncm91bmQsIGJyaWRnZSwgcml2ZXIpXG4gIFsweDljLCBbJ21vdW50YWluL2dyb3VuZCcsICd0cmVlcycsICdkZXNlcnQnXV0sXG4gIC8vIE5PVEU6IHRoaXMgaXMgc3dhbXAsIGJ1dCBhbHNvIGluY2x1ZGVzIGFsbCBpbmRvb3JzXG4gIC8vIGFsbCAzIG5lZWQgc2FtZSBiZyBmb3Igc3dhbXBcbiAgWzB4YTAsIFsnZ3JvdW5kJywgJ3RyZWVzJywgJ3NvbWUgaGF6ZSddXSxcbiAgWzB4YTQsIFsnJywgJycsICcnXV0sIC8vIGZvcnRyZXNzXG4gIFsweGE4LCBbJycsICcnLCAnJ11dLCAvLyBpY2UgY2F2ZVxuICBbMHhhYywgWycnLCAnJywgJyddXSwgLy8gZW5kZ2FtZVxuXSk7XG5cbmZ1bmN0aW9uIHIoYTogbnVtYmVyLCBiOiBudW1iZXIpOiByZWFkb25seSBudW1iZXJbXSB7XG4gIHJldHVybiBuZXcgQXJyYXkoYiAtIGEpLmZpbGwoMCkubWFwKChfeCwgaSkgPT4gaSArIGEpO1xufVxuXG5jb25zdCBbXSA9IFtURVJSQUlOX0JZX1BBTEVUVEUsIEFMTE9XRURfUEFMRVRURVNdO1xuIl19