import { World } from './logic/world.js';
import { FlagSet } from './flagset.js';
import { Rom } from './rom.js';
import { deterministic, deterministicPreParse } from './pass/deterministic.js';
import { DefaultMap } from './util.js';
const ITEMS = `
sword-of-wind $00
sword-of-fire $01
sword-of-water $02
sword-of-thunder $03
windmill-key $32
statue-of-onyx $25
insect-flute $27
key-to-prison $33
flute-of-lime $28

ball-of-wind $05 
ball-of-fire $07
ball-of-water $09
ball-of-thunder $0b
kirisa-plant $3c
alarm-flute $31
fog-lamp $35
shell-flute $36
broken-statue $38
eye-glasses $37
glowing-lamp $39

tornado-bracelet $06
flame-bracelet $08
blizzard-bracelet $0a
storm-bracelet $0c
love-pendant $3b
key-to-styx $34
statue-of-gold $3a
sacred-shield $12
ivory-statue $3d

rabbit-boots $2e
gas-mask $29
shield-ring $30
iron-necklace $2c
leather-boots $2f
power-ring $2a
warrior-ring $2b
deos-pendant $2d
bow-of-moon $3e
bow-of-sun $3f

refresh $41
paralysis $42
telepathy $43
teleport $44
recover $45
barrier $46
change $47
flight $48
psycho-armor $1c
bow-of-truth $40
`;
const SLOTS = [
    [0x00, 121, 192],
    [0x01, 274, 176],
    [0x02, 335, 123],
    [0x03, 77, 10],
    [0x05, 89, 107],
    [0x06, 115, 224],
    [0x07, 282, 187],
    [0x08, 47, 182],
    [0x09, 251, 232],
    [0x0a, 206, 249],
    [0x0b, 83, 63],
    [0x0c, 23, 9],
    [0x12, 49, 48],
    [0x14, 77, 2],
    [0x76, 70, 3],
    [0x77, 84, 3],
    [0x1b, 168, 96],
    [0x1c, 199, 110],
    [0x1d, 82, 95],
    [0x1e, 82, 101],
    [0x1f, 346, 147],
    [0x70, 346, 153],
    [0x71, 346, 159],
    [0x20, 126, 52],
    [0x21, 227, 97],
    [0x22, 256, 73],
    [0x23, 58, 115],
    [0x24, 82, 113],
    [0x25, 189, 180],
    [0x26, 18, 172],
    [0x27, 267, 185],
    [0x28, 275, 147],
    [0x29, 147, 206],
    [0x2a, 172, 104],
    [0x2b, 203, 5],
    [0x2c, 249, 69],
    [0x2d, 191, 110],
    [0x2e, 89, 99],
    [0x2f, 164, 104],
    [0x30, 319, 123],
    [0x72, 320, 130],
    [0x32, 105, 94],
    [0x33, 64, 198],
    [0x34, 83, 71],
    [0x35, 345, 140],
    [0x36, 301, 119],
    [0x37, 233, 118],
    [0x38, 234, 88],
    [0x39, 295, 92],
    [0x3a, 234, 49],
    [0x3b, 274, 117],
    [0x3c, 338, 226],
    [0x3d, 23, 17],
    [0x3e, 206, 241],
    [0x3f, 101, 6],
    [0x40, 207, 110],
    [0x41, 92, 117],
    [0x42, 279, 126],
    [0x43, 202, 138],
    [0x44, 124, 202],
    [0x45, 304, 128],
    [0x46, 248, 35],
    [0x47, 277, 3],
    [0x48, 15, 25],
    [0x50, 82, 107],
    [0x52, 134, 219],
    [0x53, 59, 219],
    [0x54, 52, 55],
    [0x55, 241, 97],
    [0x56, 123, 23],
    [0x74, 115, 3],
    [0x57, 70, 9],
    [0x75, 84, 9],
    [0x58, 32, 38],
    [0x79, 32, 16],
    [0x7a, 40, 16],
    [0x7b, 40, 38],
    [0x5a, 161, 97],
    [0x10, 327, 123],
    [0x5c, 256, 79],
    [0x5d, 36, 139],
    [0x5e, 14, 229],
    [0x5f, 345, 225],
    [0x60, 18, 94],
    [0x61, 234, 96],
    [0x62, 18, 118],
    [0x63, 36, 54],
    [0x64, 175, 97],
    [0x65, 139, 40],
    [0x66, 66, 160],
    [0x69, 131, 201],
    [0x6a, 76, 226],
    [0x6b, 18, 100],
    [0x6c, 193, 103],
    [0x78, 199, 103],
    [0x6d, 205, 103],
    [0x73, 256, 67],
    [0x6e, 24, 38],
    [0x6f, 44, 97],
];
const KEY = new Set([0x10, 0x12, 0x23, 0x26, 0x61]);
const TRADES = new Set([0x29, 0x3e, 0x44, 0x47, 0x48]);
class Graph {
    constructor(rom, world, flags) {
        this.rom = rom;
        this.world = world;
        this.flags = flags;
        this.slots = new Map();
        this.items = new Map();
        this.slotElts = new Map();
        this.has = new Set();
        window.GRAPH = this;
        this.graph = world.getLocationList();
        this.grid = document.getElementsByClassName('grid')[0];
        this.map = document.getElementsByClassName('map')[0];
        const unlocks = new DefaultMap(() => new Set());
        for (const [slot, req] of this.graph.requirements) {
            for (const cs of req) {
                for (const c of cs) {
                    unlocks.get(c).add(slot);
                }
            }
        }
        this.unlocks = new Map([...unlocks].map(([i, s]) => [i, [...s]]));
        const toggle = (e) => {
            let t = e.target;
            while (t && !t.dataset['slot']) {
                t = t.parentElement;
            }
            if (!t)
                return;
            const id = Number(t.dataset['slot']);
            const has = t.classList.toggle('got');
            if (t.dataset['item']) {
                has ? this.has.add(id) : this.has.delete(id);
            }
            this.update();
            e.preventDefault();
        };
        this.grid.addEventListener('click', toggle);
    }
    addSlot(slotId, x, y) {
        const div = document.createElement('div');
        const itemget = this.rom.itemGets[slotId];
        const item = itemget && this.rom.items[itemget.itemId];
        if (item && item.unique || KEY.has(slotId)) {
            div.classList.add('key');
            x--;
            y--;
        }
        x--;
        y--;
        div.dataset['slot'] = String(slotId);
        div.style.left = x + 'px';
        div.style.top = y + 'px';
        const inner = document.createElement('div');
        div.appendChild(inner);
        inner.textContent =
            slotId >= 0x70 ?
                'Mimic' :
                this.rom.items[itemget.itemId].messageName.replace(' ', '\xa0');
        if (this.flags.randomizeTrades() && TRADES.has(slotId)) {
            div.classList.add('boss');
        }
        this.slotElts.set(slotId, div);
        this.map.appendChild(div);
    }
    addItem(cls, hex) {
        const id = Number.parseInt(hex.substring(1), 16);
        const outer = document.getElementsByClassName(cls)[0];
        const inner = document.createElement('div');
        outer.appendChild(inner);
        outer.dataset['slot'] = String(id);
        outer.dataset['item'] = String(id);
    }
    addExtraFlags() {
    }
    update() {
        for (const elt of this.slotElts.values()) {
            elt.dataset['state'] = elt.classList.contains('got') ? '' : 'blocked';
        }
        const reachable = this.traverse();
        for (const slot of reachable) {
            if ((slot & ~0x7f) !== 0x100)
                continue;
            const elt = this.slotElts.get(slot & 0xff);
            if (elt && !elt.classList.contains('got')) {
                elt.dataset['state'] = 'available';
            }
        }
    }
    traverse() {
        const has = new Set([...this.has].map(i => i | 0x200));
        const reachable = new Set();
        const slots = new Set();
        const queue = new Set(this.graph.requirements.keys());
        for (const n of queue) {
            queue.delete(n);
            if (reachable.has(n))
                continue;
            const needed = this.graph.requirements.get(n);
            for (const route of needed) {
                if (!containsAll(has, route))
                    continue;
                reachable.add(n);
                const items = [];
                if ((n & ~0x7f) === 0x100) {
                    slots.add((n & 0xff));
                }
                else {
                    if (isItem(n))
                        items.push((n & 0xff));
                    has.add(n);
                }
                for (const item of has) {
                    for (const j of this.unlocks.get(item) || []) {
                        if (!this.graph.requirements.has(j)) {
                            console.dir(this);
                            throw new Error(`Adding bad node ${j} from unlock ${item}`);
                        }
                        queue.add(j);
                    }
                }
                break;
            }
        }
        return reachable;
    }
}
function isItem(x) {
    return (x & ~0x7f) === 0x200;
}
function containsAll(set, want) {
    for (const elem of want) {
        if (!set.has(elem))
            return false;
    }
    return true;
}
let flags = '@Casual';
for (const arg of location.hash.substring(1).split('&')) {
    const [key, value] = arg.split('=');
    if (key === 'flags') {
        flags = decodeURIComponent(value);
    }
}
function initItemGrants(rom) {
    rom.itemGets.actionGrants = new Map([
        [0x25, 0x29],
        [0x39, 0x3a],
        [0x3b, 0x47],
        [0x3c, 0x3e],
        [0x84, 0x46],
        [0xb2, 0x42],
        [0xb4, 0x41],
    ]);
}
async function main() {
    const rom = await Rom.load(deterministicPreParse);
    rom.flags.defrag();
    initItemGrants(rom);
    const flagset = new FlagSet(flags);
    deterministic(rom, flagset);
    const world = new World(rom, flagset, true);
    const graph = new Graph(rom, world, flagset);
    for (let item of ITEMS.split('\n')) {
        item = item.replace(/#.*/, '').trim();
        if (!item)
            continue;
        graph.addItem(...item.split(/ +/g));
    }
    for (const slot of SLOTS) {
        graph.addSlot(...slot);
    }
    graph.addExtraFlags();
    graph.update();
    document.getElementById('toggle-map').addEventListener('click', () => {
        graph.map.classList.toggle('hidden');
    });
    document.getElementById('clear-all').addEventListener('click', () => {
        for (const e of graph.grid.querySelectorAll('.got')) {
            e.classList.remove('got');
        }
        graph.has = new Set();
        graph.update();
    });
}
;
main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhY2tlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy90cmFja2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUN2QyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sY0FBYyxDQUFDO0FBQ3JDLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxVQUFVLENBQUM7QUFDN0IsT0FBTyxFQUFDLGFBQWEsRUFBRSxxQkFBcUIsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBRTdFLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFFckMsTUFBTSxLQUFLLEdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXNEckIsQ0FBQztBQUVGLE1BQU0sS0FBSyxHQUFxRDtJQUM5RCxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUVmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUVmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUVmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFHZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7Q0FDUCxDQUFDO0FBR1gsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENB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Q0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ25FLEtBQUssTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNuRCxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMzQjtRQUNELEtBQUssQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUN0QixLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBQUEsQ0FBQztBQUlGLElBQUksRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSXRlbSB0cmFja2VyIGZvciB3ZWIuXG4vLyBVc2VzIGZsYWdzZXQgdG8gZmlndXJlIG91dCBhY3R1YWwgZGVwZW5kZW5jaWVzLlxuXG5pbXBvcnQge1dvcmxkfSBmcm9tICcuL2xvZ2ljL3dvcmxkLmpzJztcbmltcG9ydCB7RmxhZ1NldH0gZnJvbSAnLi9mbGFnc2V0LmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuL3JvbS5qcyc7XG5pbXBvcnQge2RldGVybWluaXN0aWMsIGRldGVybWluaXN0aWNQcmVQYXJzZX0gZnJvbSAnLi9wYXNzL2RldGVybWluaXN0aWMuanMnO1xuaW1wb3J0IHtMb2NhdGlvbkxpc3QsIEl0ZW1JZCwgU2xvdElkfSBmcm9tICcuL2xvZ2ljL2dyYXBoLmpzJztcbmltcG9ydCB7RGVmYXVsdE1hcH0gZnJvbSAnLi91dGlsLmpzJztcblxuY29uc3QgSVRFTVM6IHN0cmluZyA9IGBcbnN3b3JkLW9mLXdpbmQgJDAwXG5zd29yZC1vZi1maXJlICQwMVxuc3dvcmQtb2Ytd2F0ZXIgJDAyXG5zd29yZC1vZi10aHVuZGVyICQwM1xud2luZG1pbGwta2V5ICQzMlxuc3RhdHVlLW9mLW9ueXggJDI1XG5pbnNlY3QtZmx1dGUgJDI3XG5rZXktdG8tcHJpc29uICQzM1xuZmx1dGUtb2YtbGltZSAkMjhcblxuYmFsbC1vZi13aW5kICQwNSBcbmJhbGwtb2YtZmlyZSAkMDdcbmJhbGwtb2Ytd2F0ZXIgJDA5XG5iYWxsLW9mLXRodW5kZXIgJDBiXG5raXJpc2EtcGxhbnQgJDNjXG5hbGFybS1mbHV0ZSAkMzFcbmZvZy1sYW1wICQzNVxuc2hlbGwtZmx1dGUgJDM2XG5icm9rZW4tc3RhdHVlICQzOFxuZXllLWdsYXNzZXMgJDM3XG5nbG93aW5nLWxhbXAgJDM5XG5cbnRvcm5hZG8tYnJhY2VsZXQgJDA2XG5mbGFtZS1icmFjZWxldCAkMDhcbmJsaXp6YXJkLWJyYWNlbGV0ICQwYVxuc3Rvcm0tYnJhY2VsZXQgJDBjXG5sb3ZlLXBlbmRhbnQgJDNiXG5rZXktdG8tc3R5eCAkMzRcbnN0YXR1ZS1vZi1nb2xkICQzYVxuc2FjcmVkLXNoaWVsZCAkMTJcbml2b3J5LXN0YXR1ZSAkM2RcblxucmFiYml0LWJvb3RzICQyZVxuZ2FzLW1hc2sgJDI5XG5zaGllbGQtcmluZyAkMzBcbmlyb24tbmVja2xhY2UgJDJjXG5sZWF0aGVyLWJvb3RzICQyZlxucG93ZXItcmluZyAkMmFcbndhcnJpb3ItcmluZyAkMmJcbmRlb3MtcGVuZGFudCAkMmRcbmJvdy1vZi1tb29uICQzZVxuYm93LW9mLXN1biAkM2ZcblxucmVmcmVzaCAkNDFcbnBhcmFseXNpcyAkNDJcbnRlbGVwYXRoeSAkNDNcbnRlbGVwb3J0ICQ0NFxucmVjb3ZlciAkNDVcbmJhcnJpZXIgJDQ2XG5jaGFuZ2UgJDQ3XG5mbGlnaHQgJDQ4XG5wc3ljaG8tYXJtb3IgJDFjXG5ib3ctb2YtdHJ1dGggJDQwXG5gO1xuXG5jb25zdCBTTE9UUzogUmVhZG9ubHlBcnJheTxyZWFkb25seSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0+ID0gW1xuICBbMHgwMCwgMTIxLDE5Ml0sIC8vIHN3b3JkIG9mIHdpbmRcbiAgWzB4MDEsIDI3NCwxNzZdLCAvLyBzd29yZCBvZiBmaXJlXG4gIFsweDAyLCAzMzUsMTIzXSwgLy8gc3dvcmQgb2Ygd2F0ZXJcbiAgWzB4MDMsICA3NywgMTBdLCAvLyBzd29yZCBvZiB0aHVuZGVyXG4gIFsweDA1LCAgODksMTA3XSwgLy8gYmFsbCBvZiB3aW5kXG4gIFsweDA2LCAxMTUsMjI0XSwgLy8gdG9ybmFkbyBicmFjZWxldFxuICBbMHgwNywgMjgyLDE4N10sIC8vIGJhbGwgb2YgZmlyZVxuICBbMHgwOCwgIDQ3LDE4Ml0sIC8vIGZsYW1lIGJyYWNlbGV0XG4gIFsweDA5LCAyNTEsMjMyXSwgLy8gYmFsbCBvZiB3YXRlclxuICBbMHgwYSwgMjA2LDI0OV0sIC8vIGJsaXp6YXJkIGJyYWNlbGV0XG4gIFsweDBiLCAgODMsIDYzXSwgLy8gYmFsbCBvZiB0aHVuZGVyXG4gIFsweDBjLCAgMjMsICA5XSwgLy8gc3Rvcm0gYnJhY2VsZXRcbiAgWzB4MTIsICA0OSwgNDhdLCAvLyBzYWNyZWQgc2hpZWxkXG4gIFsweDE0LCAgNzcsICAyXSwgLy8gcHN5Y2hvIHNoaWVsZFxuICBbMHg3NiwgIDcwLCAgM10sIC8vIHBzeWNobyBzaGllbGQgbWltaWMgMVxuICBbMHg3NywgIDg0LCAgM10sIC8vIHBzeWNobyBzaGllbGQgbWltaWMgMlxuICBbMHgxYiwgMTY4LCA5Nl0sIC8vIGJhdHRsZSBzdWl0XG4gIFsweDFjLCAxOTksMTEwXSwgLy8gcHN5Y2hvIGFybW9yXG4gIFsweDFkLCAgODIsIDk1XSwgLy8gbWVkaWNhbCBoZXJiIHNlYWxlZCBjYXZlXG4gIFsweDFlLCAgODIsMTAxXSwgLy8gYW50aWRvdGUgc2VhbGVkIGNhdmVcbiAgWzB4MWYsIDM0NiwxNDddLCAvLyBseXNpcyBwbGFudCBmb2cgbGFtcFxuICBbMHg3MCwgMzQ2LDE1M10sIC8vIGZvZyBsYW1wIG1pbWljIDFcbiAgWzB4NzEsIDM0NiwxNTldLCAvLyBmb2cgbGFtcCBtaW1pYyAyXG4gIFsweDIwLCAxMjYsIDUyXSwgLy8gZnJ1aXQgb2YgbGltZSBtdCBoeWRyYVxuICBbMHgyMSwgMjI3LCA5N10sIC8vIGZydWl0IG9mIHBvd2VyIHNhYmVyYSBwYWxhY2VcbiAgWzB4MjIsIDI1NiwgNzNdLCAvLyBtYWdpYyByaW5nIGV2aWwgc3Bpcml0IGlzbGFuZFxuICBbMHgyMywgIDU4LDExNV0sIC8vIGZydWl0IG9mIHJlcHVuIHNhYmVyYSAyXG4gIFsweDI0LCAgODIsMTEzXSwgLy8gd2FycCBib290cyBzZWFsZWQgY2F2ZVxuICBbMHgyNSwgMTg5LDE4MF0sIC8vIHN0YXR1ZSBvZiBvbnl4XG4gIFsweDI2LCAgMTgsMTcyXSwgLy8gb3BlbCBzdGF0dWVcbiAgWzB4MjcsIDI2NywxODVdLCAvLyBpbnNlY3QgZmx1dGVcbiAgWzB4MjgsIDI3NSwxNDddLCAvLyBmbHV0ZSBvZiBsaW1lXG4gIFsweDI5LCAxNDcsMjA2XSwgLy8gZ2FzIG1hc2tcbiAgWzB4MmEsIDE3MiwxMDRdLCAvLyBwb3dlciByaW5nXG4gIFsweDJiLCAyMDMsICA1XSwgLy8gd2FycmlvciByaW5nXG4gIFsweDJjLCAyNDksIDY5XSwgLy8gaXJvbiBuZWNrbGFjZVxuICBbMHgyZCwgMTkxLDExMF0sIC8vIGRlb3MgcGVuZGFudFxuICBbMHgyZSwgIDg5LCA5OV0sIC8vIHJhYmJpdCBib290c1xuICBbMHgyZiwgMTY0LDEwNF0sIC8vIGxlYXRoZXIgYm9vdHNcbiAgWzB4MzAsIDMxOSwxMjNdLCAvLyBzaGllbGQgcmluZ1xuICBbMHg3MiwgMzIwLDEzMF0sIC8vIHdhdGVyZmFsbCBjYXZlIG1pbWljXG4gIC8vIDMxIGFsYXJtIGZsdXRlXG4gIFsweDMyLCAxMDUsIDk0XSwgLy8gd2luZG1pbGwga2V5XG4gIFsweDMzLCAgNjQsMTk4XSwgLy8ga2V5IHRvIHByaXNvblxuICBbMHgzNCwgIDgzLCA3MV0sIC8vIGtleSB0byBzdHl4XG4gIFsweDM1LCAzNDUsMTQwXSwgLy8gZm9nIGxhbXBcbiAgWzB4MzYsIDMwMSwxMTldLCAvLyBzaGVsbCBmbHV0ZVxuICBbMHgzNywgMjMzLDExOF0sIC8vIGV5ZSBnbGFzc2VzXG4gIFsweDM4LCAyMzQsIDg4XSwgLy8gYnJva2VuIHN0YXR1ZVxuICBbMHgzOSwgMjk1LCA5Ml0sIC8vIGdsb3dpbmcgbGFtcFxuICBbMHgzYSwgMjM0LCA0OV0sIC8vIHN0YXR1ZSBvZiBnb2xkXG4gIFsweDNiLCAyNzQsMTE3XSwgLy8gbG92ZSBwZW5kYW50XG4gIFsweDNjLCAzMzgsMjI2XSwgLy8ga2lyaXNhIHBsYW50XG4gIFsweDNkLCAgMjMsIDE3XSwgLy8gaXZvcnkgc3RhdHVlXG4gIFsweDNlLCAyMDYsMjQxXSwgLy8gYm93IG9mIG1vb25cbiAgWzB4M2YsIDEwMSwgIDZdLCAvLyBib3cgb2Ygc3VuXG4gIFsweDQwLCAyMDcsMTEwXSwgLy8gYm93IG9mIHRydXRoXG4gIFsweDQxLCAgOTIsMTE3XSwgLy8gcmVmcmVzaFxuICBbMHg0MiwgMjc5LDEyNl0sIC8vIHBhcmFseXNpc1xuICBbMHg0MywgMjAyLDEzOF0sIC8vIHRlbGVwYXRoeVxuICBbMHg0NCwgMTI0LDIwMl0sIC8vIHRlbGVwb3J0XG4gIFsweDQ1LCAzMDQsMTI4XSwgLy8gcmVjb3ZlclxuICBbMHg0NiwgMjQ4LCAzNV0sIC8vIGJhcnJpZXJcbiAgWzB4NDcsIDI3NywgIDNdLCAvLyBjaGFuZ2VcbiAgWzB4NDgsICAxNSwgMjVdLCAvLyBmbGlnaHRcbiAgWzB4NTAsICA4MiwxMDddLCAvLyBtZWRpY2FsIGhlcmIgc2VhbGVkIGNhdmUgZnJvbnRcbiAgLy8gNTEgc2FjcmVkIHNoaWVsZFxuICBbMHg1MiwgMTM0LDIxOV0sIC8vIG1lZGljYWwgaGVyYiBtdCBzYWJyZSB3XG4gIFsweDUzLCAgNTksMjE5XSwgLy8gbWVkaWNhbCBoZXJiIG10IHNhYnJlIG5cbiAgWzB4NTQsICA1MiwgNTVdLCAvLyBtYWdpYyByaW5nIGZvcnRyZXNzIDMgdXBwZXJcbiAgWzB4NTUsIDI0MSwgOTddLCAvLyBtZWRpY2FsIGhlcmIgc2FiZXJhIHBhbGFjZVxuICBbMHg1NiwgMTIzLCAyM10sIC8vIG1lZGljYWwgaGVyYiBtdCBoeWRyYVxuICBbMHg3NCwgMTE1LCAgM10sIC8vIG10IGh5ZHJhIG1pbWljXG4gIFsweDU3LCAgNzAsICA5XSwgLy8gbWVkaWNhbCBoZXJiIHN0eXhcbiAgWzB4NzUsICA4NCwgIDldLCAvLyBzdHl4IDEgbWltaWNcbiAgWzB4NTgsICAzMiwgMzhdLCAvLyBtYWdpYyByaW5nIGthcm1pbmVcbiAgWzB4NzksICAzMiwgMTZdLCAvLyBrYXJtaW5lIG1pbWljIDFcbiAgWzB4N2EsICA0MCwgMTZdLCAvLyBrYXJtaW5lIG1pbWljIDJcbiAgWzB4N2IsICA0MCwgMzhdLCAvLyBrYXJtaW5lIG1pbWljIDNcbiAgLy8gNTkgbWVkaWNhbCBoZXJiXG4gIFsweDVhLCAxNjEsIDk3XSwgLy8gZnJ1aXQgb2YgcG93ZXIgb2FzaXMgY2F2ZSAob3ZlciB3YXRlcilcbiAgWzB4MTAsIDMyNywxMjNdLCAvLyBmbHV0ZSBvZiBsaW1lIGNoZXN0IChOT1RFOiBjaGFuZ2VkIDViLT4gMTApXG4gIFsweDVjLCAyNTYsIDc5XSwgLy8gbHlzaXMgcGxhbnQgZXZpbCBzcGlyaXQgaXNsYW5kXG4gIFsweDVkLCAgMzYsMTM5XSwgLy8gbHlzaXMgcGxhbnQgc2FiZXJhIGxldmVsXG4gIFsweDVlLCAgMTQsMjI5XSwgLy8gYW50aWRvdGUgbXQgc2FicmUgblxuICBbMHg1ZiwgMzQ1LDIyNV0sIC8vIGFudGlkb3RlIGtpcmlzYSBjYXZlXG4gIFsweDYwLCAgMTgsIDk0XSwgLy8gYW50aWRvdGUgZm9ydGVzcyAzXG4gIFsweDYxLCAyMzQsIDk2XSwgLy8gZnJ1aXQgb2YgcG93ZXIgdmFtcGlyZSAyXG4gIFsweDYyLCAgMTgsMTE4XSwgLy8gZnJ1aXQgb2YgcG93ZXIgc2FiZXJhIGxldmVsXG4gIFsweDYzLCAgMzYsIDU0XSwgLy8gb3BlbCBzdGF0dWUgZm9ydHJlc3MgM1xuICBbMHg2NCwgMTc1LCA5N10sIC8vIGZydWl0IG9mIHBvd2VyIG9hc2lzIGNhdmVcbiAgWzB4NjUsIDEzOSwgNDBdLCAvLyBtYWdpYyByaW5nIG10IGh5ZHJhXG4gIFsweDY2LCAgNjYsMTYwXSwgLy8gZnJ1aXQgb2YgcmVwdW4gc2FiZXJhIGxldmVsXG4gIC8vIDY3IG1hZ2ljIHJpbmdcbiAgLy8gNjggbWFnaWMgcmluZ1xuICBbMHg2OSwgMTMxLDIwMV0sIC8vIG1hZ2ljIHJpbmcgbXQgc2FicmUgd1xuICBbMHg2YSwgIDc2LDIyNl0sIC8vIHdhcnAgYm9vdHMgbXQgc2FicmUgd1xuICBbMHg2YiwgIDE4LDEwMF0sIC8vIG1hZ2ljIHJpbmcgZm9ydHJlc3MgMyB1cHBlciAoYmVoaW5kKVxuICBbMHg2YywgMTkzLDEwM10sIC8vIG1hZ2ljIHJpbmcgcHlyYW1pZCBmcm9udFxuICBbMHg3OCwgMTk5LDEwM10sIC8vIHB5cmFtaWQgYmFjayBtaW1pY1xuICBbMHg2ZCwgMjA1LDEwM10sIC8vIG9wZWwgc3RhdHVlIHB5cmFtaWQgYmFja1xuICBbMHg3MywgMjU2LCA2N10sIC8vIGlyb24gbmVja2xhY2UgbWltaWNcbiAgWzB4NmUsICAyNCwgMzhdLCAvLyB3YXJwIGJvb3RzIGthcm1pbmVcbiAgWzB4NmYsICA0NCwgOTddLCAvLyBtYWdpYyByaW5nIGZvcnRyZXNzIDMgbG93ZXJcbl0gYXMgY29uc3Q7XG5cbi8vIG5vbi11bmlxdWUga2V5IGl0ZW0gc2xvdHNcbmNvbnN0IEtFWSA9IG5ldyBTZXQoWzB4MTAsIDB4MTIsIDB4MjMsIDB4MjYsIDB4NjFdKTtcblxuLy8gY29uc3QgQk9TU0VTID0gbmV3IFNldChbXG4vLyAgIDB4MmUsIC8vIHJhYmJpdCBib290cyBzbG90IC0+IHZhbXBpcmUgMVxuLy8gICAweDA3LCAvLyBiYWxsIG9mIGZpcmUgc2xvdCAtPiBpbnNlY3Rcbi8vICAgMHgwOCwgLy8gZmxhbWUgYnJhY2VsZXQgc2xvdCAtPiBrZWxiZXNxdWUgMVxuLy8gICAweDA5LCAvLyBiYWxsIG9mIHdhdGVyIHNsb3QgLT4gcmFnZVxuLy8gICAweDM4LCAvLyBicm9rZW4gc3RhdHVlIHNsb3QgLT4gc2FiZXJhIDFcbi8vICAgMHgwYiwgLy8gYmFsbCBvZiB0aHVuZGVyIHNsb3QgLT4gbWFkbyAxXG4vLyAgIDB4MjYsIC8vIG9wZWwgc3RhdHVlIHNsb3QgLT4ga2VsYmVzcXVlIDJcbi8vICAgMHgyMywgLy8gZnJ1aXQgb2YgcmVwdW4gc2xvdCAtPiBzYWJlcmEgMlxuLy8gICAweDEyLCAvLyBzYWNyZWQgc2hpZWxkIHNsb3QgLT4gbWFkbyAyXG4vLyAgIDB4M2QsIC8vIGl2b3J5IHN0YXR1ZSBzbG90IC0+IGthcm1pbmVcbi8vICAgMHgxYywgLy8gcHN5Y2hvIGFybW9yIHNsb3QgLT4gZHJheWdvbiAxXG4vLyAgIC8vIFssIH4weDEwYl0sIC8vIGRyYXlnb24gMlxuLy8gICAweDYxLCAvLyBmcnVpdCBvZiBwb3dlciBzbG90IC0+IHZhbXBpcmUgMlxuLy8gXSk7XG5cbi8vIHNsb3RzIHRoYXQgY29tZSBmcm9tIHRyYWRlLWluc1xuLy8gIC0gbm90ZTogdGhlIGZvZyBsYW1wIHRyYWRlLWluIGRvZXNuJ3QgaGF2ZSBhIGdvb2Qgc2xvdCBmb3IgdGhpc1xuLy8gVE9ETyAtIGFkZCBcInRyYWRlZCBmb2cgbGFtcFwiIHRvIGl0ZW1zLCBhZGQgYSBib3ggZm9yIGl0LlxuLy8gVE9ETyAtIGNvdW50IG51bWJlciBvZiB0cmFkZWQgYm94ZXMgY2hlY2tlZCwgc2V0IHJlc3QgdG8gYmxvY2tlZCBpZlxuLy8gICAgICAgIDw9IG51bWJlciBvZiBpdGVtcyBhbHJlYWR5IHRyYWRlZCBpbi4uLj9cbi8vIFRPRE8gLSBmaW5kLWFuZC1yZXBsYWNlIGZvciB0b3JuZWwncyBpdGVtIGFmdGVyIHRoZSBmYWN0Pz9cbmNvbnN0IFRSQURFUyA9IG5ldyBTZXQoWzB4MjksIDB4M2UsIDB4NDQsIDB4NDcsIDB4NDhdKTtcblxuLy8gVE9ETyAtIGFkZCBleHRyYSBpbmRpcmVjdGlvbiBmb3Igd2FsbHMgaW4gb3ZlcmxheSBpZiB0cmFja2luZ1xuLy8gIC0gb25lIGZvciBlYWNoIHNlcGFyYXRlIHJlZ2lvbi4uLiBob3cgdG8ga2VlcCB0cmFjayBvZiB0aGF0P1xuLy8gIC0gdGhlbiBrZWVwIHRoZW0gYXMgaXRlbXMuLi4/ICBib3NzZXM/ICBtYXliZSBqdXN0IGhhcmRjb2RlXG4vLyAgICB0aGUgbGlua2FnZXM/ICBvciBqdXN0IGFkZCBhbGwgd2FsbHMgYXMgaXRlbXMgYW5kIGxpbmsgdGhlbVxuLy8gICAgZGlyZWN0bHkgaGVyZS4uLiAtIHRoYXQgbWlnaHQgYmUgYmV0dGVyLlxuXG4vLyB4LCB5LCAuLi5mbGFnc1xuLy8gY29uc3QgV0FMTFM6IFtudW1iZXIsIG51bWJlciwgLi4ubnVtYmVyXSA9IFtdO1xuXG5jbGFzcyBHcmFwaCB7XG4gIC8qKiBtYXAgZnJvbSBpZCB0byBzbG90IGluZGV4ICovXG4gIHJlYWRvbmx5IHNsb3RzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcbiAgLyoqIG1hcCBmcm9tIGlkIHRvIGl0ZW0gaW5kZXggKi9cbiAgcmVhZG9ubHkgaXRlbXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xuICAvKiogbWFwIGZyb20gc2xvdCBpbmRleCB0byBlbGVtZW50ICovXG4gIHJlYWRvbmx5IHNsb3RFbHRzID0gbmV3IE1hcDxudW1iZXIsIEhUTUxFbGVtZW50PigpO1xuICAvKiogbWFwIGZyb20gaXRlbSBpbmRleCB0byBlbGVtZW50ICovXG4gIC8vcmVhZG9ubHkgaXRlbUVsdHMgPSBuZXcgTWFwPG51bWJlciwgSFRNTEVsZW1lbnQ+KCk7XG4gIC8qKiBzZXQgb2Ygc2xvdCBpbmRleCAqL1xuICAvL3JlYWRvbmx5IGNoZWNrZWQgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgLy8gLyoqIG1hcCBmcm9tIHNsb3QgaWQgdG8gbm9kZSAqL1xuICAvLyByZWFkb25seSBub2RlRnJvbVNsb3QgPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xuICAvLyByZWFkb25seSBub2RlcyA9IG5ldyBNYXA8YW55LCBhbnk+KCk7XG4gIC8qKiBNYXBzIGl0ZW0gaW5kZXggdG8gd2hldGhlciBpdGVtIGlzIGdvdHRlbiAqL1xuICBoYXM6IFNldDxJdGVtSWQ+ID0gbmV3IFNldCgpO1xuXG4gIHJlYWRvbmx5IGdyYXBoOiBMb2NhdGlvbkxpc3Q7XG4gIHJlYWRvbmx5IHVubG9ja3M6IFJlYWRvbmx5TWFwPEl0ZW1JZCwgcmVhZG9ubHkgU2xvdElkW10+O1xuICByZWFkb25seSBncmlkOiBFbGVtZW50O1xuICByZWFkb25seSBtYXA6IEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgcm9tOiBSb20sXG4gICAgICAgICAgICAgIHJlYWRvbmx5IHdvcmxkOiBXb3JsZCxcbiAgICAgICAgICAgICAgcmVhZG9ubHkgZmxhZ3M6IEZsYWdTZXQpIHtcbiAgICAvLyBUT0RPIC0gY29tcHV0ZSB0d28gZGVwZ3JhcGhzOiBvbmUgd2l0aCBnbGl0Y2hlcyBhbmQgb25lIHdpdGhvdXRcbiAgICAvLyAgLSB0aGVuIHdlIGNhbiBzaG93IGdyZWVuIHZzIHllbGxvdyBmb3IgZ2xpdGNoYWJsZSBsb2NhdGlvbnMuLj9cbiAgICAod2luZG93IGFzIGFueSkuR1JBUEggPSB0aGlzO1xuXG4gICAgdGhpcy5ncmFwaCA9IHdvcmxkLmdldExvY2F0aW9uTGlzdCgpO1xuICAgIHRoaXMuZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyaWQnKVswXTtcbiAgICB0aGlzLm1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21hcCcpWzBdO1xuXG4gICAgY29uc3QgdW5sb2NrcyA9IG5ldyBEZWZhdWx0TWFwPG51bWJlciwgU2V0PFNsb3RJZD4+KCgpID0+IG5ldyBTZXQoKSk7XG4gICAgZm9yIChjb25zdCBbc2xvdCwgcmVxXSBvZiB0aGlzLmdyYXBoLnJlcXVpcmVtZW50cykge1xuICAgICAgZm9yIChjb25zdCBjcyBvZiByZXEpIHtcbiAgICAgICAgZm9yIChjb25zdCBjIG9mIGNzKSB7XG4gICAgICAgICAgdW5sb2Nrcy5nZXQoYykuYWRkKHNsb3QgYXMgU2xvdElkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnVubG9ja3MgPSBuZXcgTWFwKFsuLi51bmxvY2tzXS5tYXAoXG4gICAgICAgIChbaSwgc106IFtudW1iZXIsIFNldDxTbG90SWQ+XSkgPT4gW2kgYXMgSXRlbUlkLCBbLi4uc11dKSk7XG5cbiAgICAgIC8vIHRoaXMubm9kZXMuc2V0KG4udWlkLCBuLm5hbWUpO1xuICAgICAgLy8gdGhpcy5yb3V0ZVtuLnVpZF0gPSA0O1xuICAgICAgLy8gaWYgKG4gaW5zdGFuY2VvZiBTbG90KSB7XG4gICAgICAvLyAgIC8vIHVzZWQgYnkgYWRkQm94XG4gICAgICAvLyAgIGlmICghbi5pc01pbWljKCkpIHtcbiAgICAgIC8vICAgICB0aGlzLm5vZGVGcm9tU2xvdC5zZXQobi5zbG90SW5kZXgsIG4pO1xuICAgICAgLy8gICB9XG4gICAgICAvLyAgIC8vIG5vdCBzaG93biwganVzdCBhc3N1bWUgaGF2ZSBpdFxuICAgICAgLy8gICBpZiAobi5uYW1lID09ICdBbGFybSBGbHV0ZScgfHwgbi5uYW1lID09ICdNZWRpY2FsIEhlcmInKSB7XG4gICAgICAvLyAgICAgdGhpcy5hbHdheXMuYWRkKG4uaXRlbS51aWQpO1xuICAgICAgLy8gICAgIHRoaXMucm91dGVbbi5pdGVtLnVpZF0gPSAwO1xuICAgICAgLy8gICB9XG4gICAgICAvLyB9IGVsc2UgaWYgKG4gaW5zdGFuY2VvZiBMb2NhdGlvbikge1xuICAgICAgLy8gICAvLyBmaW5kIHRoZSBtaW1pY3MsIHRoZXkgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGJlY2F1c2VcbiAgICAgIC8vICAgLy8gdGhleSBhbGwgbWFwIHRvIHRoZSBzYW1lIHNsb3QgSUQuLi5cbiAgICAgIC8vICAgZm9yIChjb25zdCBjaGVzdCBvZiBuLmNoZXN0cykge1xuICAgICAgLy8gICAgIGlmIChjaGVzdC5pc01pbWljKCkpIHtcbiAgICAgIC8vICAgICAgIHRoaXMubWltaWNTbG90cy5zZXQobi5pZCA8PCA4IHwgY2hlc3Quc3Bhd25TbG90LCBjaGVzdCk7XG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9IGVsc2UgaWYgKG4gaW5zdGFuY2VvZiBUcmFja2VyTm9kZSkge1xuICAgICAgLy8gICBjb25zdCBpbmRleCA9IHRoaXMuZGVwZ3JhcGgudWlkVG9JdGVtW24udWlkXTtcbiAgICAgIC8vICAgaWYgKGluZGV4ID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgLy8gICBsZXQgY29sb3IgPSA0O1xuICAgICAgLy8gICBpZiAobi50eXBlID09PSBUcmFja2VyTm9kZS5PRkZfUk9VVEUpIGNvbG9yID0gMTtcbiAgICAgIC8vICAgaWYgKG4udHlwZSA9PT0gVHJhY2tlck5vZGUuR0xJVENIKSBjb2xvciA9IDI7XG4gICAgICAvLyAgIGlmIChuLnR5cGUgPT09IFRyYWNrZXJOb2RlLkhBUkQpIGNvbG9yID0gMztcbiAgICAgIC8vICAgdGhpcy5yb3V0ZVtuLnVpZF0gPSBjb2xvcjtcbiAgICAgIC8vIH1cblxuICAgIGNvbnN0IHRvZ2dsZSA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgbGV0IHQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudHxudWxsO1xuICAgICAgd2hpbGUgKHQgJiYgIXQuZGF0YXNldFsnc2xvdCddKSB7XG4gICAgICAgIHQgPSB0LnBhcmVudEVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAoIXQpIHJldHVybjtcbiAgICAgIGNvbnN0IGlkID0gTnVtYmVyKHQuZGF0YXNldFsnc2xvdCddKSBhcyBJdGVtSWQ7XG4gICAgICBjb25zdCBoYXMgPSB0LmNsYXNzTGlzdC50b2dnbGUoJ2dvdCcpO1xuICAgICAgaWYgKHQuZGF0YXNldFsnaXRlbSddKSB7XG4gICAgICAgIGhhcyA/IHRoaXMuaGFzLmFkZChpZCkgOiB0aGlzLmhhcy5kZWxldGUoaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5ncmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlKTtcbiAgICAvL3RoaXMubWFwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlKTtcbiAgfVxuXG4gIGFkZFNsb3Qoc2xvdElkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgLy8gY29uc3QgaW5kZXggPSB0aGlzLnNsb3RzLmdldChzbG90SWQpO1xuICAgIC8vIGlmIChpbmRleCA9PSBudWxsKSB7IGRlYnVnZ2VyOyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGl0ZW1nZXQgPSB0aGlzLnJvbS5pdGVtR2V0c1tzbG90SWRdO1xuICAgIGNvbnN0IGl0ZW0gPSBpdGVtZ2V0ICYmIHRoaXMucm9tLml0ZW1zW2l0ZW1nZXQuaXRlbUlkXTtcbiAgICAvLyBtYWtlIHNvbWUgYm94ZXMgYmlnZ2VyOyBxdWljayBoYWNrIHRvIGF2b2lkIHVuaXF1ZSBhcm1vcnNcbiAgICBpZiAoaXRlbSAmJiBpdGVtLnVuaXF1ZSB8fCBLRVkuaGFzKHNsb3RJZCkpIHtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdrZXknKTtcbiAgICAgIHgtLTsgeS0tO1xuICAgIH1cbiAgICB4LS07IHktLTtcbiAgICBkaXYuZGF0YXNldFsnc2xvdCddID0gU3RyaW5nKHNsb3RJZCk7XG4gICAgZGl2LnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICBkaXYuc3R5bGUudG9wID0geSArICdweCc7XG4gICAgLy9kaXYudGV4dENvbnRlbnQgPSAnXFx4YTAnO1xuICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICBpbm5lci50ZXh0Q29udGVudCA9XG4gICAgICAgIHNsb3RJZCA+PSAweDcwID9cbiAgICAgICAgICAgICdNaW1pYycgOlxuICAgICAgICAgICAgdGhpcy5yb20uaXRlbXNbaXRlbWdldC5pdGVtSWRdLm1lc3NhZ2VOYW1lLnJlcGxhY2UoJyAnLCAnXFx4YTAnKTtcbiAgICBpZiAodGhpcy5mbGFncy5yYW5kb21pemVUcmFkZXMoKSAmJiBUUkFERVMuaGFzKHNsb3RJZCkpIHtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdib3NzJyk7XG4gICAgfVxuICAgIHRoaXMuc2xvdEVsdHMuc2V0KHNsb3RJZCwgZGl2KTtcbiAgICB0aGlzLm1hcC5hcHBlbmRDaGlsZChkaXYpO1xuICB9XG5cbiAgYWRkSXRlbShjbHM6IHN0cmluZywgaGV4OiBzdHJpbmcpIHtcbiAgICAvLyBwYXJzZSB0aGUgaGV4LCByZW1vdmluZyAkIHByZWZpeFxuICAgIGNvbnN0IGlkID0gTnVtYmVyLnBhcnNlSW50KGhleC5zdWJzdHJpbmcoMSksIDE2KTtcbiAgICBjb25zdCBvdXRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xzKVswXSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICBvdXRlci5kYXRhc2V0WydzbG90J10gPSBTdHJpbmcoaWQpO1xuICAgIG91dGVyLmRhdGFzZXRbJ2l0ZW0nXSA9IFN0cmluZyhpZCk7XG4gICAgLy90aGlzLnNsb3RFbHRzLnNldChpbmRleCwgb3V0ZXIpO1xuICB9XG5cbiAgYWRkRXh0cmFGbGFncygpIHtcbiAgICAvLyBmb3IgKGNvbnN0IHNsb3Qgb2YgdGhpcy5ncmFwaC5yZXF1aXJlbWVudHMua2V5U2V0KCkpIHtcbiAgICAvLyAgIGlmICghaXNTbG90KHNsb3QpKSBjb250aW51ZTtcbiAgICAvLyAgIGlmICghQk9TU0VTLmhhcyhzbG90ICYgMHhmZikpIGNvbnRpbnVlO1xuICAgIC8vICAgY29uc3QgZWx0ID0gdGhpcy5zbG90RWx0cy5nZXQocmVwbGFjZWQpO1xuICAgIC8vICAgaWYgKGVsdCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ2V4cGVjdGVkJyk7XG4gICAgLy8gICB0aGlzLnNsb3RFbHRzLmRlbGV0ZShOdW1iZXIoZWx0LmRhdGFzZXRbJ3Nsb3QnXSkpO1xuICAgIC8vICAgdGhpcy5zbG90RWx0cy5zZXQoc2xvdC5pbmRleCwgZWx0KTtcbiAgICAvLyAgIGVsdC5jbGFzc0xpc3QuYWRkKCdib3NzJyk7XG4gICAgLy8gICBlbHQuZGF0YXNldFsnc2xvdCddID0gU3RyaW5nKHNsb3QuaW5kZXgpO1xuICAgIC8vICAgZWx0LmRhdGFzZXRbJ2l0ZW0nXSA9IFN0cmluZyhzbG90LmluZGV4KTtcbiAgICAvLyB9XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgZm9yIChjb25zdCBlbHQgb2YgdGhpcy5zbG90RWx0cy52YWx1ZXMoKSkge1xuICAgICAgZWx0LmRhdGFzZXRbJ3N0YXRlJ10gPSBlbHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnb3QnKSA/ICcnIDogJ2Jsb2NrZWQnO1xuICAgIH1cbiAgICBjb25zdCByZWFjaGFibGUgPSB0aGlzLnRyYXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBzbG90IG9mIHJlYWNoYWJsZSkge1xuICAgICAgLy8gZmlndXJlIG91dCB3aGV0aGVyIGl0J3MgYXZhaWxhYmxlIG9yIG5vdFxuICAgICAgLy8gVE9ETyAtIGNvbnNpZGVyIGhhdmluZyBtdWx0aXBsZSB3b3JsZHMsIGZvciBnbGl0Y2hlZC9oYXJkP1xuICAgICAgLy8gICAgICAtPiBhZGp1c3QgZmxhZ3MgdG8gYWRkIGFsbCBnbGl0Y2hlcy9oYXJkIG1vZGVcbiAgICAgIGlmICgoc2xvdCAmIH4weDdmKSAhPT0gMHgxMDApIGNvbnRpbnVlO1xuICAgICAgY29uc3QgZWx0ID0gdGhpcy5zbG90RWx0cy5nZXQoc2xvdCAmIDB4ZmYpO1xuICAgICAgaWYgKGVsdCAmJiAhZWx0LmNsYXNzTGlzdC5jb250YWlucygnZ290JykpIHtcbiAgICAgICAgZWx0LmRhdGFzZXRbJ3N0YXRlJ10gPSAnYXZhaWxhYmxlJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0cmF2ZXJzZSgpOiBTZXQ8U2xvdElkPiB7XG4gICAgY29uc3QgaGFzID0gbmV3IFNldChbLi4udGhpcy5oYXNdLm1hcChpID0+IGkgfCAweDIwMCkpO1xuICAgIGNvbnN0IHJlYWNoYWJsZSA9IG5ldyBTZXQ8U2xvdElkPigpO1xuICAgIGNvbnN0IHNsb3RzID0gbmV3IFNldDxTbG90SWQ+KCk7XG4gICAgY29uc3QgcXVldWUgPVxuICAgICAgICBuZXcgU2V0PFNsb3RJZD4odGhpcy5ncmFwaC5yZXF1aXJlbWVudHMua2V5cygpIGFzIEl0ZXJhYmxlPFNsb3RJZD4pO1xuICAgIGZvciAoY29uc3QgbiBvZiBxdWV1ZSkge1xuICAgICAgcXVldWUuZGVsZXRlKG4pO1xuICAgICAgaWYgKHJlYWNoYWJsZS5oYXMobikpIGNvbnRpbnVlO1xuICAgICAgLy8gY2FuIHdlIHJlYWNoIGl0P1xuICAgICAgY29uc3QgbmVlZGVkID0gdGhpcy5ncmFwaC5yZXF1aXJlbWVudHMuZ2V0KG4pITtcbiAgICAgIGZvciAoY29uc3Qgcm91dGUgb2YgbmVlZGVkKSB7XG4gICAgICAgIGlmICghY29udGFpbnNBbGwoaGFzLCByb3V0ZSkpIGNvbnRpbnVlO1xuICAgICAgICByZWFjaGFibGUuYWRkKG4pO1xuICAgICAgICAvLyBUT0RPIC0tLSBuZWVkIHRvIGZpZ3VyZSBvdXQgd2hhdCB0byBkbyBoZXJlLlxuICAgICAgICAvLyAgICAgIC0tLSBmaWxsIHdvdWxkIGxpa2UgdG8gYmUgemVyby1iYXNlZCBidXQgZG9lc24ndCBuZWVkIHRvIGJlLlxuICAgICAgICAvLyAgICAgICAgICBjb3VsZCB1c2UgYSBzaW1wbGUgcGFpciBvZiBNYXBzLCBwb3NzaWJseT9cbiAgICAgICAgLy8gICAgICAgICAgb3IgZnJvbnQtbG9hZCB0aGUgaXRlbXM/XG4gICAgICAgIC8vICAgc2xvdHM6IDF4eCBvdGhlcnNcbiAgICAgICAgLy8gICBpdGVtczogMnh4IG90aGVyc1xuICAgICAgICAvLyBidXQgd2Ugd2FudCBzYW1lIGZsYWdzIHRvIGhhdmUgc2FtZSBpbmRleFxuICAgICAgICAvLyAgIHNsb3RzOiAoZml4ZWQpIChyZXF1aXJlZCBzbG90cykgKGV4dHJhIHNsb3RzKVxuICAgICAgICAvLyAgIGl0ZW1zOiAoZml4ZWQpIChyZXF1aXJlZCBzbG90cykgKGl0ZW1zKVxuICAgICAgICAvLyBpZiBuIGlzIGEgc2xvdCB0aGVuIGFkZCB0aGUgaXRlbSB0byBoYXMuXG4gICAgICAgIGNvbnN0IGl0ZW1zOiBJdGVtSWRbXSA9IFtdO1xuICAgICAgICBpZiAoKG4gJiB+MHg3ZikgPT09IDB4MTAwKSB7XG4gICAgICAgICAgc2xvdHMuYWRkKChuICYgMHhmZikgYXMgU2xvdElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNJdGVtKG4pKSBpdGVtcy5wdXNoKChuICYgMHhmZikgYXMgbnVtYmVyIGFzIEl0ZW1JZCk7XG4gICAgICAgICAgaGFzLmFkZChuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaGFzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBqIG9mIHRoaXMudW5sb2Nrcy5nZXQoaXRlbSBhcyBJdGVtSWQpIHx8IFtdKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZ3JhcGgucmVxdWlyZW1lbnRzLmhhcyhqKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmRpcih0aGlzKTtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBZGRpbmcgYmFkIG5vZGUgJHtqfSBmcm9tIHVubG9jayAke2l0ZW19YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZS5hZGQoaik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVhY2hhYmxlO1xuICB9XG59XG5cbi8vIGZ1bmN0aW9uIGlzU2xvdCh4OiBudW1iZXIpOiBib29sZWFuIHtcbi8vICAgcmV0dXJuICh4ICYgfjB4N2YpID09PSAweDEwMDtcbi8vIH1cblxuZnVuY3Rpb24gaXNJdGVtKHg6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gKHggJiB+MHg3ZikgPT09IDB4MjAwO1xufVxuXG5mdW5jdGlvbiBjb250YWluc0FsbDxUPihzZXQ6IFNldDxUPiwgd2FudDogSXRlcmFibGU8VD4pOiBib29sZWFuIHtcbiAgZm9yIChjb25zdCBlbGVtIG9mIHdhbnQpIHtcbiAgICBpZiAoIXNldC5oYXMoZWxlbSkpIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gVE9ETyAtIGFsbCBHIGZsYWdzIGdldCB0aGUgZ2xpdGNoIGZvciBmcmVlXG4vLyAgICAgIC0gYWxsIG90aGVycyAobWludXMgd2lsZCB3YXJwIGlmIGRpc2FibGVkKSB0cmFja2VkIGFzIGdsaXRjaGVzXG4vLyAgICAgIC0gY29uc2lkZXIgZGFyayB5ZWxsb3cgYW5kIGRhcmsgZ3JlZW4gYXMgd2VsbCBhcyBkYXJrIGJsdWUgPz9cblxubGV0IGZsYWdzID0gJ0BDYXN1YWwnO1xuZm9yIChjb25zdCBhcmcgb2YgbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKSkge1xuICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhcmcuc3BsaXQoJz0nKTtcbiAgaWYgKGtleSA9PT0gJ2ZsYWdzJykge1xuICAgIGZsYWdzID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgfVxufVxuLy8gICAnc3BlZWQtYm9vdHMnOiB0cnVlLFxuLy8gICAnZ2xpdGNoLWdoZXR0by1mbGlnaHQnOiB0cnVlLFxuLy8gICAnZ2xpdGNoLXRhbGsnOiB0cnVlLFxuLy8gICAncm91dGUtbm8tZnJlZS1iYXJyaWVyJzogdHJ1ZSxcbi8vICAgJ3JvdXRlLXNoeXJvbi10ZWxlcG9ydCc6IHRydWUsXG4vLyAgICdyb3V0ZS1lYXJseS1mbGlnaHQnOiB0cnVlLFxuLy8gICAndHJhY2tlcic6IHRydWUsXG4vLyB9O1xuXG5mdW5jdGlvbiBpbml0SXRlbUdyYW50cyhyb206IFJvbSkge1xuICAvLyBOT1RFOiBUaGlzIGlzIHVnbHkgdG8gcHV0IGhlcmUsIGJ1dCB0aGUgbm9ybWFsIHZlcnNpb25cbiAgLy8gcmVxdWlyZXMgcHJlc2h1ZmZsZSB0byB3b3JrIGNvcnJlY3RseSwgYW5kIGl0IGRvZXNuJ3RcbiAgLy8gbWFrZSBzZW5zZSB0byBoYXJkY29kZSBpdCBpbiBJdGVtR2V0cycgaW5pdGlhbGl6ZXIuXG4gIHJvbS5pdGVtR2V0cy5hY3Rpb25HcmFudHMgPSBuZXcgTWFwKFtcbiAgICBbMHgyNSwgMHgyOV0sXG4gICAgWzB4MzksIDB4M2FdLFxuICAgIFsweDNiLCAweDQ3XSxcbiAgICBbMHgzYywgMHgzZV0sXG4gICAgWzB4ODQsIDB4NDZdLFxuICAgIFsweGIyLCAweDQyXSxcbiAgICBbMHhiNCwgMHg0MV0sXG4gIF0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICBjb25zdCByb20gPSBhd2FpdCBSb20ubG9hZChkZXRlcm1pbmlzdGljUHJlUGFyc2UpO1xuICByb20uZmxhZ3MuZGVmcmFnKCk7XG4gIGluaXRJdGVtR3JhbnRzKHJvbSk7XG4gIGNvbnN0IGZsYWdzZXQgPSBuZXcgRmxhZ1NldChmbGFncyk7XG4gIGRldGVybWluaXN0aWMocm9tLCBmbGFnc2V0KTsgLy8gbWFrZSBkZXRlcm1pbmlzdGljIGNoYW5nZXNcbiAgY29uc3Qgd29ybGQgPSBuZXcgV29ybGQocm9tLCBmbGFnc2V0LCB0cnVlKTsgLy8gKyAnIER0JykpO1xuICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaChyb20sIHdvcmxkLCBmbGFnc2V0KTtcbiAgZm9yIChsZXQgaXRlbSBvZiBJVEVNUy5zcGxpdCgnXFxuJykpIHtcbiAgICBpdGVtID0gaXRlbS5yZXBsYWNlKC8jLiovLCAnJykudHJpbSgpO1xuICAgIGlmICghaXRlbSkgY29udGludWU7XG4gICAgZ3JhcGguYWRkSXRlbSguLi4oaXRlbS5zcGxpdCgvICsvZykgYXMgW3N0cmluZywgc3RyaW5nXSkpO1xuICB9XG4gIGZvciAoY29uc3Qgc2xvdCBvZiBTTE9UUykge1xuICAgIGdyYXBoLmFkZFNsb3QoLi4uc2xvdCk7XG4gIH1cbiAgZ3JhcGguYWRkRXh0cmFGbGFncygpO1xuICBncmFwaC51cGRhdGUoKTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlLW1hcCcpIS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBncmFwaC5tYXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXItYWxsJykhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGZvciAoY29uc3QgZSBvZiBncmFwaC5ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nb3QnKSkge1xuICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKCdnb3QnKTtcbiAgICB9XG4gICAgZ3JhcGguaGFzID0gbmV3IFNldCgpOyAvLyBncmFwaC5hbHdheXM7XG4gICAgZ3JhcGgudXBkYXRlKCk7XG4gIH0pO1xufTtcblxuLy9mdW5jdGlvbiBkaWUoKTogbmV2ZXIgeyB0aHJvdyBuZXcgRXJyb3IoJ0Fzc2VydGlvbiBmYWlsZWQnKTsgfVxuXG5tYWluKCk7XG4iXX0=