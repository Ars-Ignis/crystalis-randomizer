import { Assembler } from './asm/assembler.js';
import { Linker } from './asm/linker.js';
import { AdHocSpawn } from './rom/adhocspawn.js';
import { Areas } from './rom/area.js';
import { BossKill } from './rom/bosskill.js';
import { Bosses } from './rom/bosses.js';
import { CoinDrops } from './rom/coindrops.js';
import { Flags } from './rom/flags.js';
import { Hitbox } from './rom/hitbox.js';
import { Items } from './rom/item.js';
import { ItemGets } from './rom/itemget.js';
import { Locations } from './rom/location.js';
import { Messages } from './rom/messages.js';
import { Metasprite } from './rom/metasprite.js';
import { Monster } from './rom/monster.js';
import { Npcs } from './rom/npc.js';
import { Objects } from './rom/objects.js';
import { RomOption } from './rom/option.js';
import { Palette } from './rom/palette.js';
import { Pattern } from './rom/pattern.js';
import { RandomNumbers } from './rom/randomnumbers.js';
import { Scaling } from './rom/scaling.js';
import { Screen } from './rom/screen.js';
import { Shops } from './rom/shop.js';
import { Slots } from './rom/slots.js';
import { Telepathy } from './rom/telepathy.js';
import { TileAnimation } from './rom/tileanimation.js';
import { TileEffects } from './rom/tileeffects.js';
import { Tileset } from './rom/tileset.js';
import { TownWarp } from './rom/townwarp.js';
import { Trigger } from './rom/trigger.js';
import { Segment, hex, seq, free } from './rom/util.js';
import { WildWarp } from './rom/wildwarp.js';
import { UnionFind } from './unionfind.js';
const { $0e, $0f, $10 } = Segment;
export class Rom {
    constructor(rom) {
        this.modules = [];
        const prgSize = rom[4] * 0x4000;
        const prgStart = 0x10 + (rom[6] & 4 ? 512 : 0);
        const prgEnd = prgStart + prgSize;
        this.prg = rom.subarray(prgStart, prgEnd);
        this.chr = rom.subarray(prgEnd);
        this.shopCount = Rom.SHOP_COUNT.get(rom);
        this.scalingLevels = Rom.SCALING_LEVELS.get(rom);
        this.uniqueItemTableAddress = Rom.UNIQUE_ITEM_TABLE.get(rom);
        this.shopDataTablesAddress = Rom.SHOP_DATA_TABLES.get(rom);
        this.telepathyTablesAddress = Rom.TELEPATHY_TABLES.get(rom);
        this.omitItemGetDataSuffix = Rom.OMIT_ITEM_GET_DATA_SUFFIX.get(rom);
        this.omitLocalDialogSuffix = Rom.OMIT_LOCAL_DIALOG_SUFFIX.get(rom);
        this.compressedMapData = Rom.COMPRESSED_MAPDATA.get(rom);
        for (const [address, old, value] of ADJUSTMENTS) {
            if (this.prg[address] === old)
                this.prg[address] = value;
        }
        this.areas = new Areas(this);
        this.screens = seq(0x103, i => new Screen(this, i));
        this.tilesets = seq(12, i => new Tileset(this, i << 2 | 0x80));
        this.tileEffects = seq(11, i => new TileEffects(this, i + 0xb3));
        this.triggers = seq(0x43, i => new Trigger(this, 0x80 | i));
        this.patterns = seq(this.chr.length >> 4, i => new Pattern(this, i));
        this.palettes = seq(0x100, i => new Palette(this, i));
        this.locations = new Locations(this);
        this.tileAnimations = seq(4, i => new TileAnimation(this, i));
        this.hitboxes = seq(24, i => new Hitbox(this, i));
        this.objects = new Objects(this);
        this.adHocSpawns = seq(0x60, i => new AdHocSpawn(this, i));
        this.metasprites = seq(0x100, i => new Metasprite(this, i));
        this.messages = new Messages(this);
        this.telepathy = new Telepathy(this);
        this.itemGets = new ItemGets(this);
        this.items = new Items(this);
        this.shops = new Shops(this);
        this.slots = new Slots(this);
        this.npcs = new Npcs(this);
        this.bossKills = seq(0xe, i => new BossKill(this, i));
        this.wildWarp = new WildWarp(this);
        this.townWarp = new TownWarp(this);
        this.coinDrops = new CoinDrops(this);
        this.flags = new Flags(this);
        this.bosses = new Bosses(this);
        this.scaling = new Scaling(this);
        this.randomNumbers = new RandomNumbers(this);
    }
    trigger(id) {
        if (id < 0x80 || id > 0xff)
            throw new Error(`Bad trigger id $${hex(id)}`);
        return this.triggers[id & 0x7f];
    }
    tileset(id) {
        if (id < 0x80 || id > 0xac || id & 3)
            throw new Error(`Bad tileset id $${hex(id)}`);
        return this.tilesets[(id & 0x7f) >>> 2];
    }
    get projectiles() {
        const projectiles = new Set();
        for (const m of this.objects.filter(o => o instanceof Monster)) {
            if (m.child) {
                projectiles.add(this.objects[this.adHocSpawns[m.child].objectId]);
            }
        }
        return [...projectiles].sort((x, y) => (x.id - y.id));
    }
    get monsterGraphics() {
        const gfx = {};
        for (const l of this.locations) {
            if (!l.used || !l.hasSpawns)
                continue;
            for (const o of l.spawns) {
                if (!(o.data[2] & 7)) {
                    const slot = o.data[2] & 0x80 ? 1 : 0;
                    const id = hex(o.data[3] + 0x50);
                    const data = gfx[id] = gfx[id] || {};
                    data[`${slot}:${l.spritePatterns[slot].toString(16)}:${l.spritePalettes[slot].toString(16)}`]
                        = { pal: l.spritePalettes[slot],
                            pat: l.spritePatterns[slot],
                            slot,
                        };
                }
            }
        }
        return gfx;
    }
    get locationMonsters() {
        const m = {};
        for (const l of this.locations) {
            if (!l.used || !l.hasSpawns)
                continue;
            const s = m['$' + hex(l.id)] = {};
            for (const o of l.spawns) {
                if (!(o.data[2] & 7)) {
                    const slot = o.data[2] & 0x80 ? 1 : 0;
                    const id = o.data[3] + 0x50;
                    s[`${slot}:${id.toString(16)}`] =
                        (s[`${slot}:${id.toString(16)}`] || 0) + 1;
                }
            }
        }
        return m;
    }
    assembler() {
        return new Assembler();
    }
    writeData() {
        var _a;
        const a = this.assembler();
        free(a, $0e, 0x877a, 0x895d);
        free(a, $0e, 0x8ae5, 0x98f4);
        free(a, $0e, 0x9de6, 0xa000);
        free(a, $0f, 0xa000, 0xa106);
        free(a, $0f, 0xa200, 0xa3c0);
        free(a, $10, 0x911a, 0x9468);
        const modules = [...this.modules, a.module()];
        const writeAll = (writables) => {
            for (const w of writables) {
                modules.push(...w.write());
            }
        };
        modules.push(...this.locations.write());
        writeAll(this.objects);
        writeAll(this.hitboxes);
        writeAll(this.triggers);
        writeAll(this.npcs);
        writeAll(this.tilesets);
        writeAll(this.tileEffects);
        writeAll(this.screens);
        writeAll(this.adHocSpawns);
        modules.push(...this.itemGets.write());
        modules.push(...this.slots.write());
        modules.push(...this.items.write());
        modules.push(...this.shops.write());
        writeAll(this.bossKills);
        writeAll(this.patterns);
        modules.push(...this.wildWarp.write());
        modules.push(...this.townWarp.write());
        modules.push(...this.coinDrops.write());
        modules.push(...this.scaling.write());
        modules.push(...this.bosses.write());
        modules.push(...this.randomNumbers.write());
        modules.push(...this.telepathy.write());
        modules.push(...this.messages.write());
        const linker = new Linker();
        linker.base(this.prg, 0);
        for (const m of modules) {
            linker.read(m);
        }
        linker.link().apply(this.prg);
        linker.report();
        const exports = linker.exports();
        this.uniqueItemTableAddress = exports.get('KeyItemData').offset;
        this.shopCount = 11;
        this.shopDataTablesAddress = ((_a = exports.get('ShopData')) === null || _a === void 0 ? void 0 : _a.offset) || 0;
        Rom.SHOP_COUNT.set(this.prg, this.shopCount);
        Rom.SCALING_LEVELS.set(this.prg, this.scalingLevels);
        Rom.UNIQUE_ITEM_TABLE.set(this.prg, this.uniqueItemTableAddress);
        Rom.SHOP_DATA_TABLES.set(this.prg, this.shopDataTablesAddress || 0);
        Rom.OMIT_ITEM_GET_DATA_SUFFIX.set(this.prg, this.omitItemGetDataSuffix);
        Rom.OMIT_LOCAL_DIALOG_SUFFIX.set(this.prg, this.omitLocalDialogSuffix);
        Rom.COMPRESSED_MAPDATA.set(this.prg, this.compressedMapData);
    }
    analyzeTiles() {
    }
    disjointTilesets() {
        const tilesetByScreen = [];
        for (const loc of this.locations) {
            if (!loc.used)
                continue;
            const tileset = loc.tileset;
            const ext = loc.extended ? 0x100 : 0;
            for (const row of loc.screens) {
                for (const s of row) {
                    (tilesetByScreen[s + ext] || (tilesetByScreen[s + ext] = new Set())).add(tileset);
                }
            }
        }
        const tiles = seq(256, () => new UnionFind());
        for (let s = 0; s < tilesetByScreen.length; s++) {
            if (!tilesetByScreen[s])
                continue;
            for (const t of this.screens[s].allTilesSet()) {
                tiles[t].union([...tilesetByScreen[s]]);
            }
        }
        for (let t = 0; t < tiles.length; t++) {
            const p = tiles[t].sets()
                .map((s) => [...s].map(hex).join(' '))
                .join(' | ');
            console.log(`Tile ${hex(t)}: ${p}`);
        }
    }
    swapMetatiles(tilesets, ...cycles) {
        const rev = new Map();
        const revArr = seq(0x100);
        const alt = new Map();
        const cpl = (x) => Array.isArray(x) ? x[0] : x < 0 ? ~x : x;
        for (const cycle of cycles) {
            for (let i = 0; i < cycle.length - 1; i++) {
                if (Array.isArray(cycle[i])) {
                    const arr = cycle[i];
                    alt.set(arr[0], arr[1]);
                    cycle[i] = arr[0];
                }
            }
            for (let i = 0; i < cycle.length - 1; i++) {
                const j = cycle[i];
                const k = cycle[i + 1];
                if (j < 0 || k < 0)
                    continue;
                rev.set(k, j);
                revArr[k] = j;
            }
        }
        const screens = new Set();
        const tileEffects = new Set();
        const tilesetsSet = new Set(tilesets);
        for (const l of this.locations) {
            if (!l.used)
                continue;
            if (!tilesetsSet.has(l.tileset))
                continue;
            tileEffects.add(l.tileEffects);
            for (const screen of l.allScreens()) {
                screens.add(screen);
            }
        }
        for (const screen of screens) {
            for (let i = 0, len = screen.tiles.length; i < len; i++) {
                screen.tiles[i] = revArr[screen.tiles[i]];
            }
        }
        for (const tsid of tilesetsSet) {
            const tileset = this.tilesets[(tsid & 0x7f) >>> 2];
            for (const cycle of cycles) {
                for (let i = 0; i < cycle.length - 1; i++) {
                    const a = cpl(cycle[i]);
                    const b = cpl(cycle[i + 1]);
                    for (let j = 0; j < 4; j++) {
                        tileset.tiles[j][a] = tileset.tiles[j][b];
                    }
                    tileset.attrs[a] = tileset.attrs[b];
                    if (b < 0x20 && tileset.alternates[b] !== b) {
                        if (a >= 0x20)
                            throw new Error(`Cannot unflag: ${tsid} ${a} ${b} ${tileset.alternates[b]}`);
                        tileset.alternates[a] = tileset.alternates[b];
                    }
                }
            }
            for (const [a, b] of alt) {
                tileset.alternates[a] = b;
            }
        }
        for (const teid of tileEffects) {
            const tileEffect = this.tileEffects[teid - 0xb3];
            for (const cycle of cycles) {
                for (let i = 0; i < cycle.length - 1; i++) {
                    const a = cpl(cycle[i]);
                    const b = cpl(cycle[i + 1]);
                    tileEffect.effects[a] = tileEffect.effects[b];
                }
            }
            for (const a of alt.keys()) {
                tileEffect.effects[a] |= 0x08;
            }
        }
    }
    moveFlag(oldFlag, newFlag) {
        function replace(arr) {
            for (let i = 0; i < arr.length; i++) {
                if (arr[i] === oldFlag)
                    arr[i] = newFlag;
                if (arr[i] === ~oldFlag)
                    arr[i] = ~newFlag;
            }
        }
        for (const trigger of this.triggers) {
            replace(trigger.conditions);
            replace(trigger.flags);
        }
        for (const npc of this.npcs) {
            for (const conds of npc.spawnConditions.values())
                replace(conds);
            for (const dialogs of [npc.globalDialogs, ...npc.localDialogs.values()]) {
                for (const dialog of dialogs) {
                    if (dialog.condition === oldFlag)
                        dialog.condition = newFlag;
                    if (dialog.condition === ~oldFlag)
                        dialog.condition = ~newFlag;
                }
            }
        }
        if ((oldFlag & ~0xff) === 0x200 && (newFlag & ~0xff) === 0x200) {
            for (const loc of this.locations) {
                for (const flag of loc.flags) {
                    if (flag.flag === oldFlag)
                        flag.flag = newFlag;
                }
            }
        }
    }
    nextFreeTrigger() {
        for (const t of this.triggers) {
            if (!t.used)
                return t;
        }
        throw new Error('Could not find an unused trigger.');
    }
    static async load(patch, receiver) {
        const file = await pickFile(receiver);
        if (patch)
            await patch(file);
        return new Rom(file);
    }
}
Rom.OMIT_ITEM_GET_DATA_SUFFIX = RomOption.bit(0x142c0, 0);
Rom.OMIT_LOCAL_DIALOG_SUFFIX = RomOption.bit(0x142c0, 1);
Rom.COMPRESSED_MAPDATA = RomOption.bit(0x142c0, 2);
Rom.SHOP_COUNT = RomOption.byte(0x142c1);
Rom.SCALING_LEVELS = RomOption.byte(0x142c2);
Rom.UNIQUE_ITEM_TABLE = RomOption.address(0x142d0);
Rom.SHOP_DATA_TABLES = RomOption.address(0x142d3);
Rom.TELEPATHY_TABLES = RomOption.address(0x142d6);
function pickFile(receiver) {
    if (!receiver)
        receiver = picker => document.body.appendChild(picker);
    return new Promise((resolve) => {
        if (window.location.hash !== '#reset') {
            const data = localStorage.getItem('rom');
            if (data) {
                return resolve(Uint8Array.from(new Array(data.length / 2).fill(0).map((_, i) => Number.parseInt(data[2 * i] + data[2 * i + 1], 16))));
            }
        }
        const upload = document.createElement('input');
        document.body.appendChild(upload);
        upload.type = 'file';
        upload.addEventListener('change', () => {
            const file = upload.files[0];
            const reader = new FileReader();
            reader.addEventListener('loadend', () => {
                const arr = new Uint8Array(reader.result);
                const str = Array.from(arr, hex).join('');
                localStorage.setItem('rom', str);
                upload.remove();
                resolve(arr);
            });
            reader.readAsArrayBuffer(file);
        });
    });
}
export const EXPECTED_CRC32 = 0x1bd39032;
const ADJUSTMENTS = [
    [0x13646, 0x02, 0x06],
    [0x1456a, 0x00, 0xff],
    [0x14aeb, 0x09, 0xff],
    [0x14db9, 0x08, 0x80],
    [0x1545d, 0xff, 0x00],
    [0x1581d, 0x00, 0xff],
    [0x1584e, 0xdb, 0xff],
    [0x15baf, 0xf0, 0x80],
    [0x15bb6, 0xdf, 0x80],
    [0x15bb7, 0x96, 0x80],
    [0x15f40, 0x02, 0xff],
    [0x15f61, 0x8d, 0xff],
    [0x15f65, 0x8d, 0xff],
    [0x164cc, 0x04, 0x20],
    [0x164ff, 0x0b, 0x0a],
    [0x1782a, 0x10, 0x01],
    [0x17857, 0x10, 0x01],
    [0x19f02, 0x40, 0x80],
    [0x19f03, 0x33, 0x32],
    [0x1a1e0, 0x40, 0xc0],
    [0x1a1e1, 0x3d, 0x34],
    [0x1cf05, 0x47, 0x48],
    [0x1d311, 0x20, 0xa0],
    [0x1d312, 0x30, 0x00],
    [0x1cff9, 0x60, 0xe0],
    [0x2ca90, 0x02, 0x00],
    [0x2f573, 0x02, 0x00],
    [0x2fae4, 0x5f, 0x00],
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9tLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2pzL3JvbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFDN0MsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBRXZDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3BDLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMzQyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDdkMsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQzdDLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUNyQyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDdkMsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUNwQyxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFDMUMsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzVDLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMzQyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDL0MsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxjQUFjLENBQUM7QUFFbEMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUMxQyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0s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QUksV0FBVyxFQUFFO1lBQy9DLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHO2dCQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDO1NBQzFEO1FBaUJELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENB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QUFHekMsTUFBTSxXQUFXLEdBQUc7SUFFbEIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBRXJCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFFckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBRXJCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFDckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBQ3JCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFDckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBQ3JCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFDckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBRXJCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFFckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUNyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBRXJCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFDckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBQ3JCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFFckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUVyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBQ3JCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFHckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztJQUdyQixDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBRXJCLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7SUFFckIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQztDQUNiLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQge0Fzc2VtYmxlcn0gZnJvbSAnLi9hc20vYXNzZW1ibGVyLmpzJztcbmltcG9ydCB7QXNzZW1ibGVyfSBmcm9tICcuL2FzbS9hc3NlbWJsZXIuanMnO1xuaW1wb3J0IHtMaW5rZXJ9IGZyb20gJy4vYXNtL2xpbmtlci5qcyc7XG5pbXBvcnQge01vZHVsZX0gZnJvbSAnLi9hc20vbW9kdWxlLmpzJztcbmltcG9ydCB7QWRIb2NTcGF3bn0gZnJvbSAnLi9yb20vYWRob2NzcGF3bi5qcyc7XG5pbXBvcnQge0FyZWFzfSBmcm9tICcuL3JvbS9hcmVhLmpzJztcbmltcG9ydCB7Qm9zc0tpbGx9IGZyb20gJy4vcm9tL2Jvc3NraWxsLmpzJztcbmltcG9ydCB7Qm9zc2VzfSBmcm9tICcuL3JvbS9ib3NzZXMuanMnO1xuaW1wb3J0IHtDb2luRHJvcHN9IGZyb20gJy4vcm9tL2NvaW5kcm9wcy5qcyc7XG5pbXBvcnQge0ZsYWdzfSBmcm9tICcuL3JvbS9mbGFncy5qcyc7XG5pbXBvcnQge0hpdGJveH0gZnJvbSAnLi9yb20vaGl0Ym94LmpzJztcbmltcG9ydCB7SXRlbXN9IGZyb20gJy4vcm9tL2l0ZW0uanMnO1xuaW1wb3J0IHtJdGVtR2V0c30gZnJvbSAnLi9yb20vaXRlbWdldC5qcyc7XG5pbXBvcnQge0xvY2F0aW9uc30gZnJvbSAnLi9yb20vbG9jYXRpb24uanMnO1xuaW1wb3J0IHtNZXNzYWdlc30gZnJvbSAnLi9yb20vbWVzc2FnZXMuanMnO1xuaW1wb3J0IHtNZXRhc3ByaXRlfSBmcm9tICcuL3JvbS9tZXRhc3ByaXRlLmpzJztcbmltcG9ydCB7TW9uc3Rlcn0gZnJvbSAnLi9yb20vbW9uc3Rlci5qcyc7XG5pbXBvcnQge05wY3N9IGZyb20gJy4vcm9tL25wYy5qcyc7XG5pbXBvcnQge09iamVjdERhdGF9IGZyb20gJy4vcm9tL29iamVjdGRhdGEuanMnO1xuaW1wb3J0IHtPYmplY3RzfSBmcm9tICcuL3JvbS9vYmplY3RzLmpzJztcbmltcG9ydCB7Um9tT3B0aW9ufSBmcm9tICcuL3JvbS9vcHRpb24uanMnO1xuaW1wb3J0IHtQYWxldHRlfSBmcm9tICcuL3JvbS9wYWxldHRlLmpzJztcbmltcG9ydCB7UGF0dGVybn0gZnJvbSAnLi9yb20vcGF0dGVybi5qcyc7XG5pbXBvcnQge1JhbmRvbU51bWJlcnN9IGZyb20gJy4vcm9tL3JhbmRvbW51bWJlcnMuanMnO1xuaW1wb3J0IHtTY2FsaW5nfSBmcm9tICcuL3JvbS9zY2FsaW5nLmpzJztcbmltcG9ydCB7U2NyZWVufSBmcm9tICcuL3JvbS9zY3JlZW4uanMnO1xuaW1wb3J0IHtTaG9wc30gZnJvbSAnLi9yb20vc2hvcC5qcyc7XG5pbXBvcnQge1Nsb3RzfSBmcm9tICcuL3JvbS9zbG90cy5qcyc7XG5pbXBvcnQge1Nwb2lsZXJ9IGZyb20gJy4vcm9tL3Nwb2lsZXIuanMnO1xuaW1wb3J0IHtUZWxlcGF0aHl9IGZyb20gJy4vcm9tL3RlbGVwYXRoeS5qcyc7XG5pbXBvcnQge1RpbGVBbmltYXRpb259IGZyb20gJy4vcm9tL3RpbGVhbmltYXRpb24uanMnO1xuaW1wb3J0IHtUaWxlRWZmZWN0c30gZnJvbSAnLi9yb20vdGlsZWVmZmVjdHMuanMnO1xuaW1wb3J0IHtUaWxlc2V0fSBmcm9tICcuL3JvbS90aWxlc2V0LmpzJztcbmltcG9ydCB7VG93bldhcnB9IGZyb20gJy4vcm9tL3Rvd253YXJwLmpzJztcbmltcG9ydCB7VHJpZ2dlcn0gZnJvbSAnLi9yb20vdHJpZ2dlci5qcyc7XG5pbXBvcnQge1NlZ21lbnQsIGhleCwgc2VxLCBmcmVlfSBmcm9tICcuL3JvbS91dGlsLmpzJztcbmltcG9ydCB7V2lsZFdhcnB9IGZyb20gJy4vcm9tL3dpbGR3YXJwLmpzJztcbmltcG9ydCB7VW5pb25GaW5kfSBmcm9tICcuL3VuaW9uZmluZC5qcyc7XG5cbmNvbnN0IHskMGUsICQwZiwgJDEwfSA9IFNlZ21lbnQ7XG5cbi8vIEEga25vd24gbG9jYXRpb24gZm9yIGRhdGEgYWJvdXQgc3RydWN0dXJhbCBjaGFuZ2VzIHdlJ3ZlIG1hZGUgdG8gdGhlIHJvbS5cbi8vIFRoZSB0cmljayBpcyB0byBmaW5kIGEgc3VpdGFibGUgcmVnaW9uIG9mIFJPTSB0aGF0J3MgYm90aCB1bnVzZWQgKmFuZCpcbi8vIGlzIG5vdCBwYXJ0aWN1bGFybHkgKnVzYWJsZSogZm9yIG91ciBwdXJwb3Nlcy4gIFRoZSBib3R0b20gMyByb3dzIG9mIHRoZVxuLy8gdmFyaW91cyBzaW5nbGUtc2NyZWVuIG1hcHMgYXJlIGFsbCBlZmZlY3RpdmVseSB1bnVzZWQsIHNvIHRoYXQgZ2l2ZXMgNDhcbi8vIGJ5dGVzIHBlciBtYXAuICBTaG9wcyAoMTQwMDAuLjE0MmZmKSBhbHNvIGhhdmUgYSBnaWFudCBhcmVhIHVwIHRvcCB0aGF0XG4vLyBjb3VsZCBwb3NzaWJseSBiZSB1c2FibGUsIHRob3VnaCB3ZSdkIG5lZWQgdG8gdGVhY2ggdGhlIHRpbGUtcmVhZGluZyBjb2RlXG4vLyB0byBpZ25vcmUgd2hhdGV2ZXIncyB3cml0dGVuIHRoZXJlLCBzaW5jZSBpdCAqaXMqIHZpc2libGUgYmVmb3JlIHRoZSBtZW51XG4vLyBwb3BzIHVwLiAgVGhlc2UgYXJlIGJpZyBlbm91Z2ggcmVnaW9ucyB0aGF0IHdlIGNvdWxkIGV2ZW4gY29uc2lkZXIgdXNpbmdcbi8vIHRoZW0gdmlhIHBhZ2Utc3dhcHBpbmcgdG8gZ2V0IGV4dHJhIGRhdGEgaW4gYXJiaXRyYXJ5IGNvbnRleHRzLlxuXG4vLyBTaG9wcyBhcmUgcGFydGljdWxhcmx5IG5pY2UgYmVjYXVzZSB0aGV5J3JlIGFsbCAwMCBpbiB2YW5pbGxhLlxuLy8gT3RoZXIgcG9zc2libGUgcmVnaW9uczpcbi8vICAgLSA0OCBieXRlcyBhdCAkZmZjMCAobWV6YW1lIHNocmluZSkgPT4gJGZmZTAgaXMgYWxsICRmZiBpbiB2YW5pbGxhLlxuXG5leHBvcnQgY2xhc3MgUm9tIHtcblxuICAvLyBUaGVzZSB2YWx1ZXMgY2FuIGJlIHF1ZXJpZWQgdG8gZGV0ZXJtaW5lIGhvdyB0byBwYXJzZSBhbnkgZ2l2ZW4gcm9tLlxuICAvLyBUaGV5J3JlIGFsbCBhbHdheXMgemVybyBmb3IgdmFuaWxsYVxuICBzdGF0aWMgcmVhZG9ubHkgT01JVF9JVEVNX0dFVF9EQVRBX1NVRkZJWCAgICA9IFJvbU9wdGlvbi5iaXQoMHgxNDJjMCwgMCk7XG4gIHN0YXRpYyByZWFkb25seSBPTUlUX0xPQ0FMX0RJQUxPR19TVUZGSVggICAgID0gUm9tT3B0aW9uLmJpdCgweDE0MmMwLCAxKTtcbiAgc3RhdGljIHJlYWRvbmx5IENPTVBSRVNTRURfTUFQREFUQSAgICAgICAgICAgPSBSb21PcHRpb24uYml0KDB4MTQyYzAsIDIpO1xuICBzdGF0aWMgcmVhZG9ubHkgU0hPUF9DT1VOVCAgICAgICAgICAgICAgICAgICA9IFJvbU9wdGlvbi5ieXRlKDB4MTQyYzEpO1xuICBzdGF0aWMgcmVhZG9ubHkgU0NBTElOR19MRVZFTFMgICAgICAgICAgICAgICA9IFJvbU9wdGlvbi5ieXRlKDB4MTQyYzIpO1xuICBzdGF0aWMgcmVhZG9ubHkgVU5JUVVFX0lURU1fVEFCTEUgICAgICAgICAgICA9IFJvbU9wdGlvbi5hZGRyZXNzKDB4MTQyZDApO1xuICBzdGF0aWMgcmVhZG9ubHkgU0hPUF9EQVRBX1RBQkxFUyAgICAgICAgICAgICA9IFJvbU9wdGlvbi5hZGRyZXNzKDB4MTQyZDMpO1xuICBzdGF0aWMgcmVhZG9ubHkgVEVMRVBBVEhZX1RBQkxFUyAgICAgICAgICAgICA9IFJvbU9wdGlvbi5hZGRyZXNzKDB4MTQyZDYpO1xuXG4gIHJlYWRvbmx5IHByZzogVWludDhBcnJheTtcbiAgcmVhZG9ubHkgY2hyOiBVaW50OEFycmF5O1xuXG4gIC8vIFRPRE8gLSB3b3VsZCBiZSBuaWNlIHRvIGVsaW1pbmF0ZSB0aGUgZHVwbGljYXRpb24gYnkgbW92aW5nXG4gIC8vIHRoZSBjdG9ycyBoZXJlLCBidXQgdGhlcmUncyBsb3RzIG9mIHByZXJlcXMgYW5kIGRlcGVuZGVuY3lcbiAgLy8gb3JkZXJpbmcsIGFuZCB3ZSBuZWVkIHRvIG1ha2UgdGhlIEFESlVTVE1FTlRTLCBldGMuXG4gIHJlYWRvbmx5IGFyZWFzOiBBcmVhcztcbiAgcmVhZG9ubHkgc2NyZWVuczogU2NyZWVuW107XG4gIHJlYWRvbmx5IHRpbGVzZXRzOiBUaWxlc2V0W107XG4gIHJlYWRvbmx5IHRpbGVFZmZlY3RzOiBUaWxlRWZmZWN0c1tdO1xuICByZWFkb25seSB0cmlnZ2VyczogVHJpZ2dlcltdO1xuICByZWFkb25seSBwYXR0ZXJuczogUGF0dGVybltdO1xuICByZWFkb25seSBwYWxldHRlczogUGFsZXR0ZVtdO1xuICByZWFkb25seSBsb2NhdGlvbnM6IExvY2F0aW9ucztcbiAgcmVhZG9ubHkgdGlsZUFuaW1hdGlvbnM6IFRpbGVBbmltYXRpb25bXTtcbiAgcmVhZG9ubHkgaGl0Ym94ZXM6IEhpdGJveFtdO1xuICByZWFkb25seSBvYmplY3RzOiBPYmplY3RzO1xuICByZWFkb25seSBhZEhvY1NwYXduczogQWRIb2NTcGF3bltdO1xuICByZWFkb25seSBtZXRhc3ByaXRlczogTWV0YXNwcml0ZVtdO1xuICByZWFkb25seSBpdGVtR2V0czogSXRlbUdldHM7XG4gIHJlYWRvbmx5IGl0ZW1zOiBJdGVtcztcbiAgcmVhZG9ubHkgc2hvcHM6IFNob3BzO1xuICByZWFkb25seSBzbG90czogU2xvdHM7XG4gIHJlYWRvbmx5IG5wY3M6IE5wY3M7XG4gIHJlYWRvbmx5IGJvc3NLaWxsczogQm9zc0tpbGxbXTtcbiAgcmVhZG9ubHkgYm9zc2VzOiBCb3NzZXM7XG4gIHJlYWRvbmx5IHdpbGRXYXJwOiBXaWxkV2FycDtcbiAgcmVhZG9ubHkgdG93bldhcnA6IFRvd25XYXJwO1xuICByZWFkb25seSBmbGFnczogRmxhZ3M7XG4gIHJlYWRvbmx5IGNvaW5Ecm9wczogQ29pbkRyb3BzO1xuICByZWFkb25seSBzY2FsaW5nOiBTY2FsaW5nO1xuICByZWFkb25seSByYW5kb21OdW1iZXJzOiBSYW5kb21OdW1iZXJzO1xuXG4gIHJlYWRvbmx5IHRlbGVwYXRoeTogVGVsZXBhdGh5O1xuICByZWFkb25seSBtZXNzYWdlczogTWVzc2FnZXM7XG5cbiAgcmVhZG9ubHkgbW9kdWxlczogTW9kdWxlW10gPSBbXTtcblxuICBzcG9pbGVyPzogU3BvaWxlcjtcblxuICAvLyBOT1RFOiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgbWF5IGJlIGNoYW5nZWQgYmV0d2VlbiByZWFkaW5nIGFuZCB3cml0aW5nXG4gIC8vIHRoZSByb20uICBJZiB0aGlzIGhhcHBlbnMsIHRoZSB3cml0dGVuIHJvbSB3aWxsIGhhdmUgZGlmZmVyZW50IG9wdGlvbnMuXG4gIC8vIFRoaXMgaXMgYW4gZWZmZWN0aXZlIHdheSB0byBjb252ZXJ0IGJldHdlZW4gdHdvIHN0eWxlcy5cblxuICAvLyBNYXggbnVtYmVyIG9mIHNob3BzLiAgVmFyaW91cyBibG9ja3Mgb2YgbWVtb3J5IHJlcXVpcmUga25vd2luZyB0aGlzIG51bWJlclxuICAvLyB0byBhbGxvY2F0ZS5cbiAgc2hvcENvdW50OiBudW1iZXI7XG4gIC8vIE51bWJlciBvZiBzY2FsaW5nIGxldmVscy4gIERldGVybWluZXMgdGhlIHNpemUgb2YgdGhlIHNjYWxpbmcgdGFibGVzLlxuICBzY2FsaW5nTGV2ZWxzOiBudW1iZXI7XG5cbiAgLy8gQWRkcmVzcyB0byByZWFkL3dyaXRlIHRoZSBiaXRmaWVsZCBpbmRpY2F0aW5nIHVuaXF1ZSBpdGVtcy5cbiAgdW5pcXVlSXRlbVRhYmxlQWRkcmVzczogbnVtYmVyO1xuICAvLyBBZGRyZXNzIG9mIG5vcm1hbGl6ZWQgcHJpY2VzIHRhYmxlLCBpZiBwcmVzZW50LiAgSWYgdGhpcyBpcyBhYnNlbnQgdGhlbiB3ZVxuICAvLyBhc3N1bWUgcHJpY2VzIGFyZSBub3Qgbm9ybWFsaXplZCBhbmQgYXJlIGF0IHRoZSBub3JtYWwgcGF3biBzaG9wIGFkZHJlc3MuXG4gIHNob3BEYXRhVGFibGVzQWRkcmVzczogbnVtYmVyO1xuICAvLyBBZGRyZXNzIG9mIHJlYXJyYW5nZWQgdGVsZXBhdGh5IHRhYmxlcy5cbiAgdGVsZXBhdGh5VGFibGVzQWRkcmVzczogbnVtYmVyO1xuICAvLyBXaGV0aGVyIHRoZSB0cmFpbGluZyAkZmYgc2hvdWxkIGJlIG9taXR0ZWQgZnJvbSB0aGUgSXRlbUdldERhdGEgdGFibGUuXG4gIG9taXRJdGVtR2V0RGF0YVN1ZmZpeDogYm9vbGVhbjtcbiAgLy8gV2hldGhlciB0aGUgdHJhaWxpbmcgYnl0ZSBvZiBlYWNoIExvY2FsRGlhbG9nIGlzIG9taXR0ZWQuICBUaGlzIGFmZmVjdHNcbiAgLy8gYm90aCByZWFkaW5nIGFuZCB3cml0aW5nIHRoZSB0YWJsZS4gIE1heSBiZSBpbmZlcnJlZCB3aGlsZSByZWFkaW5nLlxuICBvbWl0TG9jYWxEaWFsb2dTdWZmaXg6IGJvb2xlYW47XG4gIC8vIFdoZXRoZXIgbWFwZGF0YSBoYXMgYmVlbiBjb21wcmVzc2VkLlxuICBjb21wcmVzc2VkTWFwRGF0YTogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3Rvcihyb206IFVpbnQ4QXJyYXkpIHtcbiAgICBjb25zdCBwcmdTaXplID0gcm9tWzRdICogMHg0MDAwO1xuICAgIC8vIE5PVEU6IGNoclNpemUgPSByb21bNV0gKiAweDIwMDA7XG4gICAgY29uc3QgcHJnU3RhcnQgPSAweDEwICsgKHJvbVs2XSAmIDQgPyA1MTIgOiAwKTtcbiAgICBjb25zdCBwcmdFbmQgPSBwcmdTdGFydCArIHByZ1NpemU7XG4gICAgdGhpcy5wcmcgPSByb20uc3ViYXJyYXkocHJnU3RhcnQsIHByZ0VuZCk7XG4gICAgdGhpcy5jaHIgPSByb20uc3ViYXJyYXkocHJnRW5kKTtcblxuICAgIHRoaXMuc2hvcENvdW50ID0gUm9tLlNIT1BfQ09VTlQuZ2V0KHJvbSk7XG4gICAgdGhpcy5zY2FsaW5nTGV2ZWxzID0gUm9tLlNDQUxJTkdfTEVWRUxTLmdldChyb20pO1xuICAgIHRoaXMudW5pcXVlSXRlbVRhYmxlQWRkcmVzcyA9IFJvbS5VTklRVUVfSVRFTV9UQUJMRS5nZXQocm9tKTtcbiAgICB0aGlzLnNob3BEYXRhVGFibGVzQWRkcmVzcyA9IFJvbS5TSE9QX0RBVEFfVEFCTEVTLmdldChyb20pO1xuICAgIHRoaXMudGVsZXBhdGh5VGFibGVzQWRkcmVzcyA9IFJvbS5URUxFUEFUSFlfVEFCTEVTLmdldChyb20pO1xuICAgIHRoaXMub21pdEl0ZW1HZXREYXRhU3VmZml4ID0gUm9tLk9NSVRfSVRFTV9HRVRfREFUQV9TVUZGSVguZ2V0KHJvbSk7XG4gICAgdGhpcy5vbWl0TG9jYWxEaWFsb2dTdWZmaXggPSBSb20uT01JVF9MT0NBTF9ESUFMT0dfU1VGRklYLmdldChyb20pO1xuICAgIHRoaXMuY29tcHJlc3NlZE1hcERhdGEgPSBSb20uQ09NUFJFU1NFRF9NQVBEQVRBLmdldChyb20pO1xuXG4gICAgLy8gaWYgKGNyYzMyKHJvbSkgPT09IEVYUEVDVEVEX0NSQzMyKSB7XG4gICAgZm9yIChjb25zdCBbYWRkcmVzcywgb2xkLCB2YWx1ZV0gb2YgQURKVVNUTUVOVFMpIHtcbiAgICAgIGlmICh0aGlzLnByZ1thZGRyZXNzXSA9PT0gb2xkKSB0aGlzLnByZ1thZGRyZXNzXSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8vIExvYWQgdXAgYSBidW5jaCBvZiBkYXRhIHRhYmxlcy4gIFRoaXMgd2lsbCBpbmNsdWRlIGEgbGFyZ2UgbnVtYmVyIG9mIHRoZVxuICAgIC8vIGRhdGEgdGFibGVzIGluIHRoZSBST00uICBUaGUgaWRlYSBpcyB0aGF0IHdlIGNhbiBlZGl0IHRoZSBhcnJheXMgbG9jYWxseVxuICAgIC8vIGFuZCB0aGVuIGhhdmUgYSBcImNvbW1pdFwiIGZ1bmN0aW9uIHRoYXQgcmVidWlsZHMgdGhlIFJPTSB3aXRoIHRoZSBuZXdcbiAgICAvLyBhcnJheXMuICBXZSBtYXkgbmVlZCB0byB3cml0ZSBhIFwicGFnZWQgYWxsb2NhdG9yXCIgdGhhdCBjYW4gYWxsb2NhdGVcbiAgICAvLyBjaHVua3Mgb2YgUk9NIGluIGEgZ2l2ZW4gcGFnZS4gIFByb2JhYmx5IHdhbnQgdG8gdXNlIGEgZ3JlZWR5IGFsZ29yaXRobVxuICAgIC8vIHdoZXJlIHdlIHN0YXJ0IHdpdGggdGhlIGJpZ2dlc3QgY2h1bmsgYW5kIHB1dCBpdCBpbiB0aGUgc21hbGxlc3Qgc3BvdFxuICAgIC8vIHRoYXQgZml0cyBpdC4gIFByZXN1bWFibHkgd2Uga25vdyB0aGUgc2l6ZXMgdXAgZnJvbnQgZXZlbiBiZWZvcmUgd2UgaGF2ZVxuICAgIC8vIGFsbCB0aGUgYWRkcmVzc2VzLCBzbyB3ZSBjb3VsZCBkbyBhbGwgdGhlIGFsbG9jYXRpb24gYXQgb25jZSAtIHByb2JhYmx5XG4gICAgLy8gcmV0dXJuaW5nIGEgdG9rZW4gZm9yIGVhY2ggYWxsb2NhdGlvbiBhbmQgdGhlbiBhbGwgdG9rZW5zIGdldCBmaWxsZWQgaW5cbiAgICAvLyBhdCBvbmNlIChhY3R1YWwgcHJvbWlzZXMgd291bGQgYmUgbW9yZSB1bndlaWxkeSkuXG4gICAgLy8gVHJpY2t5IC0gd2hhdCBhYm91dCBzaGFyZWQgZWxlbWVudHMgb2YgZGF0YSB0YWJsZXMgLSB3ZSBwdWxsIHRoZW1cbiAgICAvLyBzZXBhcmF0ZWx5LCBidXQgd2UnbGwgbmVlZCB0byByZS1jb2FsZXNjZSB0aGVtLiAgQnV0IHRoaXMgcmVxdWlyZXNcbiAgICAvLyBrbm93aW5nIHRoZWlyIGNvbnRlbnRzIEJFRk9SRSBhbGxvY2F0aW5nIHRoZWlyIHNwYWNlLiAgU28gd2UgbmVlZCB0d29cbiAgICAvLyBhbGxvY2F0ZSBtZXRob2RzIC0gb25lIHdoZXJlIHRoZSBjb250ZW50IGlzIGtub3duIGFuZCBvbmUgd2hlcmUgb25seSB0aGVcbiAgICAvLyBsZW5ndGggaXMga25vd24uXG4gICAgdGhpcy5hcmVhcyA9IG5ldyBBcmVhcyh0aGlzKTsgLy8gbm90ZTogbXVzdCBjb21lIGJlZm9yZSBsb2NhdGlvbnNcbiAgICB0aGlzLnNjcmVlbnMgPSBzZXEoMHgxMDMsIGkgPT4gbmV3IFNjcmVlbih0aGlzLCBpKSk7XG4gICAgdGhpcy50aWxlc2V0cyA9IHNlcSgxMiwgaSA9PiBuZXcgVGlsZXNldCh0aGlzLCBpIDw8IDIgfCAweDgwKSk7XG4gICAgdGhpcy50aWxlRWZmZWN0cyA9IHNlcSgxMSwgaSA9PiBuZXcgVGlsZUVmZmVjdHModGhpcywgaSArIDB4YjMpKTtcbiAgICB0aGlzLnRyaWdnZXJzID0gc2VxKDB4NDMsIGkgPT4gbmV3IFRyaWdnZXIodGhpcywgMHg4MCB8IGkpKTtcbiAgICB0aGlzLnBhdHRlcm5zID0gc2VxKHRoaXMuY2hyLmxlbmd0aCA+PiA0LCBpID0+IG5ldyBQYXR0ZXJuKHRoaXMsIGkpKTtcbiAgICB0aGlzLnBhbGV0dGVzID0gc2VxKDB4MTAwLCBpID0+IG5ldyBQYWxldHRlKHRoaXMsIGkpKTtcbiAgICB0aGlzLmxvY2F0aW9ucyA9IG5ldyBMb2NhdGlvbnModGhpcyk7XG4gICAgdGhpcy50aWxlQW5pbWF0aW9ucyA9IHNlcSg0LCBpID0+IG5ldyBUaWxlQW5pbWF0aW9uKHRoaXMsIGkpKTtcbiAgICB0aGlzLmhpdGJveGVzID0gc2VxKDI0LCBpID0+IG5ldyBIaXRib3godGhpcywgaSkpO1xuICAgIHRoaXMub2JqZWN0cyA9IG5ldyBPYmplY3RzKHRoaXMpO1xuICAgIHRoaXMuYWRIb2NTcGF3bnMgPSBzZXEoMHg2MCwgaSA9PiBuZXcgQWRIb2NTcGF3bih0aGlzLCBpKSk7XG4gICAgdGhpcy5tZXRhc3ByaXRlcyA9IHNlcSgweDEwMCwgaSA9PiBuZXcgTWV0YXNwcml0ZSh0aGlzLCBpKSk7XG4gICAgdGhpcy5tZXNzYWdlcyA9IG5ldyBNZXNzYWdlcyh0aGlzKTtcbiAgICB0aGlzLnRlbGVwYXRoeSA9IG5ldyBUZWxlcGF0aHkodGhpcyk7XG4gICAgdGhpcy5pdGVtR2V0cyA9IG5ldyBJdGVtR2V0cyh0aGlzKTtcbiAgICB0aGlzLml0ZW1zID0gbmV3IEl0ZW1zKHRoaXMpO1xuICAgIHRoaXMuc2hvcHMgPSBuZXcgU2hvcHModGhpcyk7IC8vIE5PVEU6IGRlcGVuZHMgb24gbG9jYXRpb25zIGFuZCBvYmplY3RzXG4gICAgdGhpcy5zbG90cyA9IG5ldyBTbG90cyh0aGlzKTtcbiAgICB0aGlzLm5wY3MgPSBuZXcgTnBjcyh0aGlzKTtcbiAgICB0aGlzLmJvc3NLaWxscyA9IHNlcSgweGUsIGkgPT4gbmV3IEJvc3NLaWxsKHRoaXMsIGkpKTtcbiAgICB0aGlzLndpbGRXYXJwID0gbmV3IFdpbGRXYXJwKHRoaXMpO1xuICAgIHRoaXMudG93bldhcnAgPSBuZXcgVG93bldhcnAodGhpcyk7XG4gICAgdGhpcy5jb2luRHJvcHMgPSBuZXcgQ29pbkRyb3BzKHRoaXMpO1xuICAgIHRoaXMuZmxhZ3MgPSBuZXcgRmxhZ3ModGhpcyk7XG4gICAgdGhpcy5ib3NzZXMgPSBuZXcgQm9zc2VzKHRoaXMpOyAvLyBOT1RFOiBtdXN0IGJlIGFmdGVyIE5wY3MgYW5kIEZsYWdzXG4gICAgdGhpcy5zY2FsaW5nID0gbmV3IFNjYWxpbmcodGhpcyk7XG4gICAgdGhpcy5yYW5kb21OdW1iZXJzID0gbmV3IFJhbmRvbU51bWJlcnModGhpcyk7XG4gIH1cblxuICB0cmlnZ2VyKGlkOiBudW1iZXIpOiBUcmlnZ2VyIHtcbiAgICBpZiAoaWQgPCAweDgwIHx8IGlkID4gMHhmZikgdGhyb3cgbmV3IEVycm9yKGBCYWQgdHJpZ2dlciBpZCAkJHtoZXgoaWQpfWApO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJzW2lkICYgMHg3Zl07XG4gIH1cblxuICB0aWxlc2V0KGlkOiBudW1iZXIpOiBUaWxlc2V0IHtcbiAgICBpZiAoaWQgPCAweDgwIHx8IGlkID4gMHhhYyB8fCBpZCAmIDMpIHRocm93IG5ldyBFcnJvcihgQmFkIHRpbGVzZXQgaWQgJCR7aGV4KGlkKX1gKTtcbiAgICByZXR1cm4gdGhpcy50aWxlc2V0c1soaWQgJiAweDdmKSA+Pj4gMl07XG4gIH1cblxuICAvLyBUT0RPIC0gY3Jvc3MtcmVmZXJlbmNlIG1vbnN0ZXJzL21ldGFzcHJpdGVzL21ldGF0aWxlcy9zY3JlZW5zIHdpdGggcGF0dGVybnMvcGFsZXR0ZXNcbiAgLy8gZ2V0IG1vbnN0ZXJzKCk6IE9iamVjdERhdGFbXSB7XG4gIC8vICAgY29uc3QgbW9uc3RlcnMgPSBuZXcgU2V0PE9iamVjdERhdGE+KCk7XG4gIC8vICAgZm9yIChjb25zdCBsIG9mIHRoaXMubG9jYXRpb25zKSB7XG4gIC8vICAgICBpZiAoIWwudXNlZCB8fCAhbC5oYXNTcGF3bnMpIGNvbnRpbnVlO1xuICAvLyAgICAgZm9yIChjb25zdCBvIG9mIGwuc3Bhd25zKSB7XG4gIC8vICAgICAgIGlmIChvLmlzTW9uc3RlcigpKSBtb25zdGVycy5hZGQodGhpcy5vYmplY3RzW28ubW9uc3RlcklkXSk7XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBbLi4ubW9uc3RlcnNdLnNvcnQoKHgsIHkpID0+ICh4LmlkIC0geS5pZCkpO1xuICAvLyB9XG5cbiAgZ2V0IHByb2plY3RpbGVzKCk6IE9iamVjdERhdGFbXSB7XG4gICAgY29uc3QgcHJvamVjdGlsZXMgPSBuZXcgU2V0PE9iamVjdERhdGE+KCk7XG4gICAgZm9yIChjb25zdCBtIG9mIHRoaXMub2JqZWN0cy5maWx0ZXIobyA9PiBvIGluc3RhbmNlb2YgTW9uc3RlcikpIHtcbiAgICAgIGlmIChtLmNoaWxkKSB7XG4gICAgICAgIHByb2plY3RpbGVzLmFkZCh0aGlzLm9iamVjdHNbdGhpcy5hZEhvY1NwYXduc1ttLmNoaWxkXS5vYmplY3RJZF0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWy4uLnByb2plY3RpbGVzXS5zb3J0KCh4LCB5KSA9PiAoeC5pZCAtIHkuaWQpKTtcbiAgfVxuXG4gIGdldCBtb25zdGVyR3JhcGhpY3MoKSB7XG4gICAgY29uc3QgZ2Z4OiB7W2lkOiBzdHJpbmddOlxuICAgICAgICAgICAgICAgIHtbaW5mbzogc3RyaW5nXTpcbiAgICAgICAgICAgICAgICAge3Nsb3Q6IG51bWJlciwgcGF0OiBudW1iZXIsIHBhbDogbnVtYmVyfX19ID0ge307XG4gICAgZm9yIChjb25zdCBsIG9mIHRoaXMubG9jYXRpb25zKSB7XG4gICAgICBpZiAoIWwudXNlZCB8fCAhbC5oYXNTcGF3bnMpIGNvbnRpbnVlO1xuICAgICAgZm9yIChjb25zdCBvIG9mIGwuc3Bhd25zKSB7XG4gICAgICAgIGlmICghKG8uZGF0YVsyXSAmIDcpKSB7XG4gICAgICAgICAgY29uc3Qgc2xvdCA9IG8uZGF0YVsyXSAmIDB4ODAgPyAxIDogMDtcbiAgICAgICAgICBjb25zdCBpZCA9IGhleChvLmRhdGFbM10gKyAweDUwKTtcbiAgICAgICAgICBjb25zdCBkYXRhID0gZ2Z4W2lkXSA9IGdmeFtpZF0gfHwge307XG4gICAgICAgICAgZGF0YVtgJHtzbG90fToke2wuc3ByaXRlUGF0dGVybnNbc2xvdF0udG9TdHJpbmcoMTYpfToke1xuICAgICAgICAgICAgICAgbC5zcHJpdGVQYWxldHRlc1tzbG90XS50b1N0cmluZygxNil9YF1cbiAgICAgICAgICAgID0ge3BhbDogbC5zcHJpdGVQYWxldHRlc1tzbG90XSxcbiAgICAgICAgICAgICAgIHBhdDogbC5zcHJpdGVQYXR0ZXJuc1tzbG90XSxcbiAgICAgICAgICAgICAgIHNsb3QsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGdmeDtcbiAgfVxuXG4gIGdldCBsb2NhdGlvbk1vbnN0ZXJzKCkge1xuICAgIGNvbnN0IG06IHtbaWQ6IHN0cmluZ106IHtbaW5mbzogc3RyaW5nXTogbnVtYmVyfX0gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGwgb2YgdGhpcy5sb2NhdGlvbnMpIHtcbiAgICAgIGlmICghbC51c2VkIHx8ICFsLmhhc1NwYXducykgY29udGludWU7XG4gICAgICAvLyB3aGljaCBtb25zdGVycyBhcmUgaW4gd2hpY2ggc2xvdHM/XG4gICAgICBjb25zdCBzOiB7W2luZm86IHN0cmluZ106IG51bWJlcn0gPSBtWyckJyArIGhleChsLmlkKV0gPSB7fTtcbiAgICAgIGZvciAoY29uc3QgbyBvZiBsLnNwYXducykge1xuICAgICAgICBpZiAoIShvLmRhdGFbMl0gJiA3KSkge1xuICAgICAgICAgIGNvbnN0IHNsb3QgPSBvLmRhdGFbMl0gJiAweDgwID8gMSA6IDA7XG4gICAgICAgICAgY29uc3QgaWQgPSBvLmRhdGFbM10gKyAweDUwO1xuICAgICAgICAgIHNbYCR7c2xvdH06JHtpZC50b1N0cmluZygxNil9YF0gPVxuICAgICAgICAgICAgICAoc1tgJHtzbG90fToke2lkLnRvU3RyaW5nKDE2KX1gXSB8fCAwKSArIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG07XG4gIH1cblxuICAvLyBUT0RPIC0gZm9yIGVhY2ggc3ByaXRlIHBhdHRlcm4gdGFibGUsIGZpbmQgYWxsIHRoZSBwYWxldHRlcyB0aGF0IGl0IHVzZXMuXG4gIC8vIEZpbmQgYWxsIHRoZSBtb25zdGVycyBvbiBpdC4gIFdlIGNhbiBwcm9iYWJseSBhbGxvdyBhbnkgcGFsZXR0ZSBzbyBsb25nXG4gIC8vIGFzIG9uZSBvZiB0aGUgcGFsZXR0ZXMgaXMgdXNlZCB3aXRoIHRoYXQgcGF0dGVybi5cbiAgLy8gVE9ETyAtIG1heCBudW1iZXIgb2YgaW5zdGFuY2VzIG9mIGEgbW9uc3RlciBvbiBhbnkgbWFwIC0gaS5lLiBhdm9pZCBoYXZpbmdcbiAgLy8gZml2ZSBmbHllcnMgb24gdGhlIHNhbWUgbWFwIVxuXG4gIC8vIDQ2MCAtIDAgbWVhbnMgZWl0aGVyIGZseWVyIG9yIHN0YXRpb25hcnlcbiAgLy8gICAgICAgICAgIC0gc3RhdGlvbmFyeSBoYXMgNGEwIH4gMjA0LDIwNSwyMDZcbiAgLy8gICAgICAgICAgICAgKGtyYWtlbiwgc3dhbXAgcGxhbnQsIHNvcmNlcm9yKVxuICAvLyAgICAgICA2IC0gbWltaWNcbiAgLy8gICAgICAgMWYgLSBzd2ltbWVyXG4gIC8vICAgICAgIDU0IC0gdG9tYXRvIGFuZCBiaXJkXG4gIC8vICAgICAgIDU1IC0gc3dpbW1lclxuICAvLyAgICAgICA1NyAtIG5vcm1hbFxuICAvLyAgICAgICA1ZiAtIGFsc28gbm9ybWFsLCBidXQgbWVkdXNhIGhlYWQgaXMgZmx5ZXI/XG4gIC8vICAgICAgIDc3IC0gc29sZGllcnMsIGljZSB6b21iaWVcblxuLy8gICAvLyBEb24ndCB3b3JyeSBhYm91dCBvdGhlciBkYXRhcyB5ZXRcbi8vICAgd3JpdGVPYmplY3REYXRhKCkge1xuLy8gICAgIC8vIGJ1aWxkIHVwIGEgbWFwIGZyb20gYWN0dWFsIGRhdGEgdG8gaW5kZXhlcyB0aGF0IHBvaW50IHRvIGl0XG4vLyAgICAgbGV0IGFkZHIgPSAweDFhZTAwO1xuLy8gICAgIGNvbnN0IGRhdGFzID0ge307XG4vLyAgICAgZm9yIChjb25zdCBvYmplY3Qgb2YgdGhpcy5vYmplY3RzKSB7XG4vLyAgICAgICBjb25zdCBzZXIgPSBvYmplY3Quc2VyaWFsaXplKCk7XG4vLyAgICAgICBjb25zdCBkYXRhID0gc2VyLmpvaW4oJyAnKTtcbi8vICAgICAgIGlmIChkYXRhIGluIGRhdGFzKSB7XG4vLyAvL2NvbnNvbGUubG9nKGAkJHtvYmplY3QuaWQudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsMCl9OiBSZXVzaW5nIGV4aXN0aW5nIGRhdGEgJCR7ZGF0YXNbZGF0YV0udG9TdHJpbmcoMTYpfWApO1xuLy8gICAgICAgICBvYmplY3Qub2JqZWN0RGF0YUJhc2UgPSBkYXRhc1tkYXRhXTtcbi8vICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIG9iamVjdC5vYmplY3REYXRhQmFzZSA9IGFkZHI7XG4vLyAgICAgICAgIGRhdGFzW2RhdGFdID0gYWRkcjtcbi8vIC8vY29uc29sZS5sb2coYCQke29iamVjdC5pZC50b1N0cmluZygxNikucGFkU3RhcnQoMiwwKX06IERhdGEgaXMgYXQgJCR7XG4vLyAvLyAgICAgICAgICAgICBhZGRyLnRvU3RyaW5nKDE2KX06ICR7QXJyYXkuZnJvbShzZXIsIHg9PickJyt4LnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLDApKS5qb2luKCcsJyl9YCk7XG4vLyAgICAgICAgIGFkZHIgKz0gc2VyLmxlbmd0aDtcbi8vIC8vIHNlZWQgMzUxNzgxMTAzNlxuLy8gICAgICAgfVxuLy8gICAgICAgb2JqZWN0LndyaXRlKCk7XG4vLyAgICAgfVxuLy8gLy9jb25zb2xlLmxvZyhgV3JvdGUgb2JqZWN0IGRhdGEgZnJvbSAkMWFjMDAgdG8gJCR7YWRkci50b1N0cmluZygxNikucGFkU3RhcnQoNSwgMClcbi8vIC8vICAgICAgICAgICAgIH0sIHNhdmluZyAkezB4MWJlOTEgLSBhZGRyfSBieXRlcy5gKTtcbi8vICAgICByZXR1cm4gYWRkcjtcbi8vICAgfVxuXG4gIGFzc2VtYmxlcigpOiBBc3NlbWJsZXIge1xuICAgIC8vIFRPRE8gLSBjb25zaWRlciBzZXR0aW5nIGEgc2VnbWVudCBwcmVmaXhcbiAgICByZXR1cm4gbmV3IEFzc2VtYmxlcigpO1xuICB9XG5cbiAgd3JpdGVEYXRhKCkge1xuICAgIC8vIFdyaXRlIHRoZSBvcHRpb25zIGZpcnN0XG4gICAgLy8gY29uc3Qgd3JpdGVyID0gbmV3IFdyaXRlcih0aGlzLmNocik7XG4gICAgLy8gd3JpdGVyLm1vZHVsZXMucHVzaCguLi50aGlzLm1vZHVsZXMpO1xuICAgIC8vIE1hcERhdGFcbiAgICAvL3dyaXRlci5hbGxvYygweDE0NGY4LCAweDE3ZTAwKTtcbiAgICAvLyBOcGNEYXRhXG4gICAgLy8gTk9URTogMTkzZjkgaXMgYXNzdW1pbmcgJGZiIGlzIHRoZSBsYXN0IGxvY2F0aW9uIElELiAgSWYgd2UgYWRkIG1vcmUgbG9jYXRpb25zIGF0XG4gICAgLy8gdGhlIGVuZCB0aGVuIHdlJ2xsIG5lZWQgdG8gcHVzaCB0aGlzIGJhY2sgYSBmZXcgbW9yZSBieXRlcy4gIFdlIGNvdWxkIHBvc3NpYmx5XG4gICAgLy8gZGV0ZWN0IHRoZSBiYWQgd3JpdGUgYW5kIHRocm93IGFuIGVycm9yLCBhbmQvb3IgY29tcHV0ZSB0aGUgbWF4IGxvY2F0aW9uIElELlxuICAgIC8vd3JpdGVyLmFsbG9jKDB4MTkzZjksIDB4MWFjMDApO1xuICAgIC8vIE9iamVjdERhdGEgKGluZGV4IGF0IDFhYzAwLi4xYWUwMClcbiAgICAvL3dyaXRlci5hbGxvYygweDFhZTAwLCAweDFiZDAwKTsgLy8gc2F2ZSA1MTIgYnl0ZXMgYXQgZW5kIGZvciBzb21lIGV4dHJhIGNvZGVcbiAgICBjb25zdCBhID0gdGhpcy5hc3NlbWJsZXIoKTtcbiAgICAvLyBOcGNTcGF3bkNvbmRpdGlvbnNcbiAgICBmcmVlKGEsICQwZSwgMHg4NzdhLCAweDg5NWQpO1xuICAgIC8vIE5wY0RpYWxvZ1xuICAgIGZyZWUoYSwgJDBlLCAweDhhZTUsIDB4OThmNCk7XG4gICAgLy8gSXRlbUdldERhdGEgKHRvIDFlMDY1KSArIEl0ZW1Vc2VEYXRhXG4gICAgZnJlZShhLCAkMGUsIDB4OWRlNiwgMHhhMDAwKTtcbiAgICBmcmVlKGEsICQwZiwgMHhhMDAwLCAweGExMDYpO1xuICAgIC8vIFRyaWdnZXJEYXRhXG4gICAgLy8gTk9URTogVGhlcmUncyBzb21lIGZyZWUgc3BhY2UgYXQgMWUzYzAuLjFlM2YwLCBidXQgd2UgdXNlIHRoaXMgZm9yIHRoZVxuICAgIC8vIENoZWNrQmVsb3dCb3NzIHRyaWdnZXJzLlxuICAgIGZyZWUoYSwgJDBmLCAweGEyMDAsIDB4YTNjMCk7XG4gICAgLy8gSXRlbU1lbnVOYW1lXG4gICAgZnJlZShhLCAkMTAsIDB4OTExYSwgMHg5NDY4KTtcbiAgICAvLyBrZWVwIGl0ZW0gJDQ5IFwiICAgICAgICBcIiB3aGljaCBpcyBhY3R1YWxseSB1c2VkIHNvbWV3aGVyZT9cbiAgICAvLyB3cml0ZXIuYWxsb2MoMHgyMTQ3MSwgMHgyMTRmMSk7IC8vIFRPRE8gLSBkbyB3ZSBuZWVkIGFueSBvZiB0aGlzP1xuICAgIC8vIEl0ZW1NZXNzYWdlTmFtZVxuICAgIC8vIHdyaXRlci5hbGxvYygweDI4ZTgxLCAweDI5MjJiKTsgLy8gTk9URTogdW5jb3ZlcmVkIHRocnUgMjk0MDBcbiAgICAvLyB3cml0ZXIuYWxsb2MoMHgyOTIyYiwgMHgyOTQwMCk7IC8vIFRPRE8gLSBuZWVkZWQ/XG4gICAgLy8gTk9URTogb25jZSB3ZSByZWxlYXNlIHRoZSBvdGhlciBtZXNzYWdlIHRhYmxlcywgdGhpcyB3aWxsIGp1c3QgYmUgb25lIGdpYW50IGJsb2NrLlxuXG4gICAgLy8gTWVzc2FnZSB0YWJsZSBwYXJ0c1xuICAgIC8vIHdyaXRlci5hbGxvYygweDI4MDAwLCAweDI4M2ZlKTtcbiAgICAvLyBNZXNzYWdlIHRhYmxlc1xuICAgIC8vIFRPRE8gLSB3ZSBkb24ndCB1c2UgdGhlIHdyaXRlciB0byBhbGxvY2F0ZSB0aGUgYWJicmV2aWF0aW9uIHRhYmxlcywgYnV0IHdlIGNvdWxkXG4gICAgLy93cml0ZXIuZnJlZSgnMHgyYTAwMCwgMHgyZmMwMCk7XG5cbiAgICAvLyBpZiAodGhpcy50ZWxlcGF0aHlUYWJsZXNBZGRyZXNzKSB7XG4gICAgLy8gICB3cml0ZXIuYWxsb2MoMHgxZDhmNCwgMHgxZGIwMCk7IC8vIGxvY2F0aW9uIHRhYmxlIGFsbCB0aGUgd2F5IHRocnUgbWFpblxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICB3cml0ZXIuYWxsb2MoMHgxZGE0YywgMHgxZGIwMCk7IC8vIGV4aXN0aW5nIG1haW4gdGFibGUgaXMgaGVyZS5cbiAgICAvLyB9XG5cbiAgICBjb25zdCBtb2R1bGVzID0gWy4uLnRoaXMubW9kdWxlcywgYS5tb2R1bGUoKV07XG4gICAgY29uc3Qgd3JpdGVBbGwgPSAod3JpdGFibGVzOiB7d3JpdGUoKTogTW9kdWxlW119W10pID0+IHtcbiAgICAgIGZvciAoY29uc3QgdyBvZiB3cml0YWJsZXMpIHtcbiAgICAgICAgbW9kdWxlcy5wdXNoKC4uLncud3JpdGUoKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBtb2R1bGVzLnB1c2goLi4udGhpcy5sb2NhdGlvbnMud3JpdGUoKSk7XG4gICAgd3JpdGVBbGwodGhpcy5vYmplY3RzKTtcbiAgICB3cml0ZUFsbCh0aGlzLmhpdGJveGVzKTtcbiAgICB3cml0ZUFsbCh0aGlzLnRyaWdnZXJzKTtcbiAgICB3cml0ZUFsbCh0aGlzLm5wY3MpO1xuICAgIHdyaXRlQWxsKHRoaXMudGlsZXNldHMpO1xuICAgIHdyaXRlQWxsKHRoaXMudGlsZUVmZmVjdHMpO1xuICAgIHdyaXRlQWxsKHRoaXMuc2NyZWVucyk7XG4gICAgd3JpdGVBbGwodGhpcy5hZEhvY1NwYXducyk7XG4gICAgbW9kdWxlcy5wdXNoKC4uLnRoaXMuaXRlbUdldHMud3JpdGUoKSk7XG4gICAgbW9kdWxlcy5wdXNoKC4uLnRoaXMuc2xvdHMud3JpdGUoKSk7XG4gICAgbW9kdWxlcy5wdXNoKC4uLnRoaXMuaXRlbXMud3JpdGUoKSk7XG4gICAgbW9kdWxlcy5wdXNoKC4uLnRoaXMuc2hvcHMud3JpdGUoKSk7XG4gICAgd3JpdGVBbGwodGhpcy5ib3NzS2lsbHMpO1xuICAgIHdyaXRlQWxsKHRoaXMucGF0dGVybnMpO1xuICAgIG1vZHVsZXMucHVzaCguLi50aGlzLndpbGRXYXJwLndyaXRlKCkpO1xuICAgIG1vZHVsZXMucHVzaCguLi50aGlzLnRvd25XYXJwLndyaXRlKCkpO1xuICAgIG1vZHVsZXMucHVzaCguLi50aGlzLmNvaW5Ecm9wcy53cml0ZSgpKTtcbiAgICBtb2R1bGVzLnB1c2goLi4udGhpcy5zY2FsaW5nLndyaXRlKCkpO1xuICAgIG1vZHVsZXMucHVzaCguLi50aGlzLmJvc3Nlcy53cml0ZSgpKTtcbiAgICBtb2R1bGVzLnB1c2goLi4udGhpcy5yYW5kb21OdW1iZXJzLndyaXRlKCkpO1xuICAgIG1vZHVsZXMucHVzaCguLi50aGlzLnRlbGVwYXRoeS53cml0ZSgpKTtcbiAgICBtb2R1bGVzLnB1c2goLi4udGhpcy5tZXNzYWdlcy53cml0ZSgpKTtcblxuICAgIGNvbnN0IGxpbmtlciA9IG5ldyBMaW5rZXIoKTtcbiAgICBsaW5rZXIuYmFzZSh0aGlzLnByZywgMCk7XG4gICAgZm9yIChjb25zdCBtIG9mIG1vZHVsZXMpIHtcbiAgICAgIGxpbmtlci5yZWFkKG0pO1xuICAgIH1cbiAgICBsaW5rZXIubGluaygpLmFwcGx5KHRoaXMucHJnKTtcbiAgICBsaW5rZXIucmVwb3J0KCk7XG5cbiAgICBjb25zdCBleHBvcnRzID0gbGlua2VyLmV4cG9ydHMoKTtcbiAgICB0aGlzLnVuaXF1ZUl0ZW1UYWJsZUFkZHJlc3MgPSBleHBvcnRzLmdldCgnS2V5SXRlbURhdGEnKSEub2Zmc2V0ITtcbiAgICB0aGlzLnNob3BDb3VudCA9IDExO1xuICAgIHRoaXMuc2hvcERhdGFUYWJsZXNBZGRyZXNzID0gZXhwb3J0cy5nZXQoJ1Nob3BEYXRhJyk/Lm9mZnNldCB8fCAwO1xuICAgIC8vIERvbid0IGluY2x1ZGUgdGhlc2UgaW4gdGhlIGxpbmtlcj8/P1xuICAgIFJvbS5TSE9QX0NPVU5ULnNldCh0aGlzLnByZywgdGhpcy5zaG9wQ291bnQpO1xuICAgIFJvbS5TQ0FMSU5HX0xFVkVMUy5zZXQodGhpcy5wcmcsIHRoaXMuc2NhbGluZ0xldmVscyk7XG4gICAgUm9tLlVOSVFVRV9JVEVNX1RBQkxFLnNldCh0aGlzLnByZywgdGhpcy51bmlxdWVJdGVtVGFibGVBZGRyZXNzKTtcbiAgICBSb20uU0hPUF9EQVRBX1RBQkxFUy5zZXQodGhpcy5wcmcsIHRoaXMuc2hvcERhdGFUYWJsZXNBZGRyZXNzIHx8IDApO1xuICAgIFJvbS5PTUlUX0lURU1fR0VUX0RBVEFfU1VGRklYLnNldCh0aGlzLnByZywgdGhpcy5vbWl0SXRlbUdldERhdGFTdWZmaXgpO1xuICAgIFJvbS5PTUlUX0xPQ0FMX0RJQUxPR19TVUZGSVguc2V0KHRoaXMucHJnLCB0aGlzLm9taXRMb2NhbERpYWxvZ1N1ZmZpeCk7XG4gICAgUm9tLkNPTVBSRVNTRURfTUFQREFUQS5zZXQodGhpcy5wcmcsIHRoaXMuY29tcHJlc3NlZE1hcERhdGEpO1xuICB9XG5cbiAgYW5hbHl6ZVRpbGVzKCkge1xuICAgIC8vIEZvciBhbnkgZ2l2ZW4gdGlsZSBpbmRleCwgd2hhdCBzY3JlZW5zIGRvZXMgaXQgYXBwZWFyIG9uLlxuICAgIC8vIEZvciB0aG9zZSBzY3JlZW5zLCB3aGljaCB0aWxlc2V0cyBkb2VzICppdCogYXBwZWFyIG9uLlxuICAgIC8vIFRoYXQgdGlsZSBJRCBpcyBsaW5rZWQgYWNyb3NzIGFsbCB0aG9zZSB0aWxlc2V0cy5cbiAgICAvLyBGb3JtcyBhIHBhcnRpdGlvbmluZyBmb3IgZWFjaCB0aWxlIElEID0+IHVuaW9uLWZpbmQuXG4gICAgLy8gR2l2ZW4gdGhpcyBwYXJ0aXRpb25pbmcsIGlmIEkgd2FudCB0byBtb3ZlIGEgdGlsZSBvbiBhIGdpdmVuXG4gICAgLy8gdGlsZXNldCwgYWxsIEkgbmVlZCB0byBkbyBpcyBmaW5kIGFub3RoZXIgdGlsZSBJRCB3aXRoIHRoZVxuICAgIC8vIHNhbWUgcGFydGl0aW9uIGFuZCBzd2FwIHRoZW0/XG5cbiAgICAvLyBNb3JlIGdlbmVyYWxseSwgd2UgY2FuIGp1c3QgcGFydGl0aW9uIHRoZSB0aWxlc2V0cy5cblxuICAgIC8vIEZvciBlYWNoIHNjcmVlbiwgZmluZCBhbGwgdGlsZXNldHMgVCBmb3IgdGhhdCBzY3JlZW5cbiAgICAvLyBUaGVuIGZvciBlYWNoIHRpbGUgb24gdGhlIHNjcmVlbiwgdW5pb24gVCBmb3IgdGhhdCB0aWxlLlxuXG4gICAgLy8gR2l2ZW4gYSB0aWxlc2V0IGFuZCBhIG1ldGF0aWxlIElELCBmaW5kIGFsbCB0aGUgc2NyZWVucyB0aGF0ICgxKSBhcmUgcmVuZGVyZWRcbiAgICAvLyB3aXRoIHRoYXQgdGlsZXNldCwgYW5kIChiKSB0aGF0IGNvbnRhaW4gdGhhdCBtZXRhdGlsZTsgdGhlbiBmaW5kIGFsbCAqb3RoZXIqXG4gICAgLy8gdGlsZXNldHMgdGhhdCB0aG9zZSBzY3JlZW5zIGFyZSBldmVyIHJlbmRlcmVkIHdpdGguXG5cbiAgICAvLyBHaXZlbiBhIHNjcmVlbiwgZmluZCBhbGwgYXZhaWxhYmxlIG1ldGF0aWxlIElEcyB0aGF0IGNvdWxkIGJlIGFkZGVkIHRvIGl0XG4gICAgLy8gd2l0aG91dCBjYXVzaW5nIHByb2JsZW1zIHdpdGggb3RoZXIgc2NyZWVucyB0aGF0IHNoYXJlIGFueSB0aWxlc2V0cy5cbiAgICAvLyAgLT4gdW51c2VkIChvciB1c2VkIGJ1dCBzaGFyZWQgZXhjbHVzaXZlbHkpIGFjcm9zcyBhbGwgdGlsZXNldHMgdGhlIHNjcmVlbiBtYXkgdXNlXG5cbiAgICAvLyBXaGF0IEkgd2FudCBmb3Igc3dhcHBpbmcgaXMgdGhlIGZvbGxvd2luZzpcbiAgICAvLyAgMS4gZmluZCBhbGwgc2NyZWVucyBJIHdhbnQgdG8gd29yayBvbiA9PiB0aWxlc2V0c1xuICAgIC8vICAyLiBmaW5kIHVudXNlZCBmbGFnZ2FiYmxlIHRpbGVzIGluIHRoZSBoYXJkZXN0IG9uZSxcbiAgICAvLyAgICAgd2hpY2ggYXJlIGFsc28gSVNPTEFURUQgaW4gdGhlIG90aGVycy5cbiAgICAvLyAgMy4gd2FudCB0aGVzZSB0aWxlcyB0byBiZSB1bnVzZWQgaW4gQUxMIHJlbGV2YW50IHRpbGVzZXRzXG4gICAgLy8gIDQuIHRvIG1ha2UgdGhpcyBzbywgZmluZCAqb3RoZXIqIHVudXNlZCBmbGFnZ2FibGUgdGlsZXMgaW4gb3RoZXIgdGlsZXNldHNcbiAgICAvLyAgNS4gc3dhcCB0aGUgdW51c2VkIHdpdGggdGhlIGlzb2xhdGVkIHRpbGVzIGluIHRoZSBvdGhlciB0aWxlc2V0c1xuXG4gICAgLy8gQ2F2ZXM6XG4gICAgLy8gIDBhOiAgICAgIDkwIC8gOWNcbiAgICAvLyAgMTU6IDgwIC8gOTAgLyA5Y1xuICAgIC8vICAxOTogICAgICA5MCAgICAgICh3aWxsIGFkZCB0byA4MD8pXG4gICAgLy8gIDNlOiAgICAgIDkwXG4gICAgLy9cbiAgICAvLyBJZGVhbGx5IHdlIGNvdWxkIHJldXNlIDgwJ3MgMS8yLzMvNCBmb3IgdGhpc1xuICAgIC8vICAwMTogOTAgfCA5NCA5Y1xuICAgIC8vICAwMjogOTAgfCA5NCA5Y1xuICAgIC8vICAwMzogICAgICA5NCA5Y1xuICAgIC8vICAwNDogOTAgfCA5NCA5Y1xuICAgIC8vXG4gICAgLy8gTmVlZCA0IG90aGVyIGZsYWdnYWJsZSB0aWxlIGluZGljZXMgd2UgY2FuIHN3YXAgdG8/XG4gICAgLy8gICA5MDogPT4gKDEsMiBuZWVkIGZsYWdnYWJsZTsgMyB1bnVzZWQ7IDQgYW55KSA9PiAwNywgMGUsIDEwLCAxMiwgMTMsIC4uLiwgMjAsIDIxLCAyMiwgLi4uXG4gICAgLy8gICA5NCA5YzogPT4gZG9uJ3QgbmVlZCBhbnkgZmxhZ2dhYmxlID0+IDA1LCAzYywgNjgsIDgzLCA4OCwgODksIDhhLCA5MCwgLi4uXG4gIH1cblxuICBkaXNqb2ludFRpbGVzZXRzKCkge1xuICAgIGNvbnN0IHRpbGVzZXRCeVNjcmVlbjogQXJyYXk8U2V0PG51bWJlcj4+ID0gW107XG4gICAgZm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMpIHtcbiAgICAgIGlmICghbG9jLnVzZWQpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgdGlsZXNldCA9IGxvYy50aWxlc2V0O1xuICAgICAgY29uc3QgZXh0ID0gbG9jLmV4dGVuZGVkID8gMHgxMDAgOiAwO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgbG9jLnNjcmVlbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHJvdykge1xuICAgICAgICAgICh0aWxlc2V0QnlTY3JlZW5bcyArIGV4dF0gfHwgKHRpbGVzZXRCeVNjcmVlbltzICsgZXh0XSA9IG5ldyBTZXQoKSkpLmFkZCh0aWxlc2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0aWxlcyA9IHNlcSgyNTYsICgpID0+IG5ldyBVbmlvbkZpbmQ8bnVtYmVyPigpKTtcbiAgICBmb3IgKGxldCBzID0gMDsgcyA8IHRpbGVzZXRCeVNjcmVlbi5sZW5ndGg7IHMrKykge1xuICAgICAgaWYgKCF0aWxlc2V0QnlTY3JlZW5bc10pIGNvbnRpbnVlO1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuc2NyZWVuc1tzXS5hbGxUaWxlc1NldCgpKSB7XG4gICAgICAgIHRpbGVzW3RdLnVuaW9uKFsuLi50aWxlc2V0QnlTY3JlZW5bc11dKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gb3V0cHV0XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aWxlcy5sZW5ndGg7IHQrKykge1xuICAgICAgY29uc3QgcCA9IHRpbGVzW3RdLnNldHMoKVxuICAgICAgICAgIC5tYXAoKHM6IFNldDxudW1iZXI+KSA9PiBbLi4uc10ubWFwKGhleCkuam9pbignICcpKVxuICAgICAgICAgIC5qb2luKCcgfCAnKTtcbiAgICAgIGNvbnNvbGUubG9nKGBUaWxlICR7aGV4KHQpfTogJHtwfWApO1xuICAgIH1cbiAgICAvLyAgIGlmICghdGlsZXNldEJ5U2NyZWVuW2ldKSB7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGBObyB0aWxlc2V0IGZvciBzY3JlZW4gJHtpLnRvU3RyaW5nKDE2KX1gKTtcbiAgICAvLyAgICAgY29udGludWU7XG4gICAgLy8gICB9XG4gICAgLy8gICB1bmlvbi51bmlvbihbLi4udGlsZXNldEJ5U2NyZWVuW2ldXSk7XG4gICAgLy8gfVxuICAgIC8vIHJldHVybiB1bmlvbi5zZXRzKCk7XG4gIH1cblxuICAvLyBDeWNsZXMgYXJlIG5vdCBhY3R1YWxseSBjeWNsaWMgLSBhbiBleHBsaWNpdCBsb29wIGF0IHRoZSBlbmQgaXMgcmVxdWlyZWQgdG8gc3dhcC5cbiAgLy8gVmFyaWFuY2U6IFsxLCAyLCBudWxsXSB3aWxsIGNhdXNlIGluc3RhbmNlcyBvZiAxIHRvIGJlY29tZSAyIGFuZCB3aWxsXG4gIC8vICAgICAgICAgICBjYXVzZSBwcm9wZXJ0aWVzIG9mIDEgdG8gYmUgY29waWVkIGludG8gc2xvdCAyXG4gIC8vIENvbW1vbiB1c2FnZSBpcyB0byBzd2FwIHRoaW5ncyBvdXQgb2YgdGhlIHdheSBhbmQgdGhlbiBjb3B5IGludG8gdGhlXG4gIC8vIG5ld2x5LWZyZWVkIHNsb3QuICBTYXkgd2Ugd2FudGVkIHRvIGZyZWUgdXAgc2xvdHMgWzEsIDIsIDMsIDRdIGFuZFxuICAvLyBoYWQgYXZhaWxhYmxlL2ZyZWUgc2xvdHMgWzUsIDYsIDcsIDhdIGFuZCB3YW50IHRvIGNvcHkgZnJvbSBbOSwgYSwgYiwgY10uXG4gIC8vIFRoZW4gY3ljbGVzIHdpbGwgYmUgWzEsIDUsIDldID8/PyBub1xuICAvLyAgLSBwcm9iYWJseSB3YW50IHRvIGRvIHNjcmVlbnMgc2VwYXJhdGVseSBmcm9tIHRpbGVzZXRzLi4uP1xuICAvLyBOT1RFIC0gd2UgZG9uJ3QgYWN0dWFsbHkgd2FudCB0byBjaGFuZ2UgdGlsZXMgZm9yIHRoZSBsYXN0IGNvcHkuLi4hXG4gIC8vICAgaW4gdGhpcyBjYXNlLCB0c1s1XSA8LSB0c1sxXSwgdHNbMV0gPC0gdHNbOV0sIHNjcmVlbi5tYXAoMSAtPiA1KVxuICAvLyAgIHJlcGxhY2UoWzB4OTBdLCBbNSwgMSwgfjldKVxuICAvLyAgICAgPT4gMXMgcmVwbGFjZWQgd2l0aCA1cyBpbiBzY3JlZW5zIGJ1dCA5cyBOT1QgcmVwbGFjZWQgd2l0aCAxcy5cbiAgLy8gSnVzdCBidWlsZCB0aGUgcGFydGl0aW9uIG9uY2UgbGF6aWx5PyB0aGVuIGNhbiByZXVzZS4uLlxuICAvLyAgIC0gZW5zdXJlIGJvdGggc2lkZXMgb2YgcmVwbGFjZW1lbnQgaGF2ZSBjb3JyZWN0IHBhcnRpdGlvbmluZz9FXG4gIC8vICAgICBvciBqdXN0IGRvIGl0IG9mZmxpbmUgLSBpdCdzIHNpbXBsZXJcbiAgLy8gVE9ETyAtIFNhbml0eSBjaGVjaz8gIFdhbnQgdG8gbWFrZSBzdXJlIG5vYm9keSBpcyB1c2luZyBjbG9iYmVyZWQgdGlsZXM/XG4gIHN3YXBNZXRhdGlsZXModGlsZXNldHM6IG51bWJlcltdLCAuLi5jeWNsZXM6IChudW1iZXIgfCBudW1iZXJbXSlbXVtdKSB7XG4gICAgLy8gUHJvY2VzcyB0aGUgY3ljbGVzXG4gICAgY29uc3QgcmV2ID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcbiAgICBjb25zdCByZXZBcnI6IG51bWJlcltdID0gc2VxKDB4MTAwKTtcbiAgICBjb25zdCBhbHQgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xuICAgIGNvbnN0IGNwbCA9ICh4OiBudW1iZXIgfCBudW1iZXJbXSk6IG51bWJlciA9PiBBcnJheS5pc0FycmF5KHgpID8geFswXSA6IHggPCAwID8gfnggOiB4O1xuICAgIGZvciAoY29uc3QgY3ljbGUgb2YgY3ljbGVzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN5Y2xlLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjeWNsZVtpXSkpIHtcbiAgICAgICAgICBjb25zdCBhcnIgPSBjeWNsZVtpXSBhcyBudW1iZXJbXTtcbiAgICAgICAgICBhbHQuc2V0KGFyclswXSwgYXJyWzFdKTtcbiAgICAgICAgICBjeWNsZVtpXSA9IGFyclswXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjeWNsZS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgY29uc3QgaiA9IGN5Y2xlW2ldIGFzIG51bWJlcjtcbiAgICAgICAgY29uc3QgayA9IGN5Y2xlW2kgKyAxXSBhcyBudW1iZXI7XG4gICAgICAgIGlmIChqIDwgMCB8fCBrIDwgMCkgY29udGludWU7XG4gICAgICAgIHJldi5zZXQoaywgaik7XG4gICAgICAgIHJldkFycltrXSA9IGo7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGNvbnN0IHJlcGxhY2VtZW50U2V0ID0gbmV3IFNldChyZXBsYWNlbWVudHMua2V5cygpKTtcbiAgICAvLyBGaW5kIGluc3RhbmNlcyBpbiAoMSkgc2NyZWVucywgKDIpIHRpbGVzZXRzIGFuZCBhbHRlcm5hdGVzLCAoMykgdGlsZUVmZmVjdHNcbiAgICBjb25zdCBzY3JlZW5zID0gbmV3IFNldDxTY3JlZW4+KCk7XG4gICAgY29uc3QgdGlsZUVmZmVjdHMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgICBjb25zdCB0aWxlc2V0c1NldCA9IG5ldyBTZXQodGlsZXNldHMpO1xuICAgIGZvciAoY29uc3QgbCBvZiB0aGlzLmxvY2F0aW9ucykge1xuICAgICAgaWYgKCFsLnVzZWQpIGNvbnRpbnVlO1xuICAgICAgaWYgKCF0aWxlc2V0c1NldC5oYXMobC50aWxlc2V0KSkgY29udGludWU7XG4gICAgICB0aWxlRWZmZWN0cy5hZGQobC50aWxlRWZmZWN0cyk7XG4gICAgICBmb3IgKGNvbnN0IHNjcmVlbiBvZiBsLmFsbFNjcmVlbnMoKSkge1xuICAgICAgICBzY3JlZW5zLmFkZChzY3JlZW4pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBEbyByZXBsYWNlbWVudHMuXG4gICAgLy8gMS4gc2NyZWVuczogWzUsIDEsIH45XSA9PiBjaGFuZ2UgMXMgaW50byA1c1xuICAgIGZvciAoY29uc3Qgc2NyZWVuIG9mIHNjcmVlbnMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzY3JlZW4udGlsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgc2NyZWVuLnRpbGVzW2ldID0gcmV2QXJyW3NjcmVlbi50aWxlc1tpXV07XG4gICAgICB9XG4gICAgfVxuICAgIC8vIDIuIHRpbGVzZXRzOiBbNSwgMSB+OV0gPT4gY29weSA1IDw9IDEgYW5kIDEgPD0gOVxuICAgIGZvciAoY29uc3QgdHNpZCBvZiB0aWxlc2V0c1NldCkge1xuICAgICAgY29uc3QgdGlsZXNldCA9IHRoaXMudGlsZXNldHNbKHRzaWQgJiAweDdmKSA+Pj4gMl07XG4gICAgICBmb3IgKGNvbnN0IGN5Y2xlIG9mIGN5Y2xlcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN5Y2xlLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGEgPSBjcGwoY3ljbGVbaV0pO1xuICAgICAgICAgIGNvbnN0IGIgPSBjcGwoY3ljbGVbaSArIDFdKTtcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICAgICAgdGlsZXNldC50aWxlc1tqXVthXSA9IHRpbGVzZXQudGlsZXNbal1bYl07XG4gICAgICAgICAgfVxuICAgICAgICAgIHRpbGVzZXQuYXR0cnNbYV0gPSB0aWxlc2V0LmF0dHJzW2JdO1xuICAgICAgICAgIGlmIChiIDwgMHgyMCAmJiB0aWxlc2V0LmFsdGVybmF0ZXNbYl0gIT09IGIpIHtcbiAgICAgICAgICAgIGlmIChhID49IDB4MjApIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHVuZmxhZzogJHt0c2lkfSAke2F9ICR7Yn0gJHt0aWxlc2V0LmFsdGVybmF0ZXNbYl19YCk7XG4gICAgICAgICAgICB0aWxlc2V0LmFsdGVybmF0ZXNbYV0gPSB0aWxlc2V0LmFsdGVybmF0ZXNbYl07XG4gICAgICAgICAgICBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW2EsIGJdIG9mIGFsdCkge1xuICAgICAgICB0aWxlc2V0LmFsdGVybmF0ZXNbYV0gPSBiO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAzLiB0aWxlRWZmZWN0c1xuICAgIGZvciAoY29uc3QgdGVpZCBvZiB0aWxlRWZmZWN0cykge1xuICAgICAgY29uc3QgdGlsZUVmZmVjdCA9IHRoaXMudGlsZUVmZmVjdHNbdGVpZCAtIDB4YjNdO1xuICAgICAgZm9yIChjb25zdCBjeWNsZSBvZiBjeWNsZXMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjeWNsZS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBhID0gY3BsKGN5Y2xlW2ldKTtcbiAgICAgICAgICBjb25zdCBiID0gY3BsKGN5Y2xlW2kgKyAxXSk7XG4gICAgICAgICAgdGlsZUVmZmVjdC5lZmZlY3RzW2FdID0gdGlsZUVmZmVjdC5lZmZlY3RzW2JdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgYWx0LmtleXMoKSkge1xuICAgICAgICAvLyBUaGlzIGJpdCBpcyByZXF1aXJlZCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBhbHRlcm5hdGl2ZSB0aWxlJ3NcbiAgICAgICAgLy8gZWZmZWN0IHNob3VsZCBiZSBjb25zdWx0ZWQuICBTaW1wbHkgaGF2aW5nIHRoZSBmbGFnIGFuZCB0aGVcbiAgICAgICAgLy8gdGlsZSBpbmRleCA8ICQyMCBpcyBub3Qgc3VmZmljaWVudC5cbiAgICAgICAgdGlsZUVmZmVjdC5lZmZlY3RzW2FdIHw9IDB4MDg7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIERvbmU/IT9cbiAgfVxuXG4gIG1vdmVGbGFnKG9sZEZsYWc6IG51bWJlciwgbmV3RmxhZzogbnVtYmVyKSB7XG4gICAgLy8gbmVlZCB0byB1cGRhdGUgdHJpZ2dlcnMsIHNwYXducywgZGlhbG9nc1xuICAgIGZ1bmN0aW9uIHJlcGxhY2UoYXJyOiBudW1iZXJbXSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFycltpXSA9PT0gb2xkRmxhZykgYXJyW2ldID0gbmV3RmxhZztcbiAgICAgICAgaWYgKGFycltpXSA9PT0gfm9sZEZsYWcpIGFycltpXSA9IH5uZXdGbGFnO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHRyaWdnZXIgb2YgdGhpcy50cmlnZ2Vycykge1xuICAgICAgcmVwbGFjZSh0cmlnZ2VyLmNvbmRpdGlvbnMpO1xuICAgICAgcmVwbGFjZSh0cmlnZ2VyLmZsYWdzKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBucGMgb2YgdGhpcy5ucGNzKSB7XG4gICAgICBmb3IgKGNvbnN0IGNvbmRzIG9mIG5wYy5zcGF3bkNvbmRpdGlvbnMudmFsdWVzKCkpIHJlcGxhY2UoY29uZHMpO1xuICAgICAgZm9yIChjb25zdCBkaWFsb2dzIG9mIFtucGMuZ2xvYmFsRGlhbG9ncywgLi4ubnBjLmxvY2FsRGlhbG9ncy52YWx1ZXMoKV0pIHtcbiAgICAgICAgZm9yIChjb25zdCBkaWFsb2cgb2YgZGlhbG9ncykge1xuICAgICAgICAgIGlmIChkaWFsb2cuY29uZGl0aW9uID09PSBvbGRGbGFnKSBkaWFsb2cuY29uZGl0aW9uID0gbmV3RmxhZztcbiAgICAgICAgICBpZiAoZGlhbG9nLmNvbmRpdGlvbiA9PT0gfm9sZEZsYWcpIGRpYWxvZy5jb25kaXRpb24gPSB+bmV3RmxhZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBhbHNvIG5lZWQgdG8gdXBkYXRlIG1hcCBmbGFncyBpZiA+PSAkMjAwXG4gICAgaWYgKChvbGRGbGFnICYgfjB4ZmYpID09PSAweDIwMCAmJiAobmV3RmxhZyAmIH4weGZmKSA9PT0gMHgyMDApIHtcbiAgICAgIGZvciAoY29uc3QgbG9jIG9mIHRoaXMubG9jYXRpb25zKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBvZiBsb2MuZmxhZ3MpIHtcbiAgICAgICAgICBpZiAoZmxhZy5mbGFnID09PSBvbGRGbGFnKSBmbGFnLmZsYWcgPSBuZXdGbGFnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgbmV4dEZyZWVUcmlnZ2VyKCk6IFRyaWdnZXIge1xuICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnRyaWdnZXJzKSB7XG4gICAgICBpZiAoIXQudXNlZCkgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgYW4gdW51c2VkIHRyaWdnZXIuJyk7XG4gIH1cblxuICAvLyBVc2UgdGhlIGJyb3dzZXIgQVBJIHRvIGxvYWQgdGhlIFJPTS4gIFVzZSAjcmVzZXQgdG8gZm9yZ2V0IGFuZCByZWxvYWQuXG4gIHN0YXRpYyBhc3luYyBsb2FkKHBhdGNoPzogKGRhdGE6IFVpbnQ4QXJyYXkpID0+IHZvaWR8UHJvbWlzZTx2b2lkPixcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXI/OiAocGlja2VyOiBFbGVtZW50KSA9PiB2b2lkKSB7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHBpY2tGaWxlKHJlY2VpdmVyKTtcbiAgICBpZiAocGF0Y2gpIGF3YWl0IHBhdGNoKGZpbGUpO1xuICAgIHJldHVybiBuZXcgUm9tKGZpbGUpO1xuICB9ICBcbn1cblxuLy8gY29uc3QgaW50ZXJzZWN0cyA9IChsZWZ0LCByaWdodCkgPT4ge1xuLy8gICBpZiAobGVmdC5zaXplID4gcmlnaHQuc2l6ZSkgcmV0dXJuIGludGVyc2VjdHMocmlnaHQsIGxlZnQpO1xuLy8gICBmb3IgKGxldCBpIG9mIGxlZnQpIHtcbi8vICAgICBpZiAocmlnaHQuaGFzKGkpKSByZXR1cm4gdHJ1ZTtcbi8vICAgfVxuLy8gICByZXR1cm4gZmFsc2U7XG4vLyB9XG5cbi8vIGNvbnN0IFRJTEVfRUZGRUNUU19CWV9USUxFU0VUID0ge1xuLy8gICAweDgwOiAweGIzLFxuLy8gICAweDg0OiAweGI0LFxuLy8gICAweDg4OiAweGI1LFxuLy8gICAweDhjOiAweGI2LFxuLy8gICAweDkwOiAweGI3LFxuLy8gICAweDk0OiAweGI4LFxuLy8gICAweDk4OiAweGI5LFxuLy8gICAweDljOiAweGJhLFxuLy8gICAweGEwOiAweGJiLFxuLy8gICAweGE0OiAweGJjLFxuLy8gICAweGE4OiAweGI1LFxuLy8gICAweGFjOiAweGJkLFxuLy8gfTtcblxuLy8gT25seSBtYWtlcyBzZW5zZSBpbiB0aGUgYnJvd3Nlci5cbmZ1bmN0aW9uIHBpY2tGaWxlKHJlY2VpdmVyPzogKHBpY2tlcjogRWxlbWVudCkgPT4gdm9pZCk6IFByb21pc2U8VWludDhBcnJheT4ge1xuICBpZiAoIXJlY2VpdmVyKSByZWNlaXZlciA9IHBpY2tlciA9PiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBpY2tlcik7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCAhPT0gJyNyZXNldCcpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncm9tJyk7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShcbiAgICAgICAgICAgIFVpbnQ4QXJyYXkuZnJvbShcbiAgICAgICAgICAgICAgICBuZXcgQXJyYXkoZGF0YS5sZW5ndGggLyAyKS5maWxsKDApLm1hcChcbiAgICAgICAgICAgICAgICAgICAgKF8sIGkpID0+IE51bWJlci5wYXJzZUludChcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbMiAqIGldICsgZGF0YVsyICogaSArIDFdLCAxNikpKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHVwbG9hZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh1cGxvYWQpO1xuICAgIHVwbG9hZC50eXBlID0gJ2ZpbGUnO1xuICAgIHVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlID0gdXBsb2FkLmZpbGVzIVswXTtcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkocmVhZGVyLnJlc3VsdCBhcyBBcnJheUJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IHN0ciA9IEFycmF5LmZyb20oYXJyLCBoZXgpLmpvaW4oJycpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncm9tJywgc3RyKTtcbiAgICAgICAgdXBsb2FkLnJlbW92ZSgpO1xuICAgICAgICByZXNvbHZlKGFycik7XG4gICAgICB9KTtcbiAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBFWFBFQ1RFRF9DUkMzMiA9IDB4MWJkMzkwMzI7XG5cbi8vIEZvcm1hdDogW2FkZHJlc3MsIGJyb2tlbiwgZml4ZWRdXG5jb25zdCBBREpVU1RNRU5UUyA9IFtcbiAgLy8gRml4IHNvZnRsb2NrIGluIGNyeXB0IGR1ZSB0byBmbHlhYmxlIHdhbGwgKGVmZmVjdHMgJGI2IHRpbGUgJDQ2KVxuICBbMHgxMzY0NiwgMHgwMiwgMHgwNl0sXG4gIC8vIEZpeCBicm9rZW4gKGZhbGwtdGhyb3VnaCkgZXhpdCBvdXRzaWRlIHN0YXJ0XG4gIFsweDE0NTZhLCAweDAwLCAweGZmXSxcbiAgLy8gUmVkdW5kYW50IGV4aXQgbmV4dCB0byBzdG9tJ3MgZG9vciBpbiAkMTlcbiAgWzB4MTRhZWIsIDB4MDksIDB4ZmZdLFxuICAvLyBGaXggZ2FyYmFnZSBtYXAgc3F1YXJlIGluIGJvdHRvbS1yaWdodCBvZiBNdCBTYWJyZSBXZXN0IGNhdmVcbiAgWzB4MTRkYjksIDB4MDgsIDB4ODBdLFxuICAvLyBGaXggZ2FyYmFnZSBtYXAgc3F1YXJlIGluIGJvdHRvbS1sZWZ0IG9mIExpbWUgVHJlZSBWYWxsZXlcbiAgWzB4MTU0NWQsIDB4ZmYsIDB4MDBdLFxuICAvLyBNYXJrIGJhZCBlbnRyYW5jZS9leGl0IGluIHBvcnRvYVxuICBbMHgxNTgxZCwgMHgwMCwgMHhmZl0sXG4gIFsweDE1ODRlLCAweGRiLCAweGZmXSxcbiAgLy8gUmVtb3ZlIHVudXNlZCBtYXAgc2NyZWVucyBmcm9tIEV2aWwgU3Bpcml0IGxvd2VyXG4gIFsweDE1YmFmLCAweGYwLCAweDgwXSxcbiAgWzB4MTViYjYsIDB4ZGYsIDB4ODBdLFxuICBbMHgxNWJiNywgMHg5NiwgMHg4MF0sXG4gIC8vIE1hcmsgYmFkIGVudHJhbmNlL2V4aXQgaW4gZ29hIHZhbGxleVxuICBbMHgxNWY0MCwgMHgwMiwgMHhmZl0sXG4gIFsweDE1ZjYxLCAweDhkLCAweGZmXSxcbiAgWzB4MTVmNjUsIDB4OGQsIDB4ZmZdLFxuICAvLyBGaXggcGF0dGVybiB0YWJsZSBmb3IgZGVzZXJ0IDEgKGFuaW1hdGlvbiBnbG9zc2VzIG92ZXIgaXQpXG4gIFsweDE2NGNjLCAweDA0LCAweDIwXSxcbiAgLy8gRml4IGdhcmJhZ2UgYXQgYm90dG9tIG9mIG9hc2lzIGNhdmUgbWFwIChpdCdzIDh4MTEsIG5vdCA4eDEyID0+IGZpeCBoZWlnaHQpXG4gIFsweDE2NGZmLCAweDBiLCAweDBhXSxcbiAgLy8gRml4IGJhZCBtdXNpYyBpbiB6b21iaWV0b3duIGhvdXNlczogJDEwIHNob3VsZCBiZSAkMDEuXG4gIFsweDE3ODJhLCAweDEwLCAweDAxXSxcbiAgWzB4MTc4NTcsIDB4MTAsIDB4MDFdLFxuICAvLyBGaXggYmFkIHNwYXduIGluIE10IEh5ZHJhIChtYWtlIGl0IGFuIGV4dHJhIHB1ZGRsZSkuXG4gIFsweDE5ZjAyLCAweDQwLCAweDgwXSxcbiAgWzB4MTlmMDMsIDB4MzMsIDB4MzJdLFxuICAvLyBGaXggYmFkIHNwYXduIGluIFNhYmVyYSAyJ3MgbGV2ZWwgKHByb2JhYmx5IG1lYW50IHRvIGJlIGEgZmxhaWwgZ3V5KS5cbiAgWzB4MWExZTAsIDB4NDAsIDB4YzBdLCAvLyBtYWtlIHN1cmUgdG8gZml4IHBhdHRlcm4gc2xvdCwgdG9vIVxuICBbMHgxYTFlMSwgMHgzZCwgMHgzNF0sXG4gIC8vIFBvaW50IEFtYXpvbmVzIG91dGVyIGd1YXJkIHRvIHBvc3Qtb3ZlcmZsb3cgbWVzc2FnZSB0aGF0J3MgYWN0dWFsbHkgc2hvd24uXG4gIFsweDFjZjA1LCAweDQ3LCAweDQ4XSxcbiAgLy8gUmVtb3ZlIHN0cmF5IGZsaWdodCBncmFudGVyIGluIFpvbWJpZXRvd24uXG4gIFsweDFkMzExLCAweDIwLCAweGEwXSxcbiAgWzB4MWQzMTIsIDB4MzAsIDB4MDBdLFxuICAvLyBGaXggcXVlZW4ncyBkaWFsb2cgdG8gdGVybWluYXRlIG9uIGxhc3QgaXRlbSwgcmF0aGVyIHRoYW4gb3ZlcmZsb3csXG4gIC8vIHNvIHRoYXQgd2UgZG9uJ3QgcGFyc2UgZ2FyYmFnZS5cbiAgWzB4MWNmZjksIDB4NjAsIDB4ZTBdLFxuXG4gIC8vIEZpeCBBbWF6b25lcyBvdXRlciBndWFyZCBtZXNzYWdlIHRvIG5vdCBvdmVyZmxvdy5cbiAgWzB4MmNhOTAsIDB4MDIsIDB4MDBdLFxuICAvLyBGaXggc2VlbWluZ2x5LXVudXNlZCBrZW5zdSBtZXNzYWdlIDFkOjE3IG92ZXJmbG93aW5nIGludG8gMWQ6MThcbiAgWzB4MmY1NzMsIDB4MDIsIDB4MDBdLFxuICAvLyBGaXggdW51c2VkIGthcm1pbmUgdHJlYXN1cmUgY2hlc3QgbWVzc2FnZSAyMDoxOC5cbiAgWzB4MmZhZTQsIDB4NWYsIDB4MDBdLFxuXSBhcyBjb25zdDtcbiJdfQ==