import { readLittleEndian } from './util.js';
export class Bosses {
    constructor(rom) {
        this.rom = rom;
        this.all = [
            this.vampire1 = new Boss(this, 'Vampire 1', 0xc0, 0x0, true),
            this.insect = new Boss(this, 'Insect', 0xc1, 0x1),
            this.kelbesque1 = new Boss(this, 'Kelbesque 1', 0xc2, 0x2, true).sword(3),
            this.rage = new Boss(this, 'Rage', 0xc3, 0x3),
            this.sabera1 = new Boss(this, 'Sabera 1', 0x84, 0x4, true, 0x3656e).sword(3),
            this.vampire2 = new Boss(this, 'Vampire 2', 0xcc, 0xc, true),
            this.mado1 = new Boss(this, 'Mado 1', -1, 0x5, true, 0x3d820).sword(3),
            this.kelbesque2 = new Boss(this, 'Kelbesque 2', 0xc5, 0x6, true).sword(3),
            this.sabera2 = new Boss(this, 'Sabera 2', 0xc6, 0x7, true).sword(3),
            this.mado2 = new Boss(this, 'Mado 2', 0xc7, 0x8, true).sword(3),
            this.karmine = new Boss(this, 'Karmine', 0xc8, 0x9, true).sword(2),
            this.draygon1 = new Boss(this, 'Draygon 1', 0xcb, 0xa).sword(2),
            this.statueOfMoon = new Boss(this, 'Statue of Moon', 0xc9),
            this.statueOfSun = new Boss(this, 'Statue of Sun', 0xca),
            this.draygon2 = new Boss(this, 'Draygon 2', 0xcb, 0xb).sword(3),
            this.dyna = new Boss(this, 'Dyna', -1, 0xd),
        ];
    }
    fromLocation(id) {
        return this.all.find(b => b.location === id);
    }
    fromBossKill(num) {
        return this.all.find(b => b.kill === num);
    }
    fromObject(id) {
        return this.all.find(b => b.object === id);
    }
    [Symbol.iterator]() {
        return this.all[Symbol.iterator]();
    }
}
export class Boss {
    constructor(bosses, name, npc, kill, shuffled, address) {
        this.bosses = bosses;
        this.name = name;
        this.npc = npc;
        this.kill = kill;
        this.shuffled = shuffled;
        this.swordLevel = 1;
        this.objectAddress = address || (0x80f0 | (npc & 0xfc) << 6 | (npc & 3) << 2 | 1);
        this.object = bosses.rom.prg[this.objectAddress];
        const { prg } = bosses.rom;
        if (kill != null) {
            const killAddr = 0x14000 + readLittleEndian(prg, 0x1f96b + 2 * kill);
            const drop = prg[killAddr + 4];
            if (drop !== 0xff)
                this.drop = drop;
            this.location = prg[0x1f95d + kill];
        }
    }
    sword(level) {
        this.swordLevel = level;
        return this;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9zc2VzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3JvbS9ib3NzZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sV0FBVyxDQUFDO0FBTzNDLE1BQU0sT0FBTyxNQUFNO0lBcUJqQixZQUFxQixHQUFRO1FBQVIsUUFBRyxHQUFILEdBQUcsQ0FBSztRQUMzQixJQUFJLENBQUMsR0FBRyxHQUFHO1lBQ1QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDO1lBQzVELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDO1lBQ2pELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUM7WUFDN0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDNUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDO1lBQzVELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENB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QyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNsRixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNqRCxNQUFNLEVBQUMsR0FBRyxFQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQztRQUN6QixJQUFJLElBQUksSUFBSSxJQUFJLEVBQUU7WUFDaEIsTUFBTSxRQUFRLEdBQUcsT0FBTyxHQUFHLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQ3JFLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxJQUFJLEtBQUssSUFBSTtnQkFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNwQyxJQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDckM7SUFDSCxDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQWE7UUFDakIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDeEIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7cmVhZExpdHRsZUVuZGlhbn0gZnJvbSAnLi91dGlsLmpzJztcblxuLy8gVE9ETyAtIHdlIG5lZWQgYSBjb25zaXN0ZW50IHdheSB0byByZWZlciB0byBib3NzZXMuLi5cbi8vICAtIG1heWJlIGJvc3Nlcy5mcm9tTnBjSWQoKSwgYm9zc2VzLmZyb21PYmplY3RJZCgpLCBib3NzZXMuZnJvbUJvc3NLaWxsKClcblxuLy8gUmVwcmVzZW50cyBhIGJvc3Mgc2xvdC4gIE5vdGUgdGhhdCB0aGUgc3BlY2lmaWMgb2JqZWN0IGlzIHRpZWQgbW9zdCB0aWdodGx5XG4vLyB0byB0aGUgYm9zcyBraWxsIChkcm9wKSwgcmF0aGVyIHRoYW4gdGhlIHNwZWNpZmljIGlkZW50aXR5IG9mIHRoZSBib3NzLlxuZXhwb3J0IGNsYXNzIEJvc3NlcyBpbXBsZW1lbnRzIEl0ZXJhYmxlPEJvc3M+IHtcblxuICByZWFkb25seSB2YW1waXJlMTogQm9zcztcbiAgcmVhZG9ubHkgaW5zZWN0OiBCb3NzO1xuICByZWFkb25seSBrZWxiZXNxdWUxOiBCb3NzO1xuICByZWFkb25seSByYWdlOiBCb3NzO1xuICByZWFkb25seSBzYWJlcmExOiBCb3NzO1xuICByZWFkb25seSB2YW1waXJlMjogQm9zcztcbiAgcmVhZG9ubHkgbWFkbzE6IEJvc3M7XG4gIHJlYWRvbmx5IGtlbGJlc3F1ZTI6IEJvc3M7XG4gIHJlYWRvbmx5IHNhYmVyYTI6IEJvc3M7XG4gIHJlYWRvbmx5IG1hZG8yOiBCb3NzO1xuICByZWFkb25seSBrYXJtaW5lOiBCb3NzO1xuICByZWFkb25seSBkcmF5Z29uMTogQm9zcztcbiAgcmVhZG9ubHkgc3RhdHVlT2ZNb29uOiBCb3NzO1xuICByZWFkb25seSBzdGF0dWVPZlN1bjogQm9zcztcbiAgcmVhZG9ubHkgZHJheWdvbjI6IEJvc3M7XG4gIHJlYWRvbmx5IGR5bmE6IEJvc3M7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBhbGw6IEJvc3NbXTtcblxuICBjb25zdHJ1Y3RvcihyZWFkb25seSByb206IFJvbSkge1xuICAgIHRoaXMuYWxsID0gW1xuICAgICAgdGhpcy52YW1waXJlMSA9IG5ldyBCb3NzKHRoaXMsICdWYW1waXJlIDEnLCAweGMwLCAweDAsIHRydWUpLFxuICAgICAgdGhpcy5pbnNlY3QgPSBuZXcgQm9zcyh0aGlzLCAnSW5zZWN0JywgMHhjMSwgMHgxKSxcbiAgICAgIHRoaXMua2VsYmVzcXVlMSA9IG5ldyBCb3NzKHRoaXMsICdLZWxiZXNxdWUgMScsIDB4YzIsIDB4MiwgdHJ1ZSkuc3dvcmQoMyksXG4gICAgICB0aGlzLnJhZ2UgPSBuZXcgQm9zcyh0aGlzLCAnUmFnZScsIDB4YzMsIDB4MyksXG4gICAgICB0aGlzLnNhYmVyYTEgPSBuZXcgQm9zcyh0aGlzLCAnU2FiZXJhIDEnLCAweDg0LCAweDQsIHRydWUsIDB4MzY1NmUpLnN3b3JkKDMpLFxuICAgICAgdGhpcy52YW1waXJlMiA9IG5ldyBCb3NzKHRoaXMsICdWYW1waXJlIDInLCAweGNjLCAweGMsIHRydWUpLFxuICAgICAgdGhpcy5tYWRvMSA9IG5ldyBCb3NzKHRoaXMsICdNYWRvIDEnLCAtMSwgMHg1LCB0cnVlLCAweDNkODIwKS5zd29yZCgzKSxcbiAgICAgIHRoaXMua2VsYmVzcXVlMiA9IG5ldyBCb3NzKHRoaXMsICdLZWxiZXNxdWUgMicsIDB4YzUsIDB4NiwgdHJ1ZSkuc3dvcmQoMyksXG4gICAgICB0aGlzLnNhYmVyYTIgPSBuZXcgQm9zcyh0aGlzLCAnU2FiZXJhIDInLCAweGM2LCAweDcsIHRydWUpLnN3b3JkKDMpLFxuICAgICAgdGhpcy5tYWRvMiA9IG5ldyBCb3NzKHRoaXMsICdNYWRvIDInLCAweGM3LCAweDgsIHRydWUpLnN3b3JkKDMpLFxuICAgICAgdGhpcy5rYXJtaW5lID0gbmV3IEJvc3ModGhpcywgJ0thcm1pbmUnLCAweGM4LCAweDksIHRydWUpLnN3b3JkKDIpLFxuICAgICAgdGhpcy5kcmF5Z29uMSA9IG5ldyBCb3NzKHRoaXMsICdEcmF5Z29uIDEnLCAweGNiLCAweGEpLnN3b3JkKDIpLFxuICAgICAgdGhpcy5zdGF0dWVPZk1vb24gPSBuZXcgQm9zcyh0aGlzLCAnU3RhdHVlIG9mIE1vb24nLCAweGM5KSxcbiAgICAgIHRoaXMuc3RhdHVlT2ZTdW4gPSBuZXcgQm9zcyh0aGlzLCAnU3RhdHVlIG9mIFN1bicsIDB4Y2EpLFxuICAgICAgLy8gVE9ETyAtIGdpdmUgRHJheWdvbiAyIGEgZGlmZmVyZW50IE5QQyBpZCAoc2F5LCBjND8pXG4gICAgICB0aGlzLmRyYXlnb24yID0gbmV3IEJvc3ModGhpcywgJ0RyYXlnb24gMicsIDB4Y2IsIDB4Yikuc3dvcmQoMyksXG4gICAgICB0aGlzLmR5bmEgPSBuZXcgQm9zcyh0aGlzLCAnRHluYScsIC0xLCAweGQpLFxuICAgIF07XG4gIH1cblxuICBmcm9tTG9jYXRpb24oaWQ6IG51bWJlcik6IEJvc3N8dW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5hbGwuZmluZChiID0+IGIubG9jYXRpb24gPT09IGlkKTtcbiAgfVxuXG4gIGZyb21Cb3NzS2lsbChudW06IG51bWJlcik6IEJvc3N8dW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5hbGwuZmluZChiID0+IGIua2lsbCA9PT0gbnVtKTtcbiAgfVxuXG4gIGZyb21PYmplY3QoaWQ6IG51bWJlcik6IEJvc3N8dW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5hbGwuZmluZChiID0+IGIub2JqZWN0ID09PSBpZCk7XG4gIH1cblxuICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPEJvc3M+IHtcbiAgICByZXR1cm4gdGhpcy5hbGxbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICB9XG59XG5cbi8vIE5PVEU6IGN1cnJlbnRseSB0aGlzIGRhdGEgaXMgcmVhZC1vbmx5LlxuZXhwb3J0IGNsYXNzIEJvc3Mge1xuXG4gIHJlYWRvbmx5IG9iamVjdEFkZHJlc3M6IG51bWJlcjtcbiAgLy8gVE9ETyAtIG1ha2Ugb2JqZWN0IHNldHRhYmxlP1xuICByZWFkb25seSBvYmplY3Q6IG51bWJlcjtcbiAgcmVhZG9ubHkgZHJvcD86IG51bWJlcjtcbiAgcmVhZG9ubHkgbG9jYXRpb24/OiBudW1iZXI7XG5cbiAgLy8gT25seSB1c2VkIGZvciBsb2dpYy5cbiAgc3dvcmRMZXZlbCA9IDE7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgYm9zc2VzOiBCb3NzZXMsXG4gICAgICAgICAgICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyxcbiAgICAgICAgICAgICAgcmVhZG9ubHkgbnBjOiBudW1iZXIsXG4gICAgICAgICAgICAgIHJlYWRvbmx5IGtpbGw/OiBudW1iZXIsXG4gICAgICAgICAgICAgIHJlYWRvbmx5IHNodWZmbGVkPzogYm9vbGVhbixcbiAgICAgICAgICAgICAgYWRkcmVzcz86IG51bWJlcikge1xuICAgIHRoaXMub2JqZWN0QWRkcmVzcyA9IGFkZHJlc3MgfHwgKDB4ODBmMCB8IChucGMgJiAweGZjKSA8PCA2IHwgKG5wYyAmIDMpIDw8IDIgfCAxKTtcbiAgICB0aGlzLm9iamVjdCA9IGJvc3Nlcy5yb20ucHJnW3RoaXMub2JqZWN0QWRkcmVzc107XG4gICAgY29uc3Qge3ByZ30gPSBib3NzZXMucm9tO1xuICAgIGlmIChraWxsICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGtpbGxBZGRyID0gMHgxNDAwMCArIHJlYWRMaXR0bGVFbmRpYW4ocHJnLCAweDFmOTZiICsgMiAqIGtpbGwpO1xuICAgICAgY29uc3QgZHJvcCA9IHByZ1traWxsQWRkciArIDRdO1xuICAgICAgaWYgKGRyb3AgIT09IDB4ZmYpIHRoaXMuZHJvcCA9IGRyb3A7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gcHJnWzB4MWY5NWQgKyBraWxsXTtcbiAgICB9XG4gIH1cblxuICBzd29yZChsZXZlbDogbnVtYmVyKTogdGhpcyB7XG4gICAgdGhpcy5zd29yZExldmVsID0gbGV2ZWw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiJdfQ==