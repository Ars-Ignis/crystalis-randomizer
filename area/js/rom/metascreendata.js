import { seq } from './util.js';
export const featureMask = {
    'empty': 0x1,
    'pit': 0x2,
    'arena': 0x4,
    'spikes': 0x8,
    'wide': 0x10,
    'river': 0x20,
    'bridge': 0x40,
    'wall': 0x80,
    'ramp': 0x100,
    'overpass': 0x200,
    'underpass': 0x400,
    'whirlpool': 0x800,
    'deadend': 0x1000,
    'stair:up': 65536,
    'stair:down': 131072,
    'portoa1': 117440512,
    'portoa2': 184549376,
    'portoa3': 218103808,
    'lake': 234881024,
    'lighthouse': 318767104,
    'cabin': 352321536,
    'windmill': 369098752,
    'altar': 419430400,
    'pyramid': 436207616,
    'crypt': 469762048,
    'manual': 1073741824,
    'consolidate': 2147483648,
};
export function icon(arr) {
    if (arr.length != 1)
        throw new Error('Bad icon input');
    const str = arr[0];
    const lines = str.split('\n');
    const full = lines.slice(1).map(l => l.replace(/^\s*\||\|\s*$/g, ''));
    const short = /\S/.test(lines[0]) ? lines[0][0] : full[1][1];
    return { short, full: [full[0], full[1], full[2]] };
}
export function readScreen(spec, ...replacements) {
    const s = spec.split(/\s+/g);
    if (!s[0])
        s.shift();
    if (!s[s.length - 1])
        s.pop();
    if (s.length !== 240)
        throw new Error(`Bad screen definition: ${s.length}`);
    const map = new Map(replacements);
    return Uint8Array.from(s, x => { var _a; return (_a = map.get(x)) !== null && _a !== void 0 ? _a : parseInt(x, 16); });
}
export function upStair(tile, width = 2) {
    const y = tile >>> 4;
    const x = tile & 0xf;
    if (width === 1) {
        const dy = y === 0xe ? 0x2800 : 0x1800;
        const entrance = ((y << 12) + dy) | ((x << 4) + 0x0008);
        return {
            type: 'stair:up',
            dir: 2,
            entrance,
            exits: [tile],
        };
    }
    const entrance = y << 12 | ((x << 4) + (width << 3));
    return {
        type: 'stair:up',
        dir: 0,
        entrance,
        exits: seq(width, i => tile - 0x10 + i),
    };
}
export function downStair(tile, width = 2) {
    const y = tile >>> 4;
    const x = tile & 0xf;
    if (width === 1) {
        const entrance = ((y << 12) - 0x0800) | ((x << 4) + 0x0008);
        return {
            type: 'stair:down',
            dir: 2,
            entrance,
            exits: [tile],
            allowedExits: [tile + 16, tile - 16],
        };
    }
    const entrance = y << 12 | 0x0f00 | ((x << 4) + (width << 3));
    return {
        type: 'stair:down',
        dir: 2,
        entrance,
        exits: seq(width, i => tile + 0x10 + i),
        allowedExits: [...seq(width, i => tile + 0x20 + i),
            ...seq(width, i => tile + i)],
    };
}
export function cave(tile, type = 'cave') {
    return { ...upStair(tile + 16), type };
}
export function door(tile, type = 'door') {
    return { ...upStair(tile, 1), type };
}
export function waterfallCave(tile) {
    const y = tile >>> 4;
    const x = tile & 0xf;
    return {
        type: 'cave',
        dir: 0,
        entrance: y << 12 | x << 4 | 0xf,
        exits: [tile - 0xf, tile + 1],
    };
}
export function topEdge({ left = 7, width = 2, top = 2, manual = false } = {}) {
    return {
        type: 'edge:top',
        manual,
        dir: 0,
        entrance: ((top + 1) << 12) | ((left << 4) + (width << 3)),
        exits: seq(width, i => (top << 4) | (i + left)),
    };
}
export function bottomEdge({ left = 7, width = 2, shift = 0, type = 'edge:bottom', manual = false } = {}) {
    return {
        type, manual,
        dir: 2,
        entrance: 57088 | ((left << 4) + (width << 3) + 16 * shift),
        exits: seq(width, i => 0xe0 | (i + left)),
    };
}
export function bottomEdgeHouse({ left = 7, width = 2, shift = 0 } = {}) {
    return {
        type: 'edge:bottom',
        dir: 2,
        entrance: 44800 | ((left << 4) + (width << 3) + 16 * shift),
        exits: seq(width, i => 0xb0 | (i + left)),
    };
}
export function leftEdge({ top = 7, height = 2, shift = 0 } = {}) {
    return {
        type: 'edge:left',
        dir: 1,
        entrance: ((top << 12) + ((16 * shift) << 8) + (height << 11)) | 0x10,
        exits: seq(height, i => (i + top) << 4),
    };
}
export function rightEdge({ top = 7, height = 2, shift = 0 } = {}) {
    return {
        type: 'edge:right',
        dir: 3,
        entrance: ((top << 12) + ((16 * shift) << 8) + (height << 11)) | 0xef,
        exits: seq(height, i => (i + top) << 4 | 0xf),
    };
}
export function seamlessUp(tile, width = 2) {
    return {
        type: 'seamless:up',
        dir: 0,
        get entrance() { throw new Error('does not make sense'); },
        exits: seq(width, i => (tile + i)),
    };
}
export function seamlessDown(tile, width = 2) {
    return {
        type: 'seamless:down',
        dir: 2,
        get entrance() { throw new Error('does not make sense'); },
        exits: seq(width, i => (tile + i)),
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YXNjcmVlbmRhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvanMvcm9tL21ldGFzY3JlZW5kYXRhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxXQUFXLENBQUM7QUF1TTlCLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRztJQUV6QixPQUFPLEVBQUUsR0FBRztJQUNaLEtBQUssRUFBRSxHQUFHO0lBQ1YsT0FBTyxFQUFFLEdBQUc7SUFDWixRQUFRLEVBQUUsR0FBRztJQUNiLE1BQU0sRUFBRSxJQUFJO0lBQ1osT0FBTyxFQUFFLElBQUk7SUFDYixRQUFRLEVBQUUsSUFBSTtJQUNkLE1BQU0sRUFBRSxJQUFJO0lBQ1osTUFBTSxFQUFFLEtBQUs7SUFDYixVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsS0FBSztJQUNsQixXQUFXLEVBQUUsS0FBSztJQUNsQixTQUFTLEVBQUUsTUFBTTtJQUlqQixVQUFVLEVBQUUsS0FBUTtJQUNwQixZQUFZLEVBQUUsTUFBUTtJQUt0QixTQUFTLEVBQUUsU0FBVztJQUN0QixTQUFTLEVBQUUsU0FBVztJQUN0QixTQUFTLEVBQUUsU0FBVztJQUN0QixNQUFNLEVBQUUsU0FBVztJQUNuQixZQUFZLEVBQUUsU0FBWTtJQUMxQixPQUFPLEVBQUUsU0FBWTtJQUNyQixVQUFVLEVBQUUsU0FBWTtJQUN4QixPQUFPLEVBQUUsU0FBWTtJQUNyQixTQUFTLEVBQUUsU0FBWTtJQUN2QixPQUFPLEVBQUUsU0FBWTtJQUdyQixRQUFRLEVBQUUsVUFBVztJQUVyQixhQUFhLEVBQUUsVUFBVztDQUNsQixDQUFDO0FBY1gsTUFBTSxVQUFVLElBQUksQ0FBQyxHQUF5QjtJQUM1QyxJQUFJLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEdBQUcsR0FB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LElBQUksQ0FBQyxDQUFDLENBQUM7UUFDMUQsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNoRCxDQUFDO0FBQ0osQ0FBQztBQUlELE1BQU0sVUFBVSxVQUFVLENBQUMsRUFBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFDOUIsSUFBSSxHQUFHLGFBQStCLEVBQ3RDLE1BQU0sR0FBRyxLQUFLLEtBQUksRUFBRTtJQUk5QyxPQUFPO1FBQ0wsSUFBSSxFQUFFLE1BQU07UUFDWixHQUFHLEVBQUUsQ0FBQztRQUNOLFFBQVEsRUFBRSxLQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBQzdELEtBQUssRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQzFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxVQUFVLGVBQWUsQ0FBQyxFQUFDLElBQUksR0FBRyxDQUFDLEVBQ1IsS0FBSyxHQUFHLENBQUMsRUFDVCxLQUFLLEdBQUcsQ0FBQyxFQUFDLEdBQUcsRUFBRTtJQUc5QyxPQUFPO1FBQ0wsSUFBSSxFQUFFLGFBQWE7UUFDbkIsR0FBRyxFQUFFLENBQUM7UUFDTixRQUFRLEVBQUUsS0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQztRQUM3RCxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUMxQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSxRQUFRLENBQUMsRUFBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBQyxHQUFHLEVBQUU7SUFDNUQsT0FBTztRQUNMLElBQUksRUFBRSxXQUFXO1FBQ2pCLEdBQUcsRUFBRSxDQUFDO1FBQ04sUUFBUSxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUk7UUFDckUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDeEMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLFVBQVUsU0FBUyxDQUFDLEVBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUMsR0FBRyxFQUFFO0lBQzdELE9BQU87UUFDTCxJQUFJLEVBQUUsWUFBWTtRQUNsQixHQUFHLEVBQUUsQ0FBQztRQUNOLFFBQVEsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJO1FBQ3JFLEtBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUM5QyxDQUFDO0FBQ0osQ0FBQztBQUdELE1BQU0sVUFBVSxVQUFVLENBQUMsSUFBWSxFQUFFLEtBQUssR0FBRyxDQUFDO0lBQ2hELE9BQU87UUFDTCxJQUFJLEVBQUUsYUFBYTtRQUNuQixHQUFHLEVBQUUsQ0FBQztRQUNOLElBQUksUUFBUSxLQUFhLE1BQU0sSUFBSSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNuQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsSUFBWSxFQUFFLEtBQUssR0FBRyxDQUFDO0lBQ2xELE9BQU87UUFDTCxJQUFJLEVBQUUsZUFBZTtRQUNyQixHQUFHLEVBQUUsQ0FBQztRQUNOLElBQUksUUFBUSxLQUFhLE1BQU0sSUFBSSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNuQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TWV0YXNjcmVlbn0gZnJvbSAnLi9tZXRhc2NyZWVuLmpzJztcbmltcG9ydCB7U2NyZWVuRml4fSBmcm9tICcuL3NjcmVlbmZpeC5qcyc7XG5pbXBvcnQge01ldGF0aWxlc2V0c30gZnJvbSAnLi9tZXRhdGlsZXNldC5qcyc7XG5pbXBvcnQge3NlcX0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuLi9yb20uanMnO1xuXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IHRoZSBtZXRhc2NyZWVuLiAgQmVjYXVzZSB0aGVzZSBhcmUgY3JlYXRlZCBwZXIgTWV0YXNjcmVlbnNcbiAqIGluc3RhbmNlLCB0aGV5IGNhbiBhY3R1YWxseSBiZSBtdXRhdGVkIGFzIG5lZWRlZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZXRhc2NyZWVuRGF0YSB7XG4gIC8qKlxuICAgKiBJZiB0aGUgc2NyZWVuIGV4aXN0cyBvciBpcyBzaGFyZWQgd2l0aCBhIHNjcmVlbiBpbiB0aGUgdmFuaWxsYSByb20sIHRoZW5cbiAgICogdGhpcyBpcyB0aGUgc2NyZWVuIElEICgwLi4xMDIpLiAgT3RoZXJ3aXNlLCBpdCBpcyBhIHNwYXJzZSBuZWdhdGl2ZSBudW1iZXJcbiAgICogc2hhcmVkIGJ5IGFsbCB0aGUgc2NyZWVucyB0aGF0IHdpbGwgdWx0aW1hdGVseSBoYXZlIHRoZSBzYW1lIElELlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IG51bWJlcjtcbiAgLyoqIFJlcHJlc2VudGF0aXZlIGljb24gZm9yIGRlYnVnIHB1cnBvc2VzLiAqL1xuICBpY29uPzogSWNvbjtcbiAgLyoqIExpc3Qgb2YgdGlsZXNldHMgdGhpcyBzY3JlZW4gYXBwZWFycyBpbi4gKi9cbiAgdGlsZXNldHM6IHtbbmFtZSBpbiBrZXlvZiBNZXRhdGlsZXNldHNdPzoge1xuICAgIC8qKiBGaXhlcyBuZWVkZWQgYmVmb3JlIHNjcmVlbiBpcyB1c2FibGUgaW4gdGhlIHRpbGVzZXQuICovXG4gICAgcmVxdWlyZXM/OiBTY3JlZW5GaXhbXSxcbiAgICAvKiogPz8/ICovXG4gICAgdHlwZT86IHN0cmluZywgLy8gZm9yIHRvd24/XG4gICAgLyoqIExhYnlyaW50aCBkYXRhLiAqL1xuICAgIGFkZFdhbGw/OiBudW1iZXJbXSxcbiAgICByZW1vdmVXYWxsPzogbnVtYmVyLFxuICB9fTtcbiAgLyoqIExpc3Qgb2YgZmVhdHVyZXMgcHJlc2VudC4gKi9cbiAgZmVhdHVyZT86IEZlYXR1cmVbXTtcbiAgLyoqIExpc3Qgb2YgZXhpdCBzcGVjcy4gKi9cbiAgZXhpdHM/OiByZWFkb25seSBDb25uZWN0aW9uW107XG4gIC8qKlxuICAgKiBTdHJpbmcgKGxlbmd0aCA0KSBvZiBlZGdlIHR5cGVzIGZvciBtYXRjaGluZzogdXAsIGxlZnQsIGRvd24sIHJpZ2h0LlxuICAgKiBUaGUgZm9sbG93aW5nIGNoYXJhY3RlcnMgYXJlIHVzZWQgaW4gdmFyaW91cyB0aWxlc2V0czpcbiAgICogR2VuZXJhbDpcbiAgICogICAqIGJsYW5rID0gYmxvY2tlZFxuICAgKiAgICogc3RhciA9IHNwZWNpYWwgY2FzZVxuICAgKiBPdmVyd29ybGQ6XG4gICAqICAgKiAnbycgPSBvcGVuXG4gICAqICAgKiAnPCcsICc+JywgJ14nLCAndicgPSBvcGVuIG9uIHRoZSAobGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tKS5cbiAgICogICAqICdsJyA9IGxvbmcgZ3Jhc3NcbiAgICogICAqICdzJyA9IHNob3J0IGdyYXNzXG4gICAqICAgKiAncicgPSByaXZlclxuICAgKiAgICogJ24nID0gbmFycm93IGVkZ2UgZXhpdCwgY2VudGVyZWRcbiAgICogICAqICdiJyA9IGJvYXRcbiAgICogICAqICcxJywgJzInLCAnMycgPSBvbmUtb2ZmIHNwZWNpYWwgY2FzZXMgYXJvdW5kIHBvcnRvYS9vYXNpc1xuICAgKiBUb3dlcjpcbiAgICogICAqICdzJyA9IHN0YWlyc1xuICAgKiAgICogJ3QnID0gY29ycmlkb3JcbiAgICogQ2F2ZTpcbiAgICogICAqICdjJyA9IGNvcnJpZG9yXG4gICAqICAgKiAndycgPSB3aWRlXG4gICAqICAgKiAnbicgPSBuYXJyb3dcbiAgICogICAqICdyJyA9IHJpdmVyXG4gICAqICAgKiAnYicgPSB3cm9uZyBzaWRlIG9mIGJyaWRnZVxuICAgKiAgICogJ3MnID0gc3Bpa2VzXG4gICAqIFN3YW1wOlxuICAgKiAgICogJ3MnID0gcGFzc2FnZVxuICAgKiBNb3VudGFpbjpcbiAgICogICAqICdwJyA9IHBhdGhcbiAgICogICAqICdzJyA9IHNsb3BlXG4gICAqICAgKiAndycgPSB3YXRlcmZhbGxcbiAgICogICAqICdsJyA9IGxhZGRlclxuICAgKi9cbiAgZWRnZXM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIGVkZ2VzIChtYXkgc3VwZXJjZWRlPyksIGJ1dCA5IGluc3RlYWQgb2YgNFxuICAgKiBzaW5jZSBpdCBpbmNsdWRlcyBjb3JuZXJzIGFuZCBjZW50ZXIsIHdoaWNoIGVhY2ggaGF2ZVxuICAgKiB0aGVpciBvd24gdGhpbmcuXG4gICAqIENhdmU6XG4gICAqICAgYyA9IGNvcnJpZG9yLCBvcmRpbmFyeSBjZW50ZXJcbiAgICogICB3ID0gd2lkZSBlZGdlLCB3aWRlIGNlbnRlclxuICAgKiAgIG4gPSBuYXJyb3cgZWRnZVxuICAgKiAgIHIgPSByaXZlciAoY2VudGVyIG9mIHJpdmVyIHRpbGVzLCBhbmQgZWRnZXMpXG4gICAqICAgIyA9IGJsb2NrYWdlICh3YWxsLCBub24tYnJpZGdlZCByaXZlciwgZXh0cmEgYmxvY2spXG4gICAqICAgICAgIE5PVEU6IHdlIGFkZCB3YWxscyBidXQgX3JlbW92ZV8gYnJpZGdlcy4uLlxuICAgKiAgICAgICBOT1RFOiBubyBsb25nZXIgdXNlZCAtIGp1c3QgZmlsbCBpbiBub3JtYWwgbm93Li4uXG4gICAqICAgYiA9IGJyaWRnZSAod3Jvbmcgc2lkZT8/PyBwcm9iYWJseSBub3QuLi4pXG4gICAqICAgcyA9IHNwaWtlc1xuICAgKiAgIHAgPSBwaXRcbiAgICogICAvID0gcmFtcFxuICAgKiAgIFxuICAgKiBPdmVyd29ybGQ6XG4gICAqICAgbyA9IG9wZW5cbiAgICogICA8ID0gY2F2ZSBvciBvdGhlciB1cCBleGl0XG4gICAqICAgPiA9IGRvd24gZXhpdCAoaS5lLiBjcnlwdClcbiAgICogICB4ID0gZWRnZSBleGl0IChuZXZlciB1c2VkIGludGVyaW9yKVxuICAgKiAgIGwgPSBsb25nIGdyYXNzL2ZvcmVzdFxuICAgKiAgIGcgPSBzaG9ydCBncmFzc1xuICAgKiAgIHIgPSByaXZlciAob3IgYnJpZGdlIGlmIGluIGNlbnRlciBhbmQgdGhlcmUncyBhbiB1bmJyaWRnZWQgb3B0aW9uKVxuICAgKiAgICAgICBhbHNvIHVzZWQgZm9yIG9hc2lzIGxha2VcbiAgICogICAjID0gYmxvY2thZ2UgaW4gY2VudGVyIChlLmcuIHVuYnJpZGdlZCByaXZlciwgd2hpcmxwb29sKVxuICAgKiAgIGIgPSBiZWFjaCAob24gc2VhKVxuICAgKiAgIOKGkyA9IHNsb3BlXG4gICAqICAgWzAtOUEtRl0gPSBvZmYtY2VudGVyIGVkZ2UgZXhpdHMgKHRvcDo2LTcgb3IgbGVmdDo2LTcgaXMgY2VudGVyZWQpXG4gICAqICAgICAxID0gYnJpZGdlIHRvIHBvcnRvYSAxMiwgNSA9IGxlYWYvbWV6YW1lIGVudHJhbmNlIDJkLFxuICAgKiAgICAgOCA9IGJyeW5tYWVyIGV4aXQgMWMsIGJvYXQgY2hhbm5lbCA2MCwgQiA9IGxvd2VyLWxlZnQgZXhpdCAxYVxuICAgKiAgICAgPT4gVE9ETyAtIGNvbnNpZGVyIGVpdGhlciBkZWxldGluZyB0aGVzZSBvciBzd2FwcGluZyBmb3IganVzdCAneCdcbiAgICogICBXID0gd2luZG1pbGwgKGFsc28gYSA8IGV4aXQpXG4gICAqICAgQSA9IGFsdGFyXG4gICAqICAgTCA9IGxpZ2h0aG91c2VcbiAgICogICBIID0gaG91c2VcbiAgICogICBGID0gZm9ydHJlc3NcbiAgICogICBDID0gY2FiaW5cbiAgICogICBQID0gcHlyYW1pZFxuICAgKiAgIFkgPSBjcnlwdFxuICAgKi9cbiAgdGlsZT86IHN0cmluZ3xzdHJpbmdbXTtcbiAgLyoqXG4gICAqIFN0cmluZyBvZiBjb25uZWN0ZWQgYWNjZXNzIHBvaW50cyBmb3Igcm91dGluZywgZ3JvdXBlZCBieSBjb25uZWN0aW9uIHR5cGUuXG4gICAqIFBvaW50cyBhcmUgaGV4IGRpZ2l0cyBbMTIzXSBmb3IgdG9wIGVkZ2UsIFs1NjddIGZvciBsZWZ0LCBbOWFiXSBmb3IgYm90dG9tLFxuICAgKiBvciBbZGVmXSBmb3IgcmlnaHQgZWRnZS4gIFNlcGFyYXRvcnMgYXJlICd8JyBmb3IgaW1wYXNzaWJsZSwgJz0nIGZvciB3YWxsLFxuICAgKiAnOicgZm9yIHdhdGVyIChpLmUuIGZsaWdodCByZXF1aXJlZCksIGFuZCAnLScgZm9yIGJyaWRnZS4gIEdlbmVyYWxseSBvbmx5XG4gICAqIHRoZSBtaWRkbGUgbnVtYmVyIGlzIHVzZWQgZm9yIGVhY2ggZWRnZSAoMjZhZSkgYnV0IGZvciByaXZlcnMgYW5kIGxhYnlyaW50aFxuICAgKiB0aWxlc2V0cywgdGhlIG90aGVyIG51bWJlcnMgYXJlIHVzZWQgYXMgd2VsbCwgY292ZXJpbmcgdGhlIGVkZ2VzIGxpa2Ugc29cbiAgICogYGBgXG4gICAqICAgICAuMTIzLlxuICAgKiAgICAgNSAgIGRcbiAgICogICAgIDYgICBlXG4gICAqICAgICA3ICAgZlxuICAgKiAgICAgLjlhYi5cbiAgICogYGBgXG4gICAqIFRodXMgdGhlIDQgYml0IGluZGljYXRlcyBhIHZlcnRpY2FsIGVkZ2UgYW5kIHRoZSA4IGJpdCBpbmRpY2F0ZXMgdGhhdCBpdCdzXG4gICAqIHRoZSBjb3JyZXNwb25kaW5nIGVkZ2Ugb24gdGhlIG5leHQgdGlsZS5cbiAgICovXG4gIGNvbm5lY3Q/OiBzdHJpbmc7XG4gIC8qKiBUaWxlICh5eCkgdG8gcGxhY2UgdGhlIHdhbGwvYnJpZGdlIGhpdGJveCwgaWYgcHJlc2VudC4gKi9cbiAgd2FsbD86IG51bWJlcjtcbiAgLyoqIEluZm9ybWF0aW9uIGFib3V0IGFueSBtb3ZpbmcgcGxhdGZvcm0gcGxhdGZvcm0uICovXG4gIHBsYXRmb3JtPzoge1xuICAgIC8qKiBUeXBlIG9mIHBsYXRmb3JtLiAqL1xuICAgIHR5cGU6ICdob3Jpem9udGFsJyB8ICd2ZXJ0aWNhbCcsXG4gICAgLyoqIDE2LWJpdCBzY3JlZW4gY29vcmRpbmF0ZXMgKHl5eHgpIG9mIHBsYXRmb3JtIHNwYXduIHBvc2l0aW9uLiAqL1xuICAgIGNvb3JkOiBudW1iZXIsXG4gIH07XG4gIC8qKlxuICAgKiBQb2ludHMgb2YgaW50ZXJlc3Qgb24gdGhpcyBzY3JlZW4uICBFYWNoIGVudHJ5IGlzIGEgcHJpb3JpdHkgKDEgaXMgbW9zdFxuICAgKiByZWxldmFudCwgNSBpcyBsZWFzdCksIGZvbGxvd2VkIGJ5IGEgZGVsdGEteSBhbmQgYSBkZWx0YS14IGluIHBpeGVsc1xuICAgKiBtZWFzdXJlZCBmcm9tIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIHNjcmVlbi4gIFRoZSBkZWx0YXMgbWF5IGJlXG4gICAqIG5lZ2F0aXZlIG9yIGdyZWF0ZXIgdGhhbiAweGZmLCBpbmRpY2F0aW5nIHRoYXQgdGhlIFBPSSBpcyBhY3R1YWxseSBvbiBhXG4gICAqIG5laWdoYm9yaW5nIHNjcmVlbi4gIERlZmF1bHQgZHk9NzAgYW5kIGR4PTc4LlxuICAgKi9cbiAgcG9pPzogUmVhZG9ubHlBcnJheTxyZWFkb25seSBbbnVtYmVyLCBudW1iZXI/LCBudW1iZXI/XT4sXG5cbiAgLyoqIFVwZGF0ZXMgdG8gYXBwbHkgd2hlbiBhcHBseWluZyB0aGUgZ2l2ZW4gZml4LiAqL1xuICB1cGRhdGU/OiBSZWFkb25seUFycmF5PHJlYWRvbmx5IFtTY3JlZW5GaXgsIFNjcmVlblVwZGF0ZV0+O1xuXG4gIC8qKiBXaGV0aGVyIGEgc3BlY2lhbCBmbGFnIGlzIG5lZWRlZCBmb3IgdGhpcyBzY3JlZW4uICovXG4gIGZsYWc/OiAnYWx3YXlzJyB8ICdjYWxtJyB8ICdjdXN0b206ZmFsc2UnIHwgJ2N1c3RvbTp0cnVlJzsgLy8gfCAnYm9zcyc7XG5cbiAgLyoqIENvbmRpdGlvbnMgZm9yIG1hdGNoaW5nIHRoaXMgdGlsZS4gKi9cbiAgbWF0Y2g/OiAocmVhY2hhYmxlOiAoZHk6IG51bWJlciwgZHg6IG51bWJlcikgPT4gYm9vbGVhbixcbiAgICAgICAgICAgZmxhZzogYm9vbGVhbikgPT4gYm9vbGVhbjtcblxuICAvKiogV2hldGhlciB0aGlzIHNjcmVlbiBpcyBfbm90IGFsbG93ZWRfIHRvIGJlIHBsYWNlZCBhdXRvbWF0aWNhbGx5LiAqL1xuICBwbGFjZW1lbnQ/OiAnbWFudWFsJyB8ICdtb2QnO1xuICAvKipcbiAgICogVHlwZSBvZiBtb2RpZmljYXRpb24gdGhpcyBzY3JlZW4gaXMgZnJvbSBhIHNhbWUtbGF5b3V0IHRpbGUuXG4gICAqIE1vZCB0aWxlcyB3aWxsIG5vdCBiZSBpbmZlcnJlZCBub3JtYWxseSwgYW5kIG11c3QgYmUgYWRkZWQgYWZ0ZXJ3YXJkcy5cbiAgICogSW5mZXJyZWQgdGlsZXMgd2lsbCBiZSBtYXhpbWFsbHkgb3Blbi4gIE1vZHMgd2lsbCBjbG9zZSBwYXRocy4gIFdlXG4gICAqIG1heSBuZWVkIHRvIGFkZCBhIGZpeGVkIG51bWJlciBvZiB3YWxscywgYW5kL29yIHJlbW92ZSBhIGZpeGVkIG51Ym1lclxuICAgKiBvZiBicmlkZ2VzLiAgV2UgYWRkIGFzIG1hbnkgbm9uLWZsYWcgYmxvY2tzIGFzIHBvc3NpYmxlLlxuICAgKi9cbiAgbW9kPzogJ2Jsb2NrJyB8ICd3YWxsJyB8ICdicmlkZ2UnOyAvLyB8ICdtYW51YWwnO1xuXG4gIC8qKlxuICAgKiBZLWNvb3JkaW5hdGUgb2Ygc3RhdHVlcyBvbiB0aGlzIG1hcCBzY3JlZW4uICBUaGVzZSBtYXkgYmUgcG9wdWxhdGVkXG4gICAqIHdpdGggJDNmIG1vbnN0ZXIgc3Bhd25zIGF0IHg9NSBhbmQgeD1hIChwcm92aWRlZCB0aGUgbmVjZXNzYXJ5IHBhdHRlcm5cbiAgICogdGFibGVzIGFyZSBsb2FkZWQpLiAgVGhpcyBpcyBvbmx5IHJlbGV2YW50IG9uIHRoZSBmb3J0cmVzcyB0aWxlc2V0LlxuICAgKi9cbiAgc3RhdHVlcz86IHJlYWRvbmx5IG51bWJlcltdO1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSBzY3JlZW4gbWF5IGJlIGRlbGV0ZWQgZW50aXJlbHkgZnJvbSBhIG1hcCAoaS5lLiB3aGVuIHRyaW1taW5nXG4gICAqIHVudXNlZCByb3dzL2NvbHVtbnMpLiAgVGhpcyBpcyBhIHN1YnNldCBvZiBlbXB0eSBzY3JlZW5zLCBzaW5jZSBzb21lIGVtcHR5XG4gICAqIHNjcmVlbnMgYXJlIGltcG9ydGFudCB0byByZXRhaW4gKGUuZy4gZGVhZCBlbmRzKS5cbiAgICovXG4gIGRlbGV0ZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgdGhlIHNjcmVlbiwgaW4gdGVybXMgb2YgbWV0YXRpbGUgSURzIGF0IHRoZSB0aW1lIHRoZSBzY3JlZW5cbiAgICogaXMgYWxsb2NhdGVkLiAgVGhpcyBpcyBvbmx5IHVzZWQgZm9yIHNjcmVlbnMgd2l0aCBhIG5lZ2F0aXZlIHNpZCAoJ2lkJyBpblxuICAgKiB0aGlzIHN0cnVjdHVyZSksIGFuZCBvbmx5IG9uZSBzY3JlZW4gaW4gYSBncm91cCBvZiBzYW1lLXNpZCBzY3JlZW5zIHNob3VsZFxuICAgKiBzcGVjaWZ5IGl0LiAgSXQgbXVzdCBiZSAyNDAgYnl0ZXMgbG9uZy5cbiAgICovXG4gIGRlZmluaXRpb24/OiBVaW50OEFycmF5O1xuXG4gIC8qKiBBcmVuYSB0eXBlLiAgVGhpcyBzaG91bGQgYmUgcHJlc2VydmVkIHdoZW4gaW5mZXJyaW5nIHNjcmVlbnMuICovXG4gIGFyZW5hPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBTY3JlZW4gY29vcmRpbmF0ZXMgb2YgXCJ0YWxsXCIgaG91c2VzLCB3aGljaCBkbyBub3Qgd2FudCBhIHNoYWRvdyAodGlsZSAkMDYpXG4gICAqIGltbWVkaWF0ZWx5IG92ZXIgdGhlIGRvb3IgaWYgd2UgcmVtb3ZlIGEgc2hvcCBpY29uLCBidXQgcmF0aGVyIGEgc29saWRcbiAgICogKHRpbGUgJDIxKS5cbiAgICovXG4gIHRhbGxIb3VzZXM/OiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IHR5cGUgU2NyZWVuVXBkYXRlID0gKHM6IE1ldGFzY3JlZW4sIHNlZWQ6IG51bWJlciwgcm9tOiBSb20pID0+IGJvb2xlYW47XG5cbmV4cG9ydCBjb25zdCBmZWF0dXJlTWFzayA9IHtcbiAgLy8gVE9ETyAtIGNhdmU/IGZvcnRyZXNzPyBlZGdlPyAgd2UgYWxyZWFkeSBoYXZlIGNvbm5lY3Rpb25zIHRvIHRlbGwgdXMuLi5cbiAgJ2VtcHR5JzogMHgxLFxuICAncGl0JzogMHgyLFxuICAnYXJlbmEnOiAweDQsXG4gICdzcGlrZXMnOiAweDgsXG4gICd3aWRlJzogMHgxMCxcbiAgJ3JpdmVyJzogMHgyMCxcbiAgJ2JyaWRnZSc6IDB4NDAsXG4gICd3YWxsJzogMHg4MCxcbiAgJ3JhbXAnOiAweDEwMCxcbiAgJ292ZXJwYXNzJzogMHgyMDAsXG4gICd1bmRlcnBhc3MnOiAweDQwMCxcbiAgJ3doaXJscG9vbCc6IDB4ODAwLFxuICAnZGVhZGVuZCc6IDB4MTAwMCxcblxuICAvLyBOb3QgYWN0dWFsbHkgbGlzdGVkIGFzIGZlYXR1cmVzLCBidXQgYWRkZWQgc2VwYXJhdGVseSAtIHdlIGNvdWxkIGFkZCBvdGhlcnNcbiAgLy8gKHRvdGFsIG9mIDggYXZhaWxhYmxlLi4uPylcbiAgJ3N0YWlyOnVwJzogMHgxXzAwMDAsXG4gICdzdGFpcjpkb3duJzogMHgyXzAwMDAsXG5cbiAgLy8gVW5pcXVlIGZlYXR1cmVzOiB1cHBlciBiaXRzIGhhdmUgdmFyaW91cyBjb21iaW5hdGlvbnMgb2YgMyBvZiA2IGJpdHNcbiAgLy8gICA3LGIsZCxlLDEzLDE1LDE2LDE5LDFhLDFjLDIzLDI1LDI2LDI5LDJhLDJjLDMxLDMyLDM0LDM4XG4gIC8vIFNpbmNlIHRoZXkgYXJlIG5ldmVyIHNoYXJlZCwgd2UgY2FuIHBhY2sgYSBsb3QgbW9yZSBpbnRvIHRoZSBzYW1lIHNwYWNlLlxuICAncG9ydG9hMSc6IDB4N18wMDBfMDAwLFxuICAncG9ydG9hMic6IDB4Yl8wMDBfMDAwLFxuICAncG9ydG9hMyc6IDB4ZF8wMDBfMDAwLFxuICAnbGFrZSc6IDB4ZV8wMDBfMDAwLFxuICAnbGlnaHRob3VzZSc6IDB4MTNfMDAwXzAwMCxcbiAgJ2NhYmluJzogMHgxNV8wMDBfMDAwLFxuICAnd2luZG1pbGwnOiAweDE2XzAwMF8wMDAsXG4gICdhbHRhcic6IDB4MTlfMDAwXzAwMCxcbiAgJ3B5cmFtaWQnOiAweDFhXzAwMF8wMDAsXG4gICdjcnlwdCc6IDB4MWNfMDAwXzAwMCxcblxuICAvLyBQcmV2ZW50cyBwbGFjaW5nIHRoaXMgYnkgaGFuZC5cbiAgJ21hbnVhbCc6IDB4NDAwMF8wMDAwLFxuICAvLyBJbmRpY2F0ZXMgd2UgbWF5IHdhbnQgdG8gY29uc29saWRhdGUgdGhpcyBzY3JlZW4uXG4gICdjb25zb2xpZGF0ZSc6IDB4ODAwMF8wMDAwLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgRmVhdHVyZSA9IGtleW9mIHR5cGVvZiBmZWF0dXJlTWFzaztcbiAgLy8gJ3BpdCcgfCAnYXJlbmEnIHwgJ3NwaWtlcycgfCAnYnJpZGdlJyB8ICd3YWxsJyB8ICdyYW1wJyB8ICdlbXB0eScgfFxuICAvLyAncG9ydG9hMScgfCAncG9ydG9hMicgfCAncG9ydG9hMycgfCAvLyBwYXRoIGZyb20gc2FicmUgdG8gcG9ydG9hXG4gIC8vICdsYWtlJyB8ICdvdmVycGFzcycgfCAndW5kZXJwYXNzJyB8ICd3aGlybHBvb2wnIHxcbiAgLy8gJ2xpZ2h0aG91c2UnIHwgJ2NhYmluJyB8ICd3aW5kbWlsbCcgfCAnYWx0YXInIHwgJ3B5cmFtaWQnIHwgJ2NyeXB0JyB8XG4gIC8vICdjb25zb2xpZGF0ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSWNvbiB7XG4gIHNob3J0OiBzdHJpbmc7IC8vIHNpbmdsZSBjaGFyYWN0ZXJcbiAgZnVsbDogcmVhZG9ubHkgW3N0cmluZywgc3RyaW5nLCBzdHJpbmddOyAvLyAzeDMgZ3JpZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaWNvbihhcnI6IFRlbXBsYXRlU3RyaW5nc0FycmF5KTogSWNvbiB7XG4gIGlmIChhcnIubGVuZ3RoICE9IDEpIHRocm93IG5ldyBFcnJvcignQmFkIGljb24gaW5wdXQnKTtcbiAgY29uc3Qgc3RyID0gYXJyWzBdO1xuICAvLyBwYXJzZSB0aGUgc3RyaW5nLlxuICBjb25zdCBsaW5lcyA9IHN0ci5zcGxpdCgnXFxuJyk7XG4gIC8vIGxpbmVzIDEuLjMgYXJlIHRoZSBmdWxsIGljb24uXG4gIGNvbnN0IGZ1bGwgPSBsaW5lcy5zbGljZSgxKS5tYXAobCA9PiBsLnJlcGxhY2UoL15cXHMqXFx8fFxcfFxccyokL2csICcnKSk7XG4gIGNvbnN0IHNob3J0ID0gL1xcUy8udGVzdChsaW5lc1swXSkgPyBsaW5lc1swXVswXSA6IGZ1bGxbMV1bMV07XG4gIHJldHVybiB7c2hvcnQsIGZ1bGw6IFtmdWxsWzBdLCBmdWxsWzFdLCBmdWxsWzJdXX07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWFkU2NyZWVuKHNwZWM6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlcGxhY2VtZW50czogW3N0cmluZywgbnVtYmVyXVtdKTogVWludDhBcnJheSB7XG4gIGNvbnN0IHMgPSBzcGVjLnNwbGl0KC9cXHMrL2cpO1xuICBpZiAoIXNbMF0pIHMuc2hpZnQoKTtcbiAgaWYgKCFzW3MubGVuZ3RoIC0gMV0pIHMucG9wKCk7XG4gIGlmIChzLmxlbmd0aCAhPT0gMjQwKSB0aHJvdyBuZXcgRXJyb3IoYEJhZCBzY3JlZW4gZGVmaW5pdGlvbjogJHtzLmxlbmd0aH1gKTtcbiAgY29uc3QgbWFwID0gbmV3IE1hcChyZXBsYWNlbWVudHMpO1xuICByZXR1cm4gVWludDhBcnJheS5mcm9tKHMsIHggPT4gbWFwLmdldCh4KSA/PyBwYXJzZUludCh4LCAxNikpO1xufVxuXG5leHBvcnQgdHlwZSBTdGFpclR5cGUgPSAnc3RhaXI6dXAnIHwgJ3N0YWlyOmRvd24nO1xuZXhwb3J0IHR5cGUgRWRnZVR5cGUgPSAnZWRnZTp0b3AnIHwgJ2VkZ2U6Ym90dG9tJyB8ICdlZGdlOmxlZnQnIHwgJ2VkZ2U6cmlnaHQnO1xuZXhwb3J0IHR5cGUgU2VhbWxlc3NUeXBlID0gJ3NlYW1sZXNzOnVwJyB8ICdzZWFtbGVzczpkb3duJztcbmV4cG9ydCB0eXBlIENvbm5lY3Rpb25UeXBlID1cbiAgICBTdGFpclR5cGUgfCBFZGdlVHlwZSB8IFNlYW1sZXNzVHlwZSB8XG4gICAgJ2NhdmUnIHwgJ2NyeXB0JyB8ICdkb29yJyB8ICdkb29yMicgfCAnZG9vcjMnIHwgJ2ZvcnRyZXNzJyB8XG4gICAgJ2dhdGUnIHwgJ3N3YW1wJyB8ICd0ZWxlcG9ydGVyJyB8ICd3aW5kbWlsbCc7XG4vLyBUT0RPIC0gaXMgd2luZG1pbGwganVzdCBkb29yMj9cblxuLy8gTk9URTogc3dhbXAgY29ubmVjdHMgdG8gZWRnZTpib3R0b20gZm9yIGNhdmUgb3IgdG93bj9cblxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0aW9uIHtcbiAgcmVhZG9ubHkgdHlwZTogQ29ubmVjdGlvblR5cGU7XG4gIHJlYWRvbmx5IG1hbnVhbD86IGJvb2xlYW47ICAgICAgICAgLy8gc2hvdWxkIG9ubHkgYmUgcGxhY2VkIG1hbnVhbGx5XG4gIHJlYWRvbmx5IGRpcjogbnVtYmVyOyAgICAgICAgICAgICAgLy8gMD11cCwgMT1sZWZ0LCAyPWRvd24sIDM9cmlnaHRcbiAgcmVhZG9ubHkgZW50cmFuY2U6IG51bWJlcjsgICAgICAgICAvLyBwb3MgWXlYeFxuICByZWFkb25seSBleGl0czogcmVhZG9ubHkgbnVtYmVyW107IC8vIHRpbGUgWVhcbiAgcmVhZG9ubHkgYWxsb3dlZEV4aXRzPzogcmVhZG9ubHkgbnVtYmVyW107IC8vIGV4dHJhIGV4aXRzIHRvIG1hdGNoXG4gIC8vIFRPRE8gLSBzaW5nbGVIZWlnaHRFbnRyYW5jZSAtIGZvciBkaXI9MiBqdXN0IHN1YnRyYWN0IDB4MjAgPz9cbiAgLy8gVE9ETyAtIG9wcG9zaXRlIGRpcmVjdGlvbj8gd2F0ZXJlcmZhbGwgY2F2ZSBpcyBhIHJpZ2h0L2Rvd24gbWF0Y2h1cC4uLlxufVxuXG4vKiogQHBhcmFtIHRpbGUgcG9zaXRpb24gb2YgbG93ZXItbGVmdCBtZXRhdGlsZSAoZS5nLiAweDQyIGZvciA0MF8zMCkuICovXG5leHBvcnQgZnVuY3Rpb24gdXBTdGFpcih0aWxlOiBudW1iZXIsIHdpZHRoID0gMik6IENvbm5lY3Rpb24ge1xuICAvLyBmcm9tIG1hcCAwNDogZW50cmFuY2UgNDBfMzAgID0+IGV4aXRzIDMyLDMzXG4gIC8vIGZyb20gbWFwIDE5IChzaW5nbGUtd2lkdGgpOiB0aWxlIDY4ID0+IGVudHJhbmNlIDc4Xzg4LCBleGl0IDY4XG4gIGNvbnN0IHkgPSB0aWxlID4+PiA0O1xuICBjb25zdCB4ID0gdGlsZSAmIDB4ZjtcbiAgaWYgKHdpZHRoID09PSAxKSB7XG4gICAgLy8gVE9ETyAtIHdoYXQgZG9lcyBpdCBtZWFuIGZvciBlbnRyYW5jZSB0byBiZSA+IDB4ZmZmZi4uLj9cbiAgICAvLyAgICAgIC0gc2NyZWVuIDZjIChvYWsgTlcpIGhhcyB0aGlzXG4gICAgY29uc3QgZHkgPSB5ID09PSAweGUgPyAweDI4MDAgOiAweDE4MDA7XG4gICAgY29uc3QgZW50cmFuY2UgPSAoKHkgPDwgMTIpICsgZHkpIHwgKCh4IDw8IDQpICsgMHgwMDA4KTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3N0YWlyOnVwJyxcbiAgICAgIGRpcjogMixcbiAgICAgIGVudHJhbmNlLFxuICAgICAgZXhpdHM6IFt0aWxlXSxcbiAgICAgIC8vYWxsb3dlZEV4aXRzOiBbdGlsZSAtIDE2LCB0aWxlICsgMTZdLFxuICAgIH07XG4gIH1cbiAgLy8gVE9ETyAtIGlmIHkgaXMgMHhlIHRoZW4gd2UgbWF5IG5lZWQgdG8gYWRqdXN0IGZvciBzY3JlZW4gZWRnZT9cbiAgY29uc3QgZW50cmFuY2UgPSB5IDw8IDEyIHwgKCh4IDw8IDQpICsgKHdpZHRoIDw8IDMpKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnc3RhaXI6dXAnLFxuICAgIGRpcjogMCxcbiAgICBlbnRyYW5jZSxcbiAgICBleGl0czogc2VxKHdpZHRoLCBpID0+IHRpbGUgLSAweDEwICsgaSksXG4gICAgLy8gVE9ETyAtIGlmIHdlIHNldCB0aGlzIHRoZW4gd2UgY291bGQgcG9zc2libHkgc2F2ZSBzb21lIG9mIHRoZVxuICAgIC8vICAgICAgICBwcmVwYXJzZSBub3JtYWxpemF0aW9uIHRoYXQncyBjdXJyZW50bHkgcmVxdWlyZWQuXG4gICAgLy9hbGxvd2VkRXhpdHM6IFsuLi5zZXEod2lkdGgsIGkgPT4gdGlsZSAtIDB4MjAgKyBpKSxcbiAgICAvLyAgICAgICAgICAgICAgIC4uLnNlcSh3aWR0aCwgaSA9PiB0aWxlICsgaSldLFxuICB9O1xufVxuXG4vKiogQHBhcmFtIHRpbGUgcG9zaXRpb24gb2YgdXBwZXItbGVmdCBtZXRhdGlsZSAoZS5nLiAweGEyIGZvciBhZl8zMCkuICovXG5leHBvcnQgZnVuY3Rpb24gZG93blN0YWlyKHRpbGU6IG51bWJlciwgd2lkdGggPSAyKTogQ29ubmVjdGlvbiB7XG4gIC8vIGZyb20gbWFwIDA1OiBlbnRyYW5jZSBhZl8zMCAgPT4gZXhpdHMgYjIsYjNcbiAgLy8gZnJvbSBtYXAgZDQgKHNpbmdsZS13aWR0aCk6IHRpbGUgNGMgPT4gZW50cmFuY2UgMzhfYzgsIGV4aXQgNGNcbiAgY29uc3QgeSA9IHRpbGUgPj4+IDQ7XG4gIGNvbnN0IHggPSB0aWxlICYgMHhmO1xuICBpZiAod2lkdGggPT09IDEpIHtcbiAgICBjb25zdCBlbnRyYW5jZSA9ICgoeSA8PCAxMikgLSAweDA4MDApIHwgKCh4IDw8IDQpICsgMHgwMDA4KTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3N0YWlyOmRvd24nLFxuICAgICAgZGlyOiAyLFxuICAgICAgZW50cmFuY2UsXG4gICAgICBleGl0czogW3RpbGVdLFxuICAgICAgYWxsb3dlZEV4aXRzOiBbdGlsZSArIDE2LCB0aWxlIC0gMTZdLFxuICAgIH07XG4gIH1cbiAgY29uc3QgZW50cmFuY2UgPSB5IDw8IDEyIHwgMHgwZjAwIHwgKCh4IDw8IDQpICsgKHdpZHRoIDw8IDMpKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnc3RhaXI6ZG93bicsXG4gICAgZGlyOiAyLFxuICAgIGVudHJhbmNlLFxuICAgIGV4aXRzOiBzZXEod2lkdGgsIGkgPT4gdGlsZSArIDB4MTAgKyBpKSxcbiAgICBhbGxvd2VkRXhpdHM6IFsuLi5zZXEod2lkdGgsIGkgPT4gdGlsZSArIDB4MjAgKyBpKSxcbiAgICAgICAgICAgICAgICAgICAuLi5zZXEod2lkdGgsIGkgPT4gdGlsZSArIGkpXSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhdmUodGlsZTogbnVtYmVyLCB0eXBlOiBDb25uZWN0aW9uVHlwZSA9ICdjYXZlJyk6IENvbm5lY3Rpb24ge1xuICByZXR1cm4gey4uLnVwU3RhaXIodGlsZSArIDE2KSwgdHlwZX07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb29yKHRpbGU6IG51bWJlciwgdHlwZTogQ29ubmVjdGlvblR5cGUgPSAnZG9vcicpOiBDb25uZWN0aW9uIHtcbiAgcmV0dXJuIHsuLi51cFN0YWlyKHRpbGUsIDEpLCB0eXBlfTtcbn1cblxuLyoqIEBwYXJhbSB0aWxlIGJvdHRvbS1sZWZ0IG1ldGF0aWxlICovXG5leHBvcnQgZnVuY3Rpb24gd2F0ZXJmYWxsQ2F2ZSh0aWxlOiBudW1iZXIpOiBDb25uZWN0aW9uIHtcbiAgY29uc3QgeSA9IHRpbGUgPj4+IDQ7XG4gIGNvbnN0IHggPSB0aWxlICYgMHhmO1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdjYXZlJyxcbiAgICBkaXI6IDAsXG4gICAgZW50cmFuY2U6IHkgPDwgMTIgfCB4IDw8IDQgfCAweGYsXG4gICAgZXhpdHM6IFt0aWxlIC0gMHhmLCB0aWxlICsgMV0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b3BFZGdlKHtsZWZ0ID0gNywgd2lkdGggPSAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IDIsIG1hbnVhbCA9IGZhbHNlfSA9IHt9KTogQ29ubmVjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2VkZ2U6dG9wJyxcbiAgICBtYW51YWwsXG4gICAgZGlyOiAwLFxuICAgIGVudHJhbmNlOiAoKHRvcCArIDEpIDw8IDEyKSB8ICgobGVmdCA8PCA0KSArICh3aWR0aCA8PCAzKSksXG4gICAgZXhpdHM6IHNlcSh3aWR0aCwgaSA9PiAodG9wIDw8IDQpIHwgKGkgKyBsZWZ0KSksXG4gIH07XG59XG5cbi8vIFRPRE8gLSBjb25zaWRlciBzZXBhcmF0aW5nIHdpZGUgdnMgbmFycm93IGVkZ2VzIGludG8gc2VwYXJhdGUgdHlwZXM/Pz9cblxuZXhwb3J0IGZ1bmN0aW9uIGJvdHRvbUVkZ2Uoe2xlZnQgPSA3LCB3aWR0aCA9IDIsIHNoaWZ0ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gJ2VkZ2U6Ym90dG9tJyBhcyBDb25uZWN0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW51YWwgPSBmYWxzZX0gPSB7fSk6IENvbm5lY3Rpb24ge1xuICAvLyBOT1RFOiBzb21lIHNjcmVlbnMgY2FuIGJlIHVzZWQgYm90aCBpbiBub3JtYWwgbWFwcyBhbmQgaW4gc2luZ2xlLWhlaWdodFxuICAvLyBtYXBzLiAgV2hlbiB1c2VkIGluIHNpbmdsZS1oZWlnaHQsIHdlIG5lZWQgdG8gc3VidHJhY3QgMiBmcm9tIHRoZSBZIHRpbGVcbiAgLy8gY29vcmRpbmF0ZXMgb2YgdGhlIGVudHJhbmNlL2V4aXQsIGNsYW1waW5nIHRvIGJmIChlbnRyYW5jZSkgYW5kIGMgKGV4aXQpLlxuICByZXR1cm4ge1xuICAgIHR5cGUsIG1hbnVhbCxcbiAgICBkaXI6IDIsXG4gICAgZW50cmFuY2U6IDB4ZGZfMDAgfCAoKGxlZnQgPDwgNCkgKyAod2lkdGggPDwgMykgKyAxNiAqIHNoaWZ0KSxcbiAgICBleGl0czogc2VxKHdpZHRoLCBpID0+IDB4ZTAgfCAoaSArIGxlZnQpKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJvdHRvbUVkZ2VIb3VzZSh7bGVmdCA9IDcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdCA9IDB9ID0ge30pOiBDb25uZWN0aW9uIHtcbiAgLy8gVW5saWtlIFwiZHVhbC1tb2RlXCIgc2NyZWVucywgaW5kb29ycy1vbmx5IHNjcmVlbnMgaGF2ZSB0aGVpciBlbnRyYW5jZSBhblxuICAvLyBhZGRpdGlvbmFsIHRpbGUgdXAsIGF0IGFmL2IuICBUaGlzIGhhcmQtY29kZXMgdGhhdC5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnZWRnZTpib3R0b20nLFxuICAgIGRpcjogMixcbiAgICBlbnRyYW5jZTogMHhhZl8wMCB8ICgobGVmdCA8PCA0KSArICh3aWR0aCA8PCAzKSArIDE2ICogc2hpZnQpLFxuICAgIGV4aXRzOiBzZXEod2lkdGgsIGkgPT4gMHhiMCB8IChpICsgbGVmdCkpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGVmdEVkZ2Uoe3RvcCA9IDcsIGhlaWdodCA9IDIsIHNoaWZ0ID0gMH0gPSB7fSk6IENvbm5lY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdlZGdlOmxlZnQnLFxuICAgIGRpcjogMSxcbiAgICBlbnRyYW5jZTogKCh0b3AgPDwgMTIpICsgKCgxNiAqIHNoaWZ0KSA8PCA4KSArIChoZWlnaHQgPDwgMTEpKSB8IDB4MTAsXG4gICAgZXhpdHM6IHNlcShoZWlnaHQsIGkgPT4gKGkgKyB0b3ApIDw8IDQpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmlnaHRFZGdlKHt0b3AgPSA3LCBoZWlnaHQgPSAyLCBzaGlmdCA9IDB9ID0ge30pOiBDb25uZWN0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnZWRnZTpyaWdodCcsXG4gICAgZGlyOiAzLFxuICAgIGVudHJhbmNlOiAoKHRvcCA8PCAxMikgKyAoKDE2ICogc2hpZnQpIDw8IDgpICsgKGhlaWdodCA8PCAxMSkpIHwgMHhlZixcbiAgICBleGl0czogc2VxKGhlaWdodCwgaSA9PiAoaSArIHRvcCkgPDwgNCB8IDB4ZiksXG4gIH07XG59XG5cbi8qKiBAcGFyYW0gdGlsZSBUb3AtbGVmdCB0aWxlIG9mIHRyYW5zaXRpb24gKGhlaWdodCAyKSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlYW1sZXNzVXAodGlsZTogbnVtYmVyLCB3aWR0aCA9IDIpOiBDb25uZWN0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnc2VhbWxlc3M6dXAnLFxuICAgIGRpcjogMCxcbiAgICBnZXQgZW50cmFuY2UoKTogbnVtYmVyIHsgdGhyb3cgbmV3IEVycm9yKCdkb2VzIG5vdCBtYWtlIHNlbnNlJyk7IH0sXG4gICAgZXhpdHM6IHNlcSh3aWR0aCwgaSA9PiAodGlsZSArIGkpKSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlYW1sZXNzRG93bih0aWxlOiBudW1iZXIsIHdpZHRoID0gMik6IENvbm5lY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdzZWFtbGVzczpkb3duJyxcbiAgICBkaXI6IDIsXG4gICAgZ2V0IGVudHJhbmNlKCk6IG51bWJlciB7IHRocm93IG5ldyBFcnJvcignZG9lcyBub3QgbWFrZSBzZW5zZScpOyB9LFxuICAgIGV4aXRzOiBzZXEod2lkdGgsIGkgPT4gKHRpbGUgKyBpKSksXG4gIH07XG59XG4iXX0=