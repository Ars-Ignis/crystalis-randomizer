import { World } from './graph/world.js';
import { newFill, traverse } from './graph/shuffle.js';
import { Bits } from './bits.js';
import { FlagSet } from './flagset.js';
import { Rom } from './rom.js';
import { deterministic } from './pass/deterministic.js';
const ITEMS = `
sword-of-wind $00 sort-of-wind
sword-of-fire $01 sort-of-fire
sword-of-water $02 sort-of-water
sword-of-thunder $03 sort-of-thunder
windmill-key $32
statue-of-onyx $25 onyx-statue
insect-flute $27
key-to-prison $33 prison-key
flute-of-lime $28

ball-of-wind $05 orb-of-wind
ball-of-fire $07 orb-of-fire
ball-of-water $09 orb-of-water
ball-of-thunder $0b orb-of-thunder
kirisa-plant $3c carissa-plant
alarm-flute $31
fog-lamp $35
shell-flute $36
broken-statue $38
eye-glasses $37 eyeglasses
glowing-lamp $39

tornado-bracelet $06
flame-bracelet $08
blizzard-bracelet $0a
storm-bracelet $0c
love-pendant $3b
key-to-styx $34
opel-statue $26
sacred-shield $12
ivory-statue $3d

rabbit-boots $2e
gas-mask $29 hazard-suit
shield-ring $30
iron-necklace $2c
leather-boots $2f speed-boots
power-ring $2a
warrior-ring $2b
deos-pendant $2d deo dio d-o t-o deal
bow-of-moon $3e moon
bow-of-sun $3f sun

refresh $41
paralysis $42
telepathy $43
teleport $44
recover $45
barrier $46
change $47
flight $48
psycho-armor $1c
bow-of-truth $40 truth
`;
const SLOTS = [
    [0x00, 121, 192],
    [0x01, 274, 176],
    [0x02, 335, 123],
    [0x03, 77, 10],
    [0x05, 89, 107],
    [0x06, 115, 224],
    [0x07, 282, 187],
    [0x08, 47, 182],
    [0x09, 251, 232],
    [0x0a, 206, 249],
    [0x0b, 83, 63],
    [0x0c, 23, 9],
    [0x12, 49, 48],
    [0x14, 77, 2],
    [0x76, 70, 3],
    [0x77, 84, 3],
    [0x1b, 168, 96],
    [0x1c, 199, 110],
    [0x1d, 82, 95],
    [0x1e, 82, 101],
    [0x1f, 346, 147],
    [0x70, 346, 153],
    [0x71, 346, 159],
    [0x20, 126, 52],
    [0x21, 227, 97],
    [0x22, 256, 73],
    [0x23, 58, 115],
    [0x24, 82, 113],
    [0x25, 189, 180],
    [0x26, 18, 172],
    [0x27, 267, 185],
    [0x28, 275, 147],
    [0x29, 147, 206],
    [0x2a, 172, 104],
    [0x2b, 203, 5],
    [0x2c, 249, 69],
    [0x2d, 191, 110],
    [0x2e, 89, 99],
    [0x2f, 164, 104],
    [0x30, 319, 123],
    [0x72, 320, 130],
    [0x32, 105, 94],
    [0x33, 64, 198],
    [0x34, 83, 71],
    [0x35, 345, 140],
    [0x36, 301, 119],
    [0x37, 233, 118],
    [0x38, 234, 88],
    [0x39, 295, 92],
    [0x3b, 274, 117],
    [0x3c, 338, 226],
    [0x3d, 23, 17],
    [0x3e, 206, 241],
    [0x3f, 101, 6],
    [0x40, 207, 110],
    [0x41, 92, 117],
    [0x42, 279, 126],
    [0x43, 202, 138],
    [0x44, 124, 202],
    [0x45, 304, 128],
    [0x46, 248, 35],
    [0x47, 277, 3],
    [0x48, 15, 25],
    [0x50, 82, 107],
    [0x52, 134, 219],
    [0x53, 59, 219],
    [0x54, 52, 55],
    [0x55, 241, 97],
    [0x56, 123, 23],
    [0x74, 115, 3],
    [0x57, 70, 9],
    [0x75, 84, 9],
    [0x58, 32, 38],
    [0x79, 32, 16],
    [0x7a, 40, 16],
    [0x7b, 40, 38],
    [0x5a, 161, 97],
    [0x10, 327, 123],
    [0x5c, 256, 79],
    [0x5d, 36, 139],
    [0x5e, 14, 229],
    [0x5f, 345, 225],
    [0x60, 18, 94],
    [0x61, 234, 96],
    [0x62, 18, 118],
    [0x63, 36, 54],
    [0x64, 175, 97],
    [0x65, 139, 40],
    [0x66, 66, 160],
    [0x69, 131, 201],
    [0x6a, 76, 226],
    [0x6b, 18, 100],
    [0x6c, 193, 103],
    [0x78, 199, 103],
    [0x6d, 205, 103],
    [0x73, 256, 67],
    [0x6e, 24, 38],
    [0x6f, 44, 97],
];
const KEY = new Set([0x10, 0x12, 0x23, 0x26, 0x61]);
const BOSSES = new Map([
    [~0x100, 0x2e],
    [~0x101, 0x07],
    [~0x102, 0x08],
    [~0x103, 0x09],
    [~0x104, 0x38],
    [~0x105, 0x0b],
    [~0x106, 0x26],
    [~0x107, 0x23],
    [~0x108, 0x12],
    [~0x109, 0x3d],
    [~0x10a, 0x1c],
    [~0x10c, 0x61],
]);
const TRADES = new Set([0x29, 0x3e, 0x44, 0x47, 0x48]);
class Graph {
    constructor(rom, world, flags) {
        this.rom = rom;
        this.world = world;
        this.flags = flags;
        this.slots = new Map();
        this.items = new Map();
        this.slotElts = new Map();
        this.has = Bits.of();
        this.names = new Map();
        window.GRAPH = this;
        this.grid = document.getElementsByClassName('grid')[0];
        this.map = document.getElementsByClassName('map')[0];
        let always = Bits.of();
        for (const { item: id, index } of world.graph.slots) {
            if (id == null)
                continue;
            this.slots.set(id, index);
        }
        for (const { item: id, index } of world.graph.items) {
            if (id == null)
                continue;
            this.items.set(id, index);
            const item = rom.items[id];
            if (item && !item.unique)
                always = Bits.with(always, index);
        }
        this.unusedItems = world.graph.items.length;
        this.has = this.always = always;
        const toggle = (e) => {
            let t = e.target;
            while (t && !t.dataset['index']) {
                t = t.parentElement;
            }
            if (!t)
                return;
            this.toggle(t);
            e.preventDefault();
        };
        this.grid.addEventListener('click', toggle);
    }
    toggle(t, val) {
        const uid = Number(t.dataset['index']);
        const has = t.classList.toggle('got');
        if (t.dataset['item']) {
            this.has = has ?
                Bits.with(this.has, uid) :
                Bits.without(this.has, uid);
        }
        this.update();
    }
    addSlot(slotId, x, y) {
        const index = this.slots.get(slotId);
        if (index == null) {
            debugger;
            throw new Error();
        }
        const div = document.createElement('div');
        const itemget = this.rom.itemGets[slotId];
        const item = itemget && this.rom.items[itemget.itemId];
        if (item && item.unique || KEY.has(slotId)) {
            div.classList.add('key');
            x--;
            y--;
        }
        x--;
        y--;
        div.dataset['index'] = String(index);
        div.style.left = x + 'px';
        div.style.top = y + 'px';
        const inner = document.createElement('div');
        div.appendChild(inner);
        inner.textContent =
            slotId >= 0x70 ?
                'Mimic' :
                this.rom.items[itemget.itemId].messageName.replace(' ', '\xa0');
        if (this.flags.randomizeTrades() && TRADES.has(slotId)) {
            div.classList.add('boss');
        }
        this.slotElts.set(index, div);
        this.map.appendChild(div);
    }
    addItem(cls, id, ...otherNames) {
        const uid = Number.parseInt(id.substring(1), 16);
        const outer = document.getElementsByClassName(cls)[0];
        const inner = document.createElement('div');
        outer.appendChild(inner);
        let index = this.items.get(uid);
        if (index == null) {
            this.items.set(uid, index = this.unusedItems++);
        }
        outer.dataset['index'] = String(index);
        outer.dataset['item'] = String(index);
        this.names.set(cls.replace(/-/g, ' '), outer);
        for (const name of otherNames) {
            this.names.set(name.replace(/-/g, ' '), outer);
        }
    }
    addExtraFlags() {
        const g = this.world.graph;
        for (const slot of g.slots.slice(g.fixed)) {
            const c = slot.condition;
            const bossSlot = BOSSES.get(c);
            const replaced = bossSlot && this.slots.get(bossSlot);
            if (replaced == null)
                continue;
            const elt = this.slotElts.get(replaced);
            if (elt == null)
                throw new Error('expected');
            this.slotElts.delete(Number(elt.dataset['index']));
            this.slotElts.set(slot.index, elt);
            elt.classList.add('boss');
            elt.dataset['index'] = String(slot.index);
            elt.dataset['item'] = String(slot.index);
        }
    }
    update() {
        for (const elt of this.slotElts.values()) {
            elt.dataset['state'] = elt.classList.contains('got') ? '' : 'blocked';
        }
        for (const slot of traverse(this.world.graph, newFill(), this.has)) {
            const elt = this.slotElts.get(slot);
            if (elt && !elt.classList.contains('got')) {
                elt.dataset['state'] = 'available';
            }
        }
    }
    addVoiceRecognition() {
        try {
            let stopped = false;
            const rec = this.recognition = new SpeechRecognition();
            const grammar = new SpeechGrammarList();
            grammar.addFromString(`
          #JSGF V1.0;
          grammar command;
          public <item> = ${[...this.names.keys()].join(' | ')};
          public <command> = track <item> | untrack <item>;
      `, 1);
            rec.lang = 'en-US';
            rec.grammars = grammar;
            rec.interimResults = false;
            rec.maxAlternatives = 10;
            rec.onstart = () => { stopped = false; };
            rec.onresult = (e) => {
                const result = e.results[e.results.length - 1];
                if (!result.isFinal)
                    return;
                let matched = false;
                for (const alt of result) {
                    const command = alt.transcript.toLowerCase().replace(/[^a-z ]/g, '');
                    if (command === 'stop listening')
                        matched = stopped = true;
                    const match = /([auo][nm] ?)?tr[au]c?k?(?:ed)? ?(.+)/.exec(command);
                    if (!match)
                        continue;
                    const el = this.names.get(match[2]);
                    if (!el)
                        continue;
                    this.toggle(el, !match[1]);
                    matched = true;
                    break;
                }
                if (!matched) {
                    console.log(`No match: ${[...result].map(r => r.transcript).join(', ')}`);
                }
                rec.stop();
            };
            rec.onend = () => { if (!stopped)
                rec.start(); };
            rec.start();
            return true;
        }
        catch (err) {
            console.error(err);
            return false;
        }
    }
}
function polyfill(...names) {
    const win = window;
    for (let n of names) {
        if (typeof win[n] === 'function') {
            win[names[0]] = win[n];
            return;
        }
    }
    console.error(`Could not polyfill ${names[0]}`);
}
polyfill('SpeechRecognition', 'webkitSpeechRecognition');
polyfill('SpeechGrammarList', 'webkitSpeechGrammarList');
let voice = false;
let flags = 'Rlpt Tb';
for (const arg of location.hash.substring(1).split('&')) {
    const [key, value] = arg.split('=');
    if (key === 'flags') {
        flags = decodeURIComponent(value);
    }
    if (key === 'voice') {
        voice = true;
    }
}
async function main() {
    const rom = await Rom.load();
    const flagset = new FlagSet(flags);
    deterministic(rom, flagset);
    const world = World.build(rom, flagset, true);
    const graph = new Graph(rom, world, flagset);
    for (let item of ITEMS.split('\n')) {
        item = item.replace(/#.*/, '').trim();
        if (!item)
            continue;
        graph.addItem(...item.split(/ +/g));
    }
    for (const slot of SLOTS) {
        graph.addSlot(...slot);
    }
    graph.addExtraFlags();
    graph.update();
    document.getElementById('toggle-map').addEventListener('click', () => {
        graph.map.classList.toggle('hidden');
    });
    document.getElementById('clear-all').addEventListener('click', () => {
        for (const e of graph.grid.querySelectorAll('.got')) {
            e.classList.remove('got');
        }
        graph.has = graph.always;
        graph.update();
    });
    if (voice)
        graph.addVoiceRecognition();
    window.graph = graph;
}
;
main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhY2tlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy90cmFja2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUN2QyxPQUFPLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3JELE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDL0IsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLGNBQWMsQ0FBQztBQUNyQyxPQUFPLEVBQUMsR0FBRyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQzdCLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUV0RCxNQUFNLEtBQUssR0FBVzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBc0RyQixDQUFDO0FBRUYsTUFBTSxLQUFLLEdBQXFEO0lBQzlELENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBRWYsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFFZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFFZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFFZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBR2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0NBQ2hCLENBQUM7QUFHRixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMs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S0FBSyxHQUFHLEtBQUssQ0FBQztBQUNoQyxDQUFDO0FBQUEsQ0FBQztBQUlGLElBQUksRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSXRlbSB0cmFja2VyIGZvciB3ZWIuXG4vLyBVc2VzIGZsYWdzZXQgdG8gZmlndXJlIG91dCBhY3R1YWwgZGVwZW5kZW5jaWVzLlxuXG5pbXBvcnQge1dvcmxkfSBmcm9tICcuL2dyYXBoL3dvcmxkLmpzJztcbmltcG9ydCB7bmV3RmlsbCwgdHJhdmVyc2V9IGZyb20gJy4vZ3JhcGgvc2h1ZmZsZS5qcyc7XG5pbXBvcnQge0JpdHN9IGZyb20gJy4vYml0cy5qcyc7XG5pbXBvcnQge0ZsYWdTZXR9IGZyb20gJy4vZmxhZ3NldC5qcyc7XG5pbXBvcnQge1JvbX0gZnJvbSAnLi9yb20uanMnO1xuaW1wb3J0IHtkZXRlcm1pbmlzdGljfSBmcm9tICcuL3Bhc3MvZGV0ZXJtaW5pc3RpYy5qcyc7XG5cbmNvbnN0IElURU1TOiBzdHJpbmcgPSBgXG5zd29yZC1vZi13aW5kICQwMCBzb3J0LW9mLXdpbmRcbnN3b3JkLW9mLWZpcmUgJDAxIHNvcnQtb2YtZmlyZVxuc3dvcmQtb2Ytd2F0ZXIgJDAyIHNvcnQtb2Ytd2F0ZXJcbnN3b3JkLW9mLXRodW5kZXIgJDAzIHNvcnQtb2YtdGh1bmRlclxud2luZG1pbGwta2V5ICQzMlxuc3RhdHVlLW9mLW9ueXggJDI1IG9ueXgtc3RhdHVlXG5pbnNlY3QtZmx1dGUgJDI3XG5rZXktdG8tcHJpc29uICQzMyBwcmlzb24ta2V5XG5mbHV0ZS1vZi1saW1lICQyOFxuXG5iYWxsLW9mLXdpbmQgJDA1IG9yYi1vZi13aW5kXG5iYWxsLW9mLWZpcmUgJDA3IG9yYi1vZi1maXJlXG5iYWxsLW9mLXdhdGVyICQwOSBvcmItb2Ytd2F0ZXJcbmJhbGwtb2YtdGh1bmRlciAkMGIgb3JiLW9mLXRodW5kZXJcbmtpcmlzYS1wbGFudCAkM2MgY2FyaXNzYS1wbGFudFxuYWxhcm0tZmx1dGUgJDMxXG5mb2ctbGFtcCAkMzVcbnNoZWxsLWZsdXRlICQzNlxuYnJva2VuLXN0YXR1ZSAkMzhcbmV5ZS1nbGFzc2VzICQzNyBleWVnbGFzc2VzXG5nbG93aW5nLWxhbXAgJDM5XG5cbnRvcm5hZG8tYnJhY2VsZXQgJDA2XG5mbGFtZS1icmFjZWxldCAkMDhcbmJsaXp6YXJkLWJyYWNlbGV0ICQwYVxuc3Rvcm0tYnJhY2VsZXQgJDBjXG5sb3ZlLXBlbmRhbnQgJDNiXG5rZXktdG8tc3R5eCAkMzRcbm9wZWwtc3RhdHVlICQyNlxuc2FjcmVkLXNoaWVsZCAkMTJcbml2b3J5LXN0YXR1ZSAkM2RcblxucmFiYml0LWJvb3RzICQyZVxuZ2FzLW1hc2sgJDI5IGhhemFyZC1zdWl0XG5zaGllbGQtcmluZyAkMzBcbmlyb24tbmVja2xhY2UgJDJjXG5sZWF0aGVyLWJvb3RzICQyZiBzcGVlZC1ib290c1xucG93ZXItcmluZyAkMmFcbndhcnJpb3ItcmluZyAkMmJcbmRlb3MtcGVuZGFudCAkMmQgZGVvIGRpbyBkLW8gdC1vIGRlYWxcbmJvdy1vZi1tb29uICQzZSBtb29uXG5ib3ctb2Ytc3VuICQzZiBzdW5cblxucmVmcmVzaCAkNDFcbnBhcmFseXNpcyAkNDJcbnRlbGVwYXRoeSAkNDNcbnRlbGVwb3J0ICQ0NFxucmVjb3ZlciAkNDVcbmJhcnJpZXIgJDQ2XG5jaGFuZ2UgJDQ3XG5mbGlnaHQgJDQ4XG5wc3ljaG8tYXJtb3IgJDFjXG5ib3ctb2YtdHJ1dGggJDQwIHRydXRoXG5gO1xuXG5jb25zdCBTTE9UUzogUmVhZG9ubHlBcnJheTxyZWFkb25seSBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0+ID0gW1xuICBbMHgwMCwgMTIxLDE5Ml0sIC8vIHN3b3JkIG9mIHdpbmRcbiAgWzB4MDEsIDI3NCwxNzZdLCAvLyBzd29yZCBvZiBmaXJlXG4gIFsweDAyLCAzMzUsMTIzXSwgLy8gc3dvcmQgb2Ygd2F0ZXJcbiAgWzB4MDMsICA3NywgMTBdLCAvLyBzd29yZCBvZiB0aHVuZGVyXG4gIFsweDA1LCAgODksMTA3XSwgLy8gYmFsbCBvZiB3aW5kXG4gIFsweDA2LCAxMTUsMjI0XSwgLy8gdG9ybmFkbyBicmFjZWxldFxuICBbMHgwNywgMjgyLDE4N10sIC8vIGJhbGwgb2YgZmlyZVxuICBbMHgwOCwgIDQ3LDE4Ml0sIC8vIGZsYW1lIGJyYWNlbGV0XG4gIFsweDA5LCAyNTEsMjMyXSwgLy8gYmFsbCBvZiB3YXRlclxuICBbMHgwYSwgMjA2LDI0OV0sIC8vIGJsaXp6YXJkIGJyYWNlbGV0XG4gIFsweDBiLCAgODMsIDYzXSwgLy8gYmFsbCBvZiB0aHVuZGVyXG4gIFsweDBjLCAgMjMsICA5XSwgLy8gc3Rvcm0gYnJhY2VsZXRcbiAgWzB4MTIsICA0OSwgNDhdLCAvLyBzYWNyZWQgc2hpZWxkXG4gIFsweDE0LCAgNzcsICAyXSwgLy8gcHN5Y2hvIHNoaWVsZFxuICBbMHg3NiwgIDcwLCAgM10sIC8vIHBzeWNobyBzaGllbGQgbWltaWMgMVxuICBbMHg3NywgIDg0LCAgM10sIC8vIHBzeWNobyBzaGllbGQgbWltaWMgMlxuICBbMHgxYiwgMTY4LCA5Nl0sIC8vIGJhdHRsZSBzdWl0XG4gIFsweDFjLCAxOTksMTEwXSwgLy8gcHN5Y2hvIGFybW9yXG4gIFsweDFkLCAgODIsIDk1XSwgLy8gbWVkaWNhbCBoZXJiIHNlYWxlZCBjYXZlXG4gIFsweDFlLCAgODIsMTAxXSwgLy8gYW50aWRvdGUgc2VhbGVkIGNhdmVcbiAgWzB4MWYsIDM0NiwxNDddLCAvLyBseXNpcyBwbGFudCBmb2cgbGFtcFxuICBbMHg3MCwgMzQ2LDE1M10sIC8vIGZvZyBsYW1wIG1pbWljIDFcbiAgWzB4NzEsIDM0NiwxNTldLCAvLyBmb2cgbGFtcCBtaW1pYyAyXG4gIFsweDIwLCAxMjYsIDUyXSwgLy8gZnJ1aXQgb2YgbGltZSBtdCBoeWRyYVxuICBbMHgyMSwgMjI3LCA5N10sIC8vIGZydWl0IG9mIHBvd2VyIHNhYmVyYSBwYWxhY2VcbiAgWzB4MjIsIDI1NiwgNzNdLCAvLyBtYWdpYyByaW5nIGV2aWwgc3Bpcml0IGlzbGFuZFxuICBbMHgyMywgIDU4LDExNV0sIC8vIGZydWl0IG9mIHJlcHVuIHNhYmVyYSAyXG4gIFsweDI0LCAgODIsMTEzXSwgLy8gd2FycCBib290cyBzZWFsZWQgY2F2ZVxuICBbMHgyNSwgMTg5LDE4MF0sIC8vIHN0YXR1ZSBvZiBvbnl4XG4gIFsweDI2LCAgMTgsMTcyXSwgLy8gb3BlbCBzdGF0dWVcbiAgWzB4MjcsIDI2NywxODVdLCAvLyBpbnNlY3QgZmx1dGVcbiAgWzB4MjgsIDI3NSwxNDddLCAvLyBmbHV0ZSBvZiBsaW1lXG4gIFsweDI5LCAxNDcsMjA2XSwgLy8gZ2FzIG1hc2tcbiAgWzB4MmEsIDE3MiwxMDRdLCAvLyBwb3dlciByaW5nXG4gIFsweDJiLCAyMDMsICA1XSwgLy8gd2FycmlvciByaW5nXG4gIFsweDJjLCAyNDksIDY5XSwgLy8gaXJvbiBuZWNrbGFjZVxuICBbMHgyZCwgMTkxLDExMF0sIC8vIGRlb3MgcGVuZGFudFxuICBbMHgyZSwgIDg5LCA5OV0sIC8vIHJhYmJpdCBib290c1xuICBbMHgyZiwgMTY0LDEwNF0sIC8vIGxlYXRoZXIgYm9vdHNcbiAgWzB4MzAsIDMxOSwxMjNdLCAvLyBzaGllbGQgcmluZ1xuICBbMHg3MiwgMzIwLDEzMF0sIC8vIHdhdGVyZmFsbCBjYXZlIG1pbWljXG4gIC8vIDMxIGFsYXJtIGZsdXRlXG4gIFsweDMyLCAxMDUsIDk0XSwgLy8gd2luZG1pbGwga2V5XG4gIFsweDMzLCAgNjQsMTk4XSwgLy8ga2V5IHRvIHByaXNvblxuICBbMHgzNCwgIDgzLCA3MV0sIC8vIGtleSB0byBzdHl4XG4gIFsweDM1LCAzNDUsMTQwXSwgLy8gZm9nIGxhbXBcbiAgWzB4MzYsIDMwMSwxMTldLCAvLyBzaGVsbCBmbHV0ZVxuICBbMHgzNywgMjMzLDExOF0sIC8vIGV5ZSBnbGFzc2VzXG4gIFsweDM4LCAyMzQsIDg4XSwgLy8gYnJva2VuIHN0YXR1ZVxuICBbMHgzOSwgMjk1LCA5Ml0sIC8vIGdsb3dpbmcgbGFtcFxuICAvLyAzYSBzdGF0dWUgb2YgZ29sZFxuICBbMHgzYiwgMjc0LDExN10sIC8vIGxvdmUgcGVuZGFudFxuICBbMHgzYywgMzM4LDIyNl0sIC8vIGtpcmlzYSBwbGFudFxuICBbMHgzZCwgIDIzLCAxN10sIC8vIGl2b3J5IHN0YXR1ZVxuICBbMHgzZSwgMjA2LDI0MV0sIC8vIGJvdyBvZiBtb29uXG4gIFsweDNmLCAxMDEsICA2XSwgLy8gYm93IG9mIHN1blxuICBbMHg0MCwgMjA3LDExMF0sIC8vIGJvdyBvZiB0cnV0aFxuICBbMHg0MSwgIDkyLDExN10sIC8vIHJlZnJlc2hcbiAgWzB4NDIsIDI3OSwxMjZdLCAvLyBwYXJhbHlzaXNcbiAgWzB4NDMsIDIwMiwxMzhdLCAvLyB0ZWxlcGF0aHlcbiAgWzB4NDQsIDEyNCwyMDJdLCAvLyB0ZWxlcG9ydFxuICBbMHg0NSwgMzA0LDEyOF0sIC8vIHJlY292ZXJcbiAgWzB4NDYsIDI0OCwgMzVdLCAvLyBiYXJyaWVyXG4gIFsweDQ3LCAyNzcsICAzXSwgLy8gY2hhbmdlXG4gIFsweDQ4LCAgMTUsIDI1XSwgLy8gZmxpZ2h0XG4gIFsweDUwLCAgODIsMTA3XSwgLy8gbWVkaWNhbCBoZXJiIHNlYWxlZCBjYXZlIGZyb250XG4gIC8vIDUxIHNhY3JlZCBzaGllbGRcbiAgWzB4NTIsIDEzNCwyMTldLCAvLyBtZWRpY2FsIGhlcmIgbXQgc2FicmUgd1xuICBbMHg1MywgIDU5LDIxOV0sIC8vIG1lZGljYWwgaGVyYiBtdCBzYWJyZSBuXG4gIFsweDU0LCAgNTIsIDU1XSwgLy8gbWFnaWMgcmluZyBmb3J0cmVzcyAzIHVwcGVyXG4gIFsweDU1LCAyNDEsIDk3XSwgLy8gbWVkaWNhbCBoZXJiIHNhYmVyYSBwYWxhY2VcbiAgWzB4NTYsIDEyMywgMjNdLCAvLyBtZWRpY2FsIGhlcmIgbXQgaHlkcmFcbiAgWzB4NzQsIDExNSwgIDNdLCAvLyBtdCBoeWRyYSBtaW1pY1xuICBbMHg1NywgIDcwLCAgOV0sIC8vIG1lZGljYWwgaGVyYiBzdHl4XG4gIFsweDc1LCAgODQsICA5XSwgLy8gc3R5eCAxIG1pbWljXG4gIFsweDU4LCAgMzIsIDM4XSwgLy8gbWFnaWMgcmluZyBrYXJtaW5lXG4gIFsweDc5LCAgMzIsIDE2XSwgLy8ga2FybWluZSBtaW1pYyAxXG4gIFsweDdhLCAgNDAsIDE2XSwgLy8ga2FybWluZSBtaW1pYyAyXG4gIFsweDdiLCAgNDAsIDM4XSwgLy8ga2FybWluZSBtaW1pYyAzXG4gIC8vIDU5IG1lZGljYWwgaGVyYlxuICBbMHg1YSwgMTYxLCA5N10sIC8vIGZydWl0IG9mIHBvd2VyIG9hc2lzIGNhdmUgKG92ZXIgd2F0ZXIpXG4gIFsweDEwLCAzMjcsMTIzXSwgLy8gZmx1dGUgb2YgbGltZSBjaGVzdCAoTk9URTogY2hhbmdlZCA1Yi0+IDEwKVxuICBbMHg1YywgMjU2LCA3OV0sIC8vIGx5c2lzIHBsYW50IGV2aWwgc3Bpcml0IGlzbGFuZFxuICBbMHg1ZCwgIDM2LDEzOV0sIC8vIGx5c2lzIHBsYW50IHNhYmVyYSBsZXZlbFxuICBbMHg1ZSwgIDE0LDIyOV0sIC8vIGFudGlkb3RlIG10IHNhYnJlIG5cbiAgWzB4NWYsIDM0NSwyMjVdLCAvLyBhbnRpZG90ZSBraXJpc2EgY2F2ZVxuICBbMHg2MCwgIDE4LCA5NF0sIC8vIGFudGlkb3RlIGZvcnRlc3MgM1xuICBbMHg2MSwgMjM0LCA5Nl0sIC8vIGZydWl0IG9mIHBvd2VyIHZhbXBpcmUgMlxuICBbMHg2MiwgIDE4LDExOF0sIC8vIGZydWl0IG9mIHBvd2VyIHNhYmVyYSBsZXZlbFxuICBbMHg2MywgIDM2LCA1NF0sIC8vIG9wZWwgc3RhdHVlIGZvcnRyZXNzIDNcbiAgWzB4NjQsIDE3NSwgOTddLCAvLyBmcnVpdCBvZiBwb3dlciBvYXNpcyBjYXZlXG4gIFsweDY1LCAxMzksIDQwXSwgLy8gbWFnaWMgcmluZyBtdCBoeWRyYVxuICBbMHg2NiwgIDY2LDE2MF0sIC8vIGZydWl0IG9mIHJlcHVuIHNhYmVyYSBsZXZlbFxuICAvLyA2NyBtYWdpYyByaW5nXG4gIC8vIDY4IG1hZ2ljIHJpbmdcbiAgWzB4NjksIDEzMSwyMDFdLCAvLyBtYWdpYyByaW5nIG10IHNhYnJlIHdcbiAgWzB4NmEsICA3NiwyMjZdLCAvLyB3YXJwIGJvb3RzIG10IHNhYnJlIHdcbiAgWzB4NmIsICAxOCwxMDBdLCAvLyBtYWdpYyByaW5nIGZvcnRyZXNzIDMgdXBwZXIgKGJlaGluZClcbiAgWzB4NmMsIDE5MywxMDNdLCAvLyBtYWdpYyByaW5nIHB5cmFtaWQgZnJvbnRcbiAgWzB4NzgsIDE5OSwxMDNdLCAvLyBweXJhbWlkIGJhY2sgbWltaWNcbiAgWzB4NmQsIDIwNSwxMDNdLCAvLyBvcGVsIHN0YXR1ZSBweXJhbWlkIGJhY2tcbiAgWzB4NzMsIDI1NiwgNjddLCAvLyBpcm9uIG5lY2tsYWNlIG1pbWljXG4gIFsweDZlLCAgMjQsIDM4XSwgLy8gd2FycCBib290cyBrYXJtaW5lXG4gIFsweDZmLCAgNDQsIDk3XSwgLy8gbWFnaWMgcmluZyBmb3J0cmVzcyAzIGxvd2VyXG5dO1xuXG4vLyBub24tdW5pcXVlIGtleSBpdGVtIHNsb3RzXG5jb25zdCBLRVkgPSBuZXcgU2V0KFsweDEwLCAweDEyLCAweDIzLCAweDI2LCAweDYxXSk7XG5cbmNvbnN0IEJPU1NFUyA9IG5ldyBNYXAoW1xuICBbfjB4MTAwLCAweDJlXSwgLy8gcmFiYml0IGJvb3RzIHNsb3QgLT4gdmFtcGlyZSAxXG4gIFt+MHgxMDEsIDB4MDddLCAvLyBiYWxsIG9mIGZpcmUgc2xvdCAtPiBpbnNlY3RcbiAgW34weDEwMiwgMHgwOF0sIC8vIGZsYW1lIGJyYWNlbGV0IHNsb3QgLT4ga2VsYmVzcXVlIDFcbiAgW34weDEwMywgMHgwOV0sIC8vIGJhbGwgb2Ygd2F0ZXIgc2xvdCAtPiByYWdlXG4gIFt+MHgxMDQsIDB4MzhdLCAvLyBicm9rZW4gc3RhdHVlIHNsb3QgLT4gc2FiZXJhIDFcbiAgW34weDEwNSwgMHgwYl0sIC8vIGJhbGwgb2YgdGh1bmRlciBzbG90IC0+IG1hZG8gMVxuICBbfjB4MTA2LCAweDI2XSwgLy8gb3BlbCBzdGF0dWUgc2xvdCAtPiBrZWxiZXNxdWUgMlxuICBbfjB4MTA3LCAweDIzXSwgLy8gZnJ1aXQgb2YgcmVwdW4gc2xvdCAtPiBzYWJlcmEgMlxuICBbfjB4MTA4LCAweDEyXSwgLy8gc2FjcmVkIHNoaWVsZCBzbG90IC0+IG1hZG8gMlxuICBbfjB4MTA5LCAweDNkXSwgLy8gaXZvcnkgc3RhdHVlIHNsb3QgLT4ga2FybWluZVxuICBbfjB4MTBhLCAweDFjXSwgLy8gcHN5Y2hvIGFybW9yIHNsb3QgLT4gZHJheWdvbiAxXG4gIC8vIFssIH4weDEwYl0sIC8vIGRyYXlnb24gMlxuICBbfjB4MTBjLCAweDYxXSwgLy8gZnJ1aXQgb2YgcG93ZXIgc2xvdCAtPiB2YW1waXJlIDJcbl0pO1xuXG4vLyBzbG90cyB0aGF0IGNvbWUgZnJvbSB0cmFkZS1pbnNcbi8vICAtIG5vdGU6IHRoZSBmb2cgbGFtcCB0cmFkZS1pbiBkb2Vzbid0IGhhdmUgYSBnb29kIHNsb3QgZm9yIHRoaXNcbi8vIFRPRE8gLSBhZGQgXCJ0cmFkZWQgZm9nIGxhbXBcIiB0byBpdGVtcywgYWRkIGEgYm94IGZvciBpdC5cbi8vIFRPRE8gLSBjb3VudCBudW1iZXIgb2YgdHJhZGVkIGJveGVzIGNoZWNrZWQsIHNldCByZXN0IHRvIGJsb2NrZWQgaWZcbi8vICAgICAgICA8PSBudW1iZXIgb2YgaXRlbXMgYWxyZWFkeSB0cmFkZWQgaW4uLi4/XG4vLyBUT0RPIC0gZmluZC1hbmQtcmVwbGFjZSBmb3IgdG9ybmVsJ3MgaXRlbSBhZnRlciB0aGUgZmFjdD8/XG5jb25zdCBUUkFERVMgPSBuZXcgU2V0KFsweDI5LCAweDNlLCAweDQ0LCAweDQ3LCAweDQ4XSk7XG5cbi8vIFRPRE8gLSBhZGQgZXh0cmEgaW5kaXJlY3Rpb24gZm9yIHdhbGxzIGluIG92ZXJsYXkgaWYgdHJhY2tpbmdcbi8vICAtIG9uZSBmb3IgZWFjaCBzZXBhcmF0ZSByZWdpb24uLi4gaG93IHRvIGtlZXAgdHJhY2sgb2YgdGhhdD9cbi8vICAtIHRoZW4ga2VlcCB0aGVtIGFzIGl0ZW1zLi4uPyAgYm9zc2VzPyAgbWF5YmUganVzdCBoYXJkY29kZVxuLy8gICAgdGhlIGxpbmthZ2VzPyAgb3IganVzdCBhZGQgYWxsIHdhbGxzIGFzIGl0ZW1zIGFuZCBsaW5rIHRoZW1cbi8vICAgIGRpcmVjdGx5IGhlcmUuLi4gLSB0aGF0IG1pZ2h0IGJlIGJldHRlci5cblxuLy8geCwgeSwgLi4uZmxhZ3Ncbi8vIGNvbnN0IFdBTExTOiBbbnVtYmVyLCBudW1iZXIsIC4uLm51bWJlcl0gPSBbXTtcblxuY2xhc3MgR3JhcGgge1xuICAvKiogbWFwIGZyb20gaWQgdG8gc2xvdCBpbmRleCAqL1xuICByZWFkb25seSBzbG90cyA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XG4gIC8qKiBtYXAgZnJvbSBpZCB0byBpdGVtIGluZGV4ICovXG4gIHJlYWRvbmx5IGl0ZW1zID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcbiAgLyoqIG1hcCBmcm9tIHNsb3QgaW5kZXggdG8gZWxlbWVudCAqL1xuICByZWFkb25seSBzbG90RWx0cyA9IG5ldyBNYXA8bnVtYmVyLCBIVE1MRWxlbWVudD4oKTtcbiAgLyoqIG1hcCBmcm9tIGl0ZW0gaW5kZXggdG8gZWxlbWVudCAqL1xuICAvL3JlYWRvbmx5IGl0ZW1FbHRzID0gbmV3IE1hcDxudW1iZXIsIEhUTUxFbGVtZW50PigpO1xuICAvKiogc2V0IG9mIHNsb3QgaW5kZXggKi9cbiAgLy9yZWFkb25seSBjaGVja2VkID0gbmV3IFNldDxudW1iZXI+KCk7XG4gIC8vIC8qKiBtYXAgZnJvbSBzbG90IGlkIHRvIG5vZGUgKi9cbiAgLy8gcmVhZG9ubHkgbm9kZUZyb21TbG90ID0gbmV3IE1hcDxudW1iZXIsIGFueT4oKTtcbiAgLy8gcmVhZG9ubHkgbm9kZXMgPSBuZXcgTWFwPGFueSwgYW55PigpO1xuICAvKiogTWFwcyBpdGVtIGluZGV4IHRvIHdoZXRoZXIgaXRlbSBpcyBnb3R0ZW4gKi9cbiAgaGFzOiBCaXRzID0gQml0cy5vZigpO1xuICAvKiogb25seSB1c2VkIGZvciBjbGVhcmluZzogc2V0IG9mIGl0ZW0gaW5kZXggd2UganVzdCBhc3N1bWUgKi9cbiAgcmVhZG9ubHkgYWx3YXlzOiBCaXRzO1xuXG4gIHJlYWRvbmx5IGdyaWQ6IEVsZW1lbnQ7XG4gIHJlYWRvbmx5IG1hcDogRWxlbWVudDtcbiAgcmVhZG9ubHkgbmFtZXMgPSBuZXcgTWFwPHN0cmluZywgSFRNTEVsZW1lbnQ+KCk7XG5cbiAgcmVjb2duaXRpb24/OiBTcGVlY2hSZWNvZ25pdGlvbjtcblxuICB1bnVzZWRJdGVtczogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHJvbTogUm9tLFxuICAgICAgICAgICAgICByZWFkb25seSB3b3JsZDogV29ybGQsXG4gICAgICAgICAgICAgIHJlYWRvbmx5IGZsYWdzOiBGbGFnU2V0KSB7XG4gICAgLy8gVE9ETyAtIGNvbXB1dGUgdHdvIGRlcGdyYXBoczogb25lIHdpdGggZ2xpdGNoZXMgYW5kIG9uZSB3aXRob3V0XG4gICAgLy8gIC0gdGhlbiB3ZSBjYW4gc2hvdyBncmVlbiB2cyB5ZWxsb3cgZm9yIGdsaXRjaGFibGUgbG9jYXRpb25zLi4/XG5cbiAgICAod2luZG93IGFzIGFueSkuR1JBUEggPSB0aGlzO1xuXG4gICAgdGhpcy5ncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JpZCcpWzBdO1xuICAgIHRoaXMubWFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWFwJylbMF07XG5cbiAgICBsZXQgYWx3YXlzID0gQml0cy5vZigpO1xuXG4gICAgZm9yIChjb25zdCB7aXRlbTogaWQsIGluZGV4fSBvZiB3b3JsZC5ncmFwaC5zbG90cykge1xuICAgICAgaWYgKGlkID09IG51bGwpIGNvbnRpbnVlOyAvLyB0aHJvdyBuZXcgRXJyb3IoYGJhZCBzbG90OiAke2luZGV4fWApO1xuICAgICAgdGhpcy5zbG90cy5zZXQoaWQsIGluZGV4KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7aXRlbTogaWQsIGluZGV4fSBvZiB3b3JsZC5ncmFwaC5pdGVtcykge1xuICAgICAgaWYgKGlkID09IG51bGwpIGNvbnRpbnVlOyAvLyB0aHJvdyBuZXcgRXJyb3IoYGJhZCBpdGVtOiAke2luZGV4fWApO1xuICAgICAgdGhpcy5pdGVtcy5zZXQoaWQsIGluZGV4KTtcbiAgICAgIGNvbnN0IGl0ZW0gPSByb20uaXRlbXNbaWRdO1xuICAgICAgLy8gVE9ETyAtIHNldHVwIGFsd2F5cyBmcm9tIG5vbi1hZGRlZCBpdGVtcz9cbiAgICAgIGlmIChpdGVtICYmICFpdGVtLnVuaXF1ZSkgYWx3YXlzID0gQml0cy53aXRoKGFsd2F5cywgaW5kZXgpO1xuICAgIH1cbiAgICB0aGlzLnVudXNlZEl0ZW1zID0gd29ybGQuZ3JhcGguaXRlbXMubGVuZ3RoO1xuXG4gICAgdGhpcy5oYXMgPSB0aGlzLmFsd2F5cyA9IGFsd2F5cztcblxuICAgICAgLy8gdGhpcy5ub2Rlcy5zZXQobi51aWQsIG4ubmFtZSk7XG4gICAgICAvLyB0aGlzLnJvdXRlW24udWlkXSA9IDQ7XG4gICAgICAvLyBpZiAobiBpbnN0YW5jZW9mIFNsb3QpIHtcbiAgICAgIC8vICAgLy8gdXNlZCBieSBhZGRCb3hcbiAgICAgIC8vICAgaWYgKCFuLmlzTWltaWMoKSkge1xuICAgICAgLy8gICAgIHRoaXMubm9kZUZyb21TbG90LnNldChuLnNsb3RJbmRleCwgbik7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vICAgLy8gbm90IHNob3duLCBqdXN0IGFzc3VtZSBoYXZlIGl0XG4gICAgICAvLyAgIGlmIChuLm5hbWUgPT0gJ0FsYXJtIEZsdXRlJyB8fCBuLm5hbWUgPT0gJ01lZGljYWwgSGVyYicpIHtcbiAgICAgIC8vICAgICB0aGlzLmFsd2F5cy5hZGQobi5pdGVtLnVpZCk7XG4gICAgICAvLyAgICAgdGhpcy5yb3V0ZVtuLml0ZW0udWlkXSA9IDA7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0gZWxzZSBpZiAobiBpbnN0YW5jZW9mIExvY2F0aW9uKSB7XG4gICAgICAvLyAgIC8vIGZpbmQgdGhlIG1pbWljcywgdGhleSBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgYmVjYXVzZVxuICAgICAgLy8gICAvLyB0aGV5IGFsbCBtYXAgdG8gdGhlIHNhbWUgc2xvdCBJRC4uLlxuICAgICAgLy8gICBmb3IgKGNvbnN0IGNoZXN0IG9mIG4uY2hlc3RzKSB7XG4gICAgICAvLyAgICAgaWYgKGNoZXN0LmlzTWltaWMoKSkge1xuICAgICAgLy8gICAgICAgdGhpcy5taW1pY1Nsb3RzLnNldChuLmlkIDw8IDggfCBjaGVzdC5zcGF3blNsb3QsIGNoZXN0KTtcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0gZWxzZSBpZiAobiBpbnN0YW5jZW9mIFRyYWNrZXJOb2RlKSB7XG4gICAgICAvLyAgIGNvbnN0IGluZGV4ID0gdGhpcy5kZXBncmFwaC51aWRUb0l0ZW1bbi51aWRdO1xuICAgICAgLy8gICBpZiAoaW5kZXggPT0gbnVsbCkgY29udGludWU7XG4gICAgICAvLyAgIGxldCBjb2xvciA9IDQ7XG4gICAgICAvLyAgIGlmIChuLnR5cGUgPT09IFRyYWNrZXJOb2RlLk9GRl9ST1VURSkgY29sb3IgPSAxO1xuICAgICAgLy8gICBpZiAobi50eXBlID09PSBUcmFja2VyTm9kZS5HTElUQ0gpIGNvbG9yID0gMjtcbiAgICAgIC8vICAgaWYgKG4udHlwZSA9PT0gVHJhY2tlck5vZGUuSEFSRCkgY29sb3IgPSAzO1xuICAgICAgLy8gICB0aGlzLnJvdXRlW24udWlkXSA9IGNvbG9yO1xuICAgICAgLy8gfVxuXG4gICAgY29uc3QgdG9nZ2xlID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgICBsZXQgdCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50fG51bGw7XG4gICAgICB3aGlsZSAodCAmJiAhdC5kYXRhc2V0WydpbmRleCddKSB7XG4gICAgICAgIHQgPSB0LnBhcmVudEVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAoIXQpIHJldHVybjtcbiAgICAgIHRoaXMudG9nZ2xlKHQpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdyaWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGUpO1xuICAgIC8vdGhpcy5tYXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGUpO1xuICB9XG5cbiAgdG9nZ2xlKHQ6IEhUTUxFbGVtZW50LCB2YWw/OiBib29sZWFuKSB7XG4gICAgY29uc3QgdWlkID0gTnVtYmVyKHQuZGF0YXNldFsnaW5kZXgnXSk7XG4gICAgY29uc3QgaGFzID0gdC5jbGFzc0xpc3QudG9nZ2xlKCdnb3QnKTtcbiAgICBpZiAodC5kYXRhc2V0WydpdGVtJ10pIHtcbiAgICAgIHRoaXMuaGFzID0gaGFzID9cbiAgICAgICAgICBCaXRzLndpdGgodGhpcy5oYXMsIHVpZCkgOlxuICAgICAgICAgIEJpdHMud2l0aG91dCh0aGlzLmhhcywgdWlkKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIGFkZFNsb3Qoc2xvdElkOiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnNsb3RzLmdldChzbG90SWQpO1xuICAgIGlmIChpbmRleCA9PSBudWxsKSB7IGRlYnVnZ2VyOyB0aHJvdyBuZXcgRXJyb3IoKTsgfVxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGl0ZW1nZXQgPSB0aGlzLnJvbS5pdGVtR2V0c1tzbG90SWRdO1xuICAgIGNvbnN0IGl0ZW0gPSBpdGVtZ2V0ICYmIHRoaXMucm9tLml0ZW1zW2l0ZW1nZXQuaXRlbUlkXTtcbiAgICAvLyBtYWtlIHNvbWUgYm94ZXMgYmlnZ2VyOyBxdWljayBoYWNrIHRvIGF2b2lkIHVuaXF1ZSBhcm1vcnNcbiAgICBpZiAoaXRlbSAmJiBpdGVtLnVuaXF1ZSB8fCBLRVkuaGFzKHNsb3RJZCkpIHtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdrZXknKTtcbiAgICAgIHgtLTsgeS0tO1xuICAgIH1cbiAgICB4LS07IHktLTtcbiAgICBkaXYuZGF0YXNldFsnaW5kZXgnXSA9IFN0cmluZyhpbmRleCk7XG4gICAgZGl2LnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICBkaXYuc3R5bGUudG9wID0geSArICdweCc7XG4gICAgLy9kaXYudGV4dENvbnRlbnQgPSAnXFx4YTAnO1xuICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICBpbm5lci50ZXh0Q29udGVudCA9XG4gICAgICAgIHNsb3RJZCA+PSAweDcwID9cbiAgICAgICAgICAgICdNaW1pYycgOlxuICAgICAgICAgICAgdGhpcy5yb20uaXRlbXNbaXRlbWdldC5pdGVtSWRdLm1lc3NhZ2VOYW1lLnJlcGxhY2UoJyAnLCAnXFx4YTAnKTtcbiAgICBpZiAodGhpcy5mbGFncy5yYW5kb21pemVUcmFkZXMoKSAmJiBUUkFERVMuaGFzKHNsb3RJZCkpIHtcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdib3NzJyk7XG4gICAgfVxuICAgIHRoaXMuc2xvdEVsdHMuc2V0KGluZGV4LCBkaXYpO1xuICAgIHRoaXMubWFwLmFwcGVuZENoaWxkKGRpdik7XG4gIH1cblxuICBhZGRJdGVtKGNsczogc3RyaW5nLCBpZDogc3RyaW5nLCAuLi5vdGhlck5hbWVzOiBzdHJpbmdbXSkge1xuICAgIC8vIHBhcnNlIHRoZSBoZXgsIHJlbW92aW5nICQgcHJlZml4XG4gICAgY29uc3QgdWlkID0gTnVtYmVyLnBhcnNlSW50KGlkLnN1YnN0cmluZygxKSwgMTYpO1xuICAgIGNvbnN0IG91dGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbHMpWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3V0ZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgIGxldCBpbmRleCA9IHRoaXMuaXRlbXMuZ2V0KHVpZCk7XG4gICAgaWYgKGluZGV4ID09IG51bGwpIHtcbiAgICAgIC8vIEl0ZW1zIHRoYXQgZG9uJ3QgYmxvY2sgYW55dGhpbmcgd29uJ3QgaGF2ZSBzaG93biB1cCB5ZXQuXG4gICAgICB0aGlzLml0ZW1zLnNldCh1aWQsIGluZGV4ID0gdGhpcy51bnVzZWRJdGVtcysrKTtcbiAgICB9XG4gICAgb3V0ZXIuZGF0YXNldFsnaW5kZXgnXSA9IFN0cmluZyhpbmRleCk7XG4gICAgb3V0ZXIuZGF0YXNldFsnaXRlbSddID0gU3RyaW5nKGluZGV4KTtcbiAgICAvL3RoaXMuc2xvdEVsdHMuc2V0KGluZGV4LCBvdXRlcik7XG4gICAgdGhpcy5uYW1lcy5zZXQoY2xzLnJlcGxhY2UoLy0vZywgJyAnKSwgb3V0ZXIpO1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiBvdGhlck5hbWVzKSB7XG4gICAgICB0aGlzLm5hbWVzLnNldChuYW1lLnJlcGxhY2UoLy0vZywgJyAnKSwgb3V0ZXIpO1xuICAgIH1cbiAgfVxuXG4gIGFkZEV4dHJhRmxhZ3MoKSB7XG4gICAgY29uc3QgZyA9IHRoaXMud29ybGQuZ3JhcGg7XG4gICAgZm9yIChjb25zdCBzbG90IG9mIGcuc2xvdHMuc2xpY2UoZy5maXhlZCkpIHtcbiAgICAgIGNvbnN0IGMgPSBzbG90LmNvbmRpdGlvbjtcbiAgICAgIGNvbnN0IGJvc3NTbG90ID0gQk9TU0VTLmdldChjKTtcbiAgICAgIGNvbnN0IHJlcGxhY2VkID0gYm9zc1Nsb3QgJiYgdGhpcy5zbG90cy5nZXQoYm9zc1Nsb3QpO1xuICAgICAgaWYgKHJlcGxhY2VkID09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgZWx0ID0gdGhpcy5zbG90RWx0cy5nZXQocmVwbGFjZWQpO1xuICAgICAgaWYgKGVsdCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoJ2V4cGVjdGVkJyk7XG4gICAgICB0aGlzLnNsb3RFbHRzLmRlbGV0ZShOdW1iZXIoZWx0LmRhdGFzZXRbJ2luZGV4J10pKTtcbiAgICAgIHRoaXMuc2xvdEVsdHMuc2V0KHNsb3QuaW5kZXgsIGVsdCk7XG4gICAgICBlbHQuY2xhc3NMaXN0LmFkZCgnYm9zcycpO1xuICAgICAgZWx0LmRhdGFzZXRbJ2luZGV4J10gPSBTdHJpbmcoc2xvdC5pbmRleCk7XG4gICAgICBlbHQuZGF0YXNldFsnaXRlbSddID0gU3RyaW5nKHNsb3QuaW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBmb3IgKGNvbnN0IGVsdCBvZiB0aGlzLnNsb3RFbHRzLnZhbHVlcygpKSB7XG4gICAgICBlbHQuZGF0YXNldFsnc3RhdGUnXSA9IGVsdC5jbGFzc0xpc3QuY29udGFpbnMoJ2dvdCcpID8gJycgOiAnYmxvY2tlZCc7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2xvdCBvZiB0cmF2ZXJzZSh0aGlzLndvcmxkLmdyYXBoLCBuZXdGaWxsKCksIHRoaXMuaGFzKSkge1xuICAgICAgLy8gZmlndXJlIG91dCB3aGV0aGVyIGl0J3MgYXZhaWxhYmxlIG9yIG5vdFxuICAgICAgLy8gVE9ETyAtIGNvbnNpZGVyIGhhdmluZyBtdWx0aXBsZSB3b3JsZHMsIGZvciBnbGl0Y2hlZC9oYXJkP1xuICAgICAgLy8gICAgICAtPiBhZGp1c3QgZmxhZ3MgdG8gYWRkIGFsbCBnbGl0Y2hlcy9oYXJkIG1vZGVcbiAgICAgIGNvbnN0IGVsdCA9IHRoaXMuc2xvdEVsdHMuZ2V0KHNsb3QpO1xuICAgICAgaWYgKGVsdCAmJiAhZWx0LmNsYXNzTGlzdC5jb250YWlucygnZ290JykpIHtcbiAgICAgICAgZWx0LmRhdGFzZXRbJ3N0YXRlJ10gPSAnYXZhaWxhYmxlJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZGRWb2ljZVJlY29nbml0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgY29uc3QgcmVjID0gdGhpcy5yZWNvZ25pdGlvbiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgLy8gTk9URTogYXMgZmFyIGFzIEkgY2FuIHRlbGwsIHRoaXMgZG9lcyBub3RoaW5nLi4uXG4gICAgICBjb25zdCBncmFtbWFyID0gbmV3IFNwZWVjaEdyYW1tYXJMaXN0KCk7XG4gICAgICBncmFtbWFyLmFkZEZyb21TdHJpbmcoYFxuICAgICAgICAgICNKU0dGIFYxLjA7XG4gICAgICAgICAgZ3JhbW1hciBjb21tYW5kO1xuICAgICAgICAgIHB1YmxpYyA8aXRlbT4gPSAke1suLi50aGlzLm5hbWVzLmtleXMoKV0uam9pbignIHwgJyl9O1xuICAgICAgICAgIHB1YmxpYyA8Y29tbWFuZD4gPSB0cmFjayA8aXRlbT4gfCB1bnRyYWNrIDxpdGVtPjtcbiAgICAgIGAsIDEpO1xuICAgICAgcmVjLmxhbmcgPSAnZW4tVVMnO1xuICAgICAgcmVjLmdyYW1tYXJzID0gZ3JhbW1hcjtcbiAgICAgIHJlYy5pbnRlcmltUmVzdWx0cyA9IGZhbHNlO1xuICAgICAgLy9yZWMuY29udGludW91cyA9IHRydWU7XG4gICAgICByZWMubWF4QWx0ZXJuYXRpdmVzID0gMTA7XG4gICAgICByZWMub25zdGFydCA9ICgpID0+IHsgc3RvcHBlZCA9IGZhbHNlOyB9O1xuICAgICAgcmVjLm9ucmVzdWx0ID0gKGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZS5yZXN1bHRzW2UucmVzdWx0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKCFyZXN1bHQuaXNGaW5hbCkgcmV0dXJuO1xuICAgICAgICBsZXQgbWF0Y2hlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGFsdCBvZiByZXN1bHQpIHtcbiAgICAgICAgICBjb25zdCBjb21tYW5kID0gYWx0LnRyYW5zY3JpcHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEteiBdL2csICcnKTtcbiAgICAgICAgICBpZiAoY29tbWFuZCA9PT0gJ3N0b3AgbGlzdGVuaW5nJykgbWF0Y2hlZCA9IHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IG1hdGNoID0gLyhbYXVvXVtubV0gPyk/dHJbYXVdYz9rPyg/OmVkKT8gPyguKykvLmV4ZWMoY29tbWFuZCk7XG4gICAgICAgICAgaWYgKCFtYXRjaCkgY29udGludWU7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhgYXR0ZW1wdDogJHttYXRjaFsyXX1gKTtcbiAgICAgICAgICBjb25zdCBlbCA9IHRoaXMubmFtZXMuZ2V0KG1hdGNoWzJdKTtcbiAgICAgICAgICBpZiAoIWVsKSBjb250aW51ZTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZShlbCwgIW1hdGNoWzFdKTtcbiAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hdGNoZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTm8gbWF0Y2g6ICR7Wy4uLnJlc3VsdF0ubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0+IHIudHJhbnNjcmlwdCkuam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZWMuc3RvcCgpOyAvLyBnZWNrbyBkb2Vzbid0IHN1cHBvcnQgY29udGludW91cz9cbiAgICAgIH07XG4gICAgICByZWMub25lbmQgPSAoKSA9PiB7IGlmICghc3RvcHBlZCkgcmVjLnN0YXJ0KCk7IH07XG4gICAgICByZWMuc3RhcnQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwb2x5ZmlsbCguLi5uYW1lczogc3RyaW5nW10pIHtcbiAgY29uc3Qgd2luID0gd2luZG93IGFzIGFueTtcbiAgZm9yIChsZXQgbiBvZiBuYW1lcykge1xuICAgIGlmICh0eXBlb2Ygd2luW25dID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aW5bbmFtZXNbMF1dID0gd2luW25dO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcG9seWZpbGwgJHtuYW1lc1swXX1gKTtcbn1cbnBvbHlmaWxsKCdTcGVlY2hSZWNvZ25pdGlvbicsICd3ZWJraXRTcGVlY2hSZWNvZ25pdGlvbicpO1xucG9seWZpbGwoJ1NwZWVjaEdyYW1tYXJMaXN0JywgJ3dlYmtpdFNwZWVjaEdyYW1tYXJMaXN0Jyk7XG5cblxuXG4vLyBmdW5jdGlvbiBpc1Nsb3QoeDogbnVtYmVyKTogYm9vbGVhbiB7XG4vLyAgIHJldHVybiAoeCAmIH4weDdmKSA9PT0gMHgxMDA7XG4vLyB9XG5cbi8vIFRPRE8gLSBhbGwgRyBmbGFncyBnZXQgdGhlIGdsaXRjaCBmb3IgZnJlZVxuLy8gICAgICAtIGFsbCBvdGhlcnMgKG1pbnVzIHdpbGQgd2FycCBpZiBkaXNhYmxlZCkgdHJhY2tlZCBhcyBnbGl0Y2hlc1xuLy8gICAgICAtIGNvbnNpZGVyIGRhcmsgeWVsbG93IGFuZCBkYXJrIGdyZWVuIGFzIHdlbGwgYXMgZGFyayBibHVlID8/XG5cbmxldCB2b2ljZSA9IGZhbHNlO1xubGV0IGZsYWdzID0gJ1JscHQgVGInO1xuZm9yIChjb25zdCBhcmcgb2YgbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKSkge1xuICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhcmcuc3BsaXQoJz0nKTtcbiAgaWYgKGtleSA9PT0gJ2ZsYWdzJykge1xuICAgIGZsYWdzID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgfVxuICBpZiAoa2V5ID09PSAndm9pY2UnKSB7XG4gICAgdm9pY2UgPSB0cnVlO1xuICB9XG59XG4vLyAgICdzcGVlZC1ib290cyc6IHRydWUsXG4vLyAgICdnbGl0Y2gtZ2hldHRvLWZsaWdodCc6IHRydWUsXG4vLyAgICdnbGl0Y2gtdGFsayc6IHRydWUsXG4vLyAgICdyb3V0ZS1uby1mcmVlLWJhcnJpZXInOiB0cnVlLFxuLy8gICAncm91dGUtc2h5cm9uLXRlbGVwb3J0JzogdHJ1ZSxcbi8vICAgJ3JvdXRlLWVhcmx5LWZsaWdodCc6IHRydWUsXG4vLyAgICd0cmFja2VyJzogdHJ1ZSxcbi8vIH07XG5cbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gIGNvbnN0IHJvbSA9IGF3YWl0IFJvbS5sb2FkKCk7XG4gIGNvbnN0IGZsYWdzZXQgPSBuZXcgRmxhZ1NldChmbGFncyk7XG4gIGRldGVybWluaXN0aWMocm9tLCBmbGFnc2V0KTsgLy8gbWFrZSBkZXRlcm1pbmlzdGljIGNoYW5nZXNcbiAgY29uc3Qgd29ybGQgPSBXb3JsZC5idWlsZChyb20sIGZsYWdzZXQsIHRydWUpOyAvLyArICcgRHQnKSk7XG4gIGNvbnN0IGdyYXBoID0gbmV3IEdyYXBoKHJvbSwgd29ybGQsIGZsYWdzZXQpO1xuICBmb3IgKGxldCBpdGVtIG9mIElURU1TLnNwbGl0KCdcXG4nKSkge1xuICAgIGl0ZW0gPSBpdGVtLnJlcGxhY2UoLyMuKi8sICcnKS50cmltKCk7XG4gICAgaWYgKCFpdGVtKSBjb250aW51ZTtcbiAgICBncmFwaC5hZGRJdGVtKC4uLihpdGVtLnNwbGl0KC8gKy9nKSBhcyBbc3RyaW5nLCBzdHJpbmcsIC4uLnN0cmluZ1tdXSkpO1xuICB9XG4gIGZvciAoY29uc3Qgc2xvdCBvZiBTTE9UUykge1xuICAgIGdyYXBoLmFkZFNsb3QoLi4uc2xvdCk7XG4gIH1cbiAgZ3JhcGguYWRkRXh0cmFGbGFncygpO1xuICBncmFwaC51cGRhdGUoKTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlLW1hcCcpIS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBncmFwaC5tYXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gIH0pO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXItYWxsJykhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGZvciAoY29uc3QgZSBvZiBncmFwaC5ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nb3QnKSkge1xuICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKCdnb3QnKTtcbiAgICB9XG4gICAgZ3JhcGguaGFzID0gZ3JhcGguYWx3YXlzO1xuICAgIGdyYXBoLnVwZGF0ZSgpO1xuICB9KTtcbiAgaWYgKHZvaWNlKSBncmFwaC5hZGRWb2ljZVJlY29nbml0aW9uKCk7XG4gICh3aW5kb3cgYXMgYW55KS5ncmFwaCA9IGdyYXBoO1xufTtcblxuLy9mdW5jdGlvbiBkaWUoKTogbmV2ZXIgeyB0aHJvdyBuZXcgRXJyb3IoJ0Fzc2VydGlvbiBmYWlsZWQnKTsgfVxuXG5tYWluKCk7XG4iXX0=