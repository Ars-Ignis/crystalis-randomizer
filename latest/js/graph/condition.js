export var Event;
(function (Event) {
    Event.STARTED_WINDMILL = Condition(0x00a);
    Event.LEAF_ELDER = Condition(0x00b);
    Event.UNDERGROUND_CHANNEL = Condition(0x018);
    Event.MESIA_RECORDING = Condition(0x01b);
    Event.QUEEN_REVEALED = Condition(0x01e);
    Event.RETURNED_FOG_LAMP = Condition(0x021);
    Event.HEALED_DOLPHIN = Condition(0x025);
    Event.ENTERED_SHYRON = Condition(0x026);
    Event.SHYRON_MASSACRE = Condition(0x027);
    Event.LEAF_ABDUCTION = Condition(0x038);
    Event.ZEBU_CAVE = Condition(0x03a);
    Event.ZEBU_SHYRON = Condition(0x03b);
    Event.RESCUED_CHILD = Condition(0x045);
    Event.DWARF_MOTHER = Condition(0x052);
    Event.DWARF_CHILD = Condition(0x053);
    Event.STOM_IN_SWAN = Condition(0x061);
    Event.DRAYGON1 = Condition(0x06c);
    Event.FOUND_KENSU = Condition(0x072);
    Event.SHELL_FLUTE = Condition(0x08b);
    Event.RIDE_DOLPHIN = Condition(0x09b);
    Event.ZEBU_STUDENT = Condition(0x0a5);
    Event.LEAF_RABBIT = Condition(0x0a9);
    Event.CALMED_SEA = Condition(0x283);
    Event.OPENED_JOEL_SHED = Condition(0x287);
    Event.OPENED_CRYPT = Condition(0x28e);
    Event.OPENED_STYX = Condition(0x2b0);
    Event.OPENED_SWAN = Condition(0x2b3);
    Event.OPENED_PRISON = Condition(0x2d8);
    Event.OPENED_SEALED_CAVE = Condition(0x2ee);
    Event.START = Condition(0x2f0);
    Event.WARP_OAK = Condition(0x2f6);
    Event.WARP_SHYRON = Condition(0x2fd);
})(Event || (Event = {}));
export var Capability;
(function (Capability) {
    Capability.SWORD = Condition(~0);
    Capability.MONEY = Condition(~1);
    Capability.BREAK_STONE = Condition(~2);
    Capability.BREAK_ICE = Condition(~3);
    Capability.FORM_BRIDGE = Condition(~4);
    Capability.BREAK_IRON = Condition(~5);
    Capability.TRAVEL_SWAMP = Condition(~6);
    Capability.CLIMB_WATERFALL = Condition(~7);
    Capability.BUY_HEALING = Condition(~8);
    Capability.BUY_WARP = Condition(~9);
    Capability.SHOOTING_STATUE = Condition(~10);
    Capability.CLIMB_SLOPE = Condition(~11);
})(Capability || (Capability = {}));
export function Boss(id) {
    return Condition(id);
}
(function (Boss) {
    Boss.VAMPIRE1 = Boss(0x100);
    Boss.INSECT = Boss(0x101);
    Boss.KELBESQUE1 = Boss(0x102);
    Boss.RAGE = Boss(0x103);
    Boss.SABERA1 = Boss(0x013);
    Boss.MADO1 = Boss(0x067);
    Boss.KELBESQUE2 = Boss(0x105);
    Boss.SABERA2 = Boss(0x106);
    Boss.MADO2 = Boss(0x107);
    Boss.KARMINE = Boss(0x108);
    Boss.DRAYGON1 = Boss(0x10b);
    Boss.DRAYGON2 = Boss(0x28d);
    Boss.VAMPIRE2 = Boss(0x10c);
})(Boss || (Boss = {}));
export function Item(id) {
    if (id >= 0x70)
        throw new Error(`expected item: ${id.toString(16)}`);
    return Condition(0x200 | id);
}
(function (Item) {
    Item.SWORD_OF_WIND = Item(0x00);
    Item.SWORD_OF_FIRE = Item(0x01);
    Item.SWORD_OF_WATER = Item(0x02);
    Item.SWORD_OF_THUNDER = Item(0x03);
    Item.CRYSTALIS = Item(0x04);
    Item.ORB_OF_WIND = Item(0x05);
    Item.TORNADO_BRACELET = Item(0x06);
    Item.ORB_OF_FIRE = Item(0x07);
    Item.FLAME_BRACELET = Item(0x08);
    Item.ORB_OF_WATER = Item(0x09);
    Item.BLIZZARD_BRACELET = Item(0x0a);
    Item.ORB_OF_THUNDER = Item(0x0b);
    Item.STORM_BRACELET = Item(0x0c);
    Item.MEDICAL_HERB = Item(0x1d);
    Item.WARP_BOOTS = Item(0x24);
    Item.STATUE_OF_ONYX = Item(0x25);
    Item.INSECT_FLUTE = Item(0x27);
    Item.FLUTE_OF_LIME = Item(0x28);
    Item.GAS_MASK = Item(0x29);
    Item.POWER_RING = Item(0x2a);
    Item.WARRIOR_RING = Item(0x2b);
    Item.IRON_NECKLACE = Item(0x2c);
    Item.DEOS_PENDANT = Item(0x2d);
    Item.RABBIT_BOOTS = Item(0x2e);
    Item.LEATHER_BOOTS = Item(0x2f);
    Item.SHIELD_RING = Item(0x30);
    Item.ALARM_FLUTE = Item(0x31);
    Item.WINDMILL_KEY = Item(0x32);
    Item.KEY_TO_PRISON = Item(0x33);
    Item.KEY_TO_STYX = Item(0x34);
    Item.FOG_LAMP = Item(0x35);
    Item.SHELL_FLUTE = Item(0x36);
    Item.EYE_GLASSES = Item(0x37);
    Item.BROKEN_STATUE = Item(0x38);
    Item.GLOWING_LAMP = Item(0x39);
    Item.STATUE_OF_GOLD = Item(0x3a);
    Item.LOVE_PENDANT = Item(0x3b);
    Item.KIRISA_PLANT = Item(0x3c);
    Item.IVORY_STATUE = Item(0x3d);
    Item.BOW_OF_MOON = Item(0x3e);
    Item.BOW_OF_SUN = Item(0x3f);
    Item.BOW_OF_TRUTH = Item(0x40);
})(Item || (Item = {}));
export var Magic;
(function (Magic) {
    Magic.REFRESH = Item(0x41);
    Magic.PARALYSIS = Item(0x42);
    Magic.TELEPATHY = Item(0x43);
    Magic.TELEPORT = Item(0x44);
    Magic.RECOVER = Item(0x45);
    Magic.BARRIER = Item(0x46);
    Magic.CHANGE = Item(0x47);
    Magic.FLIGHT = Item(0x48);
})(Magic || (Magic = {}));
export var WallType;
(function (WallType) {
    WallType[WallType["WIND"] = 0] = "WIND";
    WallType[WallType["FIRE"] = 1] = "FIRE";
    WallType[WallType["WATER"] = 2] = "WATER";
    WallType[WallType["THUNDER"] = 3] = "THUNDER";
})(WallType || (WallType = {}));
export class MutableRequirement {
    constructor() {
        this.map = new Map();
    }
    [Symbol.iterator]() {
        return this.map.values();
    }
    add(newLabel, newDeps) {
        for (const c of newDeps)
            if (Array.isArray(c))
                throw new Error();
        if (this.map.has(newLabel))
            return false;
        for (const [curLabel, curDeps] of this.map) {
            if (containsAll(newDeps, curDeps))
                return false;
            if (containsAll(curDeps, newDeps))
                this.map.delete(curLabel);
        }
        this.map.set(newLabel, newDeps);
        return true;
    }
    addAll(requirement) {
        for (const conditions of requirement) {
            this.addList(conditions);
        }
    }
    addList(conditions) {
        const sorted = [...new Set(conditions)].sort();
        const deps = new Set(sorted);
        this.add(sorted.join(' '), deps);
    }
    restrict(r) {
        const l = [...this.map.values()];
        this.map.clear();
        for (const ls of l) {
            for (const rs of r) {
                this.addList([...ls, ...rs]);
            }
        }
    }
    freeze() {
        return [...this].map(cs => [...cs]);
    }
}
const containsAll = (left, right) => {
    if (left.size < right.size)
        return false;
    for (const d of right) {
        if (!left.has(d))
            return false;
    }
    return true;
};
export function Condition(x) {
    return [[x]];
}
export function and(...cs) {
    return [[].concat(...cs.map((c) => c[0]))];
}
export function or(...cs) {
    return [].concat(...cs);
}
export function meet(left, right) {
    const out = new MutableRequirement();
    for (const ls of left) {
        for (const rs of right) {
            out.addList([...ls, ...rs]);
        }
    }
    return out.freeze();
}
const meetReq = meet;
(function (Condition) {
    Condition.OPEN = [[]];
})(Condition || (Condition = {}));
export function Slot(x) {
    if (typeof x === 'number')
        return x;
    return x[0][0];
}
(function (Slot) {
    function item(x) {
        return (x | 0x200);
    }
    Slot.item = item;
})(Slot || (Slot = {}));
export var Check;
(function (Check) {
    function chest(id) {
        return { slot: Slot(0x200 | id) };
    }
    Check.chest = chest;
})(Check || (Check = {}));
export var Terrain;
(function (Terrain) {
    Terrain.seamless = memoize((t) => ({ ...t }));
    function meet(left, right) {
        const out = {};
        if (left.enter || right.enter) {
            out.enter = meetReq(left.enter || [[]], right.enter || [[]]);
        }
        if (left.exit || right.exit) {
            out.exit = meetReq(left.exit || [[]], right.exit || [[]]);
        }
        if (left.exitSouth || right.exitSouth) {
            out.exitSouth = meetReq(left.exitSouth || [[]], right.exitSouth || [[]]);
        }
        return out;
    }
    Terrain.meet = meet;
    function join(left, right) {
        const out = {};
        if (left.enter || right.enter) {
            out.enter = (left.enter || [[]]).concat(right.enter || [[]]);
        }
        if (left.exit || right.exit) {
            out.exit = (left.exit || [[]]).concat(right.exit || [[]]);
        }
        if (left.exitSouth || right.exitSouth) {
            out.exitSouth = (left.exitSouth || [[]]).concat(right.exitSouth || [[]]);
        }
        return out;
    }
    Terrain.join = join;
    function flag(id) {
        return { enter: Condition(id) };
    }
    Terrain.flag = flag;
})(Terrain || (Terrain = {}));
export function memoize(f) {
    const map = new WeakMap();
    const undef = {};
    return (x) => {
        let y = map.get(x);
        if (y === undefined) {
            y = f(x);
            map.set(x, y === undefined ? undef : y);
        }
        else if (y === undef) {
            y = undefined;
        }
        return y;
    };
}
export function memoize2(f) {
    const map = new WeakMap();
    const undef = {};
    return (x, y) => {
        let ys = map.get(x);
        if (ys == undefined)
            map.set(x, ys = new WeakMap());
        let z = ys.get(y);
        if (z === undefined) {
            z = f(x, y);
            ys.set(y, z === undefined ? undef : z);
        }
        else if (z === undef) {
            z = undefined;
        }
        return z;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZGl0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL2dyYXBoL2NvbmRpdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxQkEsTUFBTSxLQUFXLEtBQUssQ0FxQ3JCO0FBckNELFdBQWlCLEtBQUs7SUFDUCxzQkFBZ0IsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEMsZ0JBQVUsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUIseUJBQW1CLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLHFCQUFlLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25DLG9CQUFjLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLHVCQUFpQixHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUVyQyxvQkFBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxvQkFBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxxQkFBZSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxvQkFBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxlQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdCLGlCQUFXLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLG1CQUFhLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pDLGtCQUFZLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLGlCQUFXLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLGtCQUFZLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLGNBQVEsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsaUJBQVcsR0FBRyxT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R0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUNuQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNaLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDeEM7YUFBTSxJQUFJLENBQUMsS0FBSyxLQUFLLEVBQUU7WUFDdEIsQ0FBQyxHQUFHLFNBQVMsQ0FBQztTQUNmO1FBQ0QsT0FBTyxDQUFNLENBQUM7SUFDaEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRPRE8gLSB3ZSBjYW4gcmVjb3ZlciBhIHRvbiBvZiBmbGFncyBieSBqdXN0IGdldHRpbmcgcmlkIG9mIHRoZSByZWR1bmRhbnRcbi8vIGl0ZW0gZmxhZ3MgLSBlLmcuIGRyYXlnb24xL3BzeWNoIGFybW9yIGhhcyAwNmMsIDBjYywgYW5kIDEwYiAtIHdlIG9ubHkgbmVlZFxuLy8gb25lIG9mIHRoZXNlLCBzbyBsZXQncyBjb25zb2xpZGF0ZSBhbmQgZGVsZXRlIHRoZSByZXN0IChhbmQgYWxzbyBnYXJiYWdlXG4vLyBjb2xsZWN0IHRoZSB1bnVzZWQgdHJpZ2dlcnMgYXNzb2NpYXRlZCB3aXRoIHRoZW0pLlxuXG4vLyBJdCBtaWdodCBtYWtlIHNlbnNlIHRvIGVudW1lcmF0ZSBBTEwgdGhlIGZsYWdzLCBib3RoIGV4aXN0aW5nIGFuZCBuZXcuXG4vLyBXZSBjb3VsZCB1c2UgYW4gZW51bSB0byBrZWVwIHRyYWNrIG9mIHRoZW0sIHRob3VnaCB3ZSdkIG5lZWQgYW4gaW5kaXJlY3Rpb25cbi8vIHNvIHRoYXQgd2UgY291bGQgbWFwIHRoZW0gcHJvcGVybHkuLi4/IFVzZSBzdHJpbmdzIHRvIGVuc3VyZSB0aGUgaW5kaXJlY3Rpb25cbi8vIGlzIGFsd2F5cyBhcHBsaWVkIVxuXG4vLyBleHBvcnQgZW51bSBGbGFnIHtcbi8vICAgU3RhcnRlZFdpbmRtaWxsID0gJzAwYScsXG4vLyAgIFJpZGluZ0RvbHBoaW4gPSAncmlkaW5nIGRvbHBoaW4nLFxuLy8gfVxuLy8gY29uc3QgZmxhZ1RvTmFtZU1hcDogTWFwPEZsYWcsIHN0cmluZz4gPSAoKCkgPT4geyByZXR1cm4gbmV3IE1hcCgpOyB9KSgpO1xuLy8gY29uc3QgZmxhZ1RvRmxhZ0lkTWFwOiBCaU1hcDxGbGFnLCBudW1iZXI+ID0gbmV3IEJpTWFwKCk7XG5cbi8vIFRoZW4gd29yayB0byByZWR1Y2UgdGhpbmdzIHRvIGEgc2luZ2xlIElEIGFoZWFkIG9mIHRpbWUsIGJlZm9yZSBidWlsZGluZ1xuLy8gdGhlIHdvcmxkIGdyYXBoLlxuXG5cbmV4cG9ydCBuYW1lc3BhY2UgRXZlbnQge1xuICBleHBvcnQgY29uc3QgU1RBUlRFRF9XSU5ETUlMTCA9IENvbmRpdGlvbigweDAwYSk7XG4gIGV4cG9ydCBjb25zdCBMRUFGX0VMREVSID0gQ29uZGl0aW9uKDB4MDBiKTtcbiAgZXhwb3J0IGNvbnN0IFVOREVSR1JPVU5EX0NIQU5ORUwgPSBDb25kaXRpb24oMHgwMTgpO1xuICBleHBvcnQgY29uc3QgTUVTSUFfUkVDT1JESU5HID0gQ29uZGl0aW9uKDB4MDFiKTtcbiAgZXhwb3J0IGNvbnN0IFFVRUVOX1JFVkVBTEVEID0gQ29uZGl0aW9uKDB4MDFlKTtcbiAgZXhwb3J0IGNvbnN0IFJFVFVSTkVEX0ZPR19MQU1QID0gQ29uZGl0aW9uKDB4MDIxKTtcbiAgLy8gZXhwb3J0IGNvbnN0IEdFTkVSQUxTX0RFRkVBVEVEID0gQ29uZGl0aW9uKDB4MDI0KTtcbiAgZXhwb3J0IGNvbnN0IEhFQUxFRF9ET0xQSElOID0gQ29uZGl0aW9uKDB4MDI1KTtcbiAgZXhwb3J0IGNvbnN0IEVOVEVSRURfU0hZUk9OID0gQ29uZGl0aW9uKDB4MDI2KTtcbiAgZXhwb3J0IGNvbnN0IFNIWVJPTl9NQVNTQUNSRSA9IENvbmRpdGlvbigweDAyNyk7XG4gIGV4cG9ydCBjb25zdCBMRUFGX0FCRFVDVElPTiA9IENvbmRpdGlvbigweDAzOCk7XG4gIGV4cG9ydCBjb25zdCBaRUJVX0NBVkUgPSBDb25kaXRpb24oMHgwM2EpO1xuICBleHBvcnQgY29uc3QgWkVCVV9TSFlST04gPSBDb25kaXRpb24oMHgwM2IpO1xuICBleHBvcnQgY29uc3QgUkVTQ1VFRF9DSElMRCA9IENvbmRpdGlvbigweDA0NSk7XG4gIGV4cG9ydCBjb25zdCBEV0FSRl9NT1RIRVIgPSBDb25kaXRpb24oMHgwNTIpOyAvLyB0YWxrZWQgdG8gdy8gdGVsZXBhdGh5XG4gIGV4cG9ydCBjb25zdCBEV0FSRl9DSElMRCA9IENvbmRpdGlvbigweDA1Myk7IC8vIGZvbGxvd2luZ1xuICBleHBvcnQgY29uc3QgU1RPTV9JTl9TV0FOID0gQ29uZGl0aW9uKDB4MDYxKTtcbiAgZXhwb3J0IGNvbnN0IERSQVlHT04xID0gQ29uZGl0aW9uKDB4MDZjKTtcbiAgZXhwb3J0IGNvbnN0IEZPVU5EX0tFTlNVID0gQ29uZGl0aW9uKDB4MDcyKTtcbiAgZXhwb3J0IGNvbnN0IFNIRUxMX0ZMVVRFID0gQ29uZGl0aW9uKDB4MDhiKTsgLy8gdXNlZCBmb3Igbm9uLXNsb3QgZGlhbG9nIH4gZmlzaGVybWFuXG4gIGV4cG9ydCBjb25zdCBSSURFX0RPTFBISU4gPSBDb25kaXRpb24oMHgwOWIpO1xuICBleHBvcnQgY29uc3QgWkVCVV9TVFVERU5UID0gQ29uZGl0aW9uKDB4MGE1KTtcbiAgZXhwb3J0IGNvbnN0IExFQUZfUkFCQklUID0gQ29uZGl0aW9uKDB4MGE5KTtcbiAgZXhwb3J0IGNvbnN0IENBTE1FRF9TRUEgPSBDb25kaXRpb24oMHgyODMpO1xuICBleHBvcnQgY29uc3QgT1BFTkVEX0pPRUxfU0hFRCA9IENvbmRpdGlvbigweDI4Nyk7XG4gIGV4cG9ydCBjb25zdCBPUEVORURfQ1JZUFQgPSBDb25kaXRpb24oMHgyOGUpO1xuICBleHBvcnQgY29uc3QgT1BFTkVEX1NUWVggPSBDb25kaXRpb24oMHgyYjApO1xuICBleHBvcnQgY29uc3QgT1BFTkVEX1NXQU4gPSBDb25kaXRpb24oMHgyYjMpO1xuICBleHBvcnQgY29uc3QgT1BFTkVEX1BSSVNPTiA9IENvbmRpdGlvbigweDJkOCk7XG4gIGV4cG9ydCBjb25zdCBPUEVORURfU0VBTEVEX0NBVkUgPSBDb25kaXRpb24oMHgyZWUpO1xuICBleHBvcnQgY29uc3QgU1RBUlQgPSBDb25kaXRpb24oMHgyZjApOyAgLy8gYWx3YXlzIHRydWVcbiAgLy8gTk9URTogVGhlc2UgYXJlIG1vdmVkIGZyb20gdmFuaWxsYSBiZWNhdXNlIG9mIHpvbWJpZSB3YXJwIVxuICBleHBvcnQgY29uc3QgV0FSUF9PQUsgPSBDb25kaXRpb24oMHgyZjYpO1xuICAvLyBleHBvcnQgY29uc3QgV0FSUF9KT0VMID0gQ29uZGl0aW9uKDB4MmZhKTtcbiAgZXhwb3J0IGNvbnN0IFdBUlBfU0hZUk9OID0gQ29uZGl0aW9uKDB4MmZkKTtcbiAgLy8gZXhwb3J0IGNvbnN0IFdBUlBfU0FIQVJBID0gQ29uZGl0aW9uKDB4MmZmKTtcbn1cblxuLy8gTk9URTogdGhlc2UgaXRlbXMgYW5kIGNhcGFiaWxpdGllcyBhcmUgb25lcyBjb21wbGVtZW50cywgbm90IG5lZ2F0aXZlc1xuZXhwb3J0IHR5cGUgQ2FwYWJpbGl0eSA9IHJlYWRvbmx5IFtyZWFkb25seSBbQ29uZGl0aW9uXV07XG5leHBvcnQgbmFtZXNwYWNlIENhcGFiaWxpdHkge1xuICBleHBvcnQgY29uc3QgU1dPUkQgPSBDb25kaXRpb24ofjApO1xuICBleHBvcnQgY29uc3QgTU9ORVkgPSBDb25kaXRpb24ofjEpO1xuICBleHBvcnQgY29uc3QgQlJFQUtfU1RPTkUgPSBDb25kaXRpb24ofjIpO1xuICBleHBvcnQgY29uc3QgQlJFQUtfSUNFID0gQ29uZGl0aW9uKH4zKTtcbiAgZXhwb3J0IGNvbnN0IEZPUk1fQlJJREdFID0gQ29uZGl0aW9uKH40KTtcbiAgZXhwb3J0IGNvbnN0IEJSRUFLX0lST04gPSBDb25kaXRpb24ofjUpO1xuICBleHBvcnQgY29uc3QgVFJBVkVMX1NXQU1QID0gQ29uZGl0aW9uKH42KTtcbiAgZXhwb3J0IGNvbnN0IENMSU1CX1dBVEVSRkFMTCA9IENvbmRpdGlvbih+Nyk7XG4gIGV4cG9ydCBjb25zdCBCVVlfSEVBTElORyA9IENvbmRpdGlvbih+OCk7XG4gIGV4cG9ydCBjb25zdCBCVVlfV0FSUCA9IENvbmRpdGlvbih+OSk7XG4gIGV4cG9ydCBjb25zdCBTSE9PVElOR19TVEFUVUUgPSBDb25kaXRpb24ofjEwKTtcbiAgZXhwb3J0IGNvbnN0IENMSU1CX1NMT1BFID0gQ29uZGl0aW9uKH4xMSk7XG59XG5cbi8vIFRoZXNlIGluZGljYXRlIHRoZSBib3NzIGlzIGFjdHVhbGx5IGRlZmVhdGVkLlxuZXhwb3J0IHR5cGUgQm9zcyA9IHJlYWRvbmx5IFtyZWFkb25seSBbQ29uZGl0aW9uXV07XG5leHBvcnQgZnVuY3Rpb24gQm9zcyhpZDogbnVtYmVyKTogQm9zcyB7XG4gIHJldHVybiBDb25kaXRpb24oaWQpO1xufVxuLy8gVE9ETyAtIGNsZWFuIHRoZXNlIHVwIGdsb2JhbGx5IHNvIHRoYXQgYm9zc2VzIGFyZSBzaW1wbGUgMTB4P1xuZXhwb3J0IG5hbWVzcGFjZSBCb3NzIHtcbiAgZXhwb3J0IGNvbnN0IFZBTVBJUkUxID0gQm9zcygweDEwMCk7XG4gIGV4cG9ydCBjb25zdCBJTlNFQ1QgPSBCb3NzKDB4MTAxKTtcbiAgZXhwb3J0IGNvbnN0IEtFTEJFU1FVRTEgPSBCb3NzKDB4MTAyKTtcbiAgZXhwb3J0IGNvbnN0IFJBR0UgPSBCb3NzKDB4MTAzKTtcbiAgZXhwb3J0IGNvbnN0IFNBQkVSQTEgPSBCb3NzKDB4MDEzKTtcbiAgZXhwb3J0IGNvbnN0IE1BRE8xID0gQm9zcygweDA2Nyk7XG4gIGV4cG9ydCBjb25zdCBLRUxCRVNRVUUyID0gQm9zcygweDEwNSk7XG4gIGV4cG9ydCBjb25zdCBTQUJFUkEyID0gQm9zcygweDEwNik7XG4gIGV4cG9ydCBjb25zdCBNQURPMiA9IEJvc3MoMHgxMDcpO1xuICBleHBvcnQgY29uc3QgS0FSTUlORSA9IEJvc3MoMHgxMDgpO1xuICBleHBvcnQgY29uc3QgRFJBWUdPTjEgPSBCb3NzKDB4MTBiKTtcbiAgZXhwb3J0IGNvbnN0IERSQVlHT04yID0gQm9zcygweDI4ZCk7XG4gIGV4cG9ydCBjb25zdCBWQU1QSVJFMiA9IEJvc3MoMHgxMGMpO1xufVxuXG5leHBvcnQgdHlwZSBJdGVtID0gcmVhZG9ubHkgW3JlYWRvbmx5IFtDb25kaXRpb25dXTtcbmV4cG9ydCBmdW5jdGlvbiBJdGVtKGlkOiBudW1iZXIpOiBJdGVtIHtcbiAgaWYgKGlkID49IDB4NzApIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgaXRlbTogJHtpZC50b1N0cmluZygxNil9YCk7XG4gIHJldHVybiBDb25kaXRpb24oMHgyMDAgfCBpZCk7XG59XG5leHBvcnQgbmFtZXNwYWNlIEl0ZW0ge1xuICBleHBvcnQgY29uc3QgU1dPUkRfT0ZfV0lORCA9IEl0ZW0oMHgwMCk7XG4gIGV4cG9ydCBjb25zdCBTV09SRF9PRl9GSVJFID0gSXRlbSgweDAxKTtcbiAgZXhwb3J0IGNvbnN0IFNXT1JEX09GX1dBVEVSID0gSXRlbSgweDAyKTtcbiAgZXhwb3J0IGNvbnN0IFNXT1JEX09GX1RIVU5ERVIgPSBJdGVtKDB4MDMpO1xuICBleHBvcnQgY29uc3QgQ1JZU1RBTElTID0gSXRlbSgweDA0KTtcbiAgZXhwb3J0IGNvbnN0IE9SQl9PRl9XSU5EID0gSXRlbSgweDA1KTtcbiAgZXhwb3J0IGNvbnN0IFRPUk5BRE9fQlJBQ0VMRVQgPSBJdGVtKDB4MDYpO1xuICBleHBvcnQgY29uc3QgT1JCX09GX0ZJUkUgPSBJdGVtKDB4MDcpO1xuICBleHBvcnQgY29uc3QgRkxBTUVfQlJBQ0VMRVQgPSBJdGVtKDB4MDgpO1xuICBleHBvcnQgY29uc3QgT1JCX09GX1dBVEVSID0gSXRlbSgweDA5KTtcbiAgZXhwb3J0IGNvbnN0IEJMSVpaQVJEX0JSQUNFTEVUID0gSXRlbSgweDBhKTtcbiAgZXhwb3J0IGNvbnN0IE9SQl9PRl9USFVOREVSID0gSXRlbSgweDBiKTtcbiAgZXhwb3J0IGNvbnN0IFNUT1JNX0JSQUNFTEVUID0gSXRlbSgweDBjKTtcblxuICBleHBvcnQgY29uc3QgTUVESUNBTF9IRVJCID0gSXRlbSgweDFkKTtcbiAgZXhwb3J0IGNvbnN0IFdBUlBfQk9PVFMgPSBJdGVtKDB4MjQpO1xuXG4gIGV4cG9ydCBjb25zdCBTVEFUVUVfT0ZfT05ZWCA9IEl0ZW0oMHgyNSk7XG4gIGV4cG9ydCBjb25zdCBJTlNFQ1RfRkxVVEUgPSBJdGVtKDB4MjcpO1xuICBleHBvcnQgY29uc3QgRkxVVEVfT0ZfTElNRSA9IEl0ZW0oMHgyOCk7XG4gIGV4cG9ydCBjb25zdCBHQVNfTUFTSyA9IEl0ZW0oMHgyOSk7XG4gIGV4cG9ydCBjb25zdCBQT1dFUl9SSU5HID0gSXRlbSgweDJhKTtcbiAgZXhwb3J0IGNvbnN0IFdBUlJJT1JfUklORyA9IEl0ZW0oMHgyYik7XG4gIGV4cG9ydCBjb25zdCBJUk9OX05FQ0tMQUNFID0gSXRlbSgweDJjKTtcbiAgZXhwb3J0IGNvbnN0IERFT1NfUEVOREFOVCA9IEl0ZW0oMHgyZCk7XG4gIGV4cG9ydCBjb25zdCBSQUJCSVRfQk9PVFMgPSBJdGVtKDB4MmUpO1xuICBleHBvcnQgY29uc3QgTEVBVEhFUl9CT09UUyA9IEl0ZW0oMHgyZik7XG4gIGV4cG9ydCBjb25zdCBTSElFTERfUklORyA9IEl0ZW0oMHgzMCk7XG4gIGV4cG9ydCBjb25zdCBBTEFSTV9GTFVURSA9IEl0ZW0oMHgzMSk7XG4gIGV4cG9ydCBjb25zdCBXSU5ETUlMTF9LRVkgPSBJdGVtKDB4MzIpO1xuICBleHBvcnQgY29uc3QgS0VZX1RPX1BSSVNPTiA9IEl0ZW0oMHgzMyk7XG4gIGV4cG9ydCBjb25zdCBLRVlfVE9fU1RZWCA9IEl0ZW0oMHgzNCk7XG4gIGV4cG9ydCBjb25zdCBGT0dfTEFNUCA9IEl0ZW0oMHgzNSk7XG4gIGV4cG9ydCBjb25zdCBTSEVMTF9GTFVURSA9IEl0ZW0oMHgzNik7XG4gIGV4cG9ydCBjb25zdCBFWUVfR0xBU1NFUyA9IEl0ZW0oMHgzNyk7XG4gIGV4cG9ydCBjb25zdCBCUk9LRU5fU1RBVFVFID0gSXRlbSgweDM4KTtcbiAgZXhwb3J0IGNvbnN0IEdMT1dJTkdfTEFNUCA9IEl0ZW0oMHgzOSk7XG4gIGV4cG9ydCBjb25zdCBTVEFUVUVfT0ZfR09MRCA9IEl0ZW0oMHgzYSk7XG4gIGV4cG9ydCBjb25zdCBMT1ZFX1BFTkRBTlQgPSBJdGVtKDB4M2IpO1xuICBleHBvcnQgY29uc3QgS0lSSVNBX1BMQU5UID0gSXRlbSgweDNjKTtcbiAgZXhwb3J0IGNvbnN0IElWT1JZX1NUQVRVRSA9IEl0ZW0oMHgzZCk7XG4gIGV4cG9ydCBjb25zdCBCT1dfT0ZfTU9PTiA9IEl0ZW0oMHgzZSk7XG4gIGV4cG9ydCBjb25zdCBCT1dfT0ZfU1VOID0gSXRlbSgweDNmKTtcbiAgZXhwb3J0IGNvbnN0IEJPV19PRl9UUlVUSCA9IEl0ZW0oMHg0MCk7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTWFnaWMge1xuICBleHBvcnQgY29uc3QgUkVGUkVTSCA9IEl0ZW0oMHg0MSk7XG4gIGV4cG9ydCBjb25zdCBQQVJBTFlTSVMgPSBJdGVtKDB4NDIpO1xuICBleHBvcnQgY29uc3QgVEVMRVBBVEhZID0gSXRlbSgweDQzKTtcbiAgZXhwb3J0IGNvbnN0IFRFTEVQT1JUID0gSXRlbSgweDQ0KTtcbiAgZXhwb3J0IGNvbnN0IFJFQ09WRVIgPSBJdGVtKDB4NDUpO1xuICBleHBvcnQgY29uc3QgQkFSUklFUiA9IEl0ZW0oMHg0Nik7XG4gIGV4cG9ydCBjb25zdCBDSEFOR0UgPSBJdGVtKDB4NDcpO1xuICBleHBvcnQgY29uc3QgRkxJR0hUID0gSXRlbSgweDQ4KTtcbn1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIHN0YXR1ZSguLi5yZXFzOiBSZXF1aXJlbWVudFtdKTogVGVycmFpbiB7XG4vLyAgIHJldHVybiB7ZXhpdDogb3IoLi4ucmVxcywgQ2FwYWJpbGl0eS5TVEFUVUVfR0xJVENIKX07XG4vLyB9O1xuXG4vLyBOZXd0eXBlcyBmb3IgZGlmZmVyZW50IG51bWJlciBwdXJwb3Nlc1xuXG5leHBvcnQgZW51bSBXYWxsVHlwZSB7XG4gIFdJTkQgPSAwLFxuICBGSVJFID0gMSxcbiAgV0FURVIgPSAyLFxuICBUSFVOREVSID0gMyxcbn1cblxuLy8gQ2xhc3MgZm9yIGtlZXBpbmcgdHJhY2sgb2YgYSBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSBleHByZXNzaW9uXG5leHBvcnQgY2xhc3MgTXV0YWJsZVJlcXVpcmVtZW50IHtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXAgPSBuZXcgTWFwPHN0cmluZywgU2V0PENvbmRpdGlvbj4+KCk7XG5cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKTogSXRlcmF0b3I8SXRlcmFibGU8Q29uZGl0aW9uPj4ge1xuICAgIHJldHVybiB0aGlzLm1hcC52YWx1ZXMoKTtcbiAgfVxuXG4gIGFkZChuZXdMYWJlbDogc3RyaW5nLCBuZXdEZXBzOiBTZXQ8Q29uZGl0aW9uPik6IGJvb2xlYW4ge1xuICAgIGZvciAoY29uc3QgYyBvZiBuZXdEZXBzKSBpZiAoQXJyYXkuaXNBcnJheShjKSkgdGhyb3cgbmV3IEVycm9yKCk7XG5cbiAgICBpZiAodGhpcy5tYXAuaGFzKG5ld0xhYmVsKSkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAoY29uc3QgW2N1ckxhYmVsLCBjdXJEZXBzXSBvZiB0aGlzLm1hcCkge1xuICAgICAgaWYgKGNvbnRhaW5zQWxsKG5ld0RlcHMsIGN1ckRlcHMpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoY29udGFpbnNBbGwoY3VyRGVwcywgbmV3RGVwcykpIHRoaXMubWFwLmRlbGV0ZShjdXJMYWJlbCk7XG4gICAgfVxuICAgIHRoaXMubWFwLnNldChuZXdMYWJlbCwgbmV3RGVwcyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhZGRBbGwocmVxdWlyZW1lbnQ6IFJlcXVpcmVtZW50KTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBjb25kaXRpb25zIG9mIHJlcXVpcmVtZW50KSB7XG4gICAgICB0aGlzLmFkZExpc3QoY29uZGl0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgYWRkTGlzdChjb25kaXRpb25zOiByZWFkb25seSBDb25kaXRpb25bXSk6IHZvaWQge1xuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5uZXcgU2V0KGNvbmRpdGlvbnMpXS5zb3J0KCk7XG4gICAgY29uc3QgZGVwcyA9IG5ldyBTZXQoc29ydGVkKTtcbiAgICB0aGlzLmFkZChzb3J0ZWQuam9pbignICcpLCBkZXBzKTtcbiAgfVxuXG4gIC8qKiBBcHBlbmRzIHRoZSBnaXZlbiByZXF1aXJlbWVudCB0byBhbGwgcm91dGVzLiAqL1xuICByZXN0cmljdChyOiBSZXF1aXJlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGwgPSBbLi4udGhpcy5tYXAudmFsdWVzKCldO1xuICAgIHRoaXMubWFwLmNsZWFyKCk7XG4gICAgZm9yIChjb25zdCBscyBvZiBsKSB7XG4gICAgICBmb3IgKGNvbnN0IHJzIG9mIHIpIHtcbiAgICAgICAgdGhpcy5hZGRMaXN0KFsuLi5scywgLi4ucnNdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmcmVlemUoKTogUmVxdWlyZW1lbnQge1xuICAgIHJldHVybiBbLi4udGhpc10ubWFwKGNzID0+IFsuLi5jc10pO1xuICB9XG59XG5cbmNvbnN0IGNvbnRhaW5zQWxsID0gPFQ+KGxlZnQ6IFNldDxUPiwgcmlnaHQ6IFNldDxUPik6IGJvb2xlYW4gPT4ge1xuICBpZiAobGVmdC5zaXplIDwgcmlnaHQuc2l6ZSkgcmV0dXJuIGZhbHNlO1xuICBmb3IgKGNvbnN0IGQgb2YgcmlnaHQpIHtcbiAgICBpZiAoIWxlZnQuaGFzKGQpKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG4vLyBGbGFnLCBpdGVtLCBvciBjb25kaXRpb24uXG5leHBvcnQgdHlwZSBDb25kaXRpb24gPSBudW1iZXIgJiB7X19jb25kaXRpb25fXzogbmV2ZXJ9O1xuXG5leHBvcnQgZnVuY3Rpb24gQ29uZGl0aW9uKHg6IG51bWJlcik6IHJlYWRvbmx5IFtyZWFkb25seSBbQ29uZGl0aW9uXV0ge1xuICByZXR1cm4gW1t4IGFzIENvbmRpdGlvbl1dO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFuZCguLi5jczogKHJlYWRvbmx5IFtyZWFkb25seSBDb25kaXRpb25bXV0pW10pOiBSZXF1aXJlbWVudCB7XG4gIC8vIFRPRE8gLSB0aGlzIHdhcyBhIGRlc3RydWN0dXJpbmcgZnVuY3Rpb24gKFtjXSkgPT4gYyBidXQgQ2xvc3VyZSBpcyBkZXN0cm95aW5nXG4gIC8vIGl0IGludG8gKGMpID0+IFtjXSA9IGMuXG4gIC8vcmV0dXJuIFsoW10gYXMgQ29uZGl0aW9uW10pLmNvbmNhdCguLi5jcy5tYXAoKFtjXSkgPT4gYykpXTtcbiAgcmV0dXJuIFsoW10gYXMgQ29uZGl0aW9uW10pLmNvbmNhdCguLi5jcy5tYXAoKGMpID0+IGNbMF0pKV07XG59XG5leHBvcnQgZnVuY3Rpb24gb3IoLi4uY3M6IFJlcXVpcmVtZW50W10pOiBSZXF1aXJlbWVudCB7XG4gIHJldHVybiAoW10gYXMgUmVxdWlyZW1lbnQpLmNvbmNhdCguLi5jcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVldChsZWZ0OiBSZXF1aXJlbWVudCwgcmlnaHQ6IFJlcXVpcmVtZW50KTogUmVxdWlyZW1lbnQge1xuICBjb25zdCBvdXQgPSBuZXcgTXV0YWJsZVJlcXVpcmVtZW50KCk7XG4gIGZvciAoY29uc3QgbHMgb2YgbGVmdCkge1xuICAgIGZvciAoY29uc3QgcnMgb2YgcmlnaHQpIHtcbiAgICAgIG91dC5hZGRMaXN0KFsuLi5scywgLi4ucnNdKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dC5mcmVlemUoKTtcbn1cblxuLy8gYWxpYXMgZm9yIHVzZSBpbiBUZXJyYWluLm1lZXRcbmNvbnN0IG1lZXRSZXEgPSBtZWV0O1xuXG5leHBvcnQgbmFtZXNwYWNlIENvbmRpdGlvbiB7XG4gIGV4cG9ydCBjb25zdCBPUEVOOiBSZXF1aXJlbWVudCA9IFtbXV07XG59XG5cbi8vIEFuIGltbXV0YWJsZSBETkYgZXhwcmVzc2lvbi4gIEFsbCBleHBvcnRlZCBjb25zdGFudHMgYXJlIGluIHRoaXMgZm9ybS5cbmV4cG9ydCB0eXBlIFJlcXVpcmVtZW50ID0gcmVhZG9ubHkgKHJlYWRvbmx5IENvbmRpdGlvbltdKVtdO1xuXG4vLyBTbG90IGZvciBhbiBpdGVtIG9yIGZsYWcgdG8gZ2V0LiAgQWxtb3N0IHRoZSBzYW1lIHRoaW5nIGFzIGEgc2luZ2xlXG4vLyBjb25kaXRpb24sIGJ1dCB1c2VkIGluIGRpZmZlcmVudCBjb250ZXh0cy5cbmV4cG9ydCB0eXBlIFNsb3QgPSBudW1iZXIgJiB7X19zbG90X186IG5ldmVyfTtcblxuZXhwb3J0IGZ1bmN0aW9uIFNsb3QoeDogbnVtYmVyIHwgcmVhZG9ubHkgW3JlYWRvbmx5IFtDb25kaXRpb25dXSk6IFNsb3Qge1xuICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSByZXR1cm4geCBhcyBTbG90O1xuICByZXR1cm4geFswXVswXSBhcyBhbnk7XG59XG5leHBvcnQgbmFtZXNwYWNlIFNsb3Qge1xuICBleHBvcnQgZnVuY3Rpb24gaXRlbSh4OiBudW1iZXIpOiBTbG90IHtcbiAgICByZXR1cm4gKHggfCAweDIwMCkgYXMgU2xvdDtcbiAgfVxuICAvLyBleHBvcnQgZnVuY3Rpb24gYm9zcyh4OiBudW1iZXIpOiBTbG90IHtcbiAgLy8gICByZXR1cm4gKH4oeCB8IDB4MTAwKSkgYXMgU2xvdDtcbiAgLy8gfVxufVxuXG5cbi8vIE1ldGFkYXRhIGFib3V0IGdldHRpbmcgc2xvdHMuXG5leHBvcnQgaW50ZXJmYWNlIENoZWNrIHtcbiAgY29uZGl0aW9uPzogUmVxdWlyZW1lbnQ7XG4gIHNsb3Q6IFNsb3Q7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hlY2sge1xuICBleHBvcnQgZnVuY3Rpb24gY2hlc3QoaWQ6IG51bWJlcik6IENoZWNrIHtcbiAgICByZXR1cm4ge3Nsb3Q6IFNsb3QoMHgyMDAgfCBpZCl9O1xuICB9XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBUZXJyYWluIHtcbiAgLy8gUmVxdWlyZW1lbnQgdG8gZW50ZXIgdGlsZSwgZGVmYXVsdHMgdG8gT1BFTlxuICBlbnRlcj86IFJlcXVpcmVtZW50O1xuICAvLyBSZXF1aXJlbWVudCB0byBleGl0IGFueSBkaXJlY3Rpb24gb3RoZXIgdGhhbiBzb3V0aFxuICBleGl0PzogUmVxdWlyZW1lbnQ7XG4gIC8vIFJlcXVpcmVtZW50IHRvIGV4aXQgc291dGhcbiAgZXhpdFNvdXRoPzogUmVxdWlyZW1lbnQ7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgVGVycmFpbiB7XG4gIC8vIFBvc2l0aXZlIG51bWJlcnMgcmVwcmVzZW50IGZsYWdzLCBpdGVtcywgZXRjLlxuICAvLyAvLyBOZWdhdGl2ZSBudW1iZXJzIHJlcHJlc2VudCBjb21wb3NpdGUgY29uZGl0aW9ucy5cbiAgLy8gZXhwb3J0IGNvbnN0IENST1NTX1JJVkVSUyA9IC0xO1xuICAvLyBleHBvcnQgY29uc3QgQ1JPU1NfU0VBID0gLTI7XG5cbiAgLy8gVE9ETyAtIGhvdyB0byBoYW5kbGUgZG9scGhpbj8hP1xuICAvLyAgIC0tIGl0J3MgcG9zc2libGUgd2UgY291bGQgaGFyZC1jb2RlIHRoYXQgYW55dGhpbmcgY29ubmVjdGVkXG4gIC8vICAgICAgdG8gYW5ncnkgc2VhIGlzIGVudGVyYWJsZSB3LyBkb2xwaGluIGFzIHdlbGw/XG4gIC8vICAgLS0gcmVxdWlyZXMgbGFuZCBicmlkZ2UgaW4gdW5kZXJncm91bmQgY2hhbm5lbC4uLlxuICAvLyAgICAgIC0gY291bGQgYWxzbyBqdXN0IHVzZSBzdW1tb24gcG9pbnRzP1xuICAvLyBXaGF0IGFib3V0IGZsYWdzIG92ZXIgd2F0ZXIgLSBub3QgaW1wYXNzYWJsZT8gc2hvdWxkbid0IG1hdHRlcj9cblxuICAvKiogTWFrZXMgYSBzaW5nbGUgZXh0cmEgY29weSBvZiBhIHRlcnJhaW4gZm9yIHNlYW1sZXNzIGV4aXRzLiAqL1xuICAvLyBTZWFtbGVzcyBleGl0czogc2FtZSBlZmZlY3QgYXMgT1BFTiBidXQgYSBkaWZmZXJlbnQgb2JqZWN0IHNvIGl0XG4gIC8vIGRvZXNuJ3QgZ2V0IHVuaW9uZWQgdG9nZXRoZXIuICBUaGlzIHdheSB3ZSBjYW4gZGlzdGluZ3Vpc2ggdGhlXG4gIC8vIGV4aXRzIGNsZWFybHkuXG4gIGV4cG9ydCBjb25zdCBzZWFtbGVzcyA9IG1lbW9pemUoKHQ6IFRlcnJhaW4pOiBUZXJyYWluID0+ICh7Li4udH0pKTtcblxuICAvLyBleHBvcnQgZnVuY3Rpb24gZmxhZyhpZDogbnVtYmVyLCBmbGlnaHQ/OiBib29sZWFuKSB7XG4gIC8vICAgcmV0dXJuIHtlbnRlcjogZmxpZ2h0ID8gW1tpZF0sIFt+MHgyNDhdXSA6IFtbaWRdXX07XG4gIC8vIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbWVldChsZWZ0OiBUZXJyYWluLCByaWdodDogVGVycmFpbik6IFRlcnJhaW4ge1xuICAgIGNvbnN0IG91dDogVGVycmFpbiA9IHt9O1xuICAgIGlmIChsZWZ0LmVudGVyIHx8IHJpZ2h0LmVudGVyKSB7XG4gICAgICBvdXQuZW50ZXIgPSBtZWV0UmVxKGxlZnQuZW50ZXIgfHwgW1tdXSwgcmlnaHQuZW50ZXIgfHwgW1tdXSk7XG4gICAgfVxuICAgIGlmIChsZWZ0LmV4aXQgfHwgcmlnaHQuZXhpdCkge1xuICAgICAgb3V0LmV4aXQgPSBtZWV0UmVxKGxlZnQuZXhpdCB8fCBbW11dLCByaWdodC5leGl0IHx8IFtbXV0pO1xuICAgIH1cbiAgICBpZiAobGVmdC5leGl0U291dGggfHwgcmlnaHQuZXhpdFNvdXRoKSB7XG4gICAgICBvdXQuZXhpdFNvdXRoID0gbWVldFJlcShsZWZ0LmV4aXRTb3V0aCB8fCBbW11dLCByaWdodC5leGl0U291dGggfHwgW1tdXSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gam9pbihsZWZ0OiBUZXJyYWluLCByaWdodDogVGVycmFpbik6IFRlcnJhaW4ge1xuICAgIGNvbnN0IG91dDogVGVycmFpbiA9IHt9O1xuICAgIGlmIChsZWZ0LmVudGVyIHx8IHJpZ2h0LmVudGVyKSB7XG4gICAgICBvdXQuZW50ZXIgPSAobGVmdC5lbnRlciB8fCBbW11dKS5jb25jYXQocmlnaHQuZW50ZXIgfHwgW1tdXSk7XG4gICAgfVxuICAgIGlmIChsZWZ0LmV4aXQgfHwgcmlnaHQuZXhpdCkge1xuICAgICAgb3V0LmV4aXQgPSAobGVmdC5leGl0IHx8IFtbXV0pLmNvbmNhdChyaWdodC5leGl0IHx8IFtbXV0pO1xuICAgIH1cbiAgICBpZiAobGVmdC5leGl0U291dGggfHwgcmlnaHQuZXhpdFNvdXRoKSB7XG4gICAgICBvdXQuZXhpdFNvdXRoID0gKGxlZnQuZXhpdFNvdXRoIHx8IFtbXV0pLmNvbmNhdChyaWdodC5leGl0U291dGggfHwgW1tdXSk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gZmxhZyhpZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHtlbnRlcjogQ29uZGl0aW9uKGlkKX07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemU8VCBleHRlbmRzIG9iamVjdCwgVT4oZjogKHg6IFQpID0+IFUpOiAoeDogVCkgPT4gVSB7XG4gIGNvbnN0IG1hcCA9IG5ldyBXZWFrTWFwPFQsIFU+KCk7XG4gIGNvbnN0IHVuZGVmID0ge30gYXMgVTtcbiAgcmV0dXJuICh4OiBUKTogVSA9PiB7XG4gICAgbGV0IHkgPSBtYXAuZ2V0KHgpO1xuICAgIGlmICh5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHkgPSBmKHgpO1xuICAgICAgbWFwLnNldCh4LCB5ID09PSB1bmRlZmluZWQgPyB1bmRlZiA6IHkpO1xuICAgIH0gZWxzZSBpZiAoeSA9PT0gdW5kZWYpIHtcbiAgICAgIHkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB5IGFzIFU7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW1vaXplMjxUIGV4dGVuZHMgb2JqZWN0LCBVIGV4dGVuZHMgb2JqZWN0LCBWPihcbiAgICBmOiAoeDogVCwgeTogVSkgPT4gVik6ICh4OiBULCB5OiBVKSA9PiBWIHtcbiAgY29uc3QgbWFwID0gbmV3IFdlYWtNYXA8VCwgV2Vha01hcDxVLCBWPj4oKTtcbiAgY29uc3QgdW5kZWY6IFYgPSB7fSBhcyBWO1xuICByZXR1cm4gKHg6IFQsIHk6IFUpOiBWID0+IHtcbiAgICBsZXQgeXMgPSBtYXAuZ2V0KHgpO1xuICAgIGlmICh5cyA9PSB1bmRlZmluZWQpIG1hcC5zZXQoeCwgeXMgPSBuZXcgV2Vha01hcCgpKTtcbiAgICBsZXQgeiA9IHlzLmdldCh5KTtcbiAgICBpZiAoeiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB6ID0gZih4LCB5KTtcbiAgICAgIHlzLnNldCh5LCB6ID09PSB1bmRlZmluZWQgPyB1bmRlZiA6IHopO1xuICAgIH0gZWxzZSBpZiAoeiA9PT0gdW5kZWYpIHtcbiAgICAgIHogPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB6IGFzIFY7XG4gIH07XG59XG4iXX0=