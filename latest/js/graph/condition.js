export var Event;
(function (Event) {
    Event.STARTED_WINDMILL = Condition(0x00a);
    Event.LEAF_ELDER = Condition(0x00b);
    Event.UNDERGROUND_CHANNEL = Condition(0x018);
    Event.MESIA_RECORDING = Condition(0x01b);
    Event.QUEEN_REVEALED = Condition(0x01e);
    Event.RETURNED_FOG_LAMP = Condition(0x021);
    Event.GENERALS_DEFEATED = Condition(0x024);
    Event.HEALED_DOLPHIN = Condition(0x025);
    Event.ENTERED_SHYRON = Condition(0x026);
    Event.SHYRON_MASSACRE = Condition(0x027);
    Event.LEAF_ABDUCTION = Condition(0x038);
    Event.ZEBU_CAVE = Condition(0x03a);
    Event.ZEBU_SHYRON = Condition(0x03b);
    Event.RESCUED_CHILD = Condition(0x045);
    Event.DWARF_MOTHER = Condition(0x052);
    Event.DWARF_CHILD = Condition(0x053);
    Event.STOM_IN_SWAN = Condition(0x061);
    Event.DRAYGON1 = Condition(0x06c);
    Event.FOUND_KENSU = Condition(0x072);
    Event.SHELL_FLUTE = Condition(0x08b);
    Event.RIDE_DOLPHIN = Condition(0x09b);
    Event.ZEBU_STUDENT = Condition(0x0a5);
    Event.LEAF_RABBIT = Condition(0x0a9);
    Event.CALMED_SEA = Condition(0x283);
    Event.OPENED_JOEL_SHED = Condition(0x287);
    Event.OPENED_CRYPT = Condition(0x28e);
    Event.OPENED_STYX = Condition(0x2b0);
    Event.OPENED_SWAN = Condition(0x2b3);
    Event.OPENED_PRISON = Condition(0x2d8);
    Event.OPENED_SEALED_CAVE = Condition(0x2ee);
    Event.WARP_OAK = Condition(0x2f7);
    Event.WARP_JOEL = Condition(0x2fb);
})(Event || (Event = {}));
export var Capability;
(function (Capability) {
    Capability.SWORD = Condition(~0);
    Capability.MONEY = Condition(~1);
    Capability.BREAK_STONE = Condition(~2);
    Capability.BREAK_ICE = Condition(~3);
    Capability.FORM_BRIDGE = Condition(~4);
    Capability.BREAK_IRON = Condition(~5);
    Capability.TRAVEL_SWAMP = Condition(~6);
    Capability.CLIMB_WATERFALL = Condition(~7);
    Capability.BUY_HEALING = Condition(~8);
    Capability.BUY_WARP = Condition(~9);
    Capability.SHOOTING_STATUE = Condition(~10);
    Capability.CLIMB_SLOPE = Condition(~11);
})(Capability || (Capability = {}));
export function Boss(id) {
    return Condition(0x100 | id);
}
(function (Boss) {
    Boss.VAMPIRE1 = Boss(0x0);
    Boss.INSECT = Boss(0x1);
    Boss.KELBESQUE1 = Boss(0x2);
    Boss.RAGE = Boss(0x3);
    Boss.SABERA1 = Boss(0x4);
    Boss.MADO1 = Boss(0x5);
    Boss.KELBESQUE2 = Boss(0x6);
    Boss.SABERA2 = Boss(0x7);
    Boss.MADO2 = Boss(0x8);
    Boss.KARMINE = Boss(0x9);
    Boss.DRAYGON1 = Boss(0xa);
    Boss.DRAYGON2 = Boss(0xb);
    Boss.VAMPIRE2 = Boss(0xc);
})(Boss || (Boss = {}));
export function Item(id) {
    if (id >= 0x70)
        throw new Error(`expected item: ${id.toString(16)}`);
    return Condition(0x200 | id);
}
(function (Item) {
    Item.SWORD_OF_WIND = Item(0x00);
    Item.SWORD_OF_FIRE = Item(0x01);
    Item.SWORD_OF_WATER = Item(0x02);
    Item.SWORD_OF_THUNDER = Item(0x03);
    Item.CRYSTALIS = Item(0x04);
    Item.ORB_OF_WIND = Item(0x05);
    Item.TORNADO_BRACELET = Item(0x06);
    Item.ORB_OF_FIRE = Item(0x07);
    Item.FLAME_BRACELET = Item(0x08);
    Item.ORB_OF_WATER = Item(0x09);
    Item.BLIZZARD_BRACELET = Item(0x0a);
    Item.ORB_OF_THUNDER = Item(0x0b);
    Item.STORM_BRACELET = Item(0x0c);
    Item.MEDICAL_HERB = Item(0x1d);
    Item.WARP_BOOTS = Item(0x24);
    Item.STATUE_OF_ONYX = Item(0x25);
    Item.INSECT_FLUTE = Item(0x27);
    Item.FLUTE_OF_LIME = Item(0x28);
    Item.GAS_MASK = Item(0x29);
    Item.POWER_RING = Item(0x2a);
    Item.WARRIOR_RING = Item(0x2b);
    Item.IRON_NECKLACE = Item(0x2c);
    Item.DEOS_PENDANT = Item(0x2d);
    Item.RABBIT_BOOTS = Item(0x2e);
    Item.LEATHER_BOOTS = Item(0x2f);
    Item.SHIELD_RING = Item(0x30);
    Item.ALARM_FLUTE = Item(0x31);
    Item.WINDMILL_KEY = Item(0x32);
    Item.KEY_TO_PRISON = Item(0x33);
    Item.KEY_TO_STYX = Item(0x34);
    Item.FOG_LAMP = Item(0x35);
    Item.SHELL_FLUTE = Item(0x36);
    Item.EYE_GLASSES = Item(0x37);
    Item.BROKEN_STATUE = Item(0x38);
    Item.GLOWING_LAMP = Item(0x39);
    Item.STATUE_OF_GOLD = and(Item.BROKEN_STATUE, Item.GLOWING_LAMP);
    Item.LOVE_PENDANT = Item(0x3b);
    Item.KIRISA_PLANT = Item(0x3c);
    Item.IVORY_STATUE = Item(0x3d);
    Item.BOW_OF_MOON = Item(0x3e);
    Item.BOW_OF_SUN = Item(0x3f);
    Item.BOW_OF_TRUTH = Item(0x40);
})(Item || (Item = {}));
export var Magic;
(function (Magic) {
    Magic.REFRESH = Item(0x41);
    Magic.PARALYSIS = Item(0x42);
    Magic.TELEPATHY = Item(0x43);
    Magic.TELEPORT = Item(0x44);
    Magic.RECOVER = Item(0x45);
    Magic.BARRIER = Item(0x46);
    Magic.CHANGE = Item(0x47);
    Magic.FLIGHT = Item(0x48);
})(Magic || (Magic = {}));
export var WallType;
(function (WallType) {
    WallType[WallType["WIND"] = 0] = "WIND";
    WallType[WallType["FIRE"] = 1] = "FIRE";
    WallType[WallType["WATER"] = 2] = "WATER";
    WallType[WallType["THUNDER"] = 3] = "THUNDER";
})(WallType || (WallType = {}));
export class MutableRequirement {
    constructor() {
        this.map = new Map();
    }
    [Symbol.iterator]() {
        return this.map.values();
    }
    add(newLabel, newDeps) {
        for (const c of newDeps)
            if (Array.isArray(c))
                throw new Error();
        if (this.map.has(newLabel))
            return false;
        for (const [curLabel, curDeps] of this.map) {
            if (containsAll(newDeps, curDeps))
                return false;
            if (containsAll(curDeps, newDeps))
                this.map.delete(curLabel);
        }
        this.map.set(newLabel, newDeps);
        return true;
    }
    addAll(requirement) {
        for (const conditions of requirement) {
            this.addList(conditions);
        }
    }
    addList(conditions) {
        const sorted = [...new Set(conditions)].sort();
        const deps = new Set(sorted);
        this.add(sorted.join(' '), deps);
    }
    restrict(r) {
        const l = [...this.map.values()];
        this.map.clear();
        for (const ls of l) {
            for (const rs of r) {
                this.addList([...ls, ...rs]);
            }
        }
    }
    freeze() {
        return [...this].map(cs => [...cs]);
    }
}
const containsAll = (left, right) => {
    if (left.size < right.size)
        return false;
    for (const d of right) {
        if (!left.has(d))
            return false;
    }
    return true;
};
export function Condition(x) {
    return [[x]];
}
export function and(...cs) {
    return [[].concat(...cs.map((c) => c[0]))];
}
export function or(...cs) {
    return [].concat(...cs);
}
export function meet(left, right) {
    const out = new MutableRequirement();
    for (const ls of left) {
        for (const rs of right) {
            out.addList([...ls, ...rs]);
        }
    }
    return out.freeze();
}
const meetReq = meet;
(function (Condition) {
    Condition.OPEN = [[]];
})(Condition || (Condition = {}));
export function Slot(x) {
    if (typeof x === 'number')
        return x;
    return x[0][0];
}
(function (Slot) {
    function item(x) {
        return (x | 0x200);
    }
    Slot.item = item;
})(Slot || (Slot = {}));
export var Check;
(function (Check) {
    function chest(id) {
        return { slot: Slot(0x200 | id) };
    }
    Check.chest = chest;
})(Check || (Check = {}));
export var Terrain;
(function (Terrain) {
    Terrain.seamless = memoize((t) => ({ ...t }));
    function meet(left, right) {
        const out = {};
        if (left.enter || right.enter) {
            out.enter = meetReq(left.enter || [[]], right.enter || [[]]);
        }
        if (left.exit || right.exit) {
            out.exit = meetReq(left.exit || [[]], right.exit || [[]]);
        }
        if (left.exitSouth || right.exitSouth) {
            out.exitSouth = meetReq(left.exitSouth || [[]], right.exitSouth || [[]]);
        }
        return out;
    }
    Terrain.meet = meet;
    function join(left, right) {
        const out = {};
        if (left.enter || right.enter) {
            out.enter = (left.enter || [[]]).concat(right.enter || [[]]);
        }
        if (left.exit || right.exit) {
            out.exit = (left.exit || [[]]).concat(right.exit || [[]]);
        }
        if (left.exitSouth || right.exitSouth) {
            out.exitSouth = (left.exitSouth || [[]]).concat(right.exitSouth || [[]]);
        }
        return out;
    }
    Terrain.join = join;
    function flag(id) {
        return { enter: Condition(id) };
    }
    Terrain.flag = flag;
})(Terrain || (Terrain = {}));
export function memoize(f) {
    const map = new WeakMap();
    const undef = {};
    return (x) => {
        let y = map.get(x);
        if (y === undefined) {
            y = f(x);
            map.set(x, y === undefined ? undef : y);
        }
        else if (y === undef) {
            y = undefined;
        }
        return y;
    };
}
export function memoize2(f) {
    const map = new WeakMap();
    const undef = {};
    return (x, y) => {
        let ys = map.get(x);
        if (ys == undefined)
            map.set(x, ys = new WeakMap());
        let z = ys.get(y);
        if (z === undefined) {
            z = f(x, y);
            ys.set(y, z === undefined ? undef : z);
        }
        else if (z === undef) {
            z = undefined;
        }
        return z;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZGl0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL2dyYXBoL2NvbmRpdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLEtBQVcsS0FBSyxDQW1DckI7QUFuQ0QsV0FBaUIsS0FBSztJQUNQLHNCQUFnQixHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwQyxnQkFBVSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5Qix5QkFBbUIsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkMscUJBQWUsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkMsb0JBQWMsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEMsdUJBQWlCLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JDLHVCQUFpQixHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNyQyxvQkFBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxvQkFBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxxQkFBZSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxvQkFBYyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxlQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdCLGlCQUFXLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLG1CQUFhLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pDLGtCQUFZLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLGlCQUFXLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLGtCQUFZLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLGNBQVEsR0FBRyxT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QUFJLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsS0FBSyxTQUFTLEVBQUU7WUFDbkIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDWixFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3hDO2FBQU0sSUFBSSxDQUFDLEtBQUssS0FBSyxFQUFFO1lBQ3RCLENBQUMsR0FBRyxTQUFTLENBQUM7U0FDZjtRQUNELE9BQU8sQ0FBTSxDQUFDO0lBQ2hCLENBQUMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgbmFtZXNwYWNlIEV2ZW50IHtcbiAgZXhwb3J0IGNvbnN0IFNUQVJURURfV0lORE1JTEwgPSBDb25kaXRpb24oMHgwMGEpO1xuICBleHBvcnQgY29uc3QgTEVBRl9FTERFUiA9IENvbmRpdGlvbigweDAwYik7XG4gIGV4cG9ydCBjb25zdCBVTkRFUkdST1VORF9DSEFOTkVMID0gQ29uZGl0aW9uKDB4MDE4KTtcbiAgZXhwb3J0IGNvbnN0IE1FU0lBX1JFQ09SRElORyA9IENvbmRpdGlvbigweDAxYik7XG4gIGV4cG9ydCBjb25zdCBRVUVFTl9SRVZFQUxFRCA9IENvbmRpdGlvbigweDAxZSk7XG4gIGV4cG9ydCBjb25zdCBSRVRVUk5FRF9GT0dfTEFNUCA9IENvbmRpdGlvbigweDAyMSk7XG4gIGV4cG9ydCBjb25zdCBHRU5FUkFMU19ERUZFQVRFRCA9IENvbmRpdGlvbigweDAyNCk7XG4gIGV4cG9ydCBjb25zdCBIRUFMRURfRE9MUEhJTiA9IENvbmRpdGlvbigweDAyNSk7XG4gIGV4cG9ydCBjb25zdCBFTlRFUkVEX1NIWVJPTiA9IENvbmRpdGlvbigweDAyNik7XG4gIGV4cG9ydCBjb25zdCBTSFlST05fTUFTU0FDUkUgPSBDb25kaXRpb24oMHgwMjcpO1xuICBleHBvcnQgY29uc3QgTEVBRl9BQkRVQ1RJT04gPSBDb25kaXRpb24oMHgwMzgpO1xuICBleHBvcnQgY29uc3QgWkVCVV9DQVZFID0gQ29uZGl0aW9uKDB4MDNhKTtcbiAgZXhwb3J0IGNvbnN0IFpFQlVfU0hZUk9OID0gQ29uZGl0aW9uKDB4MDNiKTtcbiAgZXhwb3J0IGNvbnN0IFJFU0NVRURfQ0hJTEQgPSBDb25kaXRpb24oMHgwNDUpO1xuICBleHBvcnQgY29uc3QgRFdBUkZfTU9USEVSID0gQ29uZGl0aW9uKDB4MDUyKTsgLy8gdGFsa2VkIHRvIHcvIHRlbGVwYXRoeVxuICBleHBvcnQgY29uc3QgRFdBUkZfQ0hJTEQgPSBDb25kaXRpb24oMHgwNTMpOyAvLyBmb2xsb3dpbmdcbiAgZXhwb3J0IGNvbnN0IFNUT01fSU5fU1dBTiA9IENvbmRpdGlvbigweDA2MSk7XG4gIGV4cG9ydCBjb25zdCBEUkFZR09OMSA9IENvbmRpdGlvbigweDA2Yyk7XG4gIGV4cG9ydCBjb25zdCBGT1VORF9LRU5TVSA9IENvbmRpdGlvbigweDA3Mik7XG4gIGV4cG9ydCBjb25zdCBTSEVMTF9GTFVURSA9IENvbmRpdGlvbigweDA4Yik7IC8vIHVzZWQgZm9yIG5vbi1zbG90IGRpYWxvZyB+IGZpc2hlcm1hblxuICBleHBvcnQgY29uc3QgUklERV9ET0xQSElOID0gQ29uZGl0aW9uKDB4MDliKTtcbiAgZXhwb3J0IGNvbnN0IFpFQlVfU1RVREVOVCA9IENvbmRpdGlvbigweDBhNSk7XG4gIGV4cG9ydCBjb25zdCBMRUFGX1JBQkJJVCA9IENvbmRpdGlvbigweDBhOSk7XG4gIGV4cG9ydCBjb25zdCBDQUxNRURfU0VBID0gQ29uZGl0aW9uKDB4MjgzKTtcbiAgZXhwb3J0IGNvbnN0IE9QRU5FRF9KT0VMX1NIRUQgPSBDb25kaXRpb24oMHgyODcpO1xuICBleHBvcnQgY29uc3QgT1BFTkVEX0NSWVBUID0gQ29uZGl0aW9uKDB4MjhlKTtcbiAgZXhwb3J0IGNvbnN0IE9QRU5FRF9TVFlYID0gQ29uZGl0aW9uKDB4MmIwKTtcbiAgZXhwb3J0IGNvbnN0IE9QRU5FRF9TV0FOID0gQ29uZGl0aW9uKDB4MmIzKTtcbiAgZXhwb3J0IGNvbnN0IE9QRU5FRF9QUklTT04gPSBDb25kaXRpb24oMHgyZDgpO1xuICBleHBvcnQgY29uc3QgT1BFTkVEX1NFQUxFRF9DQVZFID0gQ29uZGl0aW9uKDB4MmVlKTtcbiAgZXhwb3J0IGNvbnN0IFdBUlBfT0FLID0gQ29uZGl0aW9uKDB4MmY3KTtcbiAgZXhwb3J0IGNvbnN0IFdBUlBfSk9FTCA9IENvbmRpdGlvbigweDJmYik7XG4gIC8vIGV4cG9ydCBjb25zdCBXQVJQX1NIWVJPTiA9IENvbmRpdGlvbigweDJmZCk7XG4gIC8vIGV4cG9ydCBjb25zdCBXQVJQX1NBSEFSQSA9IENvbmRpdGlvbigweDJmZik7XG59XG5cbi8vIE5PVEU6IHRoZXNlIGl0ZW1zIGFuZCBjYXBhYmlsaXRpZXMgYXJlIG9uZXMgY29tcGxlbWVudHMsIG5vdCBuZWdhdGl2ZXNcbmV4cG9ydCB0eXBlIENhcGFiaWxpdHkgPSByZWFkb25seSBbcmVhZG9ubHkgW0NvbmRpdGlvbl1dO1xuZXhwb3J0IG5hbWVzcGFjZSBDYXBhYmlsaXR5IHtcbiAgZXhwb3J0IGNvbnN0IFNXT1JEID0gQ29uZGl0aW9uKH4wKTtcbiAgZXhwb3J0IGNvbnN0IE1PTkVZID0gQ29uZGl0aW9uKH4xKTtcbiAgZXhwb3J0IGNvbnN0IEJSRUFLX1NUT05FID0gQ29uZGl0aW9uKH4yKTtcbiAgZXhwb3J0IGNvbnN0IEJSRUFLX0lDRSA9IENvbmRpdGlvbih+Myk7XG4gIGV4cG9ydCBjb25zdCBGT1JNX0JSSURHRSA9IENvbmRpdGlvbih+NCk7XG4gIGV4cG9ydCBjb25zdCBCUkVBS19JUk9OID0gQ29uZGl0aW9uKH41KTtcbiAgZXhwb3J0IGNvbnN0IFRSQVZFTF9TV0FNUCA9IENvbmRpdGlvbih+Nik7XG4gIGV4cG9ydCBjb25zdCBDTElNQl9XQVRFUkZBTEwgPSBDb25kaXRpb24ofjcpO1xuICBleHBvcnQgY29uc3QgQlVZX0hFQUxJTkcgPSBDb25kaXRpb24ofjgpO1xuICBleHBvcnQgY29uc3QgQlVZX1dBUlAgPSBDb25kaXRpb24ofjkpO1xuICBleHBvcnQgY29uc3QgU0hPT1RJTkdfU1RBVFVFID0gQ29uZGl0aW9uKH4xMCk7XG4gIGV4cG9ydCBjb25zdCBDTElNQl9TTE9QRSA9IENvbmRpdGlvbih+MTEpO1xufVxuXG4vLyBUaGVzZSBpbmRpY2F0ZSB0aGUgYm9zcyBpcyBhY3R1YWxseSBkZWZlYXRlZC5cbmV4cG9ydCB0eXBlIEJvc3MgPSByZWFkb25seSBbcmVhZG9ubHkgW0NvbmRpdGlvbl1dO1xuZXhwb3J0IGZ1bmN0aW9uIEJvc3MoaWQ6IG51bWJlcik6IEJvc3Mge1xuICByZXR1cm4gQ29uZGl0aW9uKDB4MTAwIHwgaWQpO1xufVxuZXhwb3J0IG5hbWVzcGFjZSBCb3NzIHtcbiAgZXhwb3J0IGNvbnN0IFZBTVBJUkUxID0gQm9zcygweDApO1xuICBleHBvcnQgY29uc3QgSU5TRUNUID0gQm9zcygweDEpO1xuICBleHBvcnQgY29uc3QgS0VMQkVTUVVFMSA9IEJvc3MoMHgyKTtcbiAgZXhwb3J0IGNvbnN0IFJBR0UgPSBCb3NzKDB4Myk7XG4gIGV4cG9ydCBjb25zdCBTQUJFUkExID0gQm9zcygweDQpO1xuICBleHBvcnQgY29uc3QgTUFETzEgPSBCb3NzKDB4NSk7XG4gIGV4cG9ydCBjb25zdCBLRUxCRVNRVUUyID0gQm9zcygweDYpO1xuICBleHBvcnQgY29uc3QgU0FCRVJBMiA9IEJvc3MoMHg3KTtcbiAgZXhwb3J0IGNvbnN0IE1BRE8yID0gQm9zcygweDgpO1xuICBleHBvcnQgY29uc3QgS0FSTUlORSA9IEJvc3MoMHg5KTtcbiAgZXhwb3J0IGNvbnN0IERSQVlHT04xID0gQm9zcygweGEpO1xuICBleHBvcnQgY29uc3QgRFJBWUdPTjIgPSBCb3NzKDB4Yik7XG4gIGV4cG9ydCBjb25zdCBWQU1QSVJFMiA9IEJvc3MoMHhjKTtcbn1cblxuZXhwb3J0IHR5cGUgSXRlbSA9IHJlYWRvbmx5IFtyZWFkb25seSBbQ29uZGl0aW9uXV07XG5leHBvcnQgZnVuY3Rpb24gSXRlbShpZDogbnVtYmVyKTogSXRlbSB7XG4gIGlmIChpZCA+PSAweDcwKSB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkIGl0ZW06ICR7aWQudG9TdHJpbmcoMTYpfWApO1xuICByZXR1cm4gQ29uZGl0aW9uKDB4MjAwIHwgaWQpO1xufVxuZXhwb3J0IG5hbWVzcGFjZSBJdGVtIHtcbiAgZXhwb3J0IGNvbnN0IFNXT1JEX09GX1dJTkQgPSBJdGVtKDB4MDApO1xuICBleHBvcnQgY29uc3QgU1dPUkRfT0ZfRklSRSA9IEl0ZW0oMHgwMSk7XG4gIGV4cG9ydCBjb25zdCBTV09SRF9PRl9XQVRFUiA9IEl0ZW0oMHgwMik7XG4gIGV4cG9ydCBjb25zdCBTV09SRF9PRl9USFVOREVSID0gSXRlbSgweDAzKTtcbiAgZXhwb3J0IGNvbnN0IENSWVNUQUxJUyA9IEl0ZW0oMHgwNCk7XG4gIGV4cG9ydCBjb25zdCBPUkJfT0ZfV0lORCA9IEl0ZW0oMHgwNSk7XG4gIGV4cG9ydCBjb25zdCBUT1JOQURPX0JSQUNFTEVUID0gSXRlbSgweDA2KTtcbiAgZXhwb3J0IGNvbnN0IE9SQl9PRl9GSVJFID0gSXRlbSgweDA3KTtcbiAgZXhwb3J0IGNvbnN0IEZMQU1FX0JSQUNFTEVUID0gSXRlbSgweDA4KTtcbiAgZXhwb3J0IGNvbnN0IE9SQl9PRl9XQVRFUiA9IEl0ZW0oMHgwOSk7XG4gIGV4cG9ydCBjb25zdCBCTElaWkFSRF9CUkFDRUxFVCA9IEl0ZW0oMHgwYSk7XG4gIGV4cG9ydCBjb25zdCBPUkJfT0ZfVEhVTkRFUiA9IEl0ZW0oMHgwYik7XG4gIGV4cG9ydCBjb25zdCBTVE9STV9CUkFDRUxFVCA9IEl0ZW0oMHgwYyk7XG5cbiAgZXhwb3J0IGNvbnN0IE1FRElDQUxfSEVSQiA9IEl0ZW0oMHgxZCk7XG4gIGV4cG9ydCBjb25zdCBXQVJQX0JPT1RTID0gSXRlbSgweDI0KTtcblxuICBleHBvcnQgY29uc3QgU1RBVFVFX09GX09OWVggPSBJdGVtKDB4MjUpO1xuICBleHBvcnQgY29uc3QgSU5TRUNUX0ZMVVRFID0gSXRlbSgweDI3KTtcbiAgZXhwb3J0IGNvbnN0IEZMVVRFX09GX0xJTUUgPSBJdGVtKDB4MjgpO1xuICBleHBvcnQgY29uc3QgR0FTX01BU0sgPSBJdGVtKDB4MjkpO1xuICBleHBvcnQgY29uc3QgUE9XRVJfUklORyA9IEl0ZW0oMHgyYSk7XG4gIGV4cG9ydCBjb25zdCBXQVJSSU9SX1JJTkcgPSBJdGVtKDB4MmIpO1xuICBleHBvcnQgY29uc3QgSVJPTl9ORUNLTEFDRSA9IEl0ZW0oMHgyYyk7XG4gIGV4cG9ydCBjb25zdCBERU9TX1BFTkRBTlQgPSBJdGVtKDB4MmQpO1xuICBleHBvcnQgY29uc3QgUkFCQklUX0JPT1RTID0gSXRlbSgweDJlKTtcbiAgZXhwb3J0IGNvbnN0IExFQVRIRVJfQk9PVFMgPSBJdGVtKDB4MmYpO1xuICBleHBvcnQgY29uc3QgU0hJRUxEX1JJTkcgPSBJdGVtKDB4MzApO1xuICBleHBvcnQgY29uc3QgQUxBUk1fRkxVVEUgPSBJdGVtKDB4MzEpO1xuICBleHBvcnQgY29uc3QgV0lORE1JTExfS0VZID0gSXRlbSgweDMyKTtcbiAgZXhwb3J0IGNvbnN0IEtFWV9UT19QUklTT04gPSBJdGVtKDB4MzMpO1xuICBleHBvcnQgY29uc3QgS0VZX1RPX1NUWVggPSBJdGVtKDB4MzQpO1xuICBleHBvcnQgY29uc3QgRk9HX0xBTVAgPSBJdGVtKDB4MzUpO1xuICBleHBvcnQgY29uc3QgU0hFTExfRkxVVEUgPSBJdGVtKDB4MzYpO1xuICBleHBvcnQgY29uc3QgRVlFX0dMQVNTRVMgPSBJdGVtKDB4MzcpO1xuICBleHBvcnQgY29uc3QgQlJPS0VOX1NUQVRVRSA9IEl0ZW0oMHgzOCk7XG4gIGV4cG9ydCBjb25zdCBHTE9XSU5HX0xBTVAgPSBJdGVtKDB4MzkpO1xuICAvLyBUT0RPIC0gY29uc2lkZXIgbWFraW5nIHRoaXMgYW4gYWN0dWFsIGl0ZW0uXG4gIGV4cG9ydCBjb25zdCBTVEFUVUVfT0ZfR09MRCA9IGFuZChJdGVtLkJST0tFTl9TVEFUVUUsIEl0ZW0uR0xPV0lOR19MQU1QKTtcbiAgZXhwb3J0IGNvbnN0IExPVkVfUEVOREFOVCA9IEl0ZW0oMHgzYik7XG4gIGV4cG9ydCBjb25zdCBLSVJJU0FfUExBTlQgPSBJdGVtKDB4M2MpO1xuICBleHBvcnQgY29uc3QgSVZPUllfU1RBVFVFID0gSXRlbSgweDNkKTtcbiAgZXhwb3J0IGNvbnN0IEJPV19PRl9NT09OID0gSXRlbSgweDNlKTtcbiAgZXhwb3J0IGNvbnN0IEJPV19PRl9TVU4gPSBJdGVtKDB4M2YpO1xuICBleHBvcnQgY29uc3QgQk9XX09GX1RSVVRIID0gSXRlbSgweDQwKTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNYWdpYyB7XG4gIGV4cG9ydCBjb25zdCBSRUZSRVNIID0gSXRlbSgweDQxKTtcbiAgZXhwb3J0IGNvbnN0IFBBUkFMWVNJUyA9IEl0ZW0oMHg0Mik7XG4gIGV4cG9ydCBjb25zdCBURUxFUEFUSFkgPSBJdGVtKDB4NDMpO1xuICBleHBvcnQgY29uc3QgVEVMRVBPUlQgPSBJdGVtKDB4NDQpO1xuICBleHBvcnQgY29uc3QgUkVDT1ZFUiA9IEl0ZW0oMHg0NSk7XG4gIGV4cG9ydCBjb25zdCBCQVJSSUVSID0gSXRlbSgweDQ2KTtcbiAgZXhwb3J0IGNvbnN0IENIQU5HRSA9IEl0ZW0oMHg0Nyk7XG4gIGV4cG9ydCBjb25zdCBGTElHSFQgPSBJdGVtKDB4NDgpO1xufVxuXG4vLyBleHBvcnQgZnVuY3Rpb24gc3RhdHVlKC4uLnJlcXM6IFJlcXVpcmVtZW50W10pOiBUZXJyYWluIHtcbi8vICAgcmV0dXJuIHtleGl0OiBvciguLi5yZXFzLCBDYXBhYmlsaXR5LlNUQVRVRV9HTElUQ0gpfTtcbi8vIH07XG5cbi8vIE5ld3R5cGVzIGZvciBkaWZmZXJlbnQgbnVtYmVyIHB1cnBvc2VzXG5cbmV4cG9ydCBlbnVtIFdhbGxUeXBlIHtcbiAgV0lORCA9IDAsXG4gIEZJUkUgPSAxLFxuICBXQVRFUiA9IDIsXG4gIFRIVU5ERVIgPSAzLFxufVxuXG4vLyBDbGFzcyBmb3Iga2VlcGluZyB0cmFjayBvZiBhIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIGV4cHJlc3Npb25cbmV4cG9ydCBjbGFzcyBNdXRhYmxlUmVxdWlyZW1lbnQge1xuICBwcml2YXRlIHJlYWRvbmx5IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8Q29uZGl0aW9uPj4oKTtcblxuICBbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYXRvcjxJdGVyYWJsZTxDb25kaXRpb24+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFwLnZhbHVlcygpO1xuICB9XG5cbiAgYWRkKG5ld0xhYmVsOiBzdHJpbmcsIG5ld0RlcHM6IFNldDxDb25kaXRpb24+KTogYm9vbGVhbiB7XG4gICAgZm9yIChjb25zdCBjIG9mIG5ld0RlcHMpIGlmIChBcnJheS5pc0FycmF5KGMpKSB0aHJvdyBuZXcgRXJyb3IoKTtcblxuICAgIGlmICh0aGlzLm1hcC5oYXMobmV3TGFiZWwpKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChjb25zdCBbY3VyTGFiZWwsIGN1ckRlcHNdIG9mIHRoaXMubWFwKSB7XG4gICAgICBpZiAoY29udGFpbnNBbGwobmV3RGVwcywgY3VyRGVwcykpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChjb250YWluc0FsbChjdXJEZXBzLCBuZXdEZXBzKSkgdGhpcy5tYXAuZGVsZXRlKGN1ckxhYmVsKTtcbiAgICB9XG4gICAgdGhpcy5tYXAuc2V0KG5ld0xhYmVsLCBuZXdEZXBzKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGFkZEFsbChyZXF1aXJlbWVudDogUmVxdWlyZW1lbnQpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbnMgb2YgcmVxdWlyZW1lbnQpIHtcbiAgICAgIHRoaXMuYWRkTGlzdChjb25kaXRpb25zKTtcbiAgICB9XG4gIH1cblxuICBhZGRMaXN0KGNvbmRpdGlvbnM6IHJlYWRvbmx5IENvbmRpdGlvbltdKTogdm9pZCB7XG4gICAgY29uc3Qgc29ydGVkID0gWy4uLm5ldyBTZXQoY29uZGl0aW9ucyldLnNvcnQoKTtcbiAgICBjb25zdCBkZXBzID0gbmV3IFNldChzb3J0ZWQpO1xuICAgIHRoaXMuYWRkKHNvcnRlZC5qb2luKCcgJyksIGRlcHMpO1xuICB9XG5cbiAgLyoqIEFwcGVuZHMgdGhlIGdpdmVuIHJlcXVpcmVtZW50IHRvIGFsbCByb3V0ZXMuICovXG4gIHJlc3RyaWN0KHI6IFJlcXVpcmVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgbCA9IFsuLi50aGlzLm1hcC52YWx1ZXMoKV07XG4gICAgdGhpcy5tYXAuY2xlYXIoKTtcbiAgICBmb3IgKGNvbnN0IGxzIG9mIGwpIHtcbiAgICAgIGZvciAoY29uc3QgcnMgb2Ygcikge1xuICAgICAgICB0aGlzLmFkZExpc3QoWy4uLmxzLCAuLi5yc10pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZyZWV6ZSgpOiBSZXF1aXJlbWVudCB7XG4gICAgcmV0dXJuIFsuLi50aGlzXS5tYXAoY3MgPT4gWy4uLmNzXSk7XG4gIH1cbn1cblxuY29uc3QgY29udGFpbnNBbGwgPSA8VD4obGVmdDogU2V0PFQ+LCByaWdodDogU2V0PFQ+KTogYm9vbGVhbiA9PiB7XG4gIGlmIChsZWZ0LnNpemUgPCByaWdodC5zaXplKSByZXR1cm4gZmFsc2U7XG4gIGZvciAoY29uc3QgZCBvZiByaWdodCkge1xuICAgIGlmICghbGVmdC5oYXMoZCkpIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8vIEZsYWcsIGl0ZW0sIG9yIGNvbmRpdGlvbi5cbmV4cG9ydCB0eXBlIENvbmRpdGlvbiA9IG51bWJlciAmIHtfX2NvbmRpdGlvbl9fOiBuZXZlcn07XG5cbmV4cG9ydCBmdW5jdGlvbiBDb25kaXRpb24oeDogbnVtYmVyKTogcmVhZG9ubHkgW3JlYWRvbmx5IFtDb25kaXRpb25dXSB7XG4gIHJldHVybiBbW3ggYXMgQ29uZGl0aW9uXV07XG59XG5leHBvcnQgZnVuY3Rpb24gYW5kKC4uLmNzOiAocmVhZG9ubHkgW3JlYWRvbmx5IENvbmRpdGlvbltdXSlbXSk6IFJlcXVpcmVtZW50IHtcbiAgLy8gVE9ETyAtIHRoaXMgd2FzIGEgZGVzdHJ1Y3R1cmluZyBmdW5jdGlvbiAoW2NdKSA9PiBjIGJ1dCBDbG9zdXJlIGlzIGRlc3Ryb3lpbmdcbiAgLy8gaXQgaW50byAoYykgPT4gW2NdID0gYy5cbiAgLy9yZXR1cm4gWyhbXSBhcyBDb25kaXRpb25bXSkuY29uY2F0KC4uLmNzLm1hcCgoW2NdKSA9PiBjKSldO1xuICByZXR1cm4gWyhbXSBhcyBDb25kaXRpb25bXSkuY29uY2F0KC4uLmNzLm1hcCgoYykgPT4gY1swXSkpXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBvciguLi5jczogUmVxdWlyZW1lbnRbXSk6IFJlcXVpcmVtZW50IHtcbiAgcmV0dXJuIChbXSBhcyBSZXF1aXJlbWVudCkuY29uY2F0KC4uLmNzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZWV0KGxlZnQ6IFJlcXVpcmVtZW50LCByaWdodDogUmVxdWlyZW1lbnQpOiBSZXF1aXJlbWVudCB7XG4gIGNvbnN0IG91dCA9IG5ldyBNdXRhYmxlUmVxdWlyZW1lbnQoKTtcbiAgZm9yIChjb25zdCBscyBvZiBsZWZ0KSB7XG4gICAgZm9yIChjb25zdCBycyBvZiByaWdodCkge1xuICAgICAgb3V0LmFkZExpc3QoWy4uLmxzLCAuLi5yc10pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0LmZyZWV6ZSgpO1xufVxuXG4vLyBhbGlhcyBmb3IgdXNlIGluIFRlcnJhaW4ubWVldFxuY29uc3QgbWVldFJlcSA9IG1lZXQ7XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29uZGl0aW9uIHtcbiAgZXhwb3J0IGNvbnN0IE9QRU46IFJlcXVpcmVtZW50ID0gW1tdXTtcbn1cblxuLy8gQW4gaW1tdXRhYmxlIERORiBleHByZXNzaW9uLiAgQWxsIGV4cG9ydGVkIGNvbnN0YW50cyBhcmUgaW4gdGhpcyBmb3JtLlxuZXhwb3J0IHR5cGUgUmVxdWlyZW1lbnQgPSByZWFkb25seSAocmVhZG9ubHkgQ29uZGl0aW9uW10pW107XG5cbi8vIFNsb3QgZm9yIGFuIGl0ZW0gb3IgZmxhZyB0byBnZXQuICBBbG1vc3QgdGhlIHNhbWUgdGhpbmcgYXMgYSBzaW5nbGVcbi8vIGNvbmRpdGlvbiwgYnV0IHVzZWQgaW4gZGlmZmVyZW50IGNvbnRleHRzLlxuZXhwb3J0IHR5cGUgU2xvdCA9IG51bWJlciAmIHtfX3Nsb3RfXzogbmV2ZXJ9O1xuXG5leHBvcnQgZnVuY3Rpb24gU2xvdCh4OiBudW1iZXIgfCByZWFkb25seSBbcmVhZG9ubHkgW0NvbmRpdGlvbl1dKTogU2xvdCB7XG4gIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHJldHVybiB4IGFzIFNsb3Q7XG4gIHJldHVybiB4WzBdWzBdIGFzIGFueTtcbn1cbmV4cG9ydCBuYW1lc3BhY2UgU2xvdCB7XG4gIGV4cG9ydCBmdW5jdGlvbiBpdGVtKHg6IG51bWJlcik6IFNsb3Qge1xuICAgIHJldHVybiAoeCB8IDB4MjAwKSBhcyBTbG90O1xuICB9XG4gIC8vIGV4cG9ydCBmdW5jdGlvbiBib3NzKHg6IG51bWJlcik6IFNsb3Qge1xuICAvLyAgIHJldHVybiAofih4IHwgMHgxMDApKSBhcyBTbG90O1xuICAvLyB9XG59XG5cblxuLy8gTWV0YWRhdGEgYWJvdXQgZ2V0dGluZyBzbG90cy5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hlY2sge1xuICBjb25kaXRpb24/OiBSZXF1aXJlbWVudDtcbiAgc2xvdDogU2xvdDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGVjayB7XG4gIGV4cG9ydCBmdW5jdGlvbiBjaGVzdChpZDogbnVtYmVyKTogQ2hlY2sge1xuICAgIHJldHVybiB7c2xvdDogU2xvdCgweDIwMCB8IGlkKX07XG4gIH1cbn1cblxuXG5leHBvcnQgaW50ZXJmYWNlIFRlcnJhaW4ge1xuICAvLyBSZXF1aXJlbWVudCB0byBlbnRlciB0aWxlLCBkZWZhdWx0cyB0byBPUEVOXG4gIGVudGVyPzogUmVxdWlyZW1lbnQ7XG4gIC8vIFJlcXVpcmVtZW50IHRvIGV4aXQgYW55IGRpcmVjdGlvbiBvdGhlciB0aGFuIHNvdXRoXG4gIGV4aXQ/OiBSZXF1aXJlbWVudDtcbiAgLy8gUmVxdWlyZW1lbnQgdG8gZXhpdCBzb3V0aFxuICBleGl0U291dGg/OiBSZXF1aXJlbWVudDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBUZXJyYWluIHtcbiAgLy8gUG9zaXRpdmUgbnVtYmVycyByZXByZXNlbnQgZmxhZ3MsIGl0ZW1zLCBldGMuXG4gIC8vIC8vIE5lZ2F0aXZlIG51bWJlcnMgcmVwcmVzZW50IGNvbXBvc2l0ZSBjb25kaXRpb25zLlxuICAvLyBleHBvcnQgY29uc3QgQ1JPU1NfUklWRVJTID0gLTE7XG4gIC8vIGV4cG9ydCBjb25zdCBDUk9TU19TRUEgPSAtMjtcblxuICAvLyBUT0RPIC0gaG93IHRvIGhhbmRsZSBkb2xwaGluPyE/XG4gIC8vICAgLS0gaXQncyBwb3NzaWJsZSB3ZSBjb3VsZCBoYXJkLWNvZGUgdGhhdCBhbnl0aGluZyBjb25uZWN0ZWRcbiAgLy8gICAgICB0byBhbmdyeSBzZWEgaXMgZW50ZXJhYmxlIHcvIGRvbHBoaW4gYXMgd2VsbD9cbiAgLy8gICAtLSByZXF1aXJlcyBsYW5kIGJyaWRnZSBpbiB1bmRlcmdyb3VuZCBjaGFubmVsLi4uXG4gIC8vICAgICAgLSBjb3VsZCBhbHNvIGp1c3QgdXNlIHN1bW1vbiBwb2ludHM/XG4gIC8vIFdoYXQgYWJvdXQgZmxhZ3Mgb3ZlciB3YXRlciAtIG5vdCBpbXBhc3NhYmxlPyBzaG91bGRuJ3QgbWF0dGVyP1xuXG4gIC8qKiBNYWtlcyBhIHNpbmdsZSBleHRyYSBjb3B5IG9mIGEgdGVycmFpbiBmb3Igc2VhbWxlc3MgZXhpdHMuICovXG4gIC8vIFNlYW1sZXNzIGV4aXRzOiBzYW1lIGVmZmVjdCBhcyBPUEVOIGJ1dCBhIGRpZmZlcmVudCBvYmplY3Qgc28gaXRcbiAgLy8gZG9lc24ndCBnZXQgdW5pb25lZCB0b2dldGhlci4gIFRoaXMgd2F5IHdlIGNhbiBkaXN0aW5ndWlzaCB0aGVcbiAgLy8gZXhpdHMgY2xlYXJseS5cbiAgZXhwb3J0IGNvbnN0IHNlYW1sZXNzID0gbWVtb2l6ZSgodDogVGVycmFpbik6IFRlcnJhaW4gPT4gKHsuLi50fSkpO1xuXG4gIC8vIGV4cG9ydCBmdW5jdGlvbiBmbGFnKGlkOiBudW1iZXIsIGZsaWdodD86IGJvb2xlYW4pIHtcbiAgLy8gICByZXR1cm4ge2VudGVyOiBmbGlnaHQgPyBbW2lkXSwgW34weDI0OF1dIDogW1tpZF1dfTtcbiAgLy8gfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBtZWV0KGxlZnQ6IFRlcnJhaW4sIHJpZ2h0OiBUZXJyYWluKTogVGVycmFpbiB7XG4gICAgY29uc3Qgb3V0OiBUZXJyYWluID0ge307XG4gICAgaWYgKGxlZnQuZW50ZXIgfHwgcmlnaHQuZW50ZXIpIHtcbiAgICAgIG91dC5lbnRlciA9IG1lZXRSZXEobGVmdC5lbnRlciB8fCBbW11dLCByaWdodC5lbnRlciB8fCBbW11dKTtcbiAgICB9XG4gICAgaWYgKGxlZnQuZXhpdCB8fCByaWdodC5leGl0KSB7XG4gICAgICBvdXQuZXhpdCA9IG1lZXRSZXEobGVmdC5leGl0IHx8IFtbXV0sIHJpZ2h0LmV4aXQgfHwgW1tdXSk7XG4gICAgfVxuICAgIGlmIChsZWZ0LmV4aXRTb3V0aCB8fCByaWdodC5leGl0U291dGgpIHtcbiAgICAgIG91dC5leGl0U291dGggPSBtZWV0UmVxKGxlZnQuZXhpdFNvdXRoIHx8IFtbXV0sIHJpZ2h0LmV4aXRTb3V0aCB8fCBbW11dKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBqb2luKGxlZnQ6IFRlcnJhaW4sIHJpZ2h0OiBUZXJyYWluKTogVGVycmFpbiB7XG4gICAgY29uc3Qgb3V0OiBUZXJyYWluID0ge307XG4gICAgaWYgKGxlZnQuZW50ZXIgfHwgcmlnaHQuZW50ZXIpIHtcbiAgICAgIG91dC5lbnRlciA9IChsZWZ0LmVudGVyIHx8IFtbXV0pLmNvbmNhdChyaWdodC5lbnRlciB8fCBbW11dKTtcbiAgICB9XG4gICAgaWYgKGxlZnQuZXhpdCB8fCByaWdodC5leGl0KSB7XG4gICAgICBvdXQuZXhpdCA9IChsZWZ0LmV4aXQgfHwgW1tdXSkuY29uY2F0KHJpZ2h0LmV4aXQgfHwgW1tdXSk7XG4gICAgfVxuICAgIGlmIChsZWZ0LmV4aXRTb3V0aCB8fCByaWdodC5leGl0U291dGgpIHtcbiAgICAgIG91dC5leGl0U291dGggPSAobGVmdC5leGl0U291dGggfHwgW1tdXSkuY29uY2F0KHJpZ2h0LmV4aXRTb3V0aCB8fCBbW11dKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBmbGFnKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4ge2VudGVyOiBDb25kaXRpb24oaWQpfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVtb2l6ZTxUIGV4dGVuZHMgb2JqZWN0LCBVPihmOiAoeDogVCkgPT4gVSk6ICh4OiBUKSA9PiBVIHtcbiAgY29uc3QgbWFwID0gbmV3IFdlYWtNYXA8VCwgVT4oKTtcbiAgY29uc3QgdW5kZWYgPSB7fSBhcyBVO1xuICByZXR1cm4gKHg6IFQpOiBVID0+IHtcbiAgICBsZXQgeSA9IG1hcC5nZXQoeCk7XG4gICAgaWYgKHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgeSA9IGYoeCk7XG4gICAgICBtYXAuc2V0KHgsIHkgPT09IHVuZGVmaW5lZCA/IHVuZGVmIDogeSk7XG4gICAgfSBlbHNlIGlmICh5ID09PSB1bmRlZikge1xuICAgICAgeSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHkgYXMgVTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemUyPFQgZXh0ZW5kcyBvYmplY3QsIFUgZXh0ZW5kcyBvYmplY3QsIFY+KFxuICAgIGY6ICh4OiBULCB5OiBVKSA9PiBWKTogKHg6IFQsIHk6IFUpID0+IFYge1xuICBjb25zdCBtYXAgPSBuZXcgV2Vha01hcDxULCBXZWFrTWFwPFUsIFY+PigpO1xuICBjb25zdCB1bmRlZjogViA9IHt9IGFzIFY7XG4gIHJldHVybiAoeDogVCwgeTogVSk6IFYgPT4ge1xuICAgIGxldCB5cyA9IG1hcC5nZXQoeCk7XG4gICAgaWYgKHlzID09IHVuZGVmaW5lZCkgbWFwLnNldCh4LCB5cyA9IG5ldyBXZWFrTWFwKCkpO1xuICAgIGxldCB6ID0geXMuZ2V0KHkpO1xuICAgIGlmICh6ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHogPSBmKHgsIHkpO1xuICAgICAgeXMuc2V0KHksIHogPT09IHVuZGVmaW5lZCA/IHVuZGVmIDogeik7XG4gICAgfSBlbHNlIGlmICh6ID09PSB1bmRlZikge1xuICAgICAgeiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHogYXMgVjtcbiAgfTtcbn1cbiJdfQ==