import { Spawn } from '../rom/location.js';
import { MessageId } from '../rom/messageid.js';
import { GlobalDialog, LocalDialog } from '../rom/npc.js';
import { ShopType } from '../rom/shop.js';
import { hex } from '../rom/util.js';
import { assert } from '../util.js';
import { Monster } from '../rom/monster.js';
import { Patterns } from '../rom/pattern.js';
const [] = [hex];
function write(arr, start, ...data) {
    for (let i = 0; i < data.length; i++) {
        arr[start + i] = data[i];
    }
}
export function deterministicPreParse(prg) {
    prg[0x1a594] = 0xff;
    prg[0x1cdc5] = 0xa8;
    prg[0x1a176] = 0xff;
    prg[0x1a84c] = 0xff;
    prg[0x1d843] = 0xa0;
    prg[0x1e06b] &= 7;
    prg[0x1e06f] &= 7;
    prg[0x1e073] &= 7;
    prg[0x1e077] &= 7;
    prg[0x1e07b] &= 7;
    prg[0x1e084] &= 7;
    prg[0x1e09b] &= 7;
    prg[0x1e0b9] &= 7;
    prg[0x1e105] = 0x2f;
    prg[0x1e277] = 0x00;
    prg[0x1e366] = 0x40;
    prg[0x1e371] = 0x00;
    prg[0x1e387] = 0x00;
    prg[0x1e391] = 0x00;
    write(prg, 0x1a168, 0x33, 0x33);
    write(prg, 0x1a48e, 0x33, 0x33);
    prg[0x19bb1] = 0x70;
    prg[0x19bb5] = 0x71;
    prg[0x19a77] = 0x72;
    prg[0x19deb] = 0x73;
    prg[0x1a045] = 0x74;
    prg[0x1a0e1] = 0x75;
    prg[0x1a0e5] = 0x76;
    prg[0x1a0e9] = 0x77;
    prg[0x1a605] = 0x78;
    prg[0x1a3c1] = 0x79;
    prg[0x1a3c5] = 0x7a;
    prg[0x1a3c9] = 0x7b;
    write(prg, 0x1e0b7, 0xc0, 0x00);
    write(prg, 0x1e32a, 0xc0, 0x00);
    write(prg, 0x1e330, 0xc0, 0x00);
    write(prg, 0x1e336, 0xc0, 0x00);
    write(prg, 0x1e0e0, 0xc0, 0x00);
    write(prg, 0x1e0e6, 0xc0, 0x00);
    prg[0x1c803] = 0x00;
    write(prg, 0x1c80d, 0xa2, 0xb3);
    prg[0x1aa86] = 0xfe;
    write(prg, 0x3d6d5, 0x25, 0x29, 0x39, 0x3a, 0x3b, 0x47, 0x3c, 0x3e, 0x84, 0x46, 0xb2, 0x42, 0xb4, 0x41, 0xff);
    for (const addr of [0x38757, 0x38777, 0x3877b, 0x38797, 0x3879b,
        0x387db, 0x387df, 0x387fb, 0x387ff, 0x3881b, 0x3881f,
        0x38865, 0x38885, 0x38889, 0x388a5]) {
        prg[addr] |= 1;
    }
}
export function deterministic(rom, flags) {
    addZombieWarp(rom);
    removeWarpTriggers(rom);
    consolidateItemGrants(rom);
    addMezameTrigger(rom);
    normalizeSwords(rom, flags);
    fixFlyableWalls(rom);
    fixMonsterTerrain(rom);
    fixCrystalis(rom);
    fixOpelStatue(rom);
    fixCoinSprites(rom);
    fixChests(rom);
    preventBossSoftlocks(rom);
    makeBraceletsProgressive(rom);
    adjustGoaFortressTriggers(rom);
    preventNpcDespawns(rom, flags);
    leafElderInSabreHeals(rom);
    if (flags.requireHealedDolphinToRide())
        requireHealedDolphin(rom);
    if (flags.saharaRabbitsRequireTelepathy())
        requireTelepathyForDeo(rom);
    adjustItemNames(rom, flags);
    alarmFluteIsKeyItem(rom, flags);
    brokahanaWantsMado1(rom);
    if (flags.teleportOnThunderSword()) {
        teleportOnThunderSword(rom);
        rom.townWarp.thunderSwordWarp = [rom.locations.Shyron.id, 0x41];
    }
    else {
        noTeleportOnThunderSword(rom);
    }
    undergroundChannelLandBridge(rom);
    if (flags.fogLampNotRequired())
        fogLampNotRequired(rom, flags);
    evilSpiritIslandRequiresDolphin(rom);
    simplifyInvisibleChests(rom);
    addCordelWestTriggers(rom, flags);
    if (flags.disableRabbitSkip())
        fixRabbitSkip(rom);
    if (flags.disableFlightStatueSkip())
        fixFlightStatueSkip(rom);
    if (flags.disableRageSkip())
        patchLimeTreeLake(rom);
    fixReverseWalls(rom);
    if (flags.chargeShotsOnly())
        disableStabs(rom);
    if (flags.orbsOptional())
        orbsOptional(rom);
    if (flags.noBowMode())
        noBowMode(rom);
    patchTooManyItemsMessage(rom);
    if (flags.hardcoreMode())
        hardcoreMode(rom);
    if (flags.shouldUpdateHud())
        useNewStatusBarGraphics(rom);
    if (flags.shouldColorSwordElements())
        useElementSwordColors(rom);
}
function useElementSwordColors(rom) {
    function swapTiles(start, thunder) {
        for (let addr = 0; addr <= 0xa; addr++) {
            if (addr === 8)
                continue;
            const p = rom.patterns.get(addr | start);
            const orig = [...p.pixels];
            for (let i = 0; i < p.pixels.length; i++) {
                p.pixels[i] = orig[i ^ 8];
                if ((i >>> 3) === thunder)
                    p.pixels[i] |= orig[i];
            }
        }
    }
    swapTiles(0x1090);
    swapTiles(0x10d0);
    swapTiles(0x1110);
    swapTiles(0x1150);
    swapTiles(0x1190);
}
function useNewStatusBarGraphics(rom) {
    const page = 0x38 << 6;
    rom.patterns.set(page, 0x0, Patterns.HUD_LF);
    rom.patterns.set(page, 0x1, Patterns.HUD_PW);
    rom.patterns.set(page, 0x2, Patterns.HUD_EY);
    rom.patterns.set(page, 0x3, Patterns.HUD_LV);
    rom.patterns.set(page, 0x4, Patterns.HUD_DL);
    rom.patterns.set(page, 0x5, Patterns.HUD_MP);
    rom.patterns.set(page, 0x6, Patterns.HUD_EX);
}
function consolidateItemGrants(rom) {
    rom.items.GlowingLamp.itemUseData[0].message.action = 0x0b;
}
function addMezameTrigger(rom) {
    const trigger = rom.nextFreeTrigger('mezame');
    trigger.used = true;
    trigger.conditions = [~rom.flags.AlwaysTrue.id];
    trigger.message = MessageId.of({ action: 4 });
    trigger.flags = [rom.flags.AlwaysTrue.id];
    const mezame = rom.locations.MezameShrine;
    mezame.spawns.push(Spawn.of({ tile: 0x88, type: 2, id: trigger.id }));
}
function removeWarpTriggers(rom) {
    const warpTriggers = new Set([
        0x81,
        0x8b,
        0x90,
        0x99,
        0xa6,
        0xa7,
        0xa8,
        0xa9,
        0xaa,
        0xab,
        0xac,
        rom.allocatedTriggers.get('zombie warp'),
    ]);
    for (const location of rom.locations) {
        if (!location.used)
            continue;
        location.spawns = location.spawns.filter(spawn => !spawn.isTrigger() || !warpTriggers.has(spawn.id));
    }
}
function normalizeSwords(rom, flags) {
    rom.objects[0x10].atk = 3;
    rom.objects[0x11].atk = 6;
    rom.objects[0x12].atk = 8;
    rom.objects[0x18].atk = 3;
    rom.objects[0x13].atk = 5;
    rom.objects[0x19].atk = 5;
    rom.objects[0x17].atk = 7;
    rom.objects[0x1a].atk = 7;
    rom.objects[0x14].atk = 3;
    rom.objects[0x15].atk = 6;
    rom.objects[0x16].atk = 8;
    rom.objects[0x1c].atk = 3;
    rom.objects[0x1d].atk = 3;
    rom.objects[0x1e].atk = 5;
    rom.objects[0x1b].atk = 7;
    rom.objects[0x1f].atk = 7;
    if (flags.slowDownTornado()) {
        const tornado = rom.objects[0x12];
        tornado.speed = 0x07;
        tornado.data[0x0c] = 0x60;
    }
}
function preventBossSoftlocks(rom) {
    const trigger = rom.trigger(0xa0);
    trigger.used = true;
    trigger.conditions = [];
    trigger.flags = [];
    trigger.message = MessageId.of({ part: 0, index: 0, action: 0x15 });
    rom.objects[0x5e].data[0xd] = 0xfe;
    rom.items.InsectFlute.itemUseData[0].flags = [rom.flags.UsedInsectFlute.id];
}
function fixOpelStatue(rom) {
    rom.items.OpelStatue.selectedItemValue = 0;
}
function fixCoinSprites(rom) {
    for (const page of [0x60, 0x64, 0x65, 0x66, 0x67, 0x68,
        0x69, 0x6a, 0x6b, 0x6c, 0x6d, 0x6f]) {
        for (const pat of [0, 1, 2]) {
            rom.patterns.set(page << 6, pat, rom.patterns.get(0x5e << 6, pat).pixels);
        }
    }
    rom.objects[0x0c].metasprite = 0xa9;
}
function fixReverseWalls(rom) {
    for (const t in [0x04, 0x05, 0x08, 0x09]) {
        rom.tileEffects[0xbc - 0xb3].effects[t] = 0x18;
        rom.tileEffects[0xb5 - 0xb3].effects[t] = 0x18;
    }
}
function undergroundChannelLandBridge(rom) {
    const { tiles } = rom.screens[0xa1];
    tiles[0x28] = 0x9f;
    tiles[0x37] = 0x23;
    tiles[0x38] = 0x23;
    tiles[0x39] = 0x21;
    tiles[0x47] = 0x8d;
    tiles[0x48] = 0x8f;
    tiles[0x56] = 0x99;
    tiles[0x57] = 0x9a;
    tiles[0x58] = 0x8c;
}
function fogLampNotRequired(rom, flags) {
    const { flags: { AlwaysTrue, InjuredDolphin, FogLamp, KensuInCabin, ReturnedFogLamp }, items: { ShellFlute }, locations: { BoatHouse, Portoa_FishermanHouse }, npcs, } = rom;
    const requireHealed = flags.requireHealedDolphinToRide();
    ShellFlute.itemUseData[0].want =
        requireHealed ? InjuredDolphin.id : AlwaysTrue.id;
    npcs.KensuInCabin.data[0] = 0x67;
    npcs.KensuInCabin.localDialogs.get(-1)[0].message.action = 0x0a;
    npcs.KensuInCabin.localDialogs.get(-1)[0].flags = [];
    npcs.KensuInCabin.spawnConditions.set(BoatHouse.id, [ReturnedFogLamp.id, ~KensuInCabin.id]);
    npcs.Fisherman.spawnConditions.set(Portoa_FishermanHouse.id, [FogLamp.id]);
    rom.itemGets[0x64].flags = [];
    rom.itemGets[0x67].copyFrom(rom.itemGets[0x64]);
}
function fixChests(rom) {
    for (const loc of rom.locations) {
        for (const s of loc.spawns) {
            if (s.isChest())
                s.timed = false;
        }
    }
}
function adjustGoaFortressTriggers(rom) {
    const l = rom.locations;
    l.GoaFortress_Kelbesque.spawns[0].x -= 16;
    l.GoaFortress_Zebu.spawns.splice(1, 1);
    l.GoaFortress_Tornel.spawns.splice(2, 1);
    l.GoaFortress_Asina.spawns.splice(2, 1);
    l.GoaFortress_Kensu.spawns.splice(3, 1);
    l.GoaFortress_Kensu.spawns.splice(1, 1);
}
function alarmFluteIsKeyItem(rom, flags) {
    const { items: { AlarmFlute }, flags: { TalkedToZebuStudent, ZebuStudent }, locations: { MezameShrine, Leaf_StudentHouse, WaterfallCave4, ZebuCave }, npcs: { WindmillGuard, Zebu }, } = rom;
    rom.itemGets[0x31].inventoryRowStart = 0x20;
    AlarmFlute.unique = true;
    AlarmFlute.basePrice = 0;
    if (flags.zebuStudentGivesItem()) {
        WindmillGuard.data[1] = 0x31;
    }
    else {
        WindmillGuard.data[1] = 0xff;
        const dialog = WindmillGuard.dialog(Leaf_StudentHouse)[0];
        dialog.condition = ~TalkedToZebuStudent.id;
        dialog.flags.push(TalkedToZebuStudent.id);
        replace(Zebu.spawns(ZebuCave), ZebuStudent.id, TalkedToZebuStudent.id);
        MezameShrine.spawns.push(Spawn.of({ screen: 0, tile: 0x9b, type: 2, id: 0x31 }));
        MezameShrine.spawns.push(Spawn.of({ screen: 0, tile: 0x95, type: 2, id: 0x49 }));
        rom.itemGets[0x49].itemId = rom.items.MedicalHerb.id;
    }
    const replacements = [
        [0x21, 0.72],
        [0x1f, 0.9],
    ];
    let j = 0;
    for (const shop of rom.shops) {
        if (shop.type !== ShopType.TOOL)
            continue;
        for (let i = 0, len = shop.contents.length; i < len; i++) {
            if (shop.contents[i] !== 0x31)
                continue;
            const [item, priceRatio] = replacements[(j++) % replacements.length];
            shop.contents[i] = item;
            if (rom.shopDataTablesAddress) {
                shop.prices[i] = Math.round(shop.prices[i] * priceRatio);
            }
        }
    }
    rom.itemGets[0x5b].itemId = 0x1d;
    WaterfallCave4.spawn(0x19).id = 0x10;
}
function brokahanaWantsMado1(rom) {
    const { flags: { Karmine, Mado1 }, npcs: { Brokahana } } = rom;
    const dialog = assert(Brokahana.localDialogs.get(-1))[0];
    if (dialog.condition !== ~Karmine.id) {
        throw new Error(`Bad brokahana condition: ${dialog.condition}`);
    }
    dialog.condition = ~Mado1.id;
}
function requireHealedDolphin(rom) {
    const { flags: { InjuredDolphin, ShellFlute }, npcs: { Fisherman, FishermanDaughter }, } = rom;
    Fisherman.spawnConditions.set(0xd6, [ShellFlute.id, InjuredDolphin.id]);
    const daughterDialog = FishermanDaughter.localDialogs.get(-1);
    daughterDialog.unshift(daughterDialog[0].clone());
    daughterDialog[0].condition = ~InjuredDolphin.id;
    daughterDialog[1].condition = ~ShellFlute.id;
}
function requireTelepathyForDeo(rom) {
    const { flags: { Telepathy }, npcs: { Deo, SaharaBunny }, } = rom;
    SaharaBunny.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x12]));
    Deo.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x13]));
}
function teleportOnThunderSword(rom) {
    const { flags: { WarpShyron }, } = rom;
    rom.itemGets[0x03].flags.push(WarpShyron.id);
}
function noTeleportOnThunderSword(rom) {
    rom.itemGets[0x03].acquisitionAction.action = 0x16;
}
function adjustItemNames(rom, flags) {
    if (flags.leatherBootsGiveSpeed()) {
        const leatherBoots = rom.items[0x2f];
        leatherBoots.menuName = 'Speed Boots';
        leatherBoots.messageName = 'Speed Boots';
        if (flags.changeGasMaskToHazmatSuit()) {
            const gasMask = rom.items[0x29];
            gasMask.menuName = 'Hazmat Suit';
            gasMask.messageName = 'Hazmat Suit';
        }
    }
    for (let i = 0x05; i < 0x0c; i += 2) {
        rom.items[i].menuName = rom.items[i].menuName.replace('Ball', 'Orb');
        rom.items[i].messageName = rom.items[i].messageName.replace('Ball', 'Orb');
    }
}
function makeBraceletsProgressive(rom) {
    const { flags: { BallOfWind, TornadoBracelet }, npcs: { Tornel }, } = rom;
    const vanilla = Tornel.localDialogs.get(0x21);
    const patched = [
        vanilla[0],
        vanilla[2],
        vanilla[2].clone(),
        vanilla[1],
    ];
    patched[1].condition = ~TornadoBracelet.id;
    patched[2].condition = ~BallOfWind.id;
    patched[3].condition = ~0;
    Tornel.localDialogs.set(0x21, patched);
}
function simplifyInvisibleChests(rom) {
    const { CordelPlainEast, KirisaMeadow, UndergroundChannel } = rom.locations;
    for (const location of [CordelPlainEast, KirisaMeadow, UndergroundChannel]) {
        for (const spawn of location.spawns) {
            if (spawn.isChest())
                spawn.data[2] |= 0x20;
        }
    }
}
function addCordelWestTriggers(rom, flags) {
    const { CordelPlainEast, CordelPlainWest } = rom.locations;
    for (const spawn of CordelPlainEast.spawns) {
        if (spawn.isChest() || (flags.disableTeleportSkip() && spawn.isTrigger())) {
            CordelPlainWest.spawns.push(spawn.clone());
        }
    }
}
function fixRabbitSkip(rom) {
    for (const spawn of rom.locations.MtSabreNorth_Main.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x86) {
            if (spawn.x === 0x740) {
                spawn.x += 16;
                spawn.y += 16;
            }
        }
    }
}
function fixFlightStatueSkip(rom) {
    const oldHitbox = rom.hitboxes[rom.objects.guardianStatueMissile.hitbox];
    const newHitbox = rom.hitboxes[6];
    rom.objects.guardianStatueMissile.hitbox = newHitbox.id;
    newHitbox.x0 = oldHitbox.x0 - 6;
    newHitbox.w = oldHitbox.w + 12;
    newHitbox.y0 = oldHitbox.y0 - 2;
    newHitbox.h = oldHitbox.h + 4;
}
function patchTooManyItemsMessage(rom) {
    rom.messages.parts[0x20][0x0f].text += '\nItem: [:ITEM:]';
}
function addZombieWarp(rom) {
    const { flags: { WarpZombie }, locations: { ZombieTown }, } = rom;
    rom.flags.insertZombieWarpFlag();
    const message = rom.messages.parts[0x21][0];
    message.text = [
        ' {1a:Leaf}      {16:Brynmaer} {1d:Oak} ',
        '{0c:Nadare}\'s  {1e:Portoa}   {14:Amazones} ',
        '{19:Joel}      Zombie   {20:Swan} ',
        '{23:Shyron}    {18:Goa}      {21:Sahara}',
    ].join('\n');
    const trigger = rom.nextFreeTrigger('zombie warp');
    trigger.used = true;
    trigger.conditions = [];
    trigger.message = MessageId.of({});
    trigger.flags = [WarpZombie.id];
    for (const spawn of ZombieTown.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8a)
            spawn.id = trigger.id;
    }
    rom.townWarp.locations.splice(7, 0, ZombieTown.id);
    if (rom.townWarp.locations.pop() !== 0xff)
        throw new Error('unexpected');
}
function evilSpiritIslandRequiresDolphin(rom) {
    rom.trigger(0x8a).conditions = [~rom.flags.CurrentlyRidingDolphin.id];
    rom.messages.parts[0x1d][0x10].text = `The cave entrance appears
to be underwater. You'll
need to swim.`;
}
function leafElderInSabreHeals(rom) {
    const leafElder = rom.npcs[0x0d];
    const summitDialog = leafElder.localDialogs.get(0x35)[0];
    summitDialog.message.action = 0x17;
}
function patchLimeTreeLake(rom) {
    rom.metatilesets.lime.getTile(0x7c).setEffects(6);
    rom.metatilesets.lime.getTile(0x7f).setEffects(6);
    rom.metatilesets.lime.getTile(0x7b).setTiles([0x7f, 0x7f, 0x7f, 0x7f])
        .setAttrs(0).setEffects(6);
    rom.screens[0x74].set2d(0x90, [
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
    ]);
}
function preventNpcDespawns(rom, opts) {
    function remove(arr, elem) {
        const index = arr.indexOf(elem);
        if (index < 0)
            throw new Error(`Could not find element ${elem} in ${arr}`);
        arr.splice(index, 1);
    }
    function removeIf(arr, pred) {
        const index = arr.findIndex(pred);
        if (index < 0)
            throw new Error(`Could not find element in ${arr}`);
        arr.splice(index, 1);
    }
    const { locations: { BoatHouse, Brynmaer, Crypt_Draygon2, Joel_Shed, Leaf_ElderHouse, MtSabreNorth_SummitCave, MtSabreWest_Upper, PortoaPalace_ThroneRoom, Portoa_PalaceEntrance, Portoa_AsinaRoom, Portoa_FortuneTeller, Shyron_Temple, StomHouse, Swan_DanceHall, Swan_Tavern, WindmillCave, WaterfallCave4, WaterfallValleyNorth, ZebuCave, ZombieTown_HouseBasement, }, items: { GlowingLamp, KeyToPrison, LovePendant, StatueOfOnyx, }, npcs: { Akahana, AkahanaInBrynmaer, Asina, AztecaInShyron, Clark, Draygon, FortuneTeller, Kensu, KensuInCabin, KensuInSwan, LeafElder, LeafRabbit, OakChild, OakElder, OakMother, PortoaPalaceFrontGuard, PortoaQueen, PortoaThroneRoomBackDoorGuard, Rage, Stom, StonedAkahana, Tornel, WindmillGuard, Zebu, }, flags, } = rom;
    Kensu.localDialogs.delete(Swan_Tavern.id);
    KensuInSwan.link(Kensu.id);
    KensuInSwan.used = true;
    KensuInSwan.data = [...Kensu.data];
    Kensu.data[0] = GlowingLamp.id;
    Swan_DanceHall.spawns.find(s => s.isNpc() && s.id === Kensu.id).id =
        KensuInSwan.id;
    LovePendant.itemUseData[0].want = 0x100 | KensuInSwan.id;
    StonedAkahana.linkDialog(Akahana.id);
    AkahanaInBrynmaer.used = true;
    AkahanaInBrynmaer.link(Akahana.id);
    AkahanaInBrynmaer.data = [...Akahana.data];
    Brynmaer.spawns.find(s => s.isNpc() && s.id === Akahana.id).id =
        AkahanaInBrynmaer.id;
    StatueOfOnyx.itemUseData[0].want = 0x100 | AkahanaInBrynmaer.id;
    LeafElder.dialog(Leaf_ElderHouse)
        .splice(0, 0, ...LeafElder.dialog(Leaf_ElderHouse).splice(2, 1));
    LeafRabbit.dialog()[2].condition = flags.RescuedLeafElder.id;
    LeafRabbit.dialog()[2].flags.push(flags.TalkedToLeafRabbit.id);
    LeafRabbit.dialog()[3].flags.push(flags.TalkedToLeafRabbit.id);
    WindmillGuard.spawns(WindmillCave)[1] =
        ~flags.WindmillGuardAlarmFluteTradein.id;
    remove(Akahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    remove(StonedAkahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    function reverseDialog(ds) {
        ds.reverse();
        for (let i = 0; i < ds.length; i++) {
            const next = ds[i + 1];
            ds[i].condition = next ? ~next.condition : ~0;
        }
    }
    ;
    for (let i = 0; i < 4; i++) {
        const dlg = OakElder.dialog()[i];
        if (dlg.condition !== rom.flags.OakElder.id)
            dlg.message.action = 0x03;
    }
    (() => {
        const [killedInsect, gotItem, getItem, findChild] = OakMother.dialog();
        findChild.condition = ~flags.RescuedChild.id;
        gotItem.condition = ~0;
        OakMother.dialog().splice(0, 4, findChild, getItem, killedInsect, gotItem);
    })();
    for (const i of [0x20, 0x21, 0x22, 0x7c, 0x7d]) {
        reverseDialog(rom.npcs[i].dialog());
    }
    OakChild.dialog().unshift(...OakChild.dialog().splice(1, 1));
    PortoaThroneRoomBackDoorGuard.spawnConditions.set(PortoaPalace_ThroneRoom.id, [~flags.QueenNotInThroneRoom.id, ~flags.MesiaRecording.id]);
    PortoaPalaceFrontGuard.dialog()[1].condition = flags.MesiaRecording.id;
    PortoaQueen.dialog()[3].condition = flags.SwordOfWater.id;
    PortoaQueen.dialog()[3].message.action = 0x03;
    PortoaQueen.dialog()[4].flags.push(flags.PortoaQueenGoingAway.id);
    PortoaQueen.spawns(PortoaPalace_ThroneRoom)[1] = ~flags.MesiaRecording.id;
    PortoaQueen.spawns(Portoa_AsinaRoom)[0] = flags.MesiaRecording.id;
    PortoaQueen.dialog()[1].condition = flags.MesiaRecording.id;
    FortuneTeller.spawns(Portoa_FortuneTeller)[1] = ~flags.MesiaRecording.id;
    Clark.spawnConditions.set(ZombieTown_HouseBasement.id, [~flags.Clark.id]);
    Clark.spawnConditions.set(Joel_Shed.id, [flags.Clark.id]);
    Zebu.localDialogs.set(ZebuCave.id, [
        LocalDialog.of(~flags.TalkedToZebuInCave.id, [0x00, 0x1a], [flags.TalkedToZebuInCave.id]),
        LocalDialog.of(flags.LeafVillagersRescued.id, [0x00, 0x1d]),
        LocalDialog.of(flags.LeafAbduction.id, [0x00, 0x1c]),
        LocalDialog.of(flags.ZebuAtWindmill.id, [0x00, 0x1d]),
        LocalDialog.of(flags.UsedWindmillKey.id, [0x00, 0x1b, 0x03]),
        LocalDialog.of(~0, [0x00, 0x1d]),
    ]);
    remove(Zebu.spawns(ZebuCave), ~flags.BehindWhirlpool.id);
    Tornel.spawnConditions.delete(MtSabreWest_Upper.id);
    Stom.spawnConditions.delete(StomHouse.id);
    remove(Asina.spawns(Portoa_AsinaRoom), ~flags.CalmedAngrySea.id);
    const guard2 = rom.npcs[0x34];
    guard2.spawnConditions.set(PortoaPalace_ThroneRoom.id, [flags.MesiaRecording.id,
        ~flags.PortoaQueen.id]);
    guard2.localDialogs.set(Portoa_PalaceEntrance.id, guard2.localDialogs.get(-1));
    guard2.data[0] = rom.items.FluteOfLime.id;
    const guard2Message = rom.messages.alloc();
    guard2Message.text = "The queen left this for you.";
    guard2.localDialogs.set(PortoaPalace_ThroneRoom.id, [
        LocalDialog.of(~flags.PortoaQueen.id, [guard2Message.part,
            guard2Message.id, 0x03]),
        LocalDialog.of(~0, [0x0a, 0x0e]),
    ]);
    PortoaPalace_ThroneRoom.spawns.push(Spawn.of({ yt: 3, xt: 12, type: 1,
        patternBank: 1,
        id: guard2.id }));
    KensuInCabin.spawnConditions.set(BoatHouse.id, [~flags.AbleToRideDolphin.id,
        flags.ReturnedFogLamp.id]);
    KensuInCabin.dialog()[0].message.action = 0x02;
    AztecaInShyron.spawns(Shyron_Temple).push(~flags.ShyronMassacre.id);
    rom.trigger(0x82).conditions.push(~flags.ShyronMassacre.id);
    Rage.dialog()[0].condition = flags.SwordOfWater.id;
    Draygon.spawnConditions.set(Crypt_Draygon2.id, [~flags.Draygon2.id]);
    Zebu.dialog(Shyron_Temple)
        .unshift(...Zebu.dialog(Shyron_Temple).splice(1, 1));
    rom.trigger(0x80).conditions = [
        ~flags.ShyronMassacre.id,
        flags.TalkedToZebuInShyron.id,
        flags.SwordOfThunder.id,
    ];
    rom.trigger(0x81).conditions = [];
    if (opts.barrierRequiresCalmSea()) {
        rom.trigger(0x84).conditions.push(flags.CalmedAngrySea.id);
    }
    rom.trigger(0x8c).conditions.push(flags.TalkedToZebuInCave.id);
    rom.trigger(0x8d).used = false;
    for (const spawn of MtSabreNorth_SummitCave.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8d)
            spawn.id = 0xb2;
    }
    removeIf(WaterfallValleyNorth.spawns, spawn => spawn.isTrigger() && spawn.id === 0x8d);
    rom.trigger(0xb2).conditions.push(flags.Kelbesque1.id);
    rom.trigger(0xb2).flags.push(~flags.LeafVillagersCurrentlyAbducted.id, ~flags.LeafElderCurrentlyAbducted.id, flags.LeafVillagersRescued.id);
    rom.trigger(0x8c).conditions.push(~flags.Kelbesque1.id);
    rom.trigger(0x86).conditions.push(~flags.Kelbesque1.id);
    remove(KeyToPrison.itemUseData[0].flags, ~flags.LeafVillagersCurrentlyAbducted.id);
    replace(rom.trigger(0xbb).conditions, ~flags.Rage.id, ~flags.MesiaRecording.id);
}
function disableStabs(rom) {
    for (const o of [0x08, 0x09, 0x27]) {
        rom.objects[o].collisionPlane = 0;
    }
    rom.npcs.Brokahana.data[0] = rom.items.FruitOfLime.id;
}
function orbsOptional(rom) {
    for (const obj of [0x10, 0x14, 0x18, 0x1d]) {
        rom.objects[obj].terrainSusceptibility &= ~0x04;
        rom.objects[obj].level = 2;
    }
}
function noBowMode(rom) {
    const { flags: { UsedBowOfTruth }, locations: { Crypt_Draygon2, MezameShrine }, } = rom;
    let trigger;
    for (const spawn of MezameShrine.spawns) {
        if (spawn.isTrigger() && spawn.tile === 0x88) {
            trigger = rom.trigger(spawn.id);
        }
    }
    if (!trigger)
        throw new Error(`Could not find start trigger`);
    trigger.flags.push(UsedBowOfTruth.id);
    rom.tileEffects[0xb9 - 0xb3].effects[0x58] = 0;
    MezameShrine.meta.setExit(0, 'door', [Crypt_Draygon2.meta.id << 8 | 0x10, 'edge:bottom']);
}
function fixCrystalis(rom) {
    rom.objects[0x33].elements = 0xf;
}
function fixFlyableWalls(rom) {
    rom.tileEffects[0xb5 - 0xb3].effects[0x74] = 6;
    rom.tileEffects[0xb6 - 0xb3].effects[0x46] = 6;
}
function fixMonsterTerrain(rom) {
    for (const obj of rom.objects) {
        if (!(obj instanceof Monster))
            continue;
        if (obj.isProjectile() || obj.isBoss() || obj.isFlyer())
            continue;
        if (obj === rom.objects.mimic)
            continue;
        obj.terrainSusceptibility |= 0x3;
    }
}
function replace(array, old, replacement) {
    for (let i = 0; i < array.length; i++) {
        if (array[i] !== old)
            continue;
        array[i] = replacement;
        return;
    }
    throw new Error(`Could not find ${old} in ${array.join(',')}`);
}
function hardcoreMode(rom) {
    for (const loc of rom.locations) {
        loc.checkpoint = loc.saveable = false;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZXJtaW5pc3RpYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL2RldGVybWluaXN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUM5QyxPQUFPLEVBQUMsWUFBWSxFQUFFLFdBQVcsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEMsT0FBTyxFQUFDLEdBQUcsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ25DLE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDbEMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzFDLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUUzQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWpCLFNBQVMsS0FBSyxDQUFDLEdBQWUsRUFBRSxLQUFhLEVBQUUsR0FBRyxJQUFjO0lBQzlELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3BDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzFCO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxHQUFlO0lBRW5ELEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFHcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFJcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUdwQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUdwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFHcEIsS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUdoQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVwQixLQUFLLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDaEMsS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoQyxLQUFLLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDaEMsS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUtoQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BCLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxF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QyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLE9BQU87b0JBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbkQ7U0FDRjtJQUNILENBQUM7SUFDRCxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2xCLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQixTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3BCLENBQUM7QUFFRCxTQUFTLHVCQUF1QixDQUFDLEdBQVE7SUFDdkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQTtJQUN0QixHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEs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LENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBRTFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBRTFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsSUFBSSxLQUFLLENBQUMsZUFBZSxFQUFFLEVBQUU7UUFHM0IsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNyQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQztLQUMzQjtBQUNILENBQUM7QUFJRCxTQUFTLG9CQUFvQixDQUFDLEdBQVE7SUFDcEMsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNwQixPQUFPLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUN4QixPQUFPLENBQUMsS0FBSyxHQUFHLEVBQUUs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Q0FBQyxDQUFDLEtBQUssR0FBRztZQUFFLFNBQVM7UUFDL0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQztRQUN2QixPQUFPO0tBQ1I7SUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtCQUFrQixHQUFHLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakUsQ0FBQztBQUVELFNBQVMsWUFBWSxDQUFDLEdBQVE7SUFDNUIsS0FBSyxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsU0FBUyxFQUFFO1FBQy9CLEdBQUcsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7S0FDdkM7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gUGVyZm9ybSBpbml0aWFsIGNsZWFudXAvc2V0dXAgb2YgdGhlIFJPTS5cblxuaW1wb3J0IHtGbGFnU2V0fSBmcm9tICcuLi9mbGFnc2V0LmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuLi9yb20uanMnO1xuaW1wb3J0IHtTcGF3bn0gZnJvbSAnLi4vcm9tL2xvY2F0aW9uLmpzJztcbmltcG9ydCB7TWVzc2FnZUlkfSBmcm9tICcuLi9yb20vbWVzc2FnZWlkLmpzJztcbmltcG9ydCB7R2xvYmFsRGlhbG9nLCBMb2NhbERpYWxvZ30gZnJvbSAnLi4vcm9tL25wYy5qcyc7XG5pbXBvcnQge1Nob3BUeXBlfSBmcm9tICcuLi9yb20vc2hvcC5qcyc7XG5pbXBvcnQge1RyaWdnZXJ9IGZyb20gJy4uL3JvbS90cmlnZ2VyLmpzJztcbmltcG9ydCB7aGV4fSBmcm9tICcuLi9yb20vdXRpbC5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge01vbnN0ZXJ9IGZyb20gJy4uL3JvbS9tb25zdGVyLmpzJztcbmltcG9ydCB7UGF0dGVybnN9IGZyb20gJy4uL3JvbS9wYXR0ZXJuLmpzJztcblxuY29uc3QgW10gPSBbaGV4XTsgLy8gZ2VuZXJhbGx5IHVzZWZ1bFxuXG5mdW5jdGlvbiB3cml0ZShhcnI6IFVpbnQ4QXJyYXksIHN0YXJ0OiBudW1iZXIsIC4uLmRhdGE6IG51bWJlcltdKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgIGFycltzdGFydCArIGldID0gZGF0YVtpXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5pc3RpY1ByZVBhcnNlKHByZzogVWludDhBcnJheSk6IHZvaWQge1xuICAvLyBSZW1vdmUgdW5uZWNlc3Nhcnkgc3RhdHVlIGZpZ2h0IHRyaWdnZXJzLiAgVE9ETyAtIHJlbW92ZSAxZCBsb2NhdGlvbiBjaGVja1xuICBwcmdbMHgxYTU5NF0gPSAweGZmOyAvLyBqdXN0IGN1dCBvZmYgdHdvIG9iamVjdHMgZWFybHkuXG5cbiAgLy8gUmVtb3ZlIHVubmVjZXNzYXJ5IG9hayBlbnRyYW5jZSB0cmlnZ2VyIChhYSkuICBSZWRpcmVjdCB0aGUgZGlhbG9nIGZsYWcuXG4gIHByZ1sweDFjZGM1XSA9IDB4YTg7IC8vIGNoYW5nZSBmbGFnIHRvIG5vdCB1c2UgMDQzLlxuICBwcmdbMHgxYTE3Nl0gPSAweGZmOyAvLyByZW1vdmUgdGhlIDgzIHRyaWdnZXIgZnJvbSBnb2EgZm9ydHJlc3MgZW50cmFuY2UuXG4gIHByZ1sweDFhODRjXSA9IDB4ZmY7IC8vIHJlbW92ZSB0aGUgYWEgdHJpZ2dlciAobGFzdCBzcGF3biBpbiBvYWspLlxuXG4gIC8vIFJlbW92ZSBicm9rZW4gKHVudXNlZCkga2Vuc3UgZGlhbG9nIGluIHN3YW4gdGF2ZXJuIC0gb3JpZ2luYWwgcmVhZHNcbiAgLy8gcGFydCBvZiB0aGUgbmV4dCBhcmVhJ3MgbG9jYWwgZGlhbG9ncyBhcyBmbGFncyB0byBzZXQsIGluY2x1ZGluZyAxNDAuXG4gIHByZ1sweDFkODQzXSA9IDB4YTA7IC8vIGNoYW5nZSBlMCAoZXhwZWN0aW5nIGZvbGxvdy11cCBmbGFncykgdG8gYTAuXG5cbiAgLy8gUmVtb3ZlIHVudXNlZCBpdGVtL3RyaWdnZXIgYWN0aW9uc1xuICBwcmdbMHgxZTA2Yl0gJj0gNzsgLy8gbWVkaWNhbCBoZXJiIG5vcm1hbCB1c2FnZSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDZmXSAmPSA3OyAvLyBtYWdpYyByaW5nIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3M10gJj0gNzsgLy8gZnJ1aXQgb2YgbGltZSBpdGVtdXNlWzBdID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwNzddICY9IDc7IC8vIGFudGlkb3RlIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3Yl0gJj0gNzsgLy8gb3BlbCBzdGF0dWUgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDg0XSAmPSA3OyAvLyB3YXJwIGJvb3RzIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA0IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA5Yl0gJj0gNzsgLy8gd2luZG1pbGwga2V5IGl0ZW11c2VbMV0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTBiOV0gJj0gNzsgLy8gZ2xvd2luZyBsYW1wIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuXG4gIHByZ1sweDFlMTA1XSA9IDB4MmY7IC8vIGNoYW5nZSBVc2VkQm93T2ZUcnV0aCBmcm9tIDA4NiB0byBmaXhlZCAwMmYgKDY0ODU6ODApXG5cbiAgcHJnWzB4MWUyNzddID0gMHgwMDsgLy8gcmVtb3ZlIGZsYWcgMGExIGZyb20gYW1hem9uZXMgd2FycCAodHJpZ2dlciA5MClcbiAgcHJnWzB4MWUzNjZdID0gMHg0MDsgLy8gcmVtb3ZlIHVucmVhZCAwOGUgZmxhZyBmcm9tIHNhYmVyYSB0cmFwICh0cmlnZ2VyIGI2KVxuICBwcmdbMHgxZTM3MV0gPSAweDAwOyAvLyByZW1vdmUgZmxhZyAwYTIgZnJvbSBwb3J0b2EgY2FzdGxlIGJyaWRnZSAodHJpZ2dlciBiNylcblxuICAvLyBndWFyZCBwYXJhbHlzaXMgZmxhZ3MgYXJlIG1vdmVkIGhhcmRjb2RlZCBub3dcbiAgcHJnWzB4MWUzODddID0gMHgwMDsgLy8gcmVtb3ZlIGNvbmRpdGlvbiAwOWUgZnJvbSBwYWxhY2UgZ3VhcmQgKHRyaWdnZXIgYmIpXG4gIHByZ1sweDFlMzkxXSA9IDB4MDA7IC8vIHJlbW92ZSBjb25kaXRpb24gMDk5IGZyb20gYW1hem9uZXMgZ3VhcmQgKHRyaWdnZXIgYmMpXG5cbiAgLy8gQ3VzdG9tIHNob290aW5nIHdhbGxzOiBtYXJrIHdhbGxzIGFzIHNob290aW5nXG4gIHdyaXRlKHByZywgMHgxYTE2OCwgMHgzMywgMHgzMyk7IC8vIGZyb250IG9mIGdvYSBmb3J0cmVzc1xuICB3cml0ZShwcmcsIDB4MWE0OGUsIDB4MzMsIDB4MzMpOyAvLyBvYXNpcyBjYXZlXG5cbiAgLy8gUmVudW1iZXIgbWltaWNzXG4gIHByZ1sweDE5YmIxXSA9IDB4NzA7IC8vIGZvZyBsYW1wIGNhdmUgMyAoNGEpIG5vcnRoIG1pbWljXG4gIHByZ1sweDE5YmI1XSA9IDB4NzE7IC8vIGZvZyBsYW1wIGNhdmUgMyAoNGEpIHNvdXRod2VzdCBtaW1pY1xuICBwcmdbMHgxOWE3N10gPSAweDcyOyAvLyB3YXRlcmZhbGwgY2F2ZSAxICg1NCkgbWltaWNcbiAgcHJnWzB4MTlkZWJdID0gMHg3MzsgLy8gZXZpbCBzcGlyaXQgaXNsYW5kIDQgKDZiKSByaXZlciByaWdodCBtaW1pY1xuICBwcmdbMHgxYTA0NV0gPSAweDc0OyAvLyBtdCBoeWRyYSBjYXZlIDggKDg1KSBtaW1pY1xuICBwcmdbMHgxYTBlMV0gPSAweDc1OyAvLyBzdHh5IGxlZnQgKDg5KSBub3J0aCBtaW1pY1xuICBwcmdbMHgxYTBlNV0gPSAweDc2OyAvLyBzdHh5IHJpZ2h0ICg4OSkgbm9ydGggcml2ZXJzaWRlIG1pbWljXG4gIHByZ1sweDFhMGU5XSA9IDB4Nzc7IC8vIHN0eHkgcmlnaHQgKDg5KSBzb3V0aCByaXZlcnNpZGUgbWltaWNcbiAgcHJnWzB4MWE2MDVdID0gMHg3ODsgLy8gY3J5cHQgbGVmdCBwaXQgKGEzKSBtaW1pY1xuICBwcmdbMHgxYTNjMV0gPSAweDc5OyAvLyBrYXJtaW5lIGJhc2VtZW50IChiNSkgdG9wIG1pZGRsZSBtaW1pY1xuICBwcmdbMHgxYTNjNV0gPSAweDdhOyAvLyBrYXJtaW5lIGJhc2VtZW50IChiNSkgdG9wIHJpZ2h0IG1pbWljXG4gIHByZ1sweDFhM2M5XSA9IDB4N2I7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSBib3R0b20gcmlnaHQgbWltaWNcblxuICB3cml0ZShwcmcsIDB4MWUwYjcsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgc2hlbGwgZmx1dGUgdXNlIGZsYWcgKG5ldmVyIHJlYWQpXG4gIHdyaXRlKHByZywgMHgxZTMyYSwgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSBwcmlzb24gb3BlbmFibGUgZmxhZyAodHJpZ2dlciBhZClcbiAgd3JpdGUocHJnLCAweDFlMzMwLCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIHN0eHkgb3BlbmFibGUgZmxhZyAodHJpZ2dlciBhZSlcbiAgd3JpdGUocHJnLCAweDFlMzM2LCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIGFsdGFyIHVzYWJsZSBmbGFnICh0cmlnZ2VyIGFmKVxuICB3cml0ZShwcmcsIDB4MWUwZTAsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgdW51c2VkIGZsdXRlIG9mIGxpbWUgaXRlbXVzZSBmbGFnXG4gIHdyaXRlKHByZywgMHgxZTBlNiwgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSB1bnVzZWQgZmx1dGUgb2YgbGltZSBpdGVtdXNlIGZsYWdcblxuICAvLyBTd2FuIGdhdGUgZ3VhcmRzIHNwYXduIGV4YWN0bHkgYmFzZWQgb24gZ2F0ZSBiZWluZyBjbG9zZWQgKDJiMykuXG4gIC8vIEFsc28gcmVtb3ZlIHRoZSBkZXNwYXduIHRyaWdnZXIgKHdlIGNhbid0IG1vdmUgdGhlIGd1YXJkcyBiZWNhdXNlXG4gIC8vIHRoZSBnYXRlIGFuaW1hdGlvbiBuZWVkcyB0byBiZSBpbiBzbG90IGUpLlxuICBwcmdbMHgxYzgwM10gPSAweDAwOyAvLyByZW1vdmUgfjA2NiBmcm9tIHNwYXduIGNvbmRpdGlvbiAyYyBAIDM4XG4gIHdyaXRlKHByZywgMHgxYzgwZCwgMHhhMiwgMHhiMyk7IC8vIHNwYXduIGNvbmRpdGlvbiAyZCBAIDczXG4gIHByZ1sweDFhYTg2XSA9IDB4ZmU7IC8vIHRyaWdnZXIgLT4gdW51c2VkIHNwYXduXG5cbiAgLy8gVE9ETyAtIHRoZXNlIGFyZSB0cmFuc2l0aW9uYWwgdW50aWwgd2UgbW92ZSB0aGUgbG9naWMgZWxzZXdoZXJlXG4gIHdyaXRlKHByZywgMHgzZDZkNSxcbiAgICAgICAgMHgyNSwgMHgyOSwgIC8vIDI1IHN0YXR1ZSBvZiBvbnl4IHVzZSAtPiAyOSBnYXMgbWFza1xuICAgICAgICAweDM5LCAweDNhLCAgLy8gMzkgZ2xvd2luZyBsYW1wIHVzZSAtPiAzYSBzdGF0dWUgb2YgZ29sZFxuICAgICAgICAweDNiLCAweDQ3LCAgLy8gM2IgbG92ZSBwZW5kYW50IHVzZSAtPiA0NyBjaGFuZ2VcbiAgICAgICAgMHgzYywgMHgzZSwgIC8vIDNjIGtpcmlzYSBwbGFudCB1c2UgLT4gM2UgYm93IG9mIG1vb25cbiAgICAgICAgMHg4NCwgMHg0NiwgIC8vIDg0IGFuZ3J5IHNlYSB0cmlnZ2VyIC0+IDQ2IGJhcnJpZXJcbiAgICAgICAgMHhiMiwgMHg0MiwgIC8vIGIyIHN1bW1pdCB0cmlnZ2VyIC0+IDQyIHBhcmFseXNpc1xuICAgICAgICAweGI0LCAweDQxLCAgLy8gYjQgd2luZG1pbGwgY2F2ZSB0cmlnZ2VyIC0+IDQxIHJlZnJlc2hcbiAgICAgICAgMHhmZik7ICAgICAgIC8vIGZvciBib29ra2VlcGluZyBwdXJwb3Nlcywgbm90IGFjdHVhbGx5IHVzZWRcblxuICAvLyBNYWtlIHRoZSBzd29yZCB1c2UgdGhlIGVsZW1lbnQncyBwYWxldHRlIGluc3RlYWQgb2YgdGhlIHBsYXllci5cbiAgLy8gVE9ETyAtIG1vdmUgdGhpcyBpbnRvIHBvc3QtcGFyc2UgYXMgYSBtZXRhc3ByaXRlIGVkaXQgKHdlJ2xsIG5lZWQgdG9cbiAgLy8gZG8gYSBmdWxsIHdyaXRlIG9uIHRoYXQgdGFibGUuLi4pLiAgSWYgd2UgZG9uJ3QgY29sb3IgdGhlIHN3b3JkXG4gIC8vIGVsZW1lbnRzIHRoZW4gdGhpcyB0dXJucyB0aGUgc3dvcmRzIGEgYnJpZ2h0ZXIgd2hpdGUuXG4gIGZvciAoY29uc3QgYWRkciBvZiBbMHgzODc1NywgMHgzODc3NywgMHgzODc3YiwgMHgzODc5NywgMHgzODc5YixcbiAgICAgICAgICAgICAgICAgICAgICAweDM4N2RiLCAweDM4N2RmLCAweDM4N2ZiLCAweDM4N2ZmLCAweDM4ODFiLCAweDM4ODFmLFxuICAgICAgICAgICAgICAgICAgICAgIDB4Mzg4NjUsIDB4Mzg4ODUsIDB4Mzg4ODksIDB4Mzg4YTVdKSB7XG4gICAgcHJnW2FkZHJdIHw9IDE7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluaXN0aWMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KTogdm9pZCB7XG4gIC8vIE5PVEU6IGRvIHRoaXMgdmVyeSBlYXJseSB0byBtYWtlIHN1cmUgcmVmcyB0byB3YXJwIHBvaW50IGZsYWdzIGFyZVxuICAvLyB1cGRhdGVkIHRvIHJlZmxlY3Qgc2hpZnRzIChwcm9iYWJseSBub3QgYW4gaXNzdWUgYW55bW9yZSBub3cgdGhhdFxuICAvLyB3ZSB0cmFjayBmbGFnIG1vdmVzIHNlcGFyYXRlbHkpLlxuICBhZGRab21iaWVXYXJwKHJvbSk7XG5cbiAgcmVtb3ZlV2FycFRyaWdnZXJzKHJvbSk7XG4gIGNvbnNvbGlkYXRlSXRlbUdyYW50cyhyb20pO1xuICBhZGRNZXphbWVUcmlnZ2VyKHJvbSk7XG4gIG5vcm1hbGl6ZVN3b3Jkcyhyb20sIGZsYWdzKTtcblxuICBmaXhGbHlhYmxlV2FsbHMocm9tKTtcbiAgZml4TW9uc3RlclRlcnJhaW4ocm9tKTtcbiAgZml4Q3J5c3RhbGlzKHJvbSk7XG4gIGZpeE9wZWxTdGF0dWUocm9tKTtcbiAgZml4Q29pblNwcml0ZXMocm9tKTtcbiAgZml4Q2hlc3RzKHJvbSk7XG4gIHByZXZlbnRCb3NzU29mdGxvY2tzKHJvbSk7XG5cbiAgbWFrZUJyYWNlbGV0c1Byb2dyZXNzaXZlKHJvbSk7XG5cbiAgYWRqdXN0R29hRm9ydHJlc3NUcmlnZ2Vycyhyb20pO1xuICBwcmV2ZW50TnBjRGVzcGF3bnMocm9tLCBmbGFncyk7XG4gIGxlYWZFbGRlckluU2FicmVIZWFscyhyb20pO1xuICBpZiAoZmxhZ3MucmVxdWlyZUhlYWxlZERvbHBoaW5Ub1JpZGUoKSkgcmVxdWlyZUhlYWxlZERvbHBoaW4ocm9tKTtcbiAgaWYgKGZsYWdzLnNhaGFyYVJhYmJpdHNSZXF1aXJlVGVsZXBhdGh5KCkpIHJlcXVpcmVUZWxlcGF0aHlGb3JEZW8ocm9tKTtcblxuICBhZGp1c3RJdGVtTmFtZXMocm9tLCBmbGFncyk7XG5cbiAgLy8gVE9ETyAtIGNvbnNpZGVyIG1ha2luZyBhIFRyYW5zZm9ybWF0aW9uIGludGVyZmFjZSwgd2l0aCBvcmRlcmluZyBjaGVja3NcbiAgYWxhcm1GbHV0ZUlzS2V5SXRlbShyb20sIGZsYWdzKTsgLy8gTk9URTogcHJlLXNodWZmbGVcbiAgYnJva2FoYW5hV2FudHNNYWRvMShyb20pO1xuICBpZiAoZmxhZ3MudGVsZXBvcnRPblRodW5kZXJTd29yZCgpKSB7XG4gICAgdGVsZXBvcnRPblRodW5kZXJTd29yZChyb20pO1xuICAgIC8vIG5vdCBTaHlyb25fVGVtcGxlIHNpbmNlIG5vLXRodW5kZXItc3dvcmQtZm9yLW1hc3NhY3JlXG4gICAgcm9tLnRvd25XYXJwLnRodW5kZXJTd29yZFdhcnAgPSBbcm9tLmxvY2F0aW9ucy5TaHlyb24uaWQsIDB4NDFdO1xuICB9IGVsc2Uge1xuICAgIG5vVGVsZXBvcnRPblRodW5kZXJTd29yZChyb20pO1xuICB9XG5cbiAgdW5kZXJncm91bmRDaGFubmVsTGFuZEJyaWRnZShyb20pO1xuICBpZiAoZmxhZ3MuZm9nTGFtcE5vdFJlcXVpcmVkKCkpIGZvZ0xhbXBOb3RSZXF1aXJlZChyb20sIGZsYWdzKTtcblxuICBldmlsU3Bpcml0SXNsYW5kUmVxdWlyZXNEb2xwaGluKHJvbSk7XG4gIHNpbXBsaWZ5SW52aXNpYmxlQ2hlc3RzKHJvbSk7XG4gIGFkZENvcmRlbFdlc3RUcmlnZ2Vycyhyb20sIGZsYWdzKTtcbiAgaWYgKGZsYWdzLmRpc2FibGVSYWJiaXRTa2lwKCkpIGZpeFJhYmJpdFNraXAocm9tKTtcbiAgaWYgKGZsYWdzLmRpc2FibGVGbGlnaHRTdGF0dWVTa2lwKCkpIGZpeEZsaWdodFN0YXR1ZVNraXAocm9tKTtcbiAgaWYgKGZsYWdzLmRpc2FibGVSYWdlU2tpcCgpKSBwYXRjaExpbWVUcmVlTGFrZShyb20pO1xuXG4gIGZpeFJldmVyc2VXYWxscyhyb20pO1xuICBpZiAoZmxhZ3MuY2hhcmdlU2hvdHNPbmx5KCkpIGRpc2FibGVTdGFicyhyb20pO1xuICBpZiAoZmxhZ3Mub3Jic09wdGlvbmFsKCkpIG9yYnNPcHRpb25hbChyb20pO1xuICBpZiAoZmxhZ3Mubm9Cb3dNb2RlKCkpIG5vQm93TW9kZShyb20pO1xuXG4gIHBhdGNoVG9vTWFueUl0ZW1zTWVzc2FnZShyb20pO1xuXG4gIGlmIChmbGFncy5oYXJkY29yZU1vZGUoKSkgaGFyZGNvcmVNb2RlKHJvbSk7XG5cbiAgaWYgKGZsYWdzLnNob3VsZFVwZGF0ZUh1ZCgpKSB1c2VOZXdTdGF0dXNCYXJHcmFwaGljcyhyb20pO1xuICBpZiAoZmxhZ3Muc2hvdWxkQ29sb3JTd29yZEVsZW1lbnRzKCkpIHVzZUVsZW1lbnRTd29yZENvbG9ycyhyb20pO1xufVxuXG5mdW5jdGlvbiB1c2VFbGVtZW50U3dvcmRDb2xvcnMocm9tOiBSb20pOiB2b2lkIHtcbiAgZnVuY3Rpb24gc3dhcFRpbGVzKHN0YXJ0OiBudW1iZXIsIHRodW5kZXI/OiBudW1iZXIpIHtcbiAgICBmb3IgKGxldCBhZGRyID0gMDsgYWRkciA8PSAweGE7IGFkZHIrKykge1xuICAgICAgaWYgKGFkZHIgPT09IDgpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgcCA9IHJvbS5wYXR0ZXJucy5nZXQoYWRkciB8IHN0YXJ0KTtcbiAgICAgIGNvbnN0IG9yaWcgPSBbLi4ucC5waXhlbHNdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwLnBpeGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBwLnBpeGVsc1tpXSA9IG9yaWdbaSBeIDhdO1xuICAgICAgICBpZiAoKGkgPj4+IDMpID09PSB0aHVuZGVyKSBwLnBpeGVsc1tpXSB8PSBvcmlnW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzd2FwVGlsZXMoMHgxMDkwKTsgLy8gd2luZFxuICBzd2FwVGlsZXMoMHgxMGQwKTsgLy8gZmlyZVxuICBzd2FwVGlsZXMoMHgxMTEwKTsgLy8gd2F0ZXJcbiAgc3dhcFRpbGVzKDB4MTE1MCk7IC8vIHRodW5kZXJcbiAgc3dhcFRpbGVzKDB4MTE5MCk7IC8vIGNyeXN0YWxpc1xufVxuXG5mdW5jdGlvbiB1c2VOZXdTdGF0dXNCYXJHcmFwaGljcyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCBwYWdlID0gMHgzOCA8PCA2XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHgwLCBQYXR0ZXJucy5IVURfTEYpO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4MSwgUGF0dGVybnMuSFVEX1BXKTtcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDIsIFBhdHRlcm5zLkhVRF9FWSk7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHgzLCBQYXR0ZXJucy5IVURfTFYpO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4NCwgUGF0dGVybnMuSFVEX0RMKTtcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDUsIFBhdHRlcm5zLkhVRF9NUCk7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHg2LCBQYXR0ZXJucy5IVURfRVgpO1xufVxuXG4vLyBVcGRhdGVzIGEgZmV3IGl0ZW11c2UgYW5kIHRyaWdnZXIgYWN0aW9ucyBpbiBsaWdodCBvZiBjb25zb2xpZGF0aW9uXG4vLyBhcm91bmQgaXRlbSBncmFudGluZy5cbmZ1bmN0aW9uIGNvbnNvbGlkYXRlSXRlbUdyYW50cyhyb206IFJvbSk6IHZvaWQge1xuICByb20uaXRlbXMuR2xvd2luZ0xhbXAuaXRlbVVzZURhdGFbMF0ubWVzc2FnZS5hY3Rpb24gPSAweDBiO1xufVxuXG4vLyBBZGRzIGEgdHJpZ2dlciBhY3Rpb24gdG8gbWV6YW1lLiAgVXNlIDg3IGxlZnRvdmVyIGZyb20gcmVzY3VpbmcgemVidS5cbmZ1bmN0aW9uIGFkZE1lemFtZVRyaWdnZXIocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3QgdHJpZ2dlciA9IHJvbS5uZXh0RnJlZVRyaWdnZXIoJ21lemFtZScpO1xuICB0cmlnZ2VyLnVzZWQgPSB0cnVlO1xuICB0cmlnZ2VyLmNvbmRpdGlvbnMgPSBbfnJvbS5mbGFncy5BbHdheXNUcnVlLmlkXTtcbiAgdHJpZ2dlci5tZXNzYWdlID0gTWVzc2FnZUlkLm9mKHthY3Rpb246IDR9KTtcbiAgdHJpZ2dlci5mbGFncyA9IFtyb20uZmxhZ3MuQWx3YXlzVHJ1ZS5pZF07XG4gIGNvbnN0IG1lemFtZSA9IHJvbS5sb2NhdGlvbnMuTWV6YW1lU2hyaW5lO1xuICBtZXphbWUuc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3RpbGU6IDB4ODgsIHR5cGU6IDIsIGlkOiB0cmlnZ2VyLmlkfSkpO1xufVxuXG4vLyBUaGUgX1dBUlBfRkxBR1NfVEFCTEUgYXNtIG9wdGlvbiByZW1vdmVzIHRoZSBuZWVkIGZvciBleHBsaWNpdCB0cmlnZ2Vyc1xuLy8gdG8gc2V0IHRoZSB3YXJwIHBvaW50IGZsYWdzLCBhbmQgaW5zdGVhZCB3b3JrcyBieSBjaGVja2luZyB0aGUgbmV3IGxvY2F0aW9uXG4vLyBhZ2FpbnN0IHRoZSBUb3duV2FycCB0YWJsZSBiZXR3ZWVuIGxvYWRpbmcgdGhlIG1hcCBhbmQgbG9hZGluZyB0aGUgTlBDcy5cbmZ1bmN0aW9uIHJlbW92ZVdhcnBUcmlnZ2Vycyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB3YXJwVHJpZ2dlcnMgPSBuZXcgU2V0KFtcbiAgICAweDgxLCAvLyBlbnRlciBzaHlyb25cbiAgICAweDhiLCAvLyBlbnRlciBqb2VsXG4gICAgMHg5MCwgLy8gZW50ZXIgYW1hem9uZXNcbiAgICAvLyAweDkyLCAvLyBlbnRlciB1bmRlcmdyb3VuZCBjaGFubmVsIC0gTk9URTogbm90IGEgdG93biB3YXJwLi4uIVxuICAgIDB4OTksIC8vIGVudGVyIGxlYWZcbiAgICAweGE2LCAvLyBlbnRlciBicnlubWFlclxuICAgIDB4YTcsIC8vIGVudGVyIG5hZGFyZVxuICAgIDB4YTgsIC8vIGVudGVyIHBvcnRvYVxuICAgIDB4YTksIC8vIGVudGVyIHN3YW5cbiAgICAweGFhLCAvLyBlbnRlciBvYWtcbiAgICAweGFiLCAvLyBlbnRlciBnb2FcbiAgICAweGFjLCAvLyBlbnRlciBzYWhhcmFcbiAgICByb20uYWxsb2NhdGVkVHJpZ2dlcnMuZ2V0KCd6b21iaWUgd2FycCcpLCAvLyBOT1RFOiBtYXkgYmUgdW5kZWZpbmVkXG4gIF0pO1xuICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIHJvbS5sb2NhdGlvbnMpIHtcbiAgICBpZiAoIWxvY2F0aW9uLnVzZWQpIGNvbnRpbnVlO1xuICAgIGxvY2F0aW9uLnNwYXducyA9IGxvY2F0aW9uLnNwYXducy5maWx0ZXIoXG4gICAgICAgIC8vIHJldGFpbiBhbGwgbm9uLXRyaWdnZXJzIGFuZCBhbGwgbm9uLW1hdGNoaW5nIHRyaWdnZXJzXG4gICAgICAgIHNwYXduID0+ICFzcGF3bi5pc1RyaWdnZXIoKSB8fCAhd2FycFRyaWdnZXJzLmhhcyhzcGF3bi5pZCkpO1xuICB9XG4gIC8vIFRPRE86IGRlYWxsb2NhdGUgdGhlc2UgdHJpZ2dlcnMgc28gdGhleSBjYW4gYmUgcmVhc3NpZ25lZCFcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplU3dvcmRzKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCkge1xuICAvLyB3aW5kIDEgPT4gMSBoaXQgICAgICAgICAgICAgICA9PiAzXG4gIC8vIHdpbmQgMiA9PiAxIGhpdCAgICAgICAgICAgICAgID0+IDZcbiAgLy8gd2luZCAzID0+IDItMyBoaXRzIDhNUCAgICAgICAgPT4gOFxuXG4gIC8vIGZpcmUgMSA9PiAxIGhpdCAgICAgICAgICAgICAgID0+IDNcbiAgLy8gZmlyZSAyID0+IDMgaGl0cyAgICAgICAgICAgICAgPT4gNVxuICAvLyBmaXJlIDMgPT4gNC02IGhpdHMgMTZNUCAgICAgICA9PiA3XG5cbiAgLy8gd2F0ZXIgMSA9PiAxIGhpdCAgICAgICAgICAgICAgPT4gM1xuICAvLyB3YXRlciAyID0+IDEtMiBoaXRzICAgICAgICAgICA9PiA2XG4gIC8vIHdhdGVyIDMgPT4gMy02IGhpdHMgMTZNUCAgICAgID0+IDhcblxuICAvLyB0aHVuZGVyIDEgPT4gMS0yIGhpdHMgc3ByZWFkICA9PiAzXG4gIC8vIHRodW5kZXIgMiA9PiAxLTMgaGl0cyBzcHJlYWQgID0+IDVcbiAgLy8gdGh1bmRlciAzID0+IDctMTAgaGl0cyA0ME1QICAgPT4gN1xuXG4gIHJvbS5vYmplY3RzWzB4MTBdLmF0ayA9IDM7IC8vIHdpbmQgMVxuICByb20ub2JqZWN0c1sweDExXS5hdGsgPSA2OyAvLyB3aW5kIDJcbiAgcm9tLm9iamVjdHNbMHgxMl0uYXRrID0gODsgLy8gd2luZCAzXG5cbiAgcm9tLm9iamVjdHNbMHgxOF0uYXRrID0gMzsgLy8gZmlyZSAxXG4gIHJvbS5vYmplY3RzWzB4MTNdLmF0ayA9IDU7IC8vIGZpcmUgMlxuICByb20ub2JqZWN0c1sweDE5XS5hdGsgPSA1OyAvLyBmaXJlIDJcbiAgcm9tLm9iamVjdHNbMHgxN10uYXRrID0gNzsgLy8gZmlyZSAzXG4gIHJvbS5vYmplY3RzWzB4MWFdLmF0ayA9IDc7IC8vIGZpcmUgM1xuXG4gIHJvbS5vYmplY3RzWzB4MTRdLmF0ayA9IDM7IC8vIHdhdGVyIDFcbiAgcm9tLm9iamVjdHNbMHgxNV0uYXRrID0gNjsgLy8gd2F0ZXIgMlxuICByb20ub2JqZWN0c1sweDE2XS5hdGsgPSA4OyAvLyB3YXRlciAzXG5cbiAgcm9tLm9iamVjdHNbMHgxY10uYXRrID0gMzsgLy8gdGh1bmRlciAxICh1bnVzZWQgYWxpYXM/KVxuICByb20ub2JqZWN0c1sweDFkXS5hdGsgPSAzOyAvLyB0aHVuZGVyIDFcbiAgcm9tLm9iamVjdHNbMHgxZV0uYXRrID0gNTsgLy8gdGh1bmRlciAyXG4gIHJvbS5vYmplY3RzWzB4MWJdLmF0ayA9IDc7IC8vIHRodW5kZXIgM1xuICByb20ub2JqZWN0c1sweDFmXS5hdGsgPSA3OyAvLyB0aHVuZGVyIDNcblxuICBpZiAoZmxhZ3Muc2xvd0Rvd25Ub3JuYWRvKCkpIHtcbiAgICAvLyBUT0RPIC0gdG9ybmFkbyAob2JqIDEyKSA9PiBzcGVlZCAwNyBpbnN0ZWFkIG9mIDA4XG4gICAgLy8gICAgICAtIGxpZmV0aW1lIGlzIDQ4MCA9PiA3MCBtYXliZSB0b28gbG9uZywgNjAgc3dlZXQgc3BvdD9cbiAgICBjb25zdCB0b3JuYWRvID0gcm9tLm9iamVjdHNbMHgxMl07XG4gICAgdG9ybmFkby5zcGVlZCA9IDB4MDc7XG4gICAgdG9ybmFkby5kYXRhWzB4MGNdID0gMHg2MDsgLy8gaW5jcmVhc2UgbGlmZXRpbWUgKDQ4MCkgYnkgMjAlXG4gIH1cbn1cblxuLy8gQWRkIGNvZGUgdG8gZW5zdXJlIERyYXlnb24gMiBhbmQgR2lhbnQgSW5zZWN0IHJlc3Bhd24gd2l0aG91dCB0aGVpclxuLy8gaXRlbXMgb25jZSB0aGV5J3ZlIGJlZW4gdXNlZC5cbmZ1bmN0aW9uIHByZXZlbnRCb3NzU29mdGxvY2tzKHJvbTogUm9tKSB7XG4gIGNvbnN0IHRyaWdnZXIgPSByb20udHJpZ2dlcigweGEwKTtcbiAgdHJpZ2dlci51c2VkID0gdHJ1ZTtcbiAgdHJpZ2dlci5jb25kaXRpb25zID0gW107XG4gIHRyaWdnZXIuZmxhZ3MgPSBbXTtcbiAgdHJpZ2dlci5tZXNzYWdlID0gTWVzc2FnZUlkLm9mKHtwYXJ0OiAwLCBpbmRleDogMCwgYWN0aW9uOiAweDE1fSk7XG5cbiAgcm9tLm9iamVjdHNbMHg1ZV0uZGF0YVsweGRdID0gMHhmZTsgLy8gb2JqZWN0IGFjdGlvbiA3ZSBpbnN0ZWFkIG9mIDdmXG4gIHJvbS5pdGVtcy5JbnNlY3RGbHV0ZS5pdGVtVXNlRGF0YVswXS5mbGFncyA9IFtyb20uZmxhZ3MuVXNlZEluc2VjdEZsdXRlLmlkXTtcbn1cblxuZnVuY3Rpb24gZml4T3BlbFN0YXR1ZShyb206IFJvbSkge1xuICAvLyBEb24ndCBzZWxlY3QgT3BlbCBTdGF0dWUgYXQgYWxsLiAgVGhpcyBwYXRjaGVzIHRoZSB0YWJsZSBhdCAkMjEwM2JcbiAgLy8gdGhhdCB0cmFuc2xhdGVzIGFuIGl0ZW0gSUQgdG8gYSBcInNlbGVjdGVkIGl0ZW1cIiBpbmRleCwgaS5lLiBlYWNoXG4gIC8vIHR5cGUgb2YgaXRlbSBtYXBzIHRvIGEgc2VyaWVzIDEuLk4uICBJbiB0aGlzIGNhc2UsIHdlIGp1c3QgcmVtYXBcbiAgLy8gT3BlbCBTdGF0dWUgdG8gemVybyBzbyB0aGF0IGl0IGxvb2tzIGxpa2Ugbm90aGluZyBpcyBzZWxlY3RlZC5cbiAgcm9tLml0ZW1zLk9wZWxTdGF0dWUuc2VsZWN0ZWRJdGVtVmFsdWUgPSAwO1xufVxuXG5mdW5jdGlvbiBmaXhDb2luU3ByaXRlcyhyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IHBhZ2Ugb2YgWzB4NjAsIDB4NjQsIDB4NjUsIDB4NjYsIDB4NjcsIDB4NjgsXG4gICAgICAgICAgICAgICAgICAgICAgMHg2OSwgMHg2YSwgMHg2YiwgMHg2YywgMHg2ZCwgMHg2Zl0pIHtcbiAgICBmb3IgKGNvbnN0IHBhdCBvZiBbMCwgMSwgMl0pIHtcbiAgICAgIHJvbS5wYXR0ZXJucy5zZXQocGFnZSA8PCA2LCBwYXQsIHJvbS5wYXR0ZXJucy5nZXQoMHg1ZSA8PCA2LCBwYXQpLnBpeGVscyk7XG4gICAgfVxuICB9XG4gIHJvbS5vYmplY3RzWzB4MGNdLm1ldGFzcHJpdGUgPSAweGE5O1xufVxuXG4vKipcbiAqIEZpeCB0aGUgc29mdGxvY2sgdGhhdCBoYXBwZW5zIHdoZW4geW91IGdvIHRocm91Z2hcbiAqIGEgd2FsbCBiYWNrd2FyZHMgYnkgbW92aW5nIHRoZSBleGl0L2VudHJhbmNlIHRpbGVzXG4gKiB1cCBhIGJpdCBhbmQgYWRqdXN0aW5nIHNvbWUgdGlsZUVmZmVjdHMgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBmaXhSZXZlcnNlV2FsbHMocm9tOiBSb20pIHtcbiAgLy8gYWRqdXN0IHRpbGUgZWZmZWN0IGZvciBiYWNrIHRpbGVzIG9mIGlyb24gd2FsbFxuICBmb3IgKGNvbnN0IHQgaW4gWzB4MDQsIDB4MDUsIDB4MDgsIDB4MDldKSB7XG4gICAgcm9tLnRpbGVFZmZlY3RzWzB4YmMgLSAweGIzXS5lZmZlY3RzW3RdID0gMHgxODtcbiAgICByb20udGlsZUVmZmVjdHNbMHhiNSAtIDB4YjNdLmVmZmVjdHNbdF0gPSAweDE4O1xuICB9XG4gIC8vIFRPRE8gLSBtb3ZlIGFsbCB0aGUgZW50cmFuY2VzIHRvIHk9MjAgYW5kIGV4aXRzIHRvIHl0PTAxXG59XG5cbi8qKiBNYWtlIGEgbGFuZCBicmlkZ2UgaW4gdW5kZXJncm91bmQgY2hhbm5lbCAqL1xuZnVuY3Rpb24gdW5kZXJncm91bmRDaGFubmVsTGFuZEJyaWRnZShyb206IFJvbSkge1xuICBjb25zdCB7dGlsZXN9ID0gcm9tLnNjcmVlbnNbMHhhMV07XG4gIHRpbGVzWzB4MjhdID0gMHg5ZjtcbiAgdGlsZXNbMHgzN10gPSAweDIzO1xuICB0aWxlc1sweDM4XSA9IDB4MjM7IC8vIDB4OGU7XG4gIHRpbGVzWzB4MzldID0gMHgyMTtcbiAgdGlsZXNbMHg0N10gPSAweDhkO1xuICB0aWxlc1sweDQ4XSA9IDB4OGY7XG4gIHRpbGVzWzB4NTZdID0gMHg5OTtcbiAgdGlsZXNbMHg1N10gPSAweDlhO1xuICB0aWxlc1sweDU4XSA9IDB4OGM7XG59XG5cbmZ1bmN0aW9uIGZvZ0xhbXBOb3RSZXF1aXJlZChyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7QWx3YXlzVHJ1ZSwgSW5qdXJlZERvbHBoaW4sIEZvZ0xhbXAsXG4gICAgICAgICAgICBLZW5zdUluQ2FiaW4sIFJldHVybmVkRm9nTGFtcH0sXG4gICAgaXRlbXM6IHtTaGVsbEZsdXRlfSxcbiAgICBsb2NhdGlvbnM6IHtCb2F0SG91c2UsIFBvcnRvYV9GaXNoZXJtYW5Ib3VzZX0sXG4gICAgbnBjcyxcbiAgfSA9IHJvbTtcbiAgICBcbiAgLy8gTmVlZCB0byBtYWtlIHNldmVyYWwgY2hhbmdlcy5cbiAgLy8gKDEpIGRvbHBoaW4gb25seSByZXF1aXJlcyBzaGVsbCBmbHV0ZSwgbWFrZSB0aGUgZmxhZyBjaGVjayBmcmVlXG4gIC8vICAgICB1bmxlc3MgaGVhbGluZyBpcyByZXF1aXJlZC5cbiAgY29uc3QgcmVxdWlyZUhlYWxlZCA9IGZsYWdzLnJlcXVpcmVIZWFsZWREb2xwaGluVG9SaWRlKCk7XG4gIFNoZWxsRmx1dGUuaXRlbVVzZURhdGFbMF0ud2FudCA9XG4gICAgICByZXF1aXJlSGVhbGVkID8gSW5qdXJlZERvbHBoaW4uaWQgOiBBbHdheXNUcnVlLmlkO1xuICAvLyAoMikga2Vuc3UgNjggKEA2MSkgZHJvcHMgYW4gaXRlbSAoNjcgbWFnaWMgcmluZylcbiAgbnBjcy5LZW5zdUluQ2FiaW4uZGF0YVswXSA9IDB4Njc7XG4gIG5wY3MuS2Vuc3VJbkNhYmluLmxvY2FsRGlhbG9ncy5nZXQoLTEpIVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MGE7XG4gIG5wY3MuS2Vuc3VJbkNhYmluLmxvY2FsRGlhbG9ncy5nZXQoLTEpIVswXS5mbGFncyA9IFtdO1xuICBucGNzLktlbnN1SW5DYWJpbi5zcGF3bkNvbmRpdGlvbnMuc2V0KEJvYXRIb3VzZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbUmV0dXJuZWRGb2dMYW1wLmlkLCB+S2Vuc3VJbkNhYmluLmlkXSk7XG4gIC8vICgzKSBmaXNoZXJtYW4gNjQgc3Bhd25zIG9uIGZvZyBsYW1wIHJhdGhlciB0aGFuIHNoZWxsIGZsdXRlXG4gIG5wY3MuRmlzaGVybWFuLnNwYXduQ29uZGl0aW9ucy5zZXQoUG9ydG9hX0Zpc2hlcm1hbkhvdXNlLmlkLCBbRm9nTGFtcC5pZF0pO1xuXG4gIC8vICg0KSBmaXggdXAgaXRlbWdldCA2NyBmcm9tIGl0ZW1nZXQgNjQgKGRlbGV0ZSB0aGUgZmxhZylcbiAgcm9tLml0ZW1HZXRzWzB4NjRdLmZsYWdzID0gW107XG4gIHJvbS5pdGVtR2V0c1sweDY3XS5jb3B5RnJvbShyb20uaXRlbUdldHNbMHg2NF0pO1xuICAvL3JvbS5pdGVtR2V0c1sweDY3XS5mbGFncyA9IFsweDBjMV07XG5cbiAgLy8gVE9ETyAtIGdyYXBoaWNzIHNjcmV3ZWQgdXAgLSBmaWd1cmUgb3V0IGlmIG9iamVjdCBhY3Rpb24gaXMgY2hhbmdpbmdcbiAgLy8gdGhlIHBhdHRlcm4gdGFibGVzIGJhc2VkIG9uIChlLmcuKSAkNjAwLHggbWF5YmU/ICBDYW4gd2UgcHJldmVudCBpdD9cblxuICAvLyBUT0RPIC0gYWRkIGEgbm90ZXMgZmlsZSBhYm91dCB0aGlzLlxuXG59XG5cbi8qKlxuICogUmVtb3ZlIHRpbWVyIHNwYXducyBmcm9tIGFsbCBjaGVzdHMuICBNaW1pY3MgaGF2ZSBhbHJlYWR5IGJlZW5cbiAqIHJlbnVtYmVyZWQgdG8gYmUgdW5pcXVlIChwcmUtcGFyc2UpLiAgTm90ZSB0aGF0IHRoZSByZW51bWJlcmluZ1xuICogcmVxdWlyZXMgYW4gYXNzZW1ibHkgY2hhbmdlICgkM2QzZmQgaW4gcHJlc2h1ZmZsZS5zKS5cbiAqL1xuZnVuY3Rpb24gZml4Q2hlc3RzKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3QgbG9jIG9mIHJvbS5sb2NhdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbG9jLnNwYXducykge1xuICAgICAgaWYgKHMuaXNDaGVzdCgpKSBzLnRpbWVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIFRPRE8gLSBmaW5kIGEgYmV0dGVyIHdheSB0byBidW5kbGUgYXNtIGNoYW5nZXM/IC0gYnV0IGl0J3MgYSBtZXNzXG4gIC8vICAgICAgICB3aXRoIHNoYXJpbmcgbGFiZWxzLCB0cmFja2luZyBjbG9iYmVyaW5nLCBldGMuXG4gIC8vIHJvbS5hc3NlbWJsZSgpXG4gIC8vICAgICAuJCgnYWRjICQxMCcpXG4gIC8vICAgICAuYmVxKCdsYWJlbCcpXG4gIC8vICAgICAubHNoKClcbiAgLy8gICAgIC5sc2goYCR7YWRkcn0seGApXG4gIC8vICAgICAubGFiZWwoJ2xhYmVsJyk7XG4gIC8vIHJvbS5wYXRjaCgpXG4gIC8vICAgICAub3JnKDB4M2QzZmQpXG4gIC8vICAgICAuYnl0ZSgweGIwKTtcblxuICAvLyByb20uY29kZS5yZXBsYWNlKDB4M2MxOTIsIDB4M2MxYTcsIGBcbiAgLy8gICAgIGFzbFxuICAvLyAgICAgYWRjICQxMCAgOyBkbyBzb21ldGhpbmdcbiAgLy8gICAgIGJuZSArXG4gIC8vICAgICAgcnRzXG4gIC8vICAgKyBqbXAgRm9vQmFyYCk7XG4gIC8vIHJvbS5jb2RlLnJlcGxhY2VFeGFjdChzdGFydCwgZW5kLCBjb2RlKTtcbiAgLy8gcm9tLmNvZGUuaW5zZXJ0KHBhZ2UsIGBcbiAgLy8gICAgIExhYmVsOiAgOyB1c2FibGUgZnJvbSBlbHNld2hlcmU/XG4gIC8vICAgICAtIGFzbFxuICAvLyAgICAgICBiY2MgLVxuICAvLyAgICAgICBydHNgKTtcbn1cblxuZnVuY3Rpb24gYWRqdXN0R29hRm9ydHJlc3NUcmlnZ2Vycyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCBsID0gcm9tLmxvY2F0aW9ucztcbiAgLy8gTW92ZSBLZWxiZXNxdWUgMiBvbmUgZnVsbCB0aWxlIGxlZnQuXG4gIGwuR29hRm9ydHJlc3NfS2VsYmVzcXVlLnNwYXduc1swXS54IC09IDE2O1xuICAvLyBSZW1vdmUgc2FnZSBzY3JlZW4gbG9ja3MgKGV4Y2VwdCBLZW5zdSkuXG4gIGwuR29hRm9ydHJlc3NfWmVidS5zcGF3bnMuc3BsaWNlKDEsIDEpOyAvLyB6ZWJ1IHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19Ub3JuZWwuc3Bhd25zLnNwbGljZSgyLCAxKTsgLy8gdG9ybmVsIHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19Bc2luYS5zcGF3bnMuc3BsaWNlKDIsIDEpOyAvLyBhc2luYSBzY3JlZW4gbG9jayB0cmlnZ2VyXG4gIGwuR29hRm9ydHJlc3NfS2Vuc3Uuc3Bhd25zLnNwbGljZSgzLCAxKTsgLy8ga2Vuc3UgaHVtYW4gc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX0tlbnN1LnNwYXducy5zcGxpY2UoMSwgMSk7IC8vIGtlbnN1IHNsaW1lIHNjcmVlbiBsb2NrIHRyaWdnZXJcbn1cblxuZnVuY3Rpb24gYWxhcm1GbHV0ZUlzS2V5SXRlbShyb206IFJvbSwgZmxhZ3M6RmxhZ1NldCk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgaXRlbXM6IHtBbGFybUZsdXRlfSxcbiAgICBmbGFnczoge1RhbGtlZFRvWmVidVN0dWRlbnQsIFplYnVTdHVkZW50fSxcbiAgICBsb2NhdGlvbnM6IHtNZXphbWVTaHJpbmUsIExlYWZfU3R1ZGVudEhvdXNlLCBXYXRlcmZhbGxDYXZlNCwgWmVidUNhdmV9LFxuICAgIG5wY3M6IHtXaW5kbWlsbEd1YXJkLCBaZWJ1fSxcbiAgfSA9IHJvbTtcblxuICAvLyBNb3ZlIGFsYXJtIGZsdXRlIHRvIHRoaXJkIHJvd1xuICByb20uaXRlbUdldHNbMHgzMV0uaW52ZW50b3J5Um93U3RhcnQgPSAweDIwO1xuICAvLyBFbnN1cmUgYWxhcm0gZmx1dGUgY2Fubm90IGJlIGRyb3BwZWRcbiAgLy8gcm9tLnByZ1sweDIxMDIxXSA9IDB4NDM7IC8vIFRPRE8gLSByb20uaXRlbXNbMHgzMV0uPz8/XG4gIEFsYXJtRmx1dGUudW5pcXVlID0gdHJ1ZTtcbiAgLy8gRW5zdXJlIGFsYXJtIGZsdXRlIGNhbm5vdCBiZSBzb2xkXG4gIEFsYXJtRmx1dGUuYmFzZVByaWNlID0gMDtcblxuICBcbiAgaWYgKGZsYWdzLnplYnVTdHVkZW50R2l2ZXNJdGVtKCkpIHtcbiAgICAvLyBaZWJ1IHN0dWRlbnQgKGFrYSB3aW5kbWlsbCBndWFyZCk6IHNlY29uZGFyeSBpdGVtIC0+IGFsYXJtIGZsdXRlXG4gICAgV2luZG1pbGxHdWFyZC5kYXRhWzFdID0gMHgzMTtcbiAgfSBlbHNlIHtcbiAgICAvLyBBY3R1YWxseSBtYWtlIHVzZSBvZiB0aGUgVGFsa2VkVG9aZWJ1U3R1ZGV0IGZsYWc7XG4gICAgV2luZG1pbGxHdWFyZC5kYXRhWzFdID0gMHhmZjsgLy8gaW5kaWNhdGUgbm90aGluZyB0aGVyZTogbm8gc2xvdC5cbiAgICBjb25zdCBkaWFsb2cgPSBXaW5kbWlsbEd1YXJkLmRpYWxvZyhMZWFmX1N0dWRlbnRIb3VzZSlbMF07XG4gICAgZGlhbG9nLmNvbmRpdGlvbiA9IH5UYWxrZWRUb1plYnVTdHVkZW50LmlkO1xuICAgIGRpYWxvZy5mbGFncy5wdXNoKFRhbGtlZFRvWmVidVN0dWRlbnQuaWQpO1xuICAgIHJlcGxhY2UoWmVidS5zcGF3bnMoWmVidUNhdmUpLCBaZWJ1U3R1ZGVudC5pZCwgVGFsa2VkVG9aZWJ1U3R1ZGVudC5pZCk7XG4gICAgLy8gQWxhcm0gZmx1dGUgYW5kIGEgbWVkaWNhbCBoZXJiIGFyZSBpbiBjaGVzdHMgaW4gbWV6YW1lXG4gICAgTWV6YW1lU2hyaW5lLnNwYXducy5wdXNoKFNwYXduLm9mKHtzY3JlZW46IDAsIHRpbGU6IDB4OWIsIHR5cGU6IDIsIGlkOiAweDMxfSkpO1xuICAgIE1lemFtZVNocmluZS5zcGF3bnMucHVzaChTcGF3bi5vZih7c2NyZWVuOiAwLCB0aWxlOiAweDk1LCB0eXBlOiAyLCBpZDogMHg0OX0pKTtcbiAgICByb20uaXRlbUdldHNbMHg0OV0uaXRlbUlkID0gcm9tLml0ZW1zLk1lZGljYWxIZXJiLmlkO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFsYXJtIGZsdXRlIGZyb20gc2hvcHMgKHJlcGxhY2Ugd2l0aCBvdGhlciBpdGVtcylcbiAgLy8gTk9URSAtIHdlIGNvdWxkIHNpbXBsaWZ5IHRoaXMgd2hvbGUgdGhpbmcgYnkganVzdCBoYXJkY29kaW5nIGluZGljZXMuXG4gIC8vICAgICAgLSBpZiB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gaGFwcGVuIGVhcmx5LCBpdCdzIGFsbCB0aGUgc2FtZS5cbiAgY29uc3QgcmVwbGFjZW1lbnRzID0gW1xuICAgIFsweDIxLCAwLjcyXSwgLy8gZnJ1aXQgb2YgcG93ZXIsIDcyJSBvZiBjb3N0XG4gICAgWzB4MWYsIDAuOV0sIC8vIGx5c2lzIHBsYW50LCA5MCUgb2YgY29zdFxuICBdO1xuICBsZXQgaiA9IDA7XG4gIGZvciAoY29uc3Qgc2hvcCBvZiByb20uc2hvcHMpIHtcbiAgICBpZiAoc2hvcC50eXBlICE9PSBTaG9wVHlwZS5UT09MKSBjb250aW51ZTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gc2hvcC5jb250ZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHNob3AuY29udGVudHNbaV0gIT09IDB4MzEpIGNvbnRpbnVlO1xuICAgICAgY29uc3QgW2l0ZW0sIHByaWNlUmF0aW9dID0gcmVwbGFjZW1lbnRzWyhqKyspICUgcmVwbGFjZW1lbnRzLmxlbmd0aF07XG4gICAgICBzaG9wLmNvbnRlbnRzW2ldID0gaXRlbTtcbiAgICAgIGlmIChyb20uc2hvcERhdGFUYWJsZXNBZGRyZXNzKSB7XG4gICAgICAgIC8vIE5PVEU6IHRoaXMgaXMgYnJva2VuIC0gbmVlZCBhIGNvbnRyb2xsZWQgd2F5IHRvIGNvbnZlcnQgcHJpY2UgZm9ybWF0c1xuICAgICAgICBzaG9wLnByaWNlc1tpXSA9IE1hdGgucm91bmQoc2hvcC5wcmljZXNbaV0gKiBwcmljZVJhdGlvKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGFuZ2UgZmx1dGUgb2YgbGltZSBjaGVzdCdzIChub3ctdW51c2VkKSBpdGVtZ2V0IHRvIGhhdmUgbWVkaWNhbCBoZXJiXG4gIHJvbS5pdGVtR2V0c1sweDViXS5pdGVtSWQgPSAweDFkO1xuICAvLyBDaGFuZ2UgdGhlIGFjdHVhbCBzcGF3biBmb3IgdGhhdCBjaGVzdCB0byBiZSB0aGUgbWlycm9yZWQgc2hpZWxkIGNoZXN0XG4gIFdhdGVyZmFsbENhdmU0LnNwYXduKDB4MTkpLmlkID0gMHgxMDtcblxuICAvLyBUT0RPIC0gcmVxdWlyZSBuZXcgY29kZSBmb3IgdHdvIHVzZXNcbn1cblxuZnVuY3Rpb24gYnJva2FoYW5hV2FudHNNYWRvMShyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7ZmxhZ3M6IHtLYXJtaW5lLCBNYWRvMX0sIG5wY3M6IHtCcm9rYWhhbmF9fSA9IHJvbTtcbiAgY29uc3QgZGlhbG9nID0gYXNzZXJ0KEJyb2thaGFuYS5sb2NhbERpYWxvZ3MuZ2V0KC0xKSlbMF07XG4gIGlmIChkaWFsb2cuY29uZGl0aW9uICE9PSB+S2FybWluZS5pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQmFkIGJyb2thaGFuYSBjb25kaXRpb246ICR7ZGlhbG9nLmNvbmRpdGlvbn1gKTtcbiAgfVxuICBkaWFsb2cuY29uZGl0aW9uID0gfk1hZG8xLmlkO1xufVxuXG5mdW5jdGlvbiByZXF1aXJlSGVhbGVkRG9scGhpbihyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtJbmp1cmVkRG9scGhpbiwgU2hlbGxGbHV0ZX0sXG4gICAgbnBjczoge0Zpc2hlcm1hbiwgRmlzaGVybWFuRGF1Z2h0ZXJ9LFxuICB9ID0gcm9tO1xuICAvLyBOb3JtYWxseSB0aGUgZmlzaGVybWFuICgkNjQpIHNwYXducyBpbiBoaXMgaG91c2UgKCRkNikgaWYgeW91IGhhdmVcbiAgLy8gdGhlIHNoZWxsIGZsdXRlICgyMzYpLiAgSGVyZSB3ZSBhbHNvIGFkZCBhIHJlcXVpcmVtZW50IG9uIHRoZSBoZWFsZWRcbiAgLy8gZG9scGhpbiBzbG90ICgwMjUpLCB3aGljaCB3ZSBrZWVwIGFyb3VuZCBzaW5jZSBpdCdzIGFjdHVhbGx5IHVzZWZ1bC5cbiAgRmlzaGVybWFuLnNwYXduQ29uZGl0aW9ucy5zZXQoMHhkNiwgW1NoZWxsRmx1dGUuaWQsIEluanVyZWREb2xwaGluLmlkXSk7XG4gIC8vIEFsc28gZml4IGRhdWdodGVyJ3MgZGlhbG9nICgkN2IpLlxuICBjb25zdCBkYXVnaHRlckRpYWxvZyA9IEZpc2hlcm1hbkRhdWdodGVyLmxvY2FsRGlhbG9ncy5nZXQoLTEpITtcbiAgZGF1Z2h0ZXJEaWFsb2cudW5zaGlmdChkYXVnaHRlckRpYWxvZ1swXS5jbG9uZSgpKTtcbiAgZGF1Z2h0ZXJEaWFsb2dbMF0uY29uZGl0aW9uID0gfkluanVyZWREb2xwaGluLmlkO1xuICBkYXVnaHRlckRpYWxvZ1sxXS5jb25kaXRpb24gPSB+U2hlbGxGbHV0ZS5pZDtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZVRlbGVwYXRoeUZvckRlbyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtUZWxlcGF0aHl9LFxuICAgIG5wY3M6IHtEZW8sIFNhaGFyYUJ1bm55fSxcbiAgfSA9IHJvbTtcbiAgLy8gTm90IGhhdmluZyB0ZWxlcGF0aHkgKDI0Mykgd2lsbCB0cmlnZ2VyIGEgXCJreXUga3l1XCIgKDFhOjEyLCAxYToxMykgZm9yXG4gIC8vIGJvdGggZ2VuZXJpYyBidW5uaWVzICg1OSkgYW5kIGRlbyAoNWEpLlxuICBTYWhhcmFCdW5ueS5nbG9iYWxEaWFsb2dzLnB1c2goR2xvYmFsRGlhbG9nLm9mKH5UZWxlcGF0aHkuaWQsIFsweDFhLCAweDEyXSkpO1xuICBEZW8uZ2xvYmFsRGlhbG9ncy5wdXNoKEdsb2JhbERpYWxvZy5vZih+VGVsZXBhdGh5LmlkLCBbMHgxYSwgMHgxM10pKTtcbn1cblxuZnVuY3Rpb24gdGVsZXBvcnRPblRodW5kZXJTd29yZChyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtXYXJwU2h5cm9ufSxcbiAgfSA9IHJvbTtcbiAgLy8gaXRlbWdldCAwMyBzd29yZCBvZiB0aHVuZGVyID0+IHNldCAyZmQgc2h5cm9uIHdhcnAgcG9pbnRcbiAgcm9tLml0ZW1HZXRzWzB4MDNdLmZsYWdzLnB1c2goV2FycFNoeXJvbi5pZCk7XG59XG5cbmZ1bmN0aW9uIG5vVGVsZXBvcnRPblRodW5kZXJTd29yZChyb206IFJvbSk6IHZvaWQge1xuICAvLyBDaGFuZ2Ugc3dvcmQgb2YgdGh1bmRlcidzIGFjdGlvbiB0byBiYmUgdGhlIHNhbWUgYXMgb3RoZXIgc3dvcmRzICgxNilcbiAgcm9tLml0ZW1HZXRzWzB4MDNdLmFjcXVpc2l0aW9uQWN0aW9uLmFjdGlvbiA9IDB4MTY7XG59XG5cbmZ1bmN0aW9uIGFkanVzdEl0ZW1OYW1lcyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgaWYgKGZsYWdzLmxlYXRoZXJCb290c0dpdmVTcGVlZCgpKSB7XG4gICAgLy8gcmVuYW1lIGxlYXRoZXIgYm9vdHMgdG8gc3BlZWQgYm9vdHNcbiAgICBjb25zdCBsZWF0aGVyQm9vdHMgPSByb20uaXRlbXNbMHgyZl0hO1xuICAgIGxlYXRoZXJCb290cy5tZW51TmFtZSA9ICdTcGVlZCBCb290cyc7XG4gICAgbGVhdGhlckJvb3RzLm1lc3NhZ2VOYW1lID0gJ1NwZWVkIEJvb3RzJztcbiAgICBpZiAoZmxhZ3MuY2hhbmdlR2FzTWFza1RvSGF6bWF0U3VpdCgpKSB7XG4gICAgICBjb25zdCBnYXNNYXNrID0gcm9tLml0ZW1zWzB4MjldO1xuICAgICAgZ2FzTWFzay5tZW51TmFtZSA9ICdIYXptYXQgU3VpdCc7XG4gICAgICBnYXNNYXNrLm1lc3NhZ2VOYW1lID0gJ0hhem1hdCBTdWl0JztcbiAgICB9XG4gIH1cblxuICAvLyByZW5hbWUgYmFsbHMgdG8gb3Jic1xuICBmb3IgKGxldCBpID0gMHgwNTsgaSA8IDB4MGM7IGkgKz0gMikge1xuICAgIHJvbS5pdGVtc1tpXS5tZW51TmFtZSA9IHJvbS5pdGVtc1tpXS5tZW51TmFtZS5yZXBsYWNlKCdCYWxsJywgJ09yYicpO1xuICAgIHJvbS5pdGVtc1tpXS5tZXNzYWdlTmFtZSA9IHJvbS5pdGVtc1tpXS5tZXNzYWdlTmFtZS5yZXBsYWNlKCdCYWxsJywgJ09yYicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VCcmFjZWxldHNQcm9ncmVzc2l2ZShyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtCYWxsT2ZXaW5kLCBUb3JuYWRvQnJhY2VsZXR9LFxuICAgIG5wY3M6IHtUb3JuZWx9LFxuICB9ID0gcm9tO1xuICAvLyB0b3JuZWwncyB0cmlnZ2VyIG5lZWRzIGJvdGggaXRlbXNcbiAgY29uc3QgdmFuaWxsYSA9IFRvcm5lbC5sb2NhbERpYWxvZ3MuZ2V0KDB4MjEpITtcbiAgY29uc3QgcGF0Y2hlZCA9IFtcbiAgICB2YW5pbGxhWzBdLCAvLyBhbHJlYWR5IGxlYXJuZWQgdGVsZXBvcnRcbiAgICB2YW5pbGxhWzJdLCAvLyBkb24ndCBoYXZlIHRvcm5hZG8gYnJhY2VsZXRcbiAgICB2YW5pbGxhWzJdLmNsb25lKCksIC8vIHdpbGwgY2hhbmdlIHRvIGRvbid0IGhhdmUgb3JiXG4gICAgdmFuaWxsYVsxXSwgLy8gaGF2ZSBicmFjZWxldCwgbGVhcm4gdGVsZXBvcnRcbiAgXTtcbiAgcGF0Y2hlZFsxXS5jb25kaXRpb24gPSB+VG9ybmFkb0JyYWNlbGV0LmlkOyAvLyBkb24ndCBoYXZlIGJyYWNlbGV0XG4gIHBhdGNoZWRbMl0uY29uZGl0aW9uID0gfkJhbGxPZldpbmQuaWQ7IC8vIGRvbid0IGhhdmUgb3JiXG4gIHBhdGNoZWRbM10uY29uZGl0aW9uID0gfjA7ICAgICAvLyBkZWZhdWx0XG4gIFRvcm5lbC5sb2NhbERpYWxvZ3Muc2V0KDB4MjEsIHBhdGNoZWQpO1xufVxuXG5mdW5jdGlvbiBzaW1wbGlmeUludmlzaWJsZUNoZXN0cyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB7Q29yZGVsUGxhaW5FYXN0LCBLaXJpc2FNZWFkb3csIFVuZGVyZ3JvdW5kQ2hhbm5lbH0gPSByb20ubG9jYXRpb25zO1xuICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIFtDb3JkZWxQbGFpbkVhc3QsIEtpcmlzYU1lYWRvdywgVW5kZXJncm91bmRDaGFubmVsXSkge1xuICAgIGZvciAoY29uc3Qgc3Bhd24gb2YgbG9jYXRpb24uc3Bhd25zKSB7XG4gICAgICAvLyBzZXQgdGhlIG5ldyBcImludmlzaWJsZVwiIGZsYWcgb24gdGhlIGNoZXN0LlxuICAgICAgaWYgKHNwYXduLmlzQ2hlc3QoKSkgc3Bhd24uZGF0YVsyXSB8PSAweDIwO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgdGhlIHN0YXR1ZSBvZiBvbnl4IGFuZCBwb3NzaWJseSB0aGUgdGVsZXBvcnQgYmxvY2sgdHJpZ2dlciB0byBDb3JkZWwgV2VzdFxuZnVuY3Rpb24gYWRkQ29yZGVsV2VzdFRyaWdnZXJzKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCkge1xuICBjb25zdCB7Q29yZGVsUGxhaW5FYXN0LCBDb3JkZWxQbGFpbldlc3R9ID0gcm9tLmxvY2F0aW9ucztcbiAgZm9yIChjb25zdCBzcGF3biBvZiBDb3JkZWxQbGFpbkVhc3Quc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzQ2hlc3QoKSB8fCAoZmxhZ3MuZGlzYWJsZVRlbGVwb3J0U2tpcCgpICYmIHNwYXduLmlzVHJpZ2dlcigpKSkge1xuICAgICAgLy8gQ29weSBpZiAoMSkgaXQncyB0aGUgY2hlc3QsIG9yICgyKSB3ZSdyZSBkaXNhYmxpbmcgdGVsZXBvcnQgc2tpcFxuICAgICAgQ29yZGVsUGxhaW5XZXN0LnNwYXducy5wdXNoKHNwYXduLmNsb25lKCkpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaXhSYWJiaXRTa2lwKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2Ygcm9tLmxvY2F0aW9ucy5NdFNhYnJlTm9ydGhfTWFpbi5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4ODYpIHtcbiAgICAgIGlmIChzcGF3bi54ID09PSAweDc0MCkge1xuICAgICAgICBzcGF3bi54ICs9IDE2O1xuICAgICAgICBzcGF3bi55ICs9IDE2O1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaXhGbGlnaHRTdGF0dWVTa2lwKHJvbTogUm9tKTogdm9pZCB7XG4gIC8vIFN3aXRjaCB0byBhIHdpZGVyIGhpdGJveCB0aGF0IHByZXZlbnRzIHNuZWFraW5nIGFyb3VuZCB0aGUgZWRnZS5cbiAgLy8gT3B0aW9uczpcbiAgLy8gICAkMTcgaXMgcmlkaWN1bG91c2x5IHdpZGUsIGJ1dCBhY3R1YWxseSBhIGxpdHRsZSBzaG9ydGVyLlxuICAvLyAgICAgICBNYWluIGRvd25zaWRlIGlzIHRoYXQgdGhlIHZlcnRpY2FsIGFsaWdubWVudCBpcyBkaWZmZXJlbnQsXG4gIC8vICAgICAgIHNvIGl0IGhpdHMgd2hlbiBwbGF5ZXIgaXMgYmVsb3cgYW5kIGRvZXNuJ3QgaGl0IHJpZ2h0IGFib3ZlLlxuICAvLyAgICQwZSBpcyBvbmx5IHNsaWdodGx5IHdpZGVyLCBidXQgdGFsbGVyLiAgVGhpcyBjYXVzZXMgdGhlIGJlYW1cbiAgLy8gICAgICAgdG8gaGl0IHNldmVyYWwgcGl4ZWxzIGF3YXkgZnJvbSBhbiBhY3R1YWwgdmlzdWFsIGNvbGxpc2lvbi5cbiAgLy8gICAkMDYgaXMgdW51c2VkLCBzbyB3ZSBjYW4gcmVwdXJwb3NlIGl0LiAgV2UgYWRkIDYgaG9yaXpvbnRhbFxuICAvLyAgICAgICBwaXhlbHMgYW5kIDIgdmVydGljYWwgcGl4ZWxzIHRvIGVhY2ggc2lkZSBmcm9tIHRoZSBvcmlnaW5hbFxuICAvLyAgICAgICBoaXRib3ggMSwgd2hpY2ggc2VlbXMgdG9cbiAgLy8gICAgICAgYmUgdGhlIG1pbmltdW1cbiAgY29uc3Qgb2xkSGl0Ym94ID0gcm9tLmhpdGJveGVzW3JvbS5vYmplY3RzLmd1YXJkaWFuU3RhdHVlTWlzc2lsZS5oaXRib3hdO1xuICBjb25zdCBuZXdIaXRib3ggPSByb20uaGl0Ym94ZXNbNl07XG4gIHJvbS5vYmplY3RzLmd1YXJkaWFuU3RhdHVlTWlzc2lsZS5oaXRib3ggPSBuZXdIaXRib3guaWQ7XG4gIG5ld0hpdGJveC54MCA9IG9sZEhpdGJveC54MCAtIDY7XG4gIG5ld0hpdGJveC53ICA9IG9sZEhpdGJveC53ICArIDEyO1xuICBuZXdIaXRib3gueTAgPSBvbGRIaXRib3gueTAgLSAyO1xuICBuZXdIaXRib3guaCAgPSBvbGRIaXRib3guaCAgKyA0O1xufVxuXG5mdW5jdGlvbiBwYXRjaFRvb01hbnlJdGVtc01lc3NhZ2Uocm9tOiBSb20pIHtcbiAgcm9tLm1lc3NhZ2VzLnBhcnRzWzB4MjBdWzB4MGZdLnRleHQgKz0gJ1xcbkl0ZW06IFs6SVRFTTpdJztcbn1cblxuZnVuY3Rpb24gYWRkWm9tYmllV2FycChyb206IFJvbSkge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtXYXJwWm9tYmllfSxcbiAgICBsb2NhdGlvbnM6IHtab21iaWVUb3dufSxcbiAgfSA9IHJvbTtcbiAgLy8gTWFrZSBzcGFjZSBmb3IgdGhlIG5ldyBmbGFnIGJldHdlZW4gSm9lbCBhbmQgU3dhblxuICByb20uZmxhZ3MuaW5zZXJ0Wm9tYmllV2FycEZsYWcoKTtcbiAgLy8gVXBkYXRlIHRoZSBtZW51XG4gIGNvbnN0IG1lc3NhZ2UgPSByb20ubWVzc2FnZXMucGFydHNbMHgyMV1bMF07XG4gIG1lc3NhZ2UudGV4dCA9IFtcbiAgICAnIHsxYTpMZWFmfSAgICAgIHsxNjpCcnlubWFlcn0gezFkOk9ha30gJyxcbiAgICAnezBjOk5hZGFyZX1cXCdzICB7MWU6UG9ydG9hfSAgIHsxNDpBbWF6b25lc30gJyxcbiAgICAnezE5OkpvZWx9ICAgICAgWm9tYmllICAgezIwOlN3YW59ICcsXG4gICAgJ3syMzpTaHlyb259ICAgIHsxODpHb2F9ICAgICAgezIxOlNhaGFyYX0nLFxuICBdLmpvaW4oJ1xcbicpO1xuICAvLyBBZGQgYSB0cmlnZ2VyIHRvIHRoZSBlbnRyYW5jZSAtIHRoZXJlJ3MgYWxyZWFkeSBhIHNwYXduIGZvciA4YVxuICAvLyBidXQgd2UgY2FuJ3QgcmV1c2UgdGhhdCBzaW5jZSBpdCdzIHRoZSBzYW1lIGFzIHRoZSBvbmUgb3V0c2lkZVxuICAvLyB0aGUgbWFpbiBFU0kgZW50cmFuY2U7IHNvIHJldXNlIGEgZGlmZmVyZW50IG9uZS5cbiAgY29uc3QgdHJpZ2dlciA9IHJvbS5uZXh0RnJlZVRyaWdnZXIoJ3pvbWJpZSB3YXJwJyk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFtdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe30pO1xuICB0cmlnZ2VyLmZsYWdzID0gW1dhcnBab21iaWUuaWRdOyAvLyBuZXcgd2FycCBwb2ludCBmbGFnXG4gIC8vIEFjdHVhbGx5IHJlcGxhY2UgdGhlIHRyaWdnZXIuXG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgWm9tYmllVG93bi5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4OGEpIHNwYXduLmlkID0gdHJpZ2dlci5pZDtcbiAgfVxuICAvLyBJbnNlcnQgaW50byB0aGUgd2FycCB0YWJsZS5cbiAgcm9tLnRvd25XYXJwLmxvY2F0aW9ucy5zcGxpY2UoNywgMCwgWm9tYmllVG93bi5pZCk7XG4gIGlmIChyb20udG93bldhcnAubG9jYXRpb25zLnBvcCgpICE9PSAweGZmKSB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQnKTtcbiAgLy8gQVNNIGZpeGVzIHNob3VsZCBoYXZlIGhhcHBlbmVkIGluIHByZXNodWZmbGUuc1xufVxuXG5mdW5jdGlvbiBldmlsU3Bpcml0SXNsYW5kUmVxdWlyZXNEb2xwaGluKHJvbTogUm9tKSB7XG4gIHJvbS50cmlnZ2VyKDB4OGEpLmNvbmRpdGlvbnMgPSBbfnJvbS5mbGFncy5DdXJyZW50bHlSaWRpbmdEb2xwaGluLmlkXTtcbiAgcm9tLm1lc3NhZ2VzLnBhcnRzWzB4MWRdWzB4MTBdLnRleHQgPSBgVGhlIGNhdmUgZW50cmFuY2UgYXBwZWFyc1xudG8gYmUgdW5kZXJ3YXRlci4gWW91J2xsXG5uZWVkIHRvIHN3aW0uYDtcbn1cblxuZnVuY3Rpb24gbGVhZkVsZGVySW5TYWJyZUhlYWxzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IGxlYWZFbGRlciA9IHJvbS5ucGNzWzB4MGRdO1xuICBjb25zdCBzdW1taXREaWFsb2cgPSBsZWFmRWxkZXIubG9jYWxEaWFsb2dzLmdldCgweDM1KSFbMF07XG4gIHN1bW1pdERpYWxvZy5tZXNzYWdlLmFjdGlvbiA9IDB4MTc7IC8vIGhlYWwgYW5kIGRpc2FwcGVhci5cbn1cblxuLy8gUHJldmVudCBSYWdlIHNraXAgYnkgYWRkaW5nIHRyZWVzIG9uIGVpdGhlciBzaWRlIG9mIGVudHJhbmNlLlxuLy8gVE9ETyAtIG1ha2UgdGhpcyBvcHRpb25hbD8gYWNjb3VudCBmb3IgaXQgaW4gbG9naWM/XG5mdW5jdGlvbiBwYXRjaExpbWVUcmVlTGFrZShyb206IFJvbSk6IHZvaWQge1xuICByb20ubWV0YXRpbGVzZXRzLmxpbWUuZ2V0VGlsZSgweDdjKS5zZXRFZmZlY3RzKDYpO1xuICByb20ubWV0YXRpbGVzZXRzLmxpbWUuZ2V0VGlsZSgweDdmKS5zZXRFZmZlY3RzKDYpO1xuICByb20ubWV0YXRpbGVzZXRzLmxpbWUuZ2V0VGlsZSgweDdiKS5zZXRUaWxlcyhbMHg3ZiwgMHg3ZiwgMHg3ZiwgMHg3Zl0pXG4gICAgICAuc2V0QXR0cnMoMCkuc2V0RWZmZWN0cyg2KTsgLy8ucmVwbGFjZUluKHJvbS5tZXRhc2NyZWVucy5saW1lVHJlZUxha2UpO1xuXG5cbiAgcm9tLnNjcmVlbnNbMHg3NF0uc2V0MmQoMHg5MCwgW1xuICAgIFsweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCBudWxsLCBudWxsLFxuICAgICAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiXSxcbiAgICBbMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgbnVsbCwgbnVsbCxcbiAgICAgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3Yl0sXG4gIFxuXG5cbiAgLy8gcm9tLnNjcmVlbnNbMHg3NF0uc2V0MmQoMHg5MCwgW1xuICAvLyAgIFsweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdkLCAweDdlLFxuICAvLyAgICAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjXSxcbiAgLy8gICBbMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgbnVsbCwgbnVsbCxcbiAgLy8gICAgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMF0sXG4gIC8vICAgWzB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIG51bGwsIG51bGwsXG4gIC8vICAgIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzBdLFxuXG5cblxuICAgIC8vIERpZmZlcmVudCBvcHRpb25zIHRvIGZpbGwgaW4gdGhlIHNwYWNlcy4uLlxuICAgIC8vIFsweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCBudWxsLCBudWxsLFxuICAgIC8vICAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczLCAweDczXSxcbiAgICAvLyBbMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NSwgMHg2NV0sXG4gICAgLy8gWzB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjcsIDB4NjddLFxuICAgIC8vIFsweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCBudWxsLCBudWxsLFxuICAgIC8vICAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwXSxcbiAgICAvLyBbMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3Zl0sXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50TnBjRGVzcGF3bnMocm9tOiBSb20sIG9wdHM6IEZsYWdTZXQpOiB2b2lkIHtcbiAgZnVuY3Rpb24gcmVtb3ZlPFQ+KGFycjogVFtdLCBlbGVtOiBUKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZihlbGVtKTtcbiAgICBpZiAoaW5kZXggPCAwKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGVsZW1lbnQgJHtlbGVtfSBpbiAke2Fycn1gKTtcbiAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICBmdW5jdGlvbiByZW1vdmVJZjxUPihhcnI6IFRbXSwgcHJlZDogKGVsZW06IFQpID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IGFyci5maW5kSW5kZXgocHJlZCk7XG4gICAgaWYgKGluZGV4IDwgMCkgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBlbGVtZW50IGluICR7YXJyfWApO1xuICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG5cbiAgLy8gZnVuY3Rpb24gZGlhbG9nKGlkOiBudW1iZXIsIGxvYzogbnVtYmVyID0gLTEpOiBMb2NhbERpYWxvZ1tdIHtcbiAgLy8gICBjb25zdCByZXN1bHQgPSByb20ubnBjc1tpZF0ubG9jYWxEaWFsb2dzLmdldChsb2MpO1xuICAvLyAgIGlmICghcmVzdWx0KSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZGlhbG9nICQke2hleChpZCl9IGF0ICQke2hleChsb2MpfWApO1xuICAvLyAgIHJldHVybiByZXN1bHQ7XG4gIC8vIH1cbiAgLy8gZnVuY3Rpb24gc3Bhd25zKGlkOiBudW1iZXIsIGxvYzogbnVtYmVyKTogbnVtYmVyW10ge1xuICAvLyAgIGNvbnN0IHJlc3VsdCA9IHJvbS5ucGNzW2lkXS5zcGF3bkNvbmRpdGlvbnMuZ2V0KGxvYyk7XG4gIC8vICAgaWYgKCFyZXN1bHQpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBzcGF3biBjb25kaXRpb24gJCR7aGV4KGlkKX0gYXQgJCR7aGV4KGxvYyl9YCk7XG4gIC8vICAgcmV0dXJuIHJlc3VsdDtcbiAgLy8gfVxuXG4gIC8vIExpbmsgc29tZSByZWR1bmRhbnQgTlBDczogS2Vuc3UgKDdlLCA3NCkgYW5kIEFrYWhhbmEgKDg4LCAxNilcblxuICBjb25zdCB7XG4gICAgbG9jYXRpb25zOiB7XG4gICAgICBCb2F0SG91c2UsIEJyeW5tYWVyLFxuICAgICAgQ3J5cHRfRHJheWdvbjIsXG4gICAgICBKb2VsX1NoZWQsXG4gICAgICBMZWFmX0VsZGVySG91c2UsXG4gICAgICBNdFNhYnJlTm9ydGhfU3VtbWl0Q2F2ZSwgTXRTYWJyZVdlc3RfVXBwZXIsXG4gICAgICBQb3J0b2FQYWxhY2VfVGhyb25lUm9vbSwgUG9ydG9hX1BhbGFjZUVudHJhbmNlLFxuICAgICAgUG9ydG9hX0FzaW5hUm9vbSwgUG9ydG9hX0ZvcnR1bmVUZWxsZXIsXG4gICAgICBTaHlyb25fVGVtcGxlLCBTdG9tSG91c2UsIFN3YW5fRGFuY2VIYWxsLCBTd2FuX1RhdmVybixcbiAgICAgIFdpbmRtaWxsQ2F2ZSwgV2F0ZXJmYWxsQ2F2ZTQsIFdhdGVyZmFsbFZhbGxleU5vcnRoLFxuICAgICAgWmVidUNhdmUsIFpvbWJpZVRvd25fSG91c2VCYXNlbWVudCxcbiAgICB9LFxuICAgIGl0ZW1zOiB7XG4gICAgICBHbG93aW5nTGFtcCwgS2V5VG9Qcmlzb24sIExvdmVQZW5kYW50LCBTdGF0dWVPZk9ueXgsXG4gICAgfSxcbiAgICBucGNzOiB7XG4gICAgICBBa2FoYW5hIC8qIDE2ICovLCBBa2FoYW5hSW5CcnlubWFlciwgLyogODIgKi8gQXNpbmEgLyogNjIgKi8sXG4gICAgICBBenRlY2FJblNoeXJvbiAvKiA2ZSAqLyxcbiAgICAgIENsYXJrIC8qIDQ0ICovLCBEcmF5Z29uIC8qIGNiICovLCBGb3J0dW5lVGVsbGVyIC8qIDM5ICovLFxuICAgICAgS2Vuc3UgLyogN2UgKi8sIEtlbnN1SW5DYWJpbiAvKiA2OCAqLywgS2Vuc3VJblN3YW4gLyogNzQgKi8sXG4gICAgICBMZWFmRWxkZXIgLyogMGQgKi8sIExlYWZSYWJiaXQgLyogMTMgKi8sXG4gICAgICBPYWtDaGlsZCAvKiAxZiAqLywgT2FrRWxkZXIgLyogMWQgKi8sIE9ha01vdGhlciAvKiAxZSAqLyxcbiAgICAgIFBvcnRvYVBhbGFjZUZyb250R3VhcmQgLyogMzQgKi8sIFBvcnRvYVF1ZWVuIC8qIDM4ICovLFxuICAgICAgUG9ydG9hVGhyb25lUm9vbUJhY2tEb29yR3VhcmQgLyogMzMgKi8sIFJhZ2UgLyogYzMgKi8sXG4gICAgICBTdG9tIC8qIDYwICovLCBTdG9uZWRBa2FoYW5hIC8qIDg4ICovLFxuICAgICAgVG9ybmVsIC8qIDVmICovLCBXaW5kbWlsbEd1YXJkIC8qIDE0ICovLCBaZWJ1IC8qIDVlICovLFxuICAgIH0sXG4gICAgZmxhZ3MsXG4gIH0gPSByb207XG5cbiAgS2Vuc3UubG9jYWxEaWFsb2dzLmRlbGV0ZShTd2FuX1RhdmVybi5pZCk7IC8vIHVudXNlZCBkaWFsb2dcbiAgS2Vuc3VJblN3YW4ubGluayhLZW5zdS5pZCk7XG4gIEtlbnN1SW5Td2FuLnVzZWQgPSB0cnVlO1xuICBLZW5zdUluU3dhbi5kYXRhID0gWy4uLktlbnN1LmRhdGFdIGFzIGFueTtcbiAgS2Vuc3UuZGF0YVswXSA9IEdsb3dpbmdMYW1wLmlkO1xuICBTd2FuX0RhbmNlSGFsbC5zcGF3bnMuZmluZChzID0+IHMuaXNOcGMoKSAmJiBzLmlkID09PSBLZW5zdS5pZCkhLmlkID1cbiAgICAgIEtlbnN1SW5Td2FuLmlkO1xuICBMb3ZlUGVuZGFudC5pdGVtVXNlRGF0YVswXS53YW50ID0gMHgxMDAgfCBLZW5zdUluU3dhbi5pZDtcblxuICAvLyBkaWFsb2cgaXMgc2hhcmVkIGJldHdlZW4gODggYW5kIDE2LlxuICBTdG9uZWRBa2FoYW5hLmxpbmtEaWFsb2coQWthaGFuYS5pZCk7XG5cbiAgLy8gTWFrZSBhIG5ldyBOUEMgZm9yIEFrYWhhbmEgaW4gQnJ5bm1hZXI7IG90aGVycyB3b24ndCBhY2NlcHQgdGhlIFN0YXR1ZSBvZiBPbnl4LlxuICAvLyBMaW5raW5nIHNwYXduIGNvbmRpdGlvbnMgYW5kIGRpYWxvZ3MgaXMgc3VmZmljaWVudCwgc2luY2UgdGhlIGFjdHVhbCBOUEMgSURcbiAgLy8gKDE2IG9yIDgyKSBpcyB3aGF0IG1hdHRlcnMgZm9yIHRoZSB0cmFkZS1pblxuICBBa2FoYW5hSW5CcnlubWFlci51c2VkID0gdHJ1ZTtcbiAgQWthaGFuYUluQnJ5bm1hZXIubGluayhBa2FoYW5hLmlkKTtcbiAgQWthaGFuYUluQnJ5bm1hZXIuZGF0YSA9IFsuLi5Ba2FoYW5hLmRhdGFdIGFzIGFueTsgLy8gZW5zdXJlIGdpdmUgaXRlbVxuICBCcnlubWFlci5zcGF3bnMuZmluZChzID0+IHMuaXNOcGMoKSAmJiBzLmlkID09PSBBa2FoYW5hLmlkKSEuaWQgPVxuICAgICAgQWthaGFuYUluQnJ5bm1hZXIuaWQ7XG4gIFN0YXR1ZU9mT255eC5pdGVtVXNlRGF0YVswXS53YW50ID0gMHgxMDAgfCBBa2FoYW5hSW5CcnlubWFlci5pZDtcblxuICAvLyBMZWFmIGVsZGVyIGluIGhvdXNlICgkMGQgQCAkYzApIH4gc3dvcmQgb2Ygd2luZCByZWR1bmRhbnQgZmxhZ1xuICAvLyBkaWFsb2coMHgwZCwgMHhjMClbMl0uZmxhZ3MgPSBbXTtcbiAgLy9yb20uaXRlbUdldHNbMHgwMF0uZmxhZ3MgPSBbXTsgLy8gY2xlYXIgcmVkdW5kYW50IGZsYWdcblxuICAvLyBMZWFkIGVsZGVyIG5lZWRzIHRvIGdpdmUgaXRlbSBldmVuIGlmIHdpbmRtaWxsIGtleSB3YXMgdXNlZC5cbiAgLy8gVGhpcyBpcyBtb3N0bHkgaXJyZWxldmFudCB3aXRoIHZhbmlsbGEgcGxhY2VtZW50LCBidXQgaWYgdGhlIGVsZGVyIGlzIG5vdFxuICAvLyBpbW1lZGlhdGVseSBhdmFpbGFibGUsIGl0IGNhbiBiZWNvbWUgYSBwcm9ibGVtLlxuICBMZWFmRWxkZXIuZGlhbG9nKExlYWZfRWxkZXJIb3VzZSlcbiAgICAgIC5zcGxpY2UoMCwgMCwgLi4uTGVhZkVsZGVyLmRpYWxvZyhMZWFmX0VsZGVySG91c2UpLnNwbGljZSgyLCAxKSk7XG5cbiAgLy8gTGVhZiByYWJiaXQgKCQxMykgbm9ybWFsbHkgc3RvcHMgc2V0dGluZyBpdHMgZmxhZyBhZnRlciBwcmlzb24gZG9vciBvcGVuZWQsXG4gIC8vIGJ1dCB0aGF0IGRvZXNuJ3QgbmVjZXNzYXJpbHkgb3BlbiBtdCBzYWJyZS4gIEluc3RlYWQgKGEpIHRyaWdnZXIgb24gMDQ3XG4gIC8vIChzZXQgYnkgOGQgdXBvbiBlbnRlcmluZyBlbGRlcidzIGNlbGwpLiAgQWxzbyBtYWtlIHN1cmUgdGhhdCB0aGF0IHBhdGggYWxzb1xuICAvLyBwcm92aWRlcyB0aGUgbmVlZGVkIGZsYWcgdG8gZ2V0IGludG8gbXQgc2FicmUuXG4gIExlYWZSYWJiaXQuZGlhbG9nKClbMl0uY29uZGl0aW9uID0gZmxhZ3MuUmVzY3VlZExlYWZFbGRlci5pZDtcbiAgTGVhZlJhYmJpdC5kaWFsb2coKVsyXS5mbGFncy5wdXNoKGZsYWdzLlRhbGtlZFRvTGVhZlJhYmJpdC5pZCk7XG4gIExlYWZSYWJiaXQuZGlhbG9nKClbM10uZmxhZ3MucHVzaChmbGFncy5UYWxrZWRUb0xlYWZSYWJiaXQuaWQpO1xuXG4gIC8vIFdpbmRtaWxsIGd1YXJkIGluIGNhdmUgKCQxNCBAICQwZSkgc2hvdWxkbid0IGRlc3Bhd24gYWZ0ZXIgYWJkdWN0aW9uICgwMzgpLFxuICAvLyBidXQgaW5zdGVhZCBhZnRlciBnaXZpbmcgdGhlIGl0ZW0gKDA4OClcbiAgV2luZG1pbGxHdWFyZC5zcGF3bnMoV2luZG1pbGxDYXZlKVsxXSA9XG4gICAgICB+ZmxhZ3MuV2luZG1pbGxHdWFyZEFsYXJtRmx1dGVUcmFkZWluLmlkO1xuICAvL2RpYWxvZygweDE0LCAweDBlKVswXS5mbGFncyA9IFtdOyAvLyByZW1vdmUgcmVkdW5kYW50IGZsYWcgfiB3aW5kbWlsbCBrZXlcblxuICAvLyBBa2FoYW5hICgkMTYgLyA4OCkgfiBzaGllbGQgcmluZyByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDE2LCAweDU3KVswXS5mbGFncyA9IFtdO1xuICAvLyBEb24ndCBkaXNhcHBlYXIgYWZ0ZXIgZ2V0dGluZyBiYXJyaWVyIChub3RlIDg4J3Mgc3Bhd25zICpub3QqIGxpbmtlZCB0byAxNilcbiAgcmVtb3ZlKEFrYWhhbmEuc3Bhd25zKFdhdGVyZmFsbENhdmU0KSwgfmZsYWdzLkJlaGluZFdoaXJscG9vbC5pZCk7XG4gIHJlbW92ZShTdG9uZWRBa2FoYW5hLnNwYXducyhXYXRlcmZhbGxDYXZlNCksIH5mbGFncy5CZWhpbmRXaGlybHBvb2wuaWQpO1xuXG4gIGZ1bmN0aW9uIHJldmVyc2VEaWFsb2coZHM6IExvY2FsRGlhbG9nW10pOiB2b2lkIHtcbiAgICBkcy5yZXZlcnNlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmV4dCA9IGRzW2kgKyAxXTtcbiAgICAgIGRzW2ldLmNvbmRpdGlvbiA9IG5leHQgPyB+bmV4dC5jb25kaXRpb24gOiB+MDtcbiAgICB9XG4gIH07XG5cbiAgLy8gT2FrIGVsZGVyICgkMWQpIH4gc3dvcmQgb2YgZmlyZSByZWR1bmRhbnQgZmxhZ1xuICAvL29ha0VsZGVyRGlhbG9nWzRdLmZsYWdzID0gW107XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIHRyeSB0byBnaXZlIHRoZSBpdGVtIGZyb20gKmFsbCogcG9zdC1pbnNlY3QgZGlhbG9nc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIGNvbnN0IGRsZyA9IE9ha0VsZGVyLmRpYWxvZygpW2ldO1xuICAgIGlmIChkbGcuY29uZGl0aW9uICE9PSByb20uZmxhZ3MuT2FrRWxkZXIuaWQpIGRsZy5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIH1cblxuICAvLyBPYWsgbW90aGVyICgkMWUpIH4gaW5zZWN0IGZsdXRlIHJlZHVuZGFudCBmbGFnXG4gIC8vIFRPRE8gLSByZWFycmFuZ2UgdGhlc2UgZmxhZ3MgYSBiaXQgKG1heWJlIH4wNDUsIH4wYTAgfjA0MSAtIHNvIHJldmVyc2UpXG4gIC8vICAgICAgLSB3aWxsIG5lZWQgdG8gY2hhbmdlIGJhbGxPZkZpcmUgYW5kIGluc2VjdEZsdXRlIGluIGRlcGdyYXBoXG4gICgoKSA9PiB7XG4gICAgY29uc3QgW2tpbGxlZEluc2VjdCwgZ290SXRlbSwgZ2V0SXRlbSwgZmluZENoaWxkXSA9IE9ha01vdGhlci5kaWFsb2coKTtcbiAgICBmaW5kQ2hpbGQuY29uZGl0aW9uID0gfmZsYWdzLlJlc2N1ZWRDaGlsZC5pZDtcbiAgICAvL2dldEl0ZW0uY29uZGl0aW9uID0gfjB4MjI3O1xuICAgIC8vZ2V0SXRlbS5mbGFncyA9IFtdO1xuICAgIGdvdEl0ZW0uY29uZGl0aW9uID0gfjA7IC8vIGFsd2F5cyB0cnVlXG4gICAgT2FrTW90aGVyLmRpYWxvZygpLnNwbGljZSgwLCA0LCBmaW5kQ2hpbGQsIGdldEl0ZW0sIGtpbGxlZEluc2VjdCwgZ290SXRlbSk7XG4gIH0pKCk7XG4gIC8vLyBvYWtNb3RoZXJEaWFsb2dbMl0uZmxhZ3MgPSBbXTtcbiAgLy8gLy8gRW5zdXJlIHdlIGFsd2F5cyBnaXZlIGl0ZW0gYWZ0ZXIgaW5zZWN0LlxuICAvLyBvYWtNb3RoZXJEaWFsb2dbMF0ubWVzc2FnZS5hY3Rpb24gPSAweDAzO1xuICAvLyBvYWtNb3RoZXJEaWFsb2dbMV0ubWVzc2FnZS5hY3Rpb24gPSAweDAzO1xuICAvLyByZXZlcnNlRGlhbG9nKG9ha01vdGhlckRpYWxvZyk7XG5cbiAgLy8gUmV2ZXJzZSB0aGUgb3RoZXIgb2FrIGRpYWxvZ3MsIHRvby5cbiAgZm9yIChjb25zdCBpIG9mIFsweDIwLCAweDIxLCAweDIyLCAweDdjLCAweDdkXSkge1xuICAgIHJldmVyc2VEaWFsb2cocm9tLm5wY3NbaV0uZGlhbG9nKCkpO1xuICB9XG5cbiAgLy8gU3dhcCB0aGUgZmlyc3QgdHdvIG9hayBjaGlsZCBkaWFsb2dzLlxuICBPYWtDaGlsZC5kaWFsb2coKS51bnNoaWZ0KC4uLk9ha0NoaWxkLmRpYWxvZygpLnNwbGljZSgxLCAxKSk7XG5cbiAgLy8gVGhyb25lIHJvb20gYmFjayBkb29yIGd1YXJkICgkMzMgQCAkZGYpIHNob3VsZCBoYXZlIHNhbWUgc3Bhd24gY29uZGl0aW9uIGFzIHF1ZWVuXG4gIC8vICgwMjAgTk9UIHF1ZWVuIG5vdCBpbiB0aHJvbmUgcm9vbSBBTkQgMDFiIE5PVCB2aWV3ZWQgbWVzaWEgcmVjb3JkaW5nKVxuICBQb3J0b2FUaHJvbmVSb29tQmFja0Rvb3JHdWFyZC5zcGF3bkNvbmRpdGlvbnMuc2V0KFxuICAgICAgUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20uaWQsXG4gICAgICBbfmZsYWdzLlF1ZWVuTm90SW5UaHJvbmVSb29tLmlkLCB+ZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWRdKTtcblxuICAvLyBGcm9udCBwYWxhY2UgZ3VhcmQgKCQzNCkgdmFjYXRpb24gbWVzc2FnZSBrZXlzIG9mZiAwMWIgaW5zdGVhZCBvZiAwMWZcbiAgUG9ydG9hUGFsYWNlRnJvbnRHdWFyZC5kaWFsb2coKVsxXS5jb25kaXRpb24gPSBmbGFncy5NZXNpYVJlY29yZGluZy5pZDtcblxuICAvLyBRdWVlbidzICgkMzgpIGRpYWxvZyBuZWVkcyBxdWl0ZSBhIGJpdCBvZiB3b3JrXG4gIC8vIEdpdmUgaXRlbSAoZmx1dGUgb2YgbGltZSkgZXZlbiBpZiBnb3QgdGhlIHN3b3JkIG9mIHdhdGVyXG4gIFBvcnRvYVF1ZWVuLmRpYWxvZygpWzNdLmNvbmRpdGlvbiA9IGZsYWdzLlN3b3JkT2ZXYXRlci5pZDsgLy8gXCJ5b3UgZm91bmQgc3dvcmRcIlxuICBQb3J0b2FRdWVlbi5kaWFsb2coKVszXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7IC8vICA9PiBhY3Rpb24gMyBpdGVtZ2V0XG4gIC8vIEVuc3VyZSB5b3UgY2FuIGFsd2F5cyBtYWtlIHRoZSBxdWVlbiBnbyBhd2F5LlxuICBQb3J0b2FRdWVlbi5kaWFsb2coKVs0XS5mbGFncy5wdXNoKGZsYWdzLlBvcnRvYVF1ZWVuR29pbmdBd2F5LmlkKTtcbiAgLy8gUXVlZW4gc3Bhd24gY29uZGl0aW9uIGRlcGVuZHMgb24gMDFiIChtZXNpYSByZWNvcmRpbmcpIG5vdCAwMWYgKGJhbGwgb2Ygd2F0ZXIpXG4gIC8vIFRoaXMgZW5zdXJlcyB5b3UgaGF2ZSBib3RoIHN3b3JkIGFuZCBiYWxsIHRvIGdldCB0byBoZXIgKD8/PylcbiAgUG9ydG9hUXVlZW4uc3Bhd25zKFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tKVsxXSA9IH5mbGFncy5NZXNpYVJlY29yZGluZy5pZDtcbiAgUG9ydG9hUXVlZW4uc3Bhd25zKFBvcnRvYV9Bc2luYVJvb20pWzBdID0gZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7XG4gIFBvcnRvYVF1ZWVuLmRpYWxvZygpWzFdLmNvbmRpdGlvbiA9IGZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkOyAvLyByZXZlYWxcblxuICAvLyBGb3J0dW5lIHRlbGxlciAoJDM5KSBzaG91bGQgYWxzbyBub3Qgc3Bhd24gYmFzZWQgb24gbWVzaWEgcmVjb3JkaW5nIHJhdGhlciB0aGFuIG9yYlxuICBGb3J0dW5lVGVsbGVyLnNwYXducyhQb3J0b2FfRm9ydHVuZVRlbGxlcilbMV0gPSB+ZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7XG5cbiAgLy8gQ2xhcmsgKCQ0NCkgbW92ZXMgYWZ0ZXIgdGFsa2luZyB0byBoaW0gKDA4ZCkgcmF0aGVyIHRoYW4gY2FsbWluZyBzZWEgKDA4ZikuXG4gIC8vIFRPRE8gLSBjaGFuZ2UgMDhkIHRvIHdoYXRldmVyIGFjdHVhbCBpdGVtIGhlIGdpdmVzLCB0aGVuIHJlbW92ZSBib3RoIGZsYWdzXG4gIENsYXJrLnNwYXduQ29uZGl0aW9ucy5zZXQoWm9tYmllVG93bl9Ib3VzZUJhc2VtZW50LmlkLCBbfmZsYWdzLkNsYXJrLmlkXSk7XG4gIENsYXJrLnNwYXduQ29uZGl0aW9ucy5zZXQoSm9lbF9TaGVkLmlkLCBbZmxhZ3MuQ2xhcmsuaWRdKTtcbiAgLy9kaWFsb2coMHg0NCwgMHhlOSlbMV0uZmxhZ3MucG9wKCk7IC8vIHJlbW92ZSByZWR1bmRhbnQgaXRlbWdldCBmbGFnXG5cbiAgLy8gQnJva2FoYW5hICgkNTQpIH4gd2FycmlvciByaW5nIHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4NTQpWzJdLmZsYWdzID0gW107XG5cbiAgLy8gRGVvICgkNWEpIH4gcGVuZGFudCByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDVhKVsxXS5mbGFncyA9IFtdO1xuXG4gIC8vIFplYnUgKCQ1ZSkgY2F2ZSBkaWFsb2cgKEAgJDEwKVxuICAvLyBUT0RPIC0gZGlhbG9ncygweDVlLCAweDEwKS5yZWFycmFuZ2UofjB4MDNhLCAweDAwZCwgMHgwMzgsIDB4MDM5LCAweDAwYSwgfjB4MDAwKTtcbiAgWmVidS5sb2NhbERpYWxvZ3Muc2V0KFplYnVDYXZlLmlkLCBbXG4gICAgTG9jYWxEaWFsb2cub2YofmZsYWdzLlRhbGtlZFRvWmVidUluQ2F2ZS5pZCxcbiAgICAgICAgICAgICAgICAgICBbMHgwMCwgMHgxYV0sIFtmbGFncy5UYWxrZWRUb1plYnVJbkNhdmUuaWRdKSxcbiAgICBMb2NhbERpYWxvZy5vZihmbGFncy5MZWFmVmlsbGFnZXJzUmVzY3VlZC5pZCwgWzB4MDAsIDB4MWRdKSxcbiAgICBMb2NhbERpYWxvZy5vZihmbGFncy5MZWFmQWJkdWN0aW9uLmlkLCBbMHgwMCwgMHgxY10pLCAvLyAwMzggbGVhZiBhdHRhY2tlZFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLlplYnVBdFdpbmRtaWxsLmlkLCBbMHgwMCwgMHgxZF0pLCAvLyAwMzkgbGVhcm5lZCByZWZyZXNoXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuVXNlZFdpbmRtaWxsS2V5LmlkLCBbMHgwMCwgMHgxYiwgMHgwM10pLCAvLyA9PiByZWZyZXNoXG4gICAgTG9jYWxEaWFsb2cub2YofjAsIFsweDAwLCAweDFkXSksXG4gIF0pO1xuICAvLyBEb24ndCBkZXNwYXduIG9uIGdldHRpbmcgYmFycmllclxuICByZW1vdmUoWmVidS5zcGF3bnMoWmVidUNhdmUpLCB+ZmxhZ3MuQmVoaW5kV2hpcmxwb29sLmlkKTsgLy8gcmVtb3ZlIDA1MSBOT1QgbGVhcm5lZCBiYXJyaWVyXG5cbiAgLy8gVG9ybmVsICgkNWYpIGluIHNhYnJlIHdlc3QgKCQyMSkgfiB0ZWxlcG9ydCByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDVmLCAweDIxKVsxXS5mbGFncyA9IFtdO1xuICAvLyBEb24ndCBkZXNwYXduIG9uIGdldHRpbmcgYmFycmllclxuICBUb3JuZWwuc3Bhd25Db25kaXRpb25zLmRlbGV0ZShNdFNhYnJlV2VzdF9VcHBlci5pZCk7IC8vIGFsd2F5cyBzcGF3blxuXG4gIC8vIFN0b20gKCQ2MCk6IGRvbid0IGRlc3Bhd24gb24gZ2V0dGluZyBiYXJyaWVyXG4gIFN0b20uc3Bhd25Db25kaXRpb25zLmRlbGV0ZShTdG9tSG91c2UuaWQpOyAvLyByZW1vdmUgMDUxIE5PVCBsZWFybmVkIGJhcnJpZXJcblxuICAvLyBQcmV2ZW50IGRlc3Bhd24gZnJvbSBiYWNrIHJvb20gYWZ0ZXIgY2FsbWluZyBzZWEgKH4wOGYgb3IgfjI4MylcbiAgcmVtb3ZlKEFzaW5hLnNwYXducyhQb3J0b2FfQXNpbmFSb29tKSwgfmZsYWdzLkNhbG1lZEFuZ3J5U2VhLmlkKTtcblxuICAvLyBBZGQgYW4gZXh0cmEgTlBDIGluIFBvcnRvYSB0aHJvbmUgcm9vbSB0byBnaXZlIEZsdXRlIG9mIExpbWUgaWZcbiAgLy8gdGhlIHF1ZWVuIGlzIG5vdCB0aGVyZS5cbiAgLy8gSSB3YW50ZWQgdG8gbWFrZSB0aGlzIGJlIHRoZSBxdWVlbidzIGxhZHktaW4td2FpdGluZywgYnV0IGl0IGRvZXNuJ3RcbiAgLy8gcmVhbGx5IHdvcmsgd2l0aCB0aGUgcGF0dGVybnMgYXMgdGhleSBhcmUuICBXZSBjb3VsZCBzd2l0Y2ggdGhlIDRhIHRvXG4gIC8vIGluc3RlYWQgYmUgNDkgYW5kIHRoZW4gdGhlIGd1YXJkIGJlY29tZXMgdGhlIGxhZHkgKHdlJ2Qgd2FudCB0byBzd2l0Y2hcbiAgLy8gdG8gdGhlIHBpbmsgcGFsZXR0ZSBhcyB3ZWxsKS4gIEJ1dCB0aGF0IGRvZXNuJ3QgcmVhbGx5IGJ1eSB1cyBtdWNoLlxuICBjb25zdCBndWFyZDIgPSByb20ubnBjc1sweDM0XTtcbiAgZ3VhcmQyLnNwYXduQ29uZGl0aW9ucy5zZXQoUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtmbGFncy5NZXNpYVJlY29yZGluZy5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH5mbGFncy5Qb3J0b2FRdWVlbi5pZF0pO1xuICBndWFyZDIubG9jYWxEaWFsb2dzLnNldChQb3J0b2FfUGFsYWNlRW50cmFuY2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkMi5sb2NhbERpYWxvZ3MuZ2V0KC0xKSEpO1xuICBndWFyZDIuZGF0YVswXSA9IHJvbS5pdGVtcy5GbHV0ZU9mTGltZS5pZDtcbiAgY29uc3QgZ3VhcmQyTWVzc2FnZSA9IHJvbS5tZXNzYWdlcy5hbGxvYygpO1xuICBndWFyZDJNZXNzYWdlLnRleHQgPSBcIlRoZSBxdWVlbiBsZWZ0IHRoaXMgZm9yIHlvdS5cIjtcbiAgZ3VhcmQyLmxvY2FsRGlhbG9ncy5zZXQoUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20uaWQsIFtcbiAgICBMb2NhbERpYWxvZy5vZih+ZmxhZ3MuUG9ydG9hUXVlZW4uaWQsIFtndWFyZDJNZXNzYWdlLnBhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmQyTWVzc2FnZS5pZCwgMHgwM10pLFxuICAgIExvY2FsRGlhbG9nLm9mKH4wLCBbMHgwYSwgMHgwZV0pLCAvLyBcIkJlIGNhcmVmdWxcIiAob3IgMTQ6MDQgXCJHb29kIGx1Y2suXCIpXG4gIF0pO1xuICBQb3J0b2FQYWxhY2VfVGhyb25lUm9vbS5zcGF3bnMucHVzaChTcGF3bi5vZih7eXQ6IDMsIHh0OiAxMiwgdHlwZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm5CYW5rOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGd1YXJkMi5pZH0pKTtcblxuICAvLyBLZW5zdSBpbiBjYWJpbiAoJDY4IEAgJDYxKSBuZWVkcyB0byBiZSBhdmFpbGFibGUgZXZlbiBhZnRlciB2aXNpdGluZyBKb2VsLlxuICAvLyBDaGFuZ2UgaGltIHRvIGp1c3QgZGlzYXBwZWFyIGFmdGVyIHNldHRpbmcgdGhlIHJpZGVhYmxlIGRvbHBoaW4gZmxhZyAoMDliKSxcbiAgLy8gYW5kIHRvIG5vdCBldmVuIHNob3cgdXAgYXQgYWxsIHVubGVzcyB0aGUgZm9nIGxhbXAgd2FzIHJldHVybmVkICgwMjEpLlxuICBLZW5zdUluQ2FiaW4uc3Bhd25Db25kaXRpb25zLnNldChCb2F0SG91c2UuaWQsIFt+ZmxhZ3MuQWJsZVRvUmlkZURvbHBoaW4uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzLlJldHVybmVkRm9nTGFtcC5pZF0pO1xuICBLZW5zdUluQ2FiaW4uZGlhbG9nKClbMF0ubWVzc2FnZS5hY3Rpb24gPSAweDAyOyAvLyBkaXNhcHBlYXJcblxuICAvLyBBenRlY2EgaW4gU2h5cm9uICg2ZSkgc2hvdWxkbid0IHNwYXduIGFmdGVyIG1hc3NhY3JlICgwMjcpXG4gIEF6dGVjYUluU2h5cm9uLnNwYXducyhTaHlyb25fVGVtcGxlKS5wdXNoKH5mbGFncy5TaHlyb25NYXNzYWNyZS5pZCk7XG4gIC8vIEFsc28gdGhlIGRpYWxvZyB0cmlnZ2VyICg4Mikgc2hvdWxkbid0IGhhcHBlblxuICByb20udHJpZ2dlcigweDgyKS5jb25kaXRpb25zLnB1c2gofmZsYWdzLlNoeXJvbk1hc3NhY3JlLmlkKTtcblxuICAvLyBLZW5zdSBpbiBsaWdodGhvdXNlICgkNzQvJDdlIEAgJDYyKSB+IHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4NzQsIDB4NjIpWzBdLmZsYWdzID0gW107XG5cbiAgLy8gQXp0ZWNhICgkODMpIGluIHB5cmFtaWQgfiBib3cgb2YgdHJ1dGggcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg4MylbMF0uY29uZGl0aW9uID0gfjB4MjQwOyAgLy8gMjQwIE5PVCBib3cgb2YgdHJ1dGhcbiAgLy9kaWFsb2coMHg4MylbMF0uZmxhZ3MgPSBbXTtcblxuICAvLyBSYWdlIGJsb2NrcyBvbiBzd29yZCBvZiB3YXRlciwgbm90IHJhbmRvbSBpdGVtIGZyb20gdGhlIGNoZXN0XG4gIFJhZ2UuZGlhbG9nKClbMF0uY29uZGl0aW9uID0gZmxhZ3MuU3dvcmRPZldhdGVyLmlkO1xuXG4gIC8vIFJlbW92ZSB1c2VsZXNzIHNwYXduIGNvbmRpdGlvbiBmcm9tIE1hZG8gMVxuICAvLyByb20ubnBjc1sweGM0XS5zcGF3bkNvbmRpdGlvbnMuZGVsZXRlKDB4ZjIpOyAvLyBhbHdheXMgc3Bhd25cblxuICAvLyBEcmF5Z29uIDIgKCRjYiBAIGxvY2F0aW9uICRhNikgc2hvdWxkIGRlc3Bhd24gYWZ0ZXIgYmVpbmcgZGVmZWF0ZWQuXG4gIERyYXlnb24uc3Bhd25Db25kaXRpb25zLnNldChDcnlwdF9EcmF5Z29uMi5pZCwgW35mbGFncy5EcmF5Z29uMi5pZF0pO1xuXG4gIC8vIEZpeCBaZWJ1IHRvIGdpdmUga2V5IHRvIHN0eHkgZXZlbiBpZiB0aHVuZGVyIHN3b3JkIGlzIGdvdHRlbiAoanVzdCBzd2l0Y2ggdGhlXG4gIC8vIG9yZGVyIG9mIHRoZSBmaXJzdCB0d28pLiAgQWxzbyBkb24ndCBib3RoZXIgc2V0dGluZyAwM2Igc2luY2UgdGhlIG5ldyBJdGVtR2V0XG4gIC8vIGxvZ2ljIG9idmlhdGVzIHRoZSBuZWVkLlxuICBaZWJ1LmRpYWxvZyhTaHlyb25fVGVtcGxlKVxuICAgICAgLnVuc2hpZnQoLi4uWmVidS5kaWFsb2coU2h5cm9uX1RlbXBsZSkuc3BsaWNlKDEsIDEpKTtcbiAgLy8gemVidVNoeXJvblswXS5mbGFncyA9IFtdO1xuXG4gIC8vIFNoeXJvbiBtYXNzYWNyZSAoJDgwKSByZXF1aXJlcyBrZXkgdG8gc3R4eVxuICByb20udHJpZ2dlcigweDgwKS5jb25kaXRpb25zID0gW1xuICAgIH5mbGFncy5TaHlyb25NYXNzYWNyZS5pZCxcbiAgICBmbGFncy5UYWxrZWRUb1plYnVJblNoeXJvbi5pZCxcbiAgICBmbGFncy5Td29yZE9mVGh1bmRlci5pZCxcbiAgXTtcblxuICAvLyBFbnRlciBzaHlyb24gKCQ4MSkgc2hvdWxkIHNldCB3YXJwIG5vIG1hdHRlciB3aGF0XG4gIHJvbS50cmlnZ2VyKDB4ODEpLmNvbmRpdGlvbnMgPSBbXTtcblxuICBpZiAob3B0cy5iYXJyaWVyUmVxdWlyZXNDYWxtU2VhKCkpIHtcbiAgICAvLyBMZWFybiBiYXJyaWVyICgkODQpIHJlcXVpcmVzIGNhbG0gc2VhXG4gICAgcm9tLnRyaWdnZXIoMHg4NCkuY29uZGl0aW9ucy5wdXNoKGZsYWdzLkNhbG1lZEFuZ3J5U2VhLmlkKTtcbiAgICAvLyBUT0RPIC0gY29uc2lkZXIgbm90IHNldHRpbmcgMDUxIGFuZCBjaGFuZ2luZyB0aGUgY29uZGl0aW9uIHRvIG1hdGNoIHRoZSBpdGVtXG4gIH1cbiAgLy9yb20udHJpZ2dlcigweDg0KS5mbGFncyA9IFtdO1xuXG4gIC8vIEFkZCBhbiBleHRyYSBjb25kaXRpb24gdG8gdGhlIExlYWYgYWJkdWN0aW9uIHRyaWdnZXIgKGJlaGluZCB6ZWJ1KS4gIFRoaXMgZW5zdXJlc1xuICAvLyBhbGwgdGhlIGl0ZW1zIGluIExlYWYgcHJvcGVyIChlbGRlciBhbmQgc3R1ZGVudCkgYXJlIGdvdHRlbiBiZWZvcmUgdGhleSBkaXNhcHBlYXIuXG4gIHJvbS50cmlnZ2VyKDB4OGMpLmNvbmRpdGlvbnMucHVzaChmbGFncy5UYWxrZWRUb1plYnVJbkNhdmUuaWQpO1xuXG4gIC8vIE1vcmUgd29yayBvbiBhYmR1Y3Rpb24gdHJpZ2dlcnM6XG4gIC8vIDEuIFJlbW92ZSB0aGUgOGQgdHJpZ2dlciBpbiB0aGUgZnJvbnQgb2YgdGhlIGNlbGwsIHN3YXAgaXQgb3V0XG4gIC8vICAgIGZvciBiMiAobGVhcm4gcGFyYWx5c2lzKS5cbiAgcm9tLnRyaWdnZXIoMHg4ZCkudXNlZCA9IGZhbHNlO1xuICBmb3IgKGNvbnN0IHNwYXduIG9mIE10U2FicmVOb3J0aF9TdW1taXRDYXZlLnNwYXducykge1xuICAgIGlmIChzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi5pZCA9PT0gMHg4ZCkgc3Bhd24uaWQgPSAweGIyO1xuICB9XG4gIHJlbW92ZUlmKFdhdGVyZmFsbFZhbGxleU5vcnRoLnNwYXducyxcbiAgICAgICAgICAgc3Bhd24gPT4gc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4OGQpO1xuICAvLyAyLiBTZXQgdGhlIHRyaWdnZXIgdG8gcmVxdWlyZSBoYXZpbmcga2lsbGVkIGtlbGJlc3F1ZS5cbiAgcm9tLnRyaWdnZXIoMHhiMikuY29uZGl0aW9ucy5wdXNoKGZsYWdzLktlbGJlc3F1ZTEuaWQpO1xuICAvLyAzLiBBbHNvIHNldCB0aGUgdHJpZ2dlciB0byBmcmVlIHRoZSB2aWxsYWdlcnMgYW5kIHRoZSBlbGRlci5cbiAgcm9tLnRyaWdnZXIoMHhiMikuZmxhZ3MucHVzaChcbiAgICB+ZmxhZ3MuTGVhZlZpbGxhZ2Vyc0N1cnJlbnRseUFiZHVjdGVkLmlkLFxuICAgIH5mbGFncy5MZWFmRWxkZXJDdXJyZW50bHlBYmR1Y3RlZC5pZCxcbiAgICBmbGFncy5MZWFmVmlsbGFnZXJzUmVzY3VlZC5pZCk7XG4gIC8vIDQuIERvbid0IHRyaWdnZXIgdGhlIGFiZHVjdGlvbiBpbiB0aGUgZmlyc3QgcGxhY2UgaWYga2VsYmVzcXVlIGRlYWRcbiAgcm9tLnRyaWdnZXIoMHg4YykuY29uZGl0aW9ucy5wdXNoKH5mbGFncy5LZWxiZXNxdWUxLmlkKTtcbiAgLy8gNS4gRG9uJ3QgdHJpZ2dlciByYWJiaXQgYmxvY2sgaWYga2VsYmVzcXVlIGRlYWRcbiAgcm9tLnRyaWdnZXIoMHg4NikuY29uZGl0aW9ucy5wdXNoKH5mbGFncy5LZWxiZXNxdWUxLmlkKTsgLy8ga2lsbGVkIGtlbGJlc3F1ZVxuICAvLyA2LiBEb24ndCBmcmVlIHZpbGxhZ2VycyBmcm9tIHVzaW5nIHByaXNvbiBrZXlcbiAgcmVtb3ZlKEtleVRvUHJpc29uLml0ZW1Vc2VEYXRhWzBdLmZsYWdzLFxuICAgICAgICAgfmZsYWdzLkxlYWZWaWxsYWdlcnNDdXJyZW50bHlBYmR1Y3RlZC5pZCk7XG4gIC8vIHJvbS5wcmdbMHgxZTBhM10gPSAweGMwO1xuICAvLyByb20ucHJnWzB4MWUwYTRdID0gMHgwMDtcblxuICAvLyBUT0RPIC0gYWRkaXRpb25hbCB3b3JrIG9uIGFiZHVjdGlvbiB0cmlnZ2VyOlxuICAvLyAgIC0gZ2V0IHJpZCBvZiB0aGUgZmxhZ3Mgb24ga2V5IHRvIHByaXNvbiB1c2VcbiAgLy8gICAtIGFkZCBhIGNvbmRpdGlvbiB0aGF0IGFiZHVjdGlvbiBkb2Vzbid0IGhhcHBlbiBpZiByZXNjdWVkXG4gIC8vIEdldCByaWQgb2YgQk9USCB0cmlnZ2VycyBpbiBzdW1taXQgY2F2ZSwgIEluc3RlYWQsIHRpZSBldmVyeXRoaW5nXG4gIC8vIHRvIHRoZSBlbGRlciBkaWFsb2cgb24gdG9wXG4gIC8vICAgLSBpZiBrZWxiZXNxdWUgc3RpbGwgYWxpdmUsIG1heWJlIGdpdmUgYSBoaW50IGFib3V0IHdlYWtuZXNzXG4gIC8vICAgLSBpZiBrZWxiZXNxdWUgZGVhZCB0aGVuIHRlYWNoIHBhcmFseXNpcyBhbmQgc2V0L2NsZWFyIGZsYWdzXG4gIC8vICAgLSBpZiBwYXJhbHlzaXMgbGVhcm5lZCB0aGVuIHNheSBzb21ldGhpbmcgZ2VuZXJpY1xuICAvLyBTdGlsbCBuZWVkIHRvIGtlZXAgdGhlIHRyaWdnZXIgaW4gdGhlIGZyb250IGluIGNhc2Ugbm9cbiAgLy8gYWJkdWN0aW9uIHlldFxuICAvLyAgIC0gaWYgTk9UIHBhcmFseXNpcyBBTkQgaWYgTk9UIGVsZGVyIG1pc3NpbmcgQU5EIGlmIGtlbGJlcXVlIGRlYWRcbiAgLy8gLS0tPiBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHR3byB3YXlzIHRvIGdldCAobGlrZSByZWZyZXNoKT9cbiAgLy9cbiAgLy8gQWxzbyBhZGQgYSBjaGVjayB0aGF0IHRoZSByYWJiaXQgdHJpZ2dlciBpcyBnb25lIGlmIHJlc2N1ZWQhXG5cblxuXG4gIC8vIFBhcmFseXNpcyB0cmlnZ2VyICgkYjIpIH4gcmVtb3ZlIHJlZHVuZGFudCBpdGVtZ2V0IGZsYWdcbiAgLy9yb20udHJpZ2dlcigweGIyKS5jb25kaXRpb25zWzBdID0gfjB4MjQyO1xuICAvL3JvbS50cmlnZ2VyKDB4YjIpLmZsYWdzLnNoaWZ0KCk7IC8vIHJlbW92ZSAwMzcgbGVhcm5lZCBwYXJhbHlzaXNcblxuICAvLyBMZWFybiByZWZyZXNoIHRyaWdnZXIgKCRiNCkgfiByZW1vdmUgcmVkdW5kYW50IGl0ZW1nZXQgZmxhZ1xuICAvL3JvbS50cmlnZ2VyKDB4YjQpLmNvbmRpdGlvbnNbMV0gPSB+MHgyNDE7XG4gIC8vcm9tLnRyaWdnZXIoMHhiNCkuZmxhZ3MgPSBbXTsgLy8gcmVtb3ZlIDAzOSBsZWFybmVkIHJlZnJlc2hcblxuICAvLyBUZWxlcG9ydCBibG9jayBvbiBtdCBzYWJyZSBpcyBmcm9tIHNwZWxsLCBub3Qgc2xvdFxuICAvLyBOT1RFOiB0aGlzIGlzIG5vdyBkb25lIGluIGZsYWdzLmRlZnJhZ1xuICAvL3JlcGxhY2Uocm9tLnRyaWdnZXIoMHhiYSkuY29uZGl0aW9ucywgfjB4MDNmLCB+ZmxhZ3MuVGVsZXBvcnQuaWQpO1xuXG4gIC8vIFBvcnRvYSBwYWxhY2UgZ3VhcmQgbW92ZW1lbnQgdHJpZ2dlciAoJGJiKSBzdG9wcyBvbiAwMWIgKG1lc2lhKSBub3QgMDFmIChvcmIpXG4gIHJlcGxhY2Uocm9tLnRyaWdnZXIoMHhiYikuY29uZGl0aW9ucywgfmZsYWdzLlJhZ2UuaWQsIH5mbGFncy5NZXNpYVJlY29yZGluZy5pZCk7XG5cbiAgLy8gUmVtb3ZlIHJlZHVuZGFudCB0cmlnZ2VyIDhhIChzbG90IDE2KSBpbiB6b21iaWV0b3duICgkNjUpXG4gIC8vICAtLSBub3RlOiBubyBsb25nZXIgbmVjZXNzYXJ5IHNpbmNlIHdlIHJlcHVycG9zZSBpdCBpbnN0ZWFkLlxuICAvLyBjb25zdCB7em9tYmllVG93bn0gPSByb20ubG9jYXRpb25zO1xuICAvLyB6b21iaWVUb3duLnNwYXducyA9IHpvbWJpZVRvd24uc3Bhd25zLmZpbHRlcih4ID0+ICF4LmlzVHJpZ2dlcigpIHx8IHguaWQgIT0gMHg4YSk7XG5cbiAgLy8gLy8gUmVwbGFjZSBhbGwgZGlhbG9nIGNvbmRpdGlvbnMgZnJvbSAwMGUgdG8gMjQzXG4gIC8vIGZvciAoY29uc3QgbnBjIG9mIHJvbS5ucGNzKSB7XG4gIC8vICAgZm9yIChjb25zdCBkIG9mIG5wYy5hbGxEaWFsb2dzKCkpIHtcbiAgLy8gICAgIGlmIChkLmNvbmRpdGlvbiA9PT0gMHgwMGUpIGQuY29uZGl0aW9uID0gMHgyNDM7XG4gIC8vICAgICBpZiAoZC5jb25kaXRpb24gPT09IH4weDAwZSkgZC5jb25kaXRpb24gPSB+MHgyNDM7XG4gIC8vICAgfVxuICAvLyB9XG59XG5cbi8vIEhhcmQgbW9kZSBmbGFnOiBIYyAtIHplcm8gb3V0IHRoZSBzd29yZCdzIGNvbGxpc2lvbiBwbGFuZVxuZnVuY3Rpb24gZGlzYWJsZVN0YWJzKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3QgbyBvZiBbMHgwOCwgMHgwOSwgMHgyN10pIHtcbiAgICByb20ub2JqZWN0c1tvXS5jb2xsaXNpb25QbGFuZSA9IDA7XG4gIH1cbiAgLy8gQWxzbyB0YWtlIHdhcnJpb3IgcmluZyBvdXQgb2YgdGhlIHBpY3R1cmUuLi4gOnRyb2xsOlxuICAvLyByb20uaXRlbUdldHNbMHgyYl0uaWQgPSAweDViOyAvLyBtZWRpY2FsIGhlcmIgZnJvbSBzZWNvbmQgZmx1dGUgb2YgbGltZSBjaGVja1xuICByb20ubnBjcy5Ccm9rYWhhbmEuZGF0YVswXSA9IHJvbS5pdGVtcy5GcnVpdE9mTGltZS5pZDtcbn1cblxuZnVuY3Rpb24gb3Jic09wdGlvbmFsKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3Qgb2JqIG9mIFsweDEwLCAweDE0LCAweDE4LCAweDFkXSkge1xuICAgIC8vIDEuIExvb3NlbiB0ZXJyYWluIHN1c2NlcHRpYmlsaXR5IG9mIGxldmVsIDEgc2hvdHNcbiAgICByb20ub2JqZWN0c1tvYmpdLnRlcnJhaW5TdXNjZXB0aWJpbGl0eSAmPSB+MHgwNDtcbiAgICAvLyAyLiBJbmNyZWFzZSB0aGUgbGV2ZWwgdG8gMlxuICAgIHJvbS5vYmplY3RzW29ial0ubGV2ZWwgPSAyO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vQm93TW9kZShyb206IFJvbSk6IHZvaWQge1xuICAvLyBJbml0aWFsIHRyaWdnZXIgZ2l2ZXMgXCJ1c2VkIGJvdyBvZiB0cnV0aFwiLlxuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtVc2VkQm93T2ZUcnV0aH0sXG4gICAgbG9jYXRpb25zOiB7Q3J5cHRfRHJheWdvbjIsIE1lemFtZVNocmluZX0sXG4gIH0gPSByb207XG4gIGxldCB0cmlnZ2VyITogVHJpZ2dlcjtcbiAgZm9yIChjb25zdCBzcGF3biBvZiBNZXphbWVTaHJpbmUuc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLnRpbGUgPT09IDB4ODgpIHtcbiAgICAgIHRyaWdnZXIgPSByb20udHJpZ2dlcihzcGF3bi5pZCk7XG4gICAgfVxuICB9XG4gIGlmICghdHJpZ2dlcikgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBzdGFydCB0cmlnZ2VyYCk7XG4gIHRyaWdnZXIuZmxhZ3MucHVzaChVc2VkQm93T2ZUcnV0aC5pZCk7XG4gIC8vIEFkZCBhbiBleGl0IHN0cmFpZ2h0IHRvIGRyYXlnb25cbiAgcm9tLnRpbGVFZmZlY3RzWzB4YjkgLSAweGIzXS5lZmZlY3RzWzB4NThdID0gMDtcbiAgTWV6YW1lU2hyaW5lLm1ldGEuc2V0RXhpdChcbiAgICAgIDAsICdkb29yJywgW0NyeXB0X0RyYXlnb24yLm1ldGEuaWQgPDwgOCB8IDB4MTAsICdlZGdlOmJvdHRvbSddKTtcbn1cblxuLy8gRm9yIG5vdyB0aGlzIGp1c3QgZml4ZXMgdGhlIHNob3QgdG8gYmUgYWxsIGVsZW1lbnRzIGluc3RlYWQgb2Ygbm9uZS5cbmZ1bmN0aW9uIGZpeENyeXN0YWxpcyhyb206IFJvbSkge1xuICByb20ub2JqZWN0c1sweDMzXS5lbGVtZW50cyA9IDB4Zjtcbn1cblxuLy8gVGhlcmUgYXJlIGEgZmV3IG1ldGF0aWxlcyB0aGF0IGhhdmUgaW5jb3JyZWN0IGJlaGF2aW9yIChvbmUgb2Zcbi8vIHRoZSBwaWxsYXIgdGlsZXMgaW4gdGhlIGNyeXB0IHRpbGVzZXQgYW5kIGEgY29ybmVyIHRpbGUgaW4gdGhlXG4vLyBjYXZlIHRpbGVzZXQpLCB3aGljaCBhbGxvd3MgZmx5aW5nIHRocm91Z2ggdGhlbS4gIFRoZSBjcnlwdCB0aWxlXG4vLyBjYW4gY2F1c2UgdGhlIHBsYXllciB0byBnZXQgc3R1Y2sgaWYgdGhleSBnZXQgaGl0IHdoaWxlIGZseWluZ1xuLy8gbmVhciBpdC4gIFRoZSBjYXZlIGNvcm5lciBjYW4gYWxsb3cgc25lYWtpbmcgcGFzdCB0aGUgc3RvbmVkXG4vLyBOUENzIGluIHRoZSB3YXRlcmZhbGwgY2F2ZSB1c2luZyBmbGlnaHQuXG5mdW5jdGlvbiBmaXhGbHlhYmxlV2FsbHMocm9tOiBSb20pIHtcbiAgcm9tLnRpbGVFZmZlY3RzWzB4YjUgLSAweGIzXS5lZmZlY3RzWzB4NzRdID0gNjsgLy8gY2F2ZSBjb3JuZXJcbiAgcm9tLnRpbGVFZmZlY3RzWzB4YjYgLSAweGIzXS5lZmZlY3RzWzB4NDZdID0gNjsgLy8gY3J5cHQgcGlsbGFyXG59XG5cbi8vIFRvbWF0b3MgKGFuZCBvdGhlcnMpIHNob3VsZG4ndCBiZSBhYmxlIHRvIGNyb3NzIHdhdGVyIG9yIHJvbGwgdXAgcmFtcHMuXG5mdW5jdGlvbiBmaXhNb25zdGVyVGVycmFpbihyb206IFJvbSkge1xuICBmb3IgKGNvbnN0IG9iaiBvZiByb20ub2JqZWN0cykge1xuICAgIGlmICghKG9iaiBpbnN0YW5jZW9mIE1vbnN0ZXIpKSBjb250aW51ZTtcbiAgICBpZiAob2JqLmlzUHJvamVjdGlsZSgpIHx8IG9iai5pc0Jvc3MoKSB8fCBvYmouaXNGbHllcigpKSBjb250aW51ZTtcbiAgICBpZiAob2JqID09PSByb20ub2JqZWN0cy5taW1pYykgY29udGludWU7XG4gICAgb2JqLnRlcnJhaW5TdXNjZXB0aWJpbGl0eSB8PSAweDM7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVwbGFjZTxUPihhcnJheTogVFtdLCBvbGQ6IFQsIHJlcGxhY2VtZW50OiBUKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYXJyYXlbaV0gIT09IG9sZCkgY29udGludWU7XG4gICAgYXJyYXlbaV0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCAke29sZH0gaW4gJHthcnJheS5qb2luKCcsJyl9YCk7ICAgICAgXG59XG5cbmZ1bmN0aW9uIGhhcmRjb3JlTW9kZShyb206IFJvbSkge1xuICBmb3IgKGNvbnN0IGxvYyBvZiByb20ubG9jYXRpb25zKSB7XG4gICAgbG9jLmNoZWNrcG9pbnQgPSBsb2Muc2F2ZWFibGUgPSBmYWxzZTtcbiAgfVxufVxuIl19