import { seq } from './util.js';
export const featureMask = {
    'empty': 0x01,
    'pit': 0x02,
    'arena': 0x04,
    'spikes': 0x08,
    'wide': 0x10,
    'river': 0x20,
    'bridge': 0x40,
    'wall': 0x80,
    'ramp': 256,
    'overpass': 512,
    'underpass': 1024,
    'whirlpool': 2048,
    'deadend': 4096,
    'stair:up': 65536,
    'stair:down': 131072,
    'portoa1': 117440512,
    'portoa2': 184549376,
    'portoa3': 218103808,
    'lake': 234881024,
    'lighthouse': 318767104,
    'cabin': 352321536,
    'windmill': 369098752,
    'altar': 419430400,
    'pyramid': 436207616,
    'crypt': 469762048,
    'manual': 1073741824,
    'consolidate': 2147483648,
};
export function icon(arr) {
    if (arr.length != 1)
        throw new Error('Bad icon input');
    const str = arr[0];
    const lines = str.split('\n');
    const full = lines.slice(1).map(l => l.replace(/^\s*\||\|\s*$/g, ''));
    const short = /\S/.test(lines[0]) ? lines[0][0] : full[1][1];
    return { short, full: [full[0], full[1], full[2]] };
}
export function readScreen(spec, ...replacements) {
    const s = spec.split(/\s+/g);
    if (!s[0])
        s.shift();
    if (!s[s.length - 1])
        s.pop();
    if (s.length !== 240)
        throw new Error(`Bad screen definition: ${s.length}`);
    const map = new Map(replacements);
    return Uint8Array.from(s, x => { var _a; return (_a = map.get(x)) !== null && _a !== void 0 ? _a : parseInt(x, 16); });
}
export function upStair(tile, width = 2) {
    const y = tile >>> 4;
    const x = tile & 0xf;
    if (width === 1) {
        const dy = y === 0xe ? 0x2800 : 0x1800;
        const entrance = ((y << 12) + dy) | ((x << 4) + 0x0008);
        return {
            type: 'stair:up',
            dir: 2,
            entrance,
            exits: [tile],
        };
    }
    const entrance = y << 12 | ((x << 4) + (width << 3));
    return {
        type: 'stair:up',
        dir: 0,
        entrance,
        exits: seq(width, i => tile - 0x10 + i),
    };
}
export function downStair(tile, width = 2) {
    const y = tile >>> 4;
    const x = tile & 0xf;
    if (width === 1) {
        const entrance = ((y << 12) - 0x0800) | ((x << 4) + 0x0008);
        return {
            type: 'stair:down',
            dir: 2,
            entrance,
            exits: [tile],
            allowedExits: [tile + 16, tile - 16],
        };
    }
    const entrance = y << 12 | 0x0f00 | ((x << 4) + (width << 3));
    return {
        type: 'stair:down',
        dir: 2,
        entrance,
        exits: seq(width, i => tile + 0x10 + i),
        allowedExits: [...seq(width, i => tile + 0x20 + i),
            ...seq(width, i => tile + i)],
    };
}
export function cave(tile, type = 'cave') {
    return { ...upStair(tile + 16), type };
}
export function door(tile, type = 'door') {
    return { ...upStair(tile, 1), type };
}
export function waterfallCave(tile) {
    const y = tile >>> 4;
    const x = tile & 0xf;
    return {
        type: 'cave',
        dir: 0,
        entrance: y << 12 | x << 4 | 0xf,
        exits: [tile - 0xf, tile + 1],
    };
}
export function topEdge({ left = 7, width = 2, top = 2, manual = false } = {}) {
    return {
        type: 'edge:top',
        manual,
        dir: 0,
        entrance: ((top + 1) << 12) | ((left << 4) + (width << 3)),
        exits: seq(width, i => (top << 4) | (i + left)),
    };
}
export function bottomEdge({ left = 7, width = 2, shift = 0, type = 'edge:bottom', manual = false } = {}) {
    return {
        type, manual,
        dir: 2,
        entrance: 57088 | ((left << 4) + (width << 3) + 16 * shift),
        exits: seq(width, i => 0xe0 | (i + left)),
    };
}
export function bottomEdgeHouse({ left = 7, width = 2, shift = 0 } = {}) {
    return {
        type: 'edge:bottom',
        dir: 2,
        entrance: 44800 | ((left << 4) + (width << 3) + 16 * shift),
        exits: seq(width, i => 0xb0 | (i + left)),
    };
}
export function leftEdge({ top = 7, height = 2, shift = 0 } = {}) {
    return {
        type: 'edge:left',
        dir: 1,
        entrance: ((top << 12) + ((16 * shift) << 8) + (height << 11)) | 0x10,
        exits: seq(height, i => (i + top) << 4),
    };
}
export function rightEdge({ top = 7, height = 2, shift = 0 } = {}) {
    return {
        type: 'edge:right',
        dir: 3,
        entrance: ((top << 12) + ((16 * shift) << 8) + (height << 11)) | 0xef,
        exits: seq(height, i => (i + top) << 4 | 0xf),
    };
}
export function seamlessUp(tile, width = 2) {
    return {
        type: 'seamless:up',
        dir: 0,
        get entrance() { throw new Error('does not make sense'); },
        exits: seq(width, i => (tile + i)),
    };
}
export function seamlessDown(tile, width = 2) {
    return {
        type: 'seamless:down',
        dir: 2,
        get entrance() { throw new Error('does not make sense'); },
        exits: seq(width, i => (tile + i)),
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0YXNjcmVlbmRhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvanMvcm9tL21ldGFzY3JlZW5kYXRhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxXQUFXLENBQUM7QUF1TTlCLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRztJQUV6QixPQUFPLEVBQUUsSUFBSTtJQUNiLEtBQUssRUFBRSxJQUFJO0lBQ1gsT0FBTyxFQUFFLElBQUk7SUFDYixRQUFRLEVBQUUsSUFBSTtJQUNkLE1BQU0sRUFBRSxJQUFJO0lBQ1osT0FBTyxFQUFFLElBQUk7SUFDYixRQUFRLEVBQUUsSUFBSTtJQUNkLE1BQU0sRUFBRSxJQUFJO0lBQ1osTUFBTSxFQUFFLEdBQU87SUFDZixVQUFVLEVBQUUsR0FBTztJQUNuQixXQUFXLEVBQUUsSUFBTztJQUNwQixXQUFXLEVBQUUsSUFBTztJQUNwQixTQUFTLEVBQUUsSUFBTztJQUlsQixVQUFVLEVBQUUsS0FBVTtJQUN0QixZQUFZLEVBQUUsTUFBVTtJQUt4QixTQUFTLEVBQUUsU0FBYTtJQUN4QixTQUFTLEVBQUUsU0FBYTtJQUN4QixTQUFTLEVBQUUsU0FBYTtJQUN4QixNQUFNLEVBQUUsU0FBYTtJQUNyQixZQUFZLEVBQUUsU0FBYTtJQUMzQixPQUFPLEVBQUUsU0FBYTtJQUN0QixVQUFVLEVBQUUsU0FBYTtJQUN6QixPQUFPLEVBQUUsU0FBYTtJQUN0QixTQUFTLEVBQUUsU0FBYTtJQUN4QixPQUFPLEVBQUUsU0FBYTtJQUd0QixRQUFRLEVBQUUsVUFBYTtJQUV2QixhQUFhLEVBQUUsVUFBYTtDQUNwQixDQUFDO0FBY1gsTUFBTSxVQUFVLElBQUksQ0FBQyxHQUF5QjtJQUM1QyxJQUFJLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQztRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN2RCxNQUFNLEdBQUcsR0FB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LElBQUksQ0FBQyxDQUFDLENBQUM7UUFDMUQsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNoRCxDQUFDO0FBQ0osQ0FBQztBQUlELE1BQU0sVUFBVSxVQUFVLENBQUMsRUFBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFDOUIsSUFBSSxHQUFHLGFBQStCLEVBQ3RDLE1BQU0sR0FBRyxLQUFLLEtBQUksRUFBRTtJQUk5QyxPQUFPO1FBQ0wsSUFBSSxFQUFFLE1BQU07UUFDWixHQUFHLEVBQUUsQ0FBQztRQUNOLFFBQVEsRUFBRSxLQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBQzdELEtBQUssRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQzFDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxVQUFVLGVBQWUsQ0FBQyxFQUFDLElBQUksR0FBRyxDQUFDLEVBQ1IsS0FBSyxHQUFHLENBQUMsRUFDVCxLQUFLLEdBQUcsQ0FBQyxFQUFDLEdBQUcsRUFBRTtJQUc5QyxPQUFPO1FBQ0wsSUFBSSxFQUFFLGFBQWE7UUFDbkIsR0FBRyxFQUFFLENBQUM7UUFDTixRQUFRLEVBQUUsS0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQztRQUM3RCxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUMxQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSxRQUFRLENBQUMsRUFBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsRUFBQyxHQUFHLEVBQUU7SUFDNUQsT0FBTztRQUNMLElBQUksRUFBRSxXQUFXO1FBQ2pCLEdBQUcsRUFBRSxDQUFDO1FBQ04sUUFBUSxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUk7UUFDckUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDeEMsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLFVBQVUsU0FBUyxDQUFDLEVBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUFDLEVBQUMsR0FBRyxFQUFFO0lBQzdELE9BQU87UUFDTCxJQUFJLEVBQUUsWUFBWTtRQUNsQixHQUFHLEVBQUUsQ0FBQztRQUNOLFFBQVEsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJO1FBQ3JFLEtBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUM5QyxDQUFDO0FBQ0osQ0FBQztBQUdELE1BQU0sVUFBVSxVQUFVLENBQUMsSUFBWSxFQUFFLEtBQUssR0FBRyxDQUFDO0lBQ2hELE9BQU87UUFDTCxJQUFJLEVBQUUsYUFBYTtRQUNuQixHQUFHLEVBQUUsQ0FBQztRQUNOLElBQUksUUFBUSxLQUFhLE1BQU0sSUFBSSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNuQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsSUFBWSxFQUFFLEtBQUssR0FBRyxDQUFDO0lBQ2xELE9BQU87UUFDTCxJQUFJLEVBQUUsZUFBZTtRQUNyQixHQUFHLEVBQUUsQ0FBQztRQUNOLElBQUksUUFBUSxLQUFhLE1BQU0sSUFBSSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNuQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TWV0YXNjcmVlbn0gZnJvbSAnLi9tZXRhc2NyZWVuLmpzJztcbmltcG9ydCB7U2NyZWVuRml4fSBmcm9tICcuL3NjcmVlbmZpeC5qcyc7XG5pbXBvcnQge01ldGF0aWxlc2V0c30gZnJvbSAnLi9tZXRhdGlsZXNldC5qcyc7XG5pbXBvcnQge3NlcX0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuLi9yb20uanMnO1xuXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IHRoZSBtZXRhc2NyZWVuLiAgQmVjYXVzZSB0aGVzZSBhcmUgY3JlYXRlZCBwZXIgTWV0YXNjcmVlbnNcbiAqIGluc3RhbmNlLCB0aGV5IGNhbiBhY3R1YWxseSBiZSBtdXRhdGVkIGFzIG5lZWRlZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZXRhc2NyZWVuRGF0YSB7XG4gIC8qKlxuICAgKiBJZiB0aGUgc2NyZWVuIGV4aXN0cyBvciBpcyBzaGFyZWQgd2l0aCBhIHNjcmVlbiBpbiB0aGUgdmFuaWxsYSByb20sIHRoZW5cbiAgICogdGhpcyBpcyB0aGUgc2NyZWVuIElEICgwLi4xMDIpLiAgT3RoZXJ3aXNlLCBpdCBpcyBhIHNwYXJzZSBuZWdhdGl2ZSBudW1iZXJcbiAgICogc2hhcmVkIGJ5IGFsbCB0aGUgc2NyZWVucyB0aGF0IHdpbGwgdWx0aW1hdGVseSBoYXZlIHRoZSBzYW1lIElELlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IG51bWJlcjtcbiAgLyoqIFJlcHJlc2VudGF0aXZlIGljb24gZm9yIGRlYnVnIHB1cnBvc2VzLiAqL1xuICBpY29uPzogSWNvbjtcbiAgLyoqIExpc3Qgb2YgdGlsZXNldHMgdGhpcyBzY3JlZW4gYXBwZWFycyBpbi4gKi9cbiAgdGlsZXNldHM6IHtbbmFtZSBpbiBrZXlvZiBNZXRhdGlsZXNldHNdPzoge1xuICAgIC8qKiBGaXhlcyBuZWVkZWQgYmVmb3JlIHNjcmVlbiBpcyB1c2FibGUgaW4gdGhlIHRpbGVzZXQuICovXG4gICAgcmVxdWlyZXM/OiBTY3JlZW5GaXhbXSxcbiAgICAvKiogPz8/ICovXG4gICAgdHlwZT86IHN0cmluZywgLy8gZm9yIHRvd24/XG4gICAgLyoqIExhYnlyaW50aCBkYXRhLiAqL1xuICAgIGFkZFdhbGw/OiBudW1iZXJbXSxcbiAgICByZW1vdmVXYWxsPzogbnVtYmVyLFxuICB9fTtcbiAgLyoqIExpc3Qgb2YgZmVhdHVyZXMgcHJlc2VudC4gKi9cbiAgZmVhdHVyZT86IEZlYXR1cmVbXTtcbiAgLyoqIExpc3Qgb2YgZXhpdCBzcGVjcy4gKi9cbiAgZXhpdHM/OiByZWFkb25seSBDb25uZWN0aW9uW107XG4gIC8qKlxuICAgKiBTdHJpbmcgKGxlbmd0aCA0KSBvZiBlZGdlIHR5cGVzIGZvciBtYXRjaGluZzogdXAsIGxlZnQsIGRvd24sIHJpZ2h0LlxuICAgKiBUaGUgZm9sbG93aW5nIGNoYXJhY3RlcnMgYXJlIHVzZWQgaW4gdmFyaW91cyB0aWxlc2V0czpcbiAgICogR2VuZXJhbDpcbiAgICogICAqIGJsYW5rID0gYmxvY2tlZFxuICAgKiAgICogc3RhciA9IHNwZWNpYWwgY2FzZVxuICAgKiBPdmVyd29ybGQ6XG4gICAqICAgKiAnbycgPSBvcGVuXG4gICAqICAgKiAnPCcsICc+JywgJ14nLCAndicgPSBvcGVuIG9uIHRoZSAobGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tKS5cbiAgICogICAqICdsJyA9IGxvbmcgZ3Jhc3NcbiAgICogICAqICdzJyA9IHNob3J0IGdyYXNzXG4gICAqICAgKiAncicgPSByaXZlclxuICAgKiAgICogJ24nID0gbmFycm93IGVkZ2UgZXhpdCwgY2VudGVyZWRcbiAgICogICAqICdiJyA9IGJvYXRcbiAgICogICAqICcxJywgJzInLCAnMycgPSBvbmUtb2ZmIHNwZWNpYWwgY2FzZXMgYXJvdW5kIHBvcnRvYS9vYXNpc1xuICAgKiBUb3dlcjpcbiAgICogICAqICdzJyA9IHN0YWlyc1xuICAgKiAgICogJ3QnID0gY29ycmlkb3JcbiAgICogQ2F2ZTpcbiAgICogICAqICdjJyA9IGNvcnJpZG9yXG4gICAqICAgKiAndycgPSB3aWRlXG4gICAqICAgKiAnbicgPSBuYXJyb3dcbiAgICogICAqICdyJyA9IHJpdmVyXG4gICAqICAgKiAnYicgPSB3cm9uZyBzaWRlIG9mIGJyaWRnZVxuICAgKiAgICogJ3MnID0gc3Bpa2VzXG4gICAqIFN3YW1wOlxuICAgKiAgICogJ3MnID0gcGFzc2FnZVxuICAgKiBNb3VudGFpbjpcbiAgICogICAqICdwJyA9IHBhdGhcbiAgICogICAqICdzJyA9IHNsb3BlXG4gICAqICAgKiAndycgPSB3YXRlcmZhbGxcbiAgICogICAqICdsJyA9IGxhZGRlclxuICAgKi9cbiAgZWRnZXM/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIGVkZ2VzIChtYXkgc3VwZXJjZWRlPyksIGJ1dCA5IGluc3RlYWQgb2YgNFxuICAgKiBzaW5jZSBpdCBpbmNsdWRlcyBjb3JuZXJzIGFuZCBjZW50ZXIsIHdoaWNoIGVhY2ggaGF2ZVxuICAgKiB0aGVpciBvd24gdGhpbmcuXG4gICAqIENhdmU6XG4gICAqICAgYyA9IGNvcnJpZG9yLCBvcmRpbmFyeSBjZW50ZXJcbiAgICogICB3ID0gd2lkZSBlZGdlLCB3aWRlIGNlbnRlclxuICAgKiAgIG4gPSBuYXJyb3cgZWRnZVxuICAgKiAgIHIgPSByaXZlciAoY2VudGVyIG9mIHJpdmVyIHRpbGVzLCBhbmQgZWRnZXMpXG4gICAqICAgIyA9IGJsb2NrYWdlICh3YWxsLCBub24tYnJpZGdlZCByaXZlciwgZXh0cmEgYmxvY2spXG4gICAqICAgICAgIE5PVEU6IHdlIGFkZCB3YWxscyBidXQgX3JlbW92ZV8gYnJpZGdlcy4uLlxuICAgKiAgICAgICBOT1RFOiBubyBsb25nZXIgdXNlZCAtIGp1c3QgZmlsbCBpbiBub3JtYWwgbm93Li4uXG4gICAqICAgYiA9IGJyaWRnZSAod3Jvbmcgc2lkZT8/PyBwcm9iYWJseSBub3QuLi4pXG4gICAqICAgcyA9IHNwaWtlc1xuICAgKiAgIHAgPSBwaXRcbiAgICogICAvID0gcmFtcFxuICAgKiAgIFxuICAgKiBPdmVyd29ybGQ6XG4gICAqICAgbyA9IG9wZW5cbiAgICogICA8ID0gY2F2ZSBvciBvdGhlciB1cCBleGl0XG4gICAqICAgPiA9IGRvd24gZXhpdCAoaS5lLiBjcnlwdClcbiAgICogICB4ID0gZWRnZSBleGl0IChuZXZlciB1c2VkIGludGVyaW9yKVxuICAgKiAgIGwgPSBsb25nIGdyYXNzL2ZvcmVzdFxuICAgKiAgIGcgPSBzaG9ydCBncmFzc1xuICAgKiAgIHIgPSByaXZlciAob3IgYnJpZGdlIGlmIGluIGNlbnRlciBhbmQgdGhlcmUncyBhbiB1bmJyaWRnZWQgb3B0aW9uKVxuICAgKiAgICAgICBhbHNvIHVzZWQgZm9yIG9hc2lzIGxha2VcbiAgICogICAjID0gYmxvY2thZ2UgaW4gY2VudGVyIChlLmcuIHVuYnJpZGdlZCByaXZlciwgd2hpcmxwb29sKVxuICAgKiAgIGIgPSBiZWFjaCAob24gc2VhKVxuICAgKiAgIOKGkyA9IHNsb3BlXG4gICAqICAgWzAtOUEtRl0gPSBvZmYtY2VudGVyIGVkZ2UgZXhpdHMgKHRvcDo2LTcgb3IgbGVmdDo2LTcgaXMgY2VudGVyZWQpXG4gICAqICAgICAxID0gYnJpZGdlIHRvIHBvcnRvYSAxMiwgNSA9IGxlYWYvbWV6YW1lIGVudHJhbmNlIDJkLFxuICAgKiAgICAgOCA9IGJyeW5tYWVyIGV4aXQgMWMsIGJvYXQgY2hhbm5lbCA2MCwgQiA9IGxvd2VyLWxlZnQgZXhpdCAxYVxuICAgKiAgICAgPT4gVE9ETyAtIGNvbnNpZGVyIGVpdGhlciBkZWxldGluZyB0aGVzZSBvciBzd2FwcGluZyBmb3IganVzdCAneCdcbiAgICogICBXID0gd2luZG1pbGwgKGFsc28gYSA8IGV4aXQpXG4gICAqICAgQSA9IGFsdGFyXG4gICAqICAgTCA9IGxpZ2h0aG91c2VcbiAgICogICBIID0gaG91c2VcbiAgICogICBGID0gZm9ydHJlc3NcbiAgICogICBDID0gY2FiaW5cbiAgICogICBQID0gcHlyYW1pZFxuICAgKiAgIFkgPSBjcnlwdFxuICAgKi9cbiAgdGlsZT86IHN0cmluZ3xzdHJpbmdbXTtcbiAgLyoqXG4gICAqIFN0cmluZyBvZiBjb25uZWN0ZWQgYWNjZXNzIHBvaW50cyBmb3Igcm91dGluZywgZ3JvdXBlZCBieSBjb25uZWN0aW9uIHR5cGUuXG4gICAqIFBvaW50cyBhcmUgaGV4IGRpZ2l0cyBbMTIzXSBmb3IgdG9wIGVkZ2UsIFs1NjddIGZvciBsZWZ0LCBbOWFiXSBmb3IgYm90dG9tLFxuICAgKiBvciBbZGVmXSBmb3IgcmlnaHQgZWRnZS4gIFNlcGFyYXRvcnMgYXJlICd8JyBmb3IgaW1wYXNzaWJsZSwgJz0nIGZvciB3YWxsLFxuICAgKiAnOicgZm9yIHdhdGVyIChpLmUuIGZsaWdodCByZXF1aXJlZCksIGFuZCAnLScgZm9yIGJyaWRnZS4gIEdlbmVyYWxseSBvbmx5XG4gICAqIHRoZSBtaWRkbGUgbnVtYmVyIGlzIHVzZWQgZm9yIGVhY2ggZWRnZSAoMjZhZSkgYnV0IGZvciByaXZlcnMgYW5kIGxhYnlyaW50aFxuICAgKiB0aWxlc2V0cywgdGhlIG90aGVyIG51bWJlcnMgYXJlIHVzZWQgYXMgd2VsbCwgY292ZXJpbmcgdGhlIGVkZ2VzIGxpa2Ugc29cbiAgICogYGBgXG4gICAqICAgICAuMTIzLlxuICAgKiAgICAgNSAgIGRcbiAgICogICAgIDYgICBlXG4gICAqICAgICA3ICAgZlxuICAgKiAgICAgLjlhYi5cbiAgICogYGBgXG4gICAqIFRodXMgdGhlIDQgYml0IGluZGljYXRlcyBhIHZlcnRpY2FsIGVkZ2UgYW5kIHRoZSA4IGJpdCBpbmRpY2F0ZXMgdGhhdCBpdCdzXG4gICAqIHRoZSBjb3JyZXNwb25kaW5nIGVkZ2Ugb24gdGhlIG5leHQgdGlsZS5cbiAgICovXG4gIGNvbm5lY3Q/OiBzdHJpbmc7XG4gIC8qKiBUaWxlICh5eCkgdG8gcGxhY2UgdGhlIHdhbGwvYnJpZGdlIGhpdGJveCwgaWYgcHJlc2VudC4gKi9cbiAgd2FsbD86IG51bWJlcjtcbiAgLyoqIEluZm9ybWF0aW9uIGFib3V0IGFueSBtb3ZpbmcgcGxhdGZvcm0gcGxhdGZvcm0uICovXG4gIHBsYXRmb3JtPzoge1xuICAgIC8qKiBUeXBlIG9mIHBsYXRmb3JtLiAqL1xuICAgIHR5cGU6ICdob3Jpem9udGFsJyB8ICd2ZXJ0aWNhbCcsXG4gICAgLyoqIDE2LWJpdCBzY3JlZW4gY29vcmRpbmF0ZXMgKHl5eHgpIG9mIHBsYXRmb3JtIHNwYXduIHBvc2l0aW9uLiAqL1xuICAgIGNvb3JkOiBudW1iZXIsXG4gIH07XG4gIC8qKlxuICAgKiBQb2ludHMgb2YgaW50ZXJlc3Qgb24gdGhpcyBzY3JlZW4uICBFYWNoIGVudHJ5IGlzIGEgcHJpb3JpdHkgKDEgaXMgbW9zdFxuICAgKiByZWxldmFudCwgNSBpcyBsZWFzdCksIGZvbGxvd2VkIGJ5IGEgZGVsdGEteSBhbmQgYSBkZWx0YS14IGluIHBpeGVsc1xuICAgKiBtZWFzdXJlZCBmcm9tIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIHNjcmVlbi4gIFRoZSBkZWx0YXMgbWF5IGJlXG4gICAqIG5lZ2F0aXZlIG9yIGdyZWF0ZXIgdGhhbiAweGZmLCBpbmRpY2F0aW5nIHRoYXQgdGhlIFBPSSBpcyBhY3R1YWxseSBvbiBhXG4gICAqIG5laWdoYm9yaW5nIHNjcmVlbi4gIERlZmF1bHQgZHk9NzAgYW5kIGR4PTc4LlxuICAgKi9cbiAgcG9pPzogUmVhZG9ubHlBcnJheTxyZWFkb25seSBbbnVtYmVyLCBudW1iZXI/LCBudW1iZXI/XT4sXG5cbiAgLyoqIFVwZGF0ZXMgdG8gYXBwbHkgd2hlbiBhcHBseWluZyB0aGUgZ2l2ZW4gZml4LiAqL1xuICB1cGRhdGU/OiBSZWFkb25seUFycmF5PHJlYWRvbmx5IFtTY3JlZW5GaXgsIFNjcmVlblVwZGF0ZV0+O1xuXG4gIC8qKiBXaGV0aGVyIGEgc3BlY2lhbCBmbGFnIGlzIG5lZWRlZCBmb3IgdGhpcyBzY3JlZW4uICovXG4gIGZsYWc/OiAnYWx3YXlzJyB8ICdjYWxtJyB8ICdjdXN0b206ZmFsc2UnIHwgJ2N1c3RvbTp0cnVlJzsgLy8gfCAnYm9zcyc7XG5cbiAgLyoqIENvbmRpdGlvbnMgZm9yIG1hdGNoaW5nIHRoaXMgdGlsZS4gKi9cbiAgbWF0Y2g/OiAocmVhY2hhYmxlOiAoZHk6IG51bWJlciwgZHg6IG51bWJlcikgPT4gYm9vbGVhbixcbiAgICAgICAgICAgZmxhZzogYm9vbGVhbikgPT4gYm9vbGVhbjtcblxuICAvKiogV2hldGhlciB0aGlzIHNjcmVlbiBpcyBfbm90IGFsbG93ZWRfIHRvIGJlIHBsYWNlZCBhdXRvbWF0aWNhbGx5LiAqL1xuICBwbGFjZW1lbnQ/OiAnbWFudWFsJyB8ICdtb2QnO1xuICAvKipcbiAgICogVHlwZSBvZiBtb2RpZmljYXRpb24gdGhpcyBzY3JlZW4gaXMgZnJvbSBhIHNhbWUtbGF5b3V0IHRpbGUuXG4gICAqIE1vZCB0aWxlcyB3aWxsIG5vdCBiZSBpbmZlcnJlZCBub3JtYWxseSwgYW5kIG11c3QgYmUgYWRkZWQgYWZ0ZXJ3YXJkcy5cbiAgICogSW5mZXJyZWQgdGlsZXMgd2lsbCBiZSBtYXhpbWFsbHkgb3Blbi4gIE1vZHMgd2lsbCBjbG9zZSBwYXRocy4gIFdlXG4gICAqIG1heSBuZWVkIHRvIGFkZCBhIGZpeGVkIG51bWJlciBvZiB3YWxscywgYW5kL29yIHJlbW92ZSBhIGZpeGVkIG51Ym1lclxuICAgKiBvZiBicmlkZ2VzLiAgV2UgYWRkIGFzIG1hbnkgbm9uLWZsYWcgYmxvY2tzIGFzIHBvc3NpYmxlLlxuICAgKi9cbiAgbW9kPzogJ2Jsb2NrJyB8ICd3YWxsJyB8ICdicmlkZ2UnOyAvLyB8ICdtYW51YWwnO1xuXG4gIC8qKlxuICAgKiBZLWNvb3JkaW5hdGUgb2Ygc3RhdHVlcyBvbiB0aGlzIG1hcCBzY3JlZW4uICBUaGVzZSBtYXkgYmUgcG9wdWxhdGVkXG4gICAqIHdpdGggJDNmIG1vbnN0ZXIgc3Bhd25zIGF0IHg9NSBhbmQgeD1hIChwcm92aWRlZCB0aGUgbmVjZXNzYXJ5IHBhdHRlcm5cbiAgICogdGFibGVzIGFyZSBsb2FkZWQpLiAgVGhpcyBpcyBvbmx5IHJlbGV2YW50IG9uIHRoZSBmb3J0cmVzcyB0aWxlc2V0LlxuICAgKi9cbiAgc3RhdHVlcz86IHJlYWRvbmx5IG51bWJlcltdO1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHRoZSBzY3JlZW4gbWF5IGJlIGRlbGV0ZWQgZW50aXJlbHkgZnJvbSBhIG1hcCAoaS5lLiB3aGVuIHRyaW1taW5nXG4gICAqIHVudXNlZCByb3dzL2NvbHVtbnMpLiAgVGhpcyBpcyBhIHN1YnNldCBvZiBlbXB0eSBzY3JlZW5zLCBzaW5jZSBzb21lIGVtcHR5XG4gICAqIHNjcmVlbnMgYXJlIGltcG9ydGFudCB0byByZXRhaW4gKGUuZy4gZGVhZCBlbmRzKS5cbiAgICovXG4gIGRlbGV0ZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgdGhlIHNjcmVlbiwgaW4gdGVybXMgb2YgbWV0YXRpbGUgSURzIGF0IHRoZSB0aW1lIHRoZSBzY3JlZW5cbiAgICogaXMgYWxsb2NhdGVkLiAgVGhpcyBpcyBvbmx5IHVzZWQgZm9yIHNjcmVlbnMgd2l0aCBhIG5lZ2F0aXZlIHNpZCAoJ2lkJyBpblxuICAgKiB0aGlzIHN0cnVjdHVyZSksIGFuZCBvbmx5IG9uZSBzY3JlZW4gaW4gYSBncm91cCBvZiBzYW1lLXNpZCBzY3JlZW5zIHNob3VsZFxuICAgKiBzcGVjaWZ5IGl0LiAgSXQgbXVzdCBiZSAyNDAgYnl0ZXMgbG9uZy5cbiAgICovXG4gIGRlZmluaXRpb24/OiBVaW50OEFycmF5O1xuXG4gIC8qKiBBcmVuYSB0eXBlLiAgVGhpcyBzaG91bGQgYmUgcHJlc2VydmVkIHdoZW4gaW5mZXJyaW5nIHNjcmVlbnMuICovXG4gIGFyZW5hPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBTY3JlZW4gY29vcmRpbmF0ZXMgb2YgXCJ0YWxsXCIgaG91c2VzLCB3aGljaCBkbyBub3Qgd2FudCBhIHNoYWRvdyAodGlsZSAkMDYpXG4gICAqIGltbWVkaWF0ZWx5IG92ZXIgdGhlIGRvb3IgaWYgd2UgcmVtb3ZlIGEgc2hvcCBpY29uLCBidXQgcmF0aGVyIGEgc29saWRcbiAgICogKHRpbGUgJDIxKS5cbiAgICovXG4gIHRhbGxIb3VzZXM/OiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IHR5cGUgU2NyZWVuVXBkYXRlID0gKHM6IE1ldGFzY3JlZW4sIHNlZWQ6IG51bWJlciwgcm9tOiBSb20pID0+IGJvb2xlYW47XG5cbmV4cG9ydCBjb25zdCBmZWF0dXJlTWFzayA9IHtcbiAgLy8gVE9ETyAtIGNhdmU/IGZvcnRyZXNzPyBlZGdlPyAgd2UgYWxyZWFkeSBoYXZlIGNvbm5lY3Rpb25zIHRvIHRlbGwgdXMuLi5cbiAgJ2VtcHR5JzogMHgwMSxcbiAgJ3BpdCc6IDB4MDIsXG4gICdhcmVuYSc6IDB4MDQsXG4gICdzcGlrZXMnOiAweDA4LFxuICAnd2lkZSc6IDB4MTAsXG4gICdyaXZlcic6IDB4MjAsXG4gICdicmlkZ2UnOiAweDQwLFxuICAnd2FsbCc6IDB4ODAsXG4gICdyYW1wJzogMHgwMV8wMCxcbiAgJ292ZXJwYXNzJzogMHgwMl8wMCxcbiAgJ3VuZGVycGFzcyc6IDB4MDRfMDAsXG4gICd3aGlybHBvb2wnOiAweDA4XzAwLFxuICAnZGVhZGVuZCc6IDB4MTBfMDAsXG5cbiAgLy8gTm90IGFjdHVhbGx5IGxpc3RlZCBhcyBmZWF0dXJlcywgYnV0IGFkZGVkIHNlcGFyYXRlbHkgLSB3ZSBjb3VsZCBhZGQgb3RoZXJzXG4gIC8vICh0b3RhbCBvZiA4IGF2YWlsYWJsZS4uLj8pXG4gICdzdGFpcjp1cCc6IDB4MDFfMDBfMDAsXG4gICdzdGFpcjpkb3duJzogMHgwMl8wMF8wMCxcblxuICAvLyBVbmlxdWUgZmVhdHVyZXM6IHVwcGVyIGJpdHMgaGF2ZSB2YXJpb3VzIGNvbWJpbmF0aW9ucyBvZiAzIG9mIDYgYml0c1xuICAvLyAgIDcsYixkLGUsMTMsMTUsMTYsMTksMWEsMWMsMjMsMjUsMjYsMjksMmEsMmMsMzEsMzIsMzQsMzhcbiAgLy8gU2luY2UgdGhleSBhcmUgbmV2ZXIgc2hhcmVkLCB3ZSBjYW4gcGFjayBhIGxvdCBtb3JlIGludG8gdGhlIHNhbWUgc3BhY2UuXG4gICdwb3J0b2ExJzogMHgwN18wMF8wMF8wMCxcbiAgJ3BvcnRvYTInOiAweDBiXzAwXzAwXzAwLFxuICAncG9ydG9hMyc6IDB4MGRfMDBfMDBfMDAsXG4gICdsYWtlJzogMHgwZV8wMF8wMF8wMCxcbiAgJ2xpZ2h0aG91c2UnOiAweDEzXzAwXzAwXzAwLFxuICAnY2FiaW4nOiAweDE1XzAwXzAwXzAwLFxuICAnd2luZG1pbGwnOiAweDE2XzAwXzAwXzAwLFxuICAnYWx0YXInOiAweDE5XzAwXzAwXzAwLFxuICAncHlyYW1pZCc6IDB4MWFfMDBfMDBfMDAsXG4gICdjcnlwdCc6IDB4MWNfMDBfMDBfMDAsXG5cbiAgLy8gUHJldmVudHMgcGxhY2luZyB0aGlzIGJ5IGhhbmQuXG4gICdtYW51YWwnOiAweDQwXzAwXzAwXzAwLFxuICAvLyBJbmRpY2F0ZXMgd2UgbWF5IHdhbnQgdG8gY29uc29saWRhdGUgdGhpcyBzY3JlZW4uXG4gICdjb25zb2xpZGF0ZSc6IDB4ODBfMDBfMDBfMDAsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBGZWF0dXJlID0ga2V5b2YgdHlwZW9mIGZlYXR1cmVNYXNrO1xuICAvLyAncGl0JyB8ICdhcmVuYScgfCAnc3Bpa2VzJyB8ICdicmlkZ2UnIHwgJ3dhbGwnIHwgJ3JhbXAnIHwgJ2VtcHR5JyB8XG4gIC8vICdwb3J0b2ExJyB8ICdwb3J0b2EyJyB8ICdwb3J0b2EzJyB8IC8vIHBhdGggZnJvbSBzYWJyZSB0byBwb3J0b2FcbiAgLy8gJ2xha2UnIHwgJ292ZXJwYXNzJyB8ICd1bmRlcnBhc3MnIHwgJ3doaXJscG9vbCcgfFxuICAvLyAnbGlnaHRob3VzZScgfCAnY2FiaW4nIHwgJ3dpbmRtaWxsJyB8ICdhbHRhcicgfCAncHlyYW1pZCcgfCAnY3J5cHQnIHxcbiAgLy8gJ2NvbnNvbGlkYXRlJztcblxuZXhwb3J0IGludGVyZmFjZSBJY29uIHtcbiAgc2hvcnQ6IHN0cmluZzsgLy8gc2luZ2xlIGNoYXJhY3RlclxuICBmdWxsOiByZWFkb25seSBbc3RyaW5nLCBzdHJpbmcsIHN0cmluZ107IC8vIDN4MyBncmlkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpY29uKGFycjogVGVtcGxhdGVTdHJpbmdzQXJyYXkpOiBJY29uIHtcbiAgaWYgKGFyci5sZW5ndGggIT0gMSkgdGhyb3cgbmV3IEVycm9yKCdCYWQgaWNvbiBpbnB1dCcpO1xuICBjb25zdCBzdHIgPSBhcnJbMF07XG4gIC8vIHBhcnNlIHRoZSBzdHJpbmcuXG4gIGNvbnN0IGxpbmVzID0gc3RyLnNwbGl0KCdcXG4nKTtcbiAgLy8gbGluZXMgMS4uMyBhcmUgdGhlIGZ1bGwgaWNvbi5cbiAgY29uc3QgZnVsbCA9IGxpbmVzLnNsaWNlKDEpLm1hcChsID0+IGwucmVwbGFjZSgvXlxccypcXHx8XFx8XFxzKiQvZywgJycpKTtcbiAgY29uc3Qgc2hvcnQgPSAvXFxTLy50ZXN0KGxpbmVzWzBdKSA/IGxpbmVzWzBdWzBdIDogZnVsbFsxXVsxXTtcbiAgcmV0dXJuIHtzaG9ydCwgZnVsbDogW2Z1bGxbMF0sIGZ1bGxbMV0sIGZ1bGxbMl1dfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRTY3JlZW4oc3BlYzogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVwbGFjZW1lbnRzOiBbc3RyaW5nLCBudW1iZXJdW10pOiBVaW50OEFycmF5IHtcbiAgY29uc3QgcyA9IHNwZWMuc3BsaXQoL1xccysvZyk7XG4gIGlmICghc1swXSkgcy5zaGlmdCgpO1xuICBpZiAoIXNbcy5sZW5ndGggLSAxXSkgcy5wb3AoKTtcbiAgaWYgKHMubGVuZ3RoICE9PSAyNDApIHRocm93IG5ldyBFcnJvcihgQmFkIHNjcmVlbiBkZWZpbml0aW9uOiAke3MubGVuZ3RofWApO1xuICBjb25zdCBtYXAgPSBuZXcgTWFwKHJlcGxhY2VtZW50cyk7XG4gIHJldHVybiBVaW50OEFycmF5LmZyb20ocywgeCA9PiBtYXAuZ2V0KHgpID8/IHBhcnNlSW50KHgsIDE2KSk7XG59XG5cbmV4cG9ydCB0eXBlIFN0YWlyVHlwZSA9ICdzdGFpcjp1cCcgfCAnc3RhaXI6ZG93bic7XG5leHBvcnQgdHlwZSBFZGdlVHlwZSA9ICdlZGdlOnRvcCcgfCAnZWRnZTpib3R0b20nIHwgJ2VkZ2U6bGVmdCcgfCAnZWRnZTpyaWdodCc7XG5leHBvcnQgdHlwZSBTZWFtbGVzc1R5cGUgPSAnc2VhbWxlc3M6dXAnIHwgJ3NlYW1sZXNzOmRvd24nO1xuZXhwb3J0IHR5cGUgQ29ubmVjdGlvblR5cGUgPVxuICAgIFN0YWlyVHlwZSB8IEVkZ2VUeXBlIHwgU2VhbWxlc3NUeXBlIHxcbiAgICAnY2F2ZScgfCAnY3J5cHQnIHwgJ2Rvb3InIHwgJ2Rvb3IyJyB8ICdkb29yMycgfCAnZm9ydHJlc3MnIHxcbiAgICAnZ2F0ZScgfCAnc3dhbXAnIHwgJ3RlbGVwb3J0ZXInIHwgJ3dpbmRtaWxsJztcbi8vIFRPRE8gLSBpcyB3aW5kbWlsbCBqdXN0IGRvb3IyP1xuXG4vLyBOT1RFOiBzd2FtcCBjb25uZWN0cyB0byBlZGdlOmJvdHRvbSBmb3IgY2F2ZSBvciB0b3duP1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb24ge1xuICByZWFkb25seSB0eXBlOiBDb25uZWN0aW9uVHlwZTtcbiAgcmVhZG9ubHkgbWFudWFsPzogYm9vbGVhbjsgICAgICAgICAvLyBzaG91bGQgb25seSBiZSBwbGFjZWQgbWFudWFsbHlcbiAgcmVhZG9ubHkgZGlyOiBudW1iZXI7ICAgICAgICAgICAgICAvLyAwPXVwLCAxPWxlZnQsIDI9ZG93biwgMz1yaWdodFxuICByZWFkb25seSBlbnRyYW5jZTogbnVtYmVyOyAgICAgICAgIC8vIHBvcyBZeVh4XG4gIHJlYWRvbmx5IGV4aXRzOiByZWFkb25seSBudW1iZXJbXTsgLy8gdGlsZSBZWFxuICByZWFkb25seSBhbGxvd2VkRXhpdHM/OiByZWFkb25seSBudW1iZXJbXTsgLy8gZXh0cmEgZXhpdHMgdG8gbWF0Y2hcbiAgLy8gVE9ETyAtIHNpbmdsZUhlaWdodEVudHJhbmNlIC0gZm9yIGRpcj0yIGp1c3Qgc3VidHJhY3QgMHgyMCA/P1xuICAvLyBUT0RPIC0gb3Bwb3NpdGUgZGlyZWN0aW9uPyB3YXRlcmVyZmFsbCBjYXZlIGlzIGEgcmlnaHQvZG93biBtYXRjaHVwLi4uXG59XG5cbi8qKiBAcGFyYW0gdGlsZSBwb3NpdGlvbiBvZiBsb3dlci1sZWZ0IG1ldGF0aWxlIChlLmcuIDB4NDIgZm9yIDQwXzMwKS4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cFN0YWlyKHRpbGU6IG51bWJlciwgd2lkdGggPSAyKTogQ29ubmVjdGlvbiB7XG4gIC8vIGZyb20gbWFwIDA0OiBlbnRyYW5jZSA0MF8zMCAgPT4gZXhpdHMgMzIsMzNcbiAgLy8gZnJvbSBtYXAgMTkgKHNpbmdsZS13aWR0aCk6IHRpbGUgNjggPT4gZW50cmFuY2UgNzhfODgsIGV4aXQgNjhcbiAgY29uc3QgeSA9IHRpbGUgPj4+IDQ7XG4gIGNvbnN0IHggPSB0aWxlICYgMHhmO1xuICBpZiAod2lkdGggPT09IDEpIHtcbiAgICAvLyBUT0RPIC0gd2hhdCBkb2VzIGl0IG1lYW4gZm9yIGVudHJhbmNlIHRvIGJlID4gMHhmZmZmLi4uP1xuICAgIC8vICAgICAgLSBzY3JlZW4gNmMgKG9hayBOVykgaGFzIHRoaXNcbiAgICBjb25zdCBkeSA9IHkgPT09IDB4ZSA/IDB4MjgwMCA6IDB4MTgwMDtcbiAgICBjb25zdCBlbnRyYW5jZSA9ICgoeSA8PCAxMikgKyBkeSkgfCAoKHggPDwgNCkgKyAweDAwMDgpO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnc3RhaXI6dXAnLFxuICAgICAgZGlyOiAyLFxuICAgICAgZW50cmFuY2UsXG4gICAgICBleGl0czogW3RpbGVdLFxuICAgICAgLy9hbGxvd2VkRXhpdHM6IFt0aWxlIC0gMTYsIHRpbGUgKyAxNl0sXG4gICAgfTtcbiAgfVxuICAvLyBUT0RPIC0gaWYgeSBpcyAweGUgdGhlbiB3ZSBtYXkgbmVlZCB0byBhZGp1c3QgZm9yIHNjcmVlbiBlZGdlP1xuICBjb25zdCBlbnRyYW5jZSA9IHkgPDwgMTIgfCAoKHggPDwgNCkgKyAod2lkdGggPDwgMykpO1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdzdGFpcjp1cCcsXG4gICAgZGlyOiAwLFxuICAgIGVudHJhbmNlLFxuICAgIGV4aXRzOiBzZXEod2lkdGgsIGkgPT4gdGlsZSAtIDB4MTAgKyBpKSxcbiAgICAvLyBUT0RPIC0gaWYgd2Ugc2V0IHRoaXMgdGhlbiB3ZSBjb3VsZCBwb3NzaWJseSBzYXZlIHNvbWUgb2YgdGhlXG4gICAgLy8gICAgICAgIHByZXBhcnNlIG5vcm1hbGl6YXRpb24gdGhhdCdzIGN1cnJlbnRseSByZXF1aXJlZC5cbiAgICAvL2FsbG93ZWRFeGl0czogWy4uLnNlcSh3aWR0aCwgaSA9PiB0aWxlIC0gMHgyMCArIGkpLFxuICAgIC8vICAgICAgICAgICAgICAgLi4uc2VxKHdpZHRoLCBpID0+IHRpbGUgKyBpKV0sXG4gIH07XG59XG5cbi8qKiBAcGFyYW0gdGlsZSBwb3NpdGlvbiBvZiB1cHBlci1sZWZ0IG1ldGF0aWxlIChlLmcuIDB4YTIgZm9yIGFmXzMwKS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3duU3RhaXIodGlsZTogbnVtYmVyLCB3aWR0aCA9IDIpOiBDb25uZWN0aW9uIHtcbiAgLy8gZnJvbSBtYXAgMDU6IGVudHJhbmNlIGFmXzMwICA9PiBleGl0cyBiMixiM1xuICAvLyBmcm9tIG1hcCBkNCAoc2luZ2xlLXdpZHRoKTogdGlsZSA0YyA9PiBlbnRyYW5jZSAzOF9jOCwgZXhpdCA0Y1xuICBjb25zdCB5ID0gdGlsZSA+Pj4gNDtcbiAgY29uc3QgeCA9IHRpbGUgJiAweGY7XG4gIGlmICh3aWR0aCA9PT0gMSkge1xuICAgIGNvbnN0IGVudHJhbmNlID0gKCh5IDw8IDEyKSAtIDB4MDgwMCkgfCAoKHggPDwgNCkgKyAweDAwMDgpO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnc3RhaXI6ZG93bicsXG4gICAgICBkaXI6IDIsXG4gICAgICBlbnRyYW5jZSxcbiAgICAgIGV4aXRzOiBbdGlsZV0sXG4gICAgICBhbGxvd2VkRXhpdHM6IFt0aWxlICsgMTYsIHRpbGUgLSAxNl0sXG4gICAgfTtcbiAgfVxuICBjb25zdCBlbnRyYW5jZSA9IHkgPDwgMTIgfCAweDBmMDAgfCAoKHggPDwgNCkgKyAod2lkdGggPDwgMykpO1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdzdGFpcjpkb3duJyxcbiAgICBkaXI6IDIsXG4gICAgZW50cmFuY2UsXG4gICAgZXhpdHM6IHNlcSh3aWR0aCwgaSA9PiB0aWxlICsgMHgxMCArIGkpLFxuICAgIGFsbG93ZWRFeGl0czogWy4uLnNlcSh3aWR0aCwgaSA9PiB0aWxlICsgMHgyMCArIGkpLFxuICAgICAgICAgICAgICAgICAgIC4uLnNlcSh3aWR0aCwgaSA9PiB0aWxlICsgaSldLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2F2ZSh0aWxlOiBudW1iZXIsIHR5cGU6IENvbm5lY3Rpb25UeXBlID0gJ2NhdmUnKTogQ29ubmVjdGlvbiB7XG4gIHJldHVybiB7Li4udXBTdGFpcih0aWxlICsgMTYpLCB0eXBlfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvb3IodGlsZTogbnVtYmVyLCB0eXBlOiBDb25uZWN0aW9uVHlwZSA9ICdkb29yJyk6IENvbm5lY3Rpb24ge1xuICByZXR1cm4gey4uLnVwU3RhaXIodGlsZSwgMSksIHR5cGV9O1xufVxuXG4vKiogQHBhcmFtIHRpbGUgYm90dG9tLWxlZnQgbWV0YXRpbGUgKi9cbmV4cG9ydCBmdW5jdGlvbiB3YXRlcmZhbGxDYXZlKHRpbGU6IG51bWJlcik6IENvbm5lY3Rpb24ge1xuICBjb25zdCB5ID0gdGlsZSA+Pj4gNDtcbiAgY29uc3QgeCA9IHRpbGUgJiAweGY7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2NhdmUnLFxuICAgIGRpcjogMCxcbiAgICBlbnRyYW5jZTogeSA8PCAxMiB8IHggPDwgNCB8IDB4ZixcbiAgICBleGl0czogW3RpbGUgLSAweGYsIHRpbGUgKyAxXSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvcEVkZ2Uoe2xlZnQgPSA3LCB3aWR0aCA9IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gMiwgbWFudWFsID0gZmFsc2V9ID0ge30pOiBDb25uZWN0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnZWRnZTp0b3AnLFxuICAgIG1hbnVhbCxcbiAgICBkaXI6IDAsXG4gICAgZW50cmFuY2U6ICgodG9wICsgMSkgPDwgMTIpIHwgKChsZWZ0IDw8IDQpICsgKHdpZHRoIDw8IDMpKSxcbiAgICBleGl0czogc2VxKHdpZHRoLCBpID0+ICh0b3AgPDwgNCkgfCAoaSArIGxlZnQpKSxcbiAgfTtcbn1cblxuLy8gVE9ETyAtIGNvbnNpZGVyIHNlcGFyYXRpbmcgd2lkZSB2cyBuYXJyb3cgZWRnZXMgaW50byBzZXBhcmF0ZSB0eXBlcz8/P1xuXG5leHBvcnQgZnVuY3Rpb24gYm90dG9tRWRnZSh7bGVmdCA9IDcsIHdpZHRoID0gMiwgc2hpZnQgPSAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnZWRnZTpib3R0b20nIGFzIENvbm5lY3Rpb25UeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnVhbCA9IGZhbHNlfSA9IHt9KTogQ29ubmVjdGlvbiB7XG4gIC8vIE5PVEU6IHNvbWUgc2NyZWVucyBjYW4gYmUgdXNlZCBib3RoIGluIG5vcm1hbCBtYXBzIGFuZCBpbiBzaW5nbGUtaGVpZ2h0XG4gIC8vIG1hcHMuICBXaGVuIHVzZWQgaW4gc2luZ2xlLWhlaWdodCwgd2UgbmVlZCB0byBzdWJ0cmFjdCAyIGZyb20gdGhlIFkgdGlsZVxuICAvLyBjb29yZGluYXRlcyBvZiB0aGUgZW50cmFuY2UvZXhpdCwgY2xhbXBpbmcgdG8gYmYgKGVudHJhbmNlKSBhbmQgYyAoZXhpdCkuXG4gIHJldHVybiB7XG4gICAgdHlwZSwgbWFudWFsLFxuICAgIGRpcjogMixcbiAgICBlbnRyYW5jZTogMHhkZl8wMCB8ICgobGVmdCA8PCA0KSArICh3aWR0aCA8PCAzKSArIDE2ICogc2hpZnQpLFxuICAgIGV4aXRzOiBzZXEod2lkdGgsIGkgPT4gMHhlMCB8IChpICsgbGVmdCkpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYm90dG9tRWRnZUhvdXNlKHtsZWZ0ID0gNyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMH0gPSB7fSk6IENvbm5lY3Rpb24ge1xuICAvLyBVbmxpa2UgXCJkdWFsLW1vZGVcIiBzY3JlZW5zLCBpbmRvb3JzLW9ubHkgc2NyZWVucyBoYXZlIHRoZWlyIGVudHJhbmNlIGFuXG4gIC8vIGFkZGl0aW9uYWwgdGlsZSB1cCwgYXQgYWYvYi4gIFRoaXMgaGFyZC1jb2RlcyB0aGF0LlxuICByZXR1cm4ge1xuICAgIHR5cGU6ICdlZGdlOmJvdHRvbScsXG4gICAgZGlyOiAyLFxuICAgIGVudHJhbmNlOiAweGFmXzAwIHwgKChsZWZ0IDw8IDQpICsgKHdpZHRoIDw8IDMpICsgMTYgKiBzaGlmdCksXG4gICAgZXhpdHM6IHNlcSh3aWR0aCwgaSA9PiAweGIwIHwgKGkgKyBsZWZ0KSksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0RWRnZSh7dG9wID0gNywgaGVpZ2h0ID0gMiwgc2hpZnQgPSAwfSA9IHt9KTogQ29ubmVjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2VkZ2U6bGVmdCcsXG4gICAgZGlyOiAxLFxuICAgIGVudHJhbmNlOiAoKHRvcCA8PCAxMikgKyAoKDE2ICogc2hpZnQpIDw8IDgpICsgKGhlaWdodCA8PCAxMSkpIHwgMHgxMCxcbiAgICBleGl0czogc2VxKGhlaWdodCwgaSA9PiAoaSArIHRvcCkgPDwgNCksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByaWdodEVkZ2Uoe3RvcCA9IDcsIGhlaWdodCA9IDIsIHNoaWZ0ID0gMH0gPSB7fSk6IENvbm5lY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdlZGdlOnJpZ2h0JyxcbiAgICBkaXI6IDMsXG4gICAgZW50cmFuY2U6ICgodG9wIDw8IDEyKSArICgoMTYgKiBzaGlmdCkgPDwgOCkgKyAoaGVpZ2h0IDw8IDExKSkgfCAweGVmLFxuICAgIGV4aXRzOiBzZXEoaGVpZ2h0LCBpID0+IChpICsgdG9wKSA8PCA0IHwgMHhmKSxcbiAgfTtcbn1cblxuLyoqIEBwYXJhbSB0aWxlIFRvcC1sZWZ0IHRpbGUgb2YgdHJhbnNpdGlvbiAoaGVpZ2h0IDIpICovXG5leHBvcnQgZnVuY3Rpb24gc2VhbWxlc3NVcCh0aWxlOiBudW1iZXIsIHdpZHRoID0gMik6IENvbm5lY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdzZWFtbGVzczp1cCcsXG4gICAgZGlyOiAwLFxuICAgIGdldCBlbnRyYW5jZSgpOiBudW1iZXIgeyB0aHJvdyBuZXcgRXJyb3IoJ2RvZXMgbm90IG1ha2Ugc2Vuc2UnKTsgfSxcbiAgICBleGl0czogc2VxKHdpZHRoLCBpID0+ICh0aWxlICsgaSkpLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VhbWxlc3NEb3duKHRpbGU6IG51bWJlciwgd2lkdGggPSAyKTogQ29ubmVjdGlvbiB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ3NlYW1sZXNzOmRvd24nLFxuICAgIGRpcjogMixcbiAgICBnZXQgZW50cmFuY2UoKTogbnVtYmVyIHsgdGhyb3cgbmV3IEVycm9yKCdkb2VzIG5vdCBtYWtlIHNlbnNlJyk7IH0sXG4gICAgZXhpdHM6IHNlcSh3aWR0aCwgaSA9PiAodGlsZSArIGkpKSxcbiAgfTtcbn1cbiJdfQ==