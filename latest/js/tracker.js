import { World } from './graph/world.js';
import { newFill, traverse } from './graph/shuffle.js';
import { Bits } from './bits.js';
import { FlagSet } from './flagset.js';
import { Rom } from './rom.js';
import { deterministic } from './pass/deterministic.js';
const ITEMS = `
sword-of-wind $00
sword-of-fire $01
sword-of-water $02
sword-of-thunder $03
windmill-key $32
statue-of-onyx $25
insect-flute $27
key-to-prison $33
flute-of-lime $28

ball-of-wind $05 
ball-of-fire $07
ball-of-water $09
ball-of-thunder $0b
kirisa-plant $3c
alarm-flute $31
fog-lamp $35
shell-flute $36
broken-statue $38
eye-glasses $37
glowing-lamp $39

tornado-bracelet $06
flame-bracelet $08
blizzard-bracelet $0a
storm-bracelet $0c
love-pendant $3b
key-to-styx $34
opel-statue $26
sacred-shield $12
ivory-statue $3d

rabbit-boots $2e
gas-mask $29
shield-ring $30
iron-necklace $2c
leather-boots $2f
power-ring $2a
warrior-ring $2b
deos-pendant $2d
bow-of-moon $3e
bow-of-sun $3f

refresh $41
paralysis $42
telepathy $43
teleport $44
recover $45
barrier $46
change $47
flight $48
psycho-armor $1c
bow-of-truth $40
`;
const SLOTS = [
    [0x00, 121, 192],
    [0x01, 274, 176],
    [0x02, 335, 123],
    [0x03, 77, 10],
    [0x05, 89, 107],
    [0x06, 115, 224],
    [0x07, 282, 187],
    [0x08, 47, 182],
    [0x09, 251, 232],
    [0x0a, 206, 249],
    [0x0b, 83, 63],
    [0x0c, 23, 9],
    [0x12, 49, 48],
    [0x14, 77, 2],
    [0x76, 70, 3],
    [0x77, 84, 3],
    [0x1b, 168, 96],
    [0x1c, 199, 110],
    [0x1d, 82, 95],
    [0x1e, 82, 101],
    [0x1f, 346, 147],
    [0x70, 346, 153],
    [0x71, 346, 159],
    [0x20, 126, 52],
    [0x21, 227, 97],
    [0x22, 256, 73],
    [0x23, 58, 115],
    [0x24, 82, 113],
    [0x25, 189, 180],
    [0x26, 18, 172],
    [0x27, 267, 185],
    [0x28, 275, 147],
    [0x29, 147, 206],
    [0x2a, 172, 104],
    [0x2b, 203, 5],
    [0x2c, 249, 69],
    [0x2d, 191, 110],
    [0x2e, 89, 99],
    [0x2f, 164, 104],
    [0x30, 319, 123],
    [0x72, 320, 130],
    [0x32, 105, 94],
    [0x33, 64, 198],
    [0x34, 83, 71],
    [0x35, 345, 140],
    [0x36, 301, 119],
    [0x37, 233, 118],
    [0x38, 234, 88],
    [0x39, 295, 92],
    [0x3b, 274, 117],
    [0x3c, 338, 226],
    [0x3d, 23, 17],
    [0x3e, 206, 241],
    [0x3f, 101, 6],
    [0x40, 207, 110],
    [0x41, 92, 117],
    [0x42, 279, 126],
    [0x43, 202, 138],
    [0x44, 124, 202],
    [0x45, 304, 128],
    [0x46, 248, 35],
    [0x47, 277, 3],
    [0x48, 15, 25],
    [0x50, 82, 107],
    [0x52, 134, 219],
    [0x53, 59, 219],
    [0x54, 52, 55],
    [0x55, 241, 97],
    [0x56, 123, 23],
    [0x74, 115, 3],
    [0x57, 70, 9],
    [0x75, 84, 9],
    [0x58, 32, 38],
    [0x79, 32, 16],
    [0x7a, 40, 16],
    [0x7b, 40, 38],
    [0x5a, 161, 97],
    [0x10, 327, 123],
    [0x5c, 256, 79],
    [0x5d, 36, 139],
    [0x5e, 14, 229],
    [0x5f, 345, 225],
    [0x60, 18, 94],
    [0x61, 234, 96],
    [0x62, 18, 118],
    [0x63, 36, 54],
    [0x64, 175, 97],
    [0x65, 139, 40],
    [0x66, 66, 160],
    [0x69, 131, 201],
    [0x6a, 76, 226],
    [0x6b, 18, 100],
    [0x6c, 193, 103],
    [0x78, 199, 103],
    [0x6d, 205, 103],
    [0x73, 256, 67],
    [0x6e, 24, 38],
    [0x6f, 44, 97],
];
const KEY = new Set([0x10, 0x12, 0x23, 0x26, 0x61]);
const BOSSES = new Map([
    [~0x100, 0x2e],
    [~0x101, 0x07],
    [~0x102, 0x08],
    [~0x103, 0x09],
    [~0x104, 0x38],
    [~0x105, 0x0b],
    [~0x106, 0x26],
    [~0x107, 0x23],
    [~0x108, 0x12],
    [~0x109, 0x3d],
    [~0x10a, 0x1c],
    [~0x10c, 0x61],
]);
const TRADES = new Set([0x29, 0x3e, 0x47, 0x48]);
class Graph {
    constructor(rom, world, flags) {
        this.rom = rom;
        this.world = world;
        this.flags = flags;
        this.slots = new Map();
        this.items = new Map();
        this.slotElts = new Map();
        this.has = Bits.of();
        window.GRAPH = this;
        this.grid = document.getElementsByClassName('grid')[0];
        this.map = document.getElementsByClassName('map')[0];
        let always = Bits.of();
        for (const { item: id, index } of world.graph.slots) {
            if (id == null)
                continue;
            this.slots.set(id, index);
        }
        for (const { item: id, index } of world.graph.items) {
            if (id == null)
                continue;
            this.items.set(id, index);
            const item = rom.items[id];
            if (item && !item.unique)
                always = Bits.with(always, index);
        }
        this.unusedItems = world.graph.items.length;
        this.has = this.always = always;
        const toggle = (e) => {
            let t = e.target;
            while (t && !t.dataset['index']) {
                t = t.parentElement;
            }
            if (!t)
                return;
            const uid = Number(t.dataset['index']);
            const has = t.classList.toggle('got');
            if (t.dataset['item']) {
                this.has = has ?
                    Bits.with(this.has, uid) :
                    Bits.without(this.has, uid);
            }
            this.update();
            e.preventDefault();
        };
        this.grid.addEventListener('click', toggle);
    }
    addSlot(slotId, x, y) {
        const index = this.slots.get(slotId);
        if (index == null) {
            debugger;
            throw new Error();
        }
        const div = document.createElement('div');
        const itemget = this.rom.itemGets[slotId];
        const item = itemget && this.rom.items[itemget.itemId];
        if (item && item.unique || KEY.has(slotId)) {
            div.classList.add('key');
            x--;
            y--;
        }
        x--;
        y--;
        div.dataset['index'] = String(index);
        div.style.left = x + 'px';
        div.style.top = y + 'px';
        const inner = document.createElement('div');
        div.appendChild(inner);
        inner.textContent =
            slotId >= 0x70 ?
                'Mimic' :
                this.rom.items[itemget.itemId].messageName.replace(' ', '\xa0');
        if (this.flags.randomizeTrades() && TRADES.has(slotId)) {
            div.classList.add('boss');
        }
        this.slotElts.set(index, div);
        this.map.appendChild(div);
    }
    addItem(cls, id) {
        const uid = Number.parseInt(id.substring(1), 16);
        const outer = document.getElementsByClassName(cls)[0];
        const inner = document.createElement('div');
        outer.appendChild(inner);
        let index = this.items.get(uid);
        if (index == null) {
            this.items.set(uid, index = this.unusedItems++);
        }
        outer.dataset['index'] = String(index);
        outer.dataset['item'] = String(index);
    }
    addExtraFlags() {
        const g = this.world.graph;
        for (const slot of g.slots.slice(g.fixed)) {
            const c = slot.condition;
            const bossSlot = BOSSES.get(c);
            const replaced = bossSlot && this.slots.get(bossSlot);
            if (replaced == null)
                continue;
            const elt = this.slotElts.get(replaced);
            if (elt == null)
                throw new Error('expected');
            this.slotElts.delete(Number(elt.dataset['index']));
            this.slotElts.set(slot.index, elt);
            elt.classList.add('boss');
            elt.dataset['index'] = String(slot.index);
            elt.dataset['item'] = String(slot.index);
        }
    }
    update() {
        for (const elt of this.slotElts.values()) {
            elt.dataset['state'] = elt.classList.contains('got') ? '' : 'blocked';
        }
        for (const slot of traverse(this.world.graph, newFill(), this.has)) {
            const elt = this.slotElts.get(slot);
            if (elt && !elt.classList.contains('got')) {
                elt.dataset['state'] = 'available';
            }
        }
    }
}
let flags = 'Rlpt Tb';
for (const arg of location.hash.substring(1).split('&')) {
    const [key, value] = arg.split('=');
    if (key === 'flags') {
        flags = decodeURIComponent(value);
    }
}
async function main() {
    const rom = await Rom.load();
    const flagset = new FlagSet(flags);
    deterministic(rom, flagset);
    const world = World.build(rom, flagset, true);
    const graph = new Graph(rom, world, flagset);
    for (let item of ITEMS.split('\n')) {
        item = item.replace(/#.*/, '').trim();
        if (!item)
            continue;
        graph.addItem(...item.split(/ +/g));
    }
    for (const slot of SLOTS) {
        graph.addSlot(...slot);
    }
    graph.addExtraFlags();
    graph.update();
    document.getElementById('toggle-map').addEventListener('click', () => {
        graph.map.classList.toggle('hidden');
    });
    document.getElementById('clear-all').addEventListener('click', () => {
        for (const e of graph.grid.querySelectorAll('.got')) {
            e.classList.remove('got');
        }
        graph.has = graph.always;
        graph.update();
    });
}
;
main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhY2tlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy90cmFja2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUN2QyxPQUFPLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3JELE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDL0IsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLGNBQWMsQ0FBQztBQUNyQyxPQUFPLEVBQUMsR0FBRyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQzdCLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUV0RCxNQUFNLEtBQUssR0FBVzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBc0RyQixDQUFDO0FBRUYsTUFBTSxLQUFLLEdBQXFEO0lBQzlELENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBRWYsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFFZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFFZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRyxDQUFDLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFHLENBQUMsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFFZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUcsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBR2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFDLEdBQUcsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLENBQUM7SUFDZixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUNmLENBQUMsSUFBSSxFQUFHLEVBQUUsRUFBRSxFQUFFLENBQUM7SUFDZixDQUFDLElBQUksRUFBRyxFQUFFLEVBQUUsRUFBRSxDQUFDO0NBQ2hCLENBQUM7QUFHRixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBRXBELE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ2QsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7SUFDZCxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztJQUNkLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ2QsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7SUFDZCxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztJQUNkLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ2QsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7SUFDZCxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztJQUNkLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ2QsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUM7SUFFZCxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztDQUNmLENBQUMsQ0FBQztBQUlILE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUVqRCxNQUFNLEtBQUs7SUF3QlQsWUFBcUIsR0FBUSxFQUNSLEtBQVksRUFDWixLQUFjO1FBRmQsUUFBRyxHQUFILEdBQUcsQ0FBSztRQUNSLFVBQUssR0FBTCxLQUFLLENBQU87UUFDWixVQUFLLEdBQUwsS0FBSyxDQUFTO1FBeEIxQixVQUFLLEdBQUcsSUFBSSxHQUFHLEVBQWtCLENBQUM7UUFFbEMsVUFBSyxHQUFHLElBQUksR0FBRyxFQUFrQixDQUFDO1FBRWxDLGFBQVEsR0FBRyxJQUFJLEdBQUcsRUFBdUIsQ0FBQztRQVNuRCxRQUFHLEdBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBZW5CLE1BQWMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBRTdCLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXJELElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUV2QixLQUFLLE1BQU0sRUFBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBQyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO1lBQ2pELElBQUksRUFBRSxJQUFJLElBQUk7Z0JBQUUsU0FBUztZQUN6QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDM0I7UUFDRCxLQUFLLE1BQU0sRUFBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBQyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO1lBQ2pELElBQUksRUFBRSxJQUFJLElBQUk7Z0JBQUUsU0FBUztZQUN6QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDMUIsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUUzQixJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO2dCQUFFLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztTQUM3RDtRQUNELElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBRTVDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFnQ2hDLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBUSxFQUFFLEVBQUU7WUFDMUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQTBCLENBQUM7WUFDckMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUMvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQzthQUNyQjtZQUNELElBQUksQ0FBQyxDQUFDO2dCQUFFLE9BQU87WUFDZixNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDckIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztvQkFDWixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2FBQ2pDO1lBQ0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2QsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3JCLENBQUMsQ0FBQztRQUVGLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRTlDLENBQUM7SUFFRCxPQUFPLENBQUMsTUFBYyxFQUFFLENBQVMsRUFBRSxDQUFTO1FBQzFDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JDLElBQUksS0FBSyxJQUFJLElBQUksRUFBRTtZQUFFLFFBQVEsQ0FBQztZQUFDLE1BQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQztTQUFFO1FBQ25ELE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUMsTUFBTSxJQUFJLEdBQUcsT0FBTyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV2RCxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDMUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekIsQ0FBQyxFQUFFLENBQUM7WUFBQyxDQUFDLEVBQUUsQ0FBQztTQUNWO1FBQ0QsQ0FBQyxFQUFFLENBQUM7UUFBQyxDQUFDLEVBQUUsQ0FBQztRQUNULEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDMUIsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUV6QixNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkIsS0FBSyxDQUFDLFdBQVc7WUFDYixNQUFNLElBQUksSUFBSSxDQUFDLENBQUM7Z0JBQ1osT0FBTyxDQUFDLENBQUM7Z0JBQ1QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3hFLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3RELEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzNCO1FBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFRCxPQUFPLENBQUMsR0FBVyxFQUFFLEVBQVU7UUFFN0IsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pELE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQWdCLENBQUM7UUFDckUsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QyxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pCLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLElBQUksS0FBSyxJQUFJLElBQUksRUFBRTtZQUVqQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1NBQ2pEO1FBQ0QsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFeEMsQ0FBQztJQUVELGFBQWE7UUFDWCxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztRQUMzQixLQUFLLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUN6QyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ3pCLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxRQUFRLEdBQUcsUUFBUSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RELElBQUksUUFBUSxJQUFJLElBQUk7Z0JBQUUsU0FBUztZQUMvQixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN4QyxJQUFJLEdBQUcsSUFBSSxJQUFJO2dCQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25ELElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDbkMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMxQztJQUNILENBQUM7SUFFRCxNQUFNO1FBQ0osS0FBSyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3hDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1NBQ3ZFO1FBQ0QsS0FBSyxNQUFNLElBQUksSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBSWxFLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3pDLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsV0FBVyxDQUFDO2FBQ3BDO1NBQ0Y7SUFDSCxDQUFDO0NBQ0Y7QUFNRCxJQUFJLEtBQUssR0FBRyxTQUFTLENBQUM7QUFDdEIsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7SUFDdkQsTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3BDLElBQUksR0FBRyxLQUFLLE9BQU8sRUFBRTtRQUNuQixLQUFLLEdBQUcsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDbkM7Q0FDRjtBQVVELEtBQUssVUFBVSxJQUFJO0lBQ2pCLE1BQU0sR0FBRyxHQUFHLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzdCLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25DLGFBQWEsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDNUIsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlDLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDN0MsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2xDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSTtZQUFFLFNBQVM7UUFDcEIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFzQixDQUFDLENBQUM7S0FDM0Q7SUFDRCxLQUFLLE1BQU0sSUFBSSxJQUFJLEtBQUssRUFBRTtRQUN4QixLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDeEI7SUFDRCxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdEIsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBRWYsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ3BFLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN2QyxDQUFDLENBQUMsQ0FBQztJQUNILFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtRQUNuRSxLQUFLLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDbkQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDM0I7UUFDRCxLQUFLLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDekIsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2pCLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUFBLENBQUM7QUFJRixJQUFJLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEl0ZW0gdHJhY2tlciBmb3Igd2ViLlxuLy8gVXNlcyBmbGFnc2V0IHRvIGZpZ3VyZSBvdXQgYWN0dWFsIGRlcGVuZGVuY2llcy5cblxuaW1wb3J0IHtXb3JsZH0gZnJvbSAnLi9ncmFwaC93b3JsZC5qcyc7XG5pbXBvcnQge25ld0ZpbGwsIHRyYXZlcnNlfSBmcm9tICcuL2dyYXBoL3NodWZmbGUuanMnO1xuaW1wb3J0IHtCaXRzfSBmcm9tICcuL2JpdHMuanMnO1xuaW1wb3J0IHtGbGFnU2V0fSBmcm9tICcuL2ZsYWdzZXQuanMnO1xuaW1wb3J0IHtSb219IGZyb20gJy4vcm9tLmpzJztcbmltcG9ydCB7ZGV0ZXJtaW5pc3RpY30gZnJvbSAnLi9wYXNzL2RldGVybWluaXN0aWMuanMnO1xuXG5jb25zdCBJVEVNUzogc3RyaW5nID0gYFxuc3dvcmQtb2Ytd2luZCAkMDBcbnN3b3JkLW9mLWZpcmUgJDAxXG5zd29yZC1vZi13YXRlciAkMDJcbnN3b3JkLW9mLXRodW5kZXIgJDAzXG53aW5kbWlsbC1rZXkgJDMyXG5zdGF0dWUtb2Ytb255eCAkMjVcbmluc2VjdC1mbHV0ZSAkMjdcbmtleS10by1wcmlzb24gJDMzXG5mbHV0ZS1vZi1saW1lICQyOFxuXG5iYWxsLW9mLXdpbmQgJDA1IFxuYmFsbC1vZi1maXJlICQwN1xuYmFsbC1vZi13YXRlciAkMDlcbmJhbGwtb2YtdGh1bmRlciAkMGJcbmtpcmlzYS1wbGFudCAkM2NcbmFsYXJtLWZsdXRlICQzMVxuZm9nLWxhbXAgJDM1XG5zaGVsbC1mbHV0ZSAkMzZcbmJyb2tlbi1zdGF0dWUgJDM4XG5leWUtZ2xhc3NlcyAkMzdcbmdsb3dpbmctbGFtcCAkMzlcblxudG9ybmFkby1icmFjZWxldCAkMDZcbmZsYW1lLWJyYWNlbGV0ICQwOFxuYmxpenphcmQtYnJhY2VsZXQgJDBhXG5zdG9ybS1icmFjZWxldCAkMGNcbmxvdmUtcGVuZGFudCAkM2JcbmtleS10by1zdHl4ICQzNFxub3BlbC1zdGF0dWUgJDI2XG5zYWNyZWQtc2hpZWxkICQxMlxuaXZvcnktc3RhdHVlICQzZFxuXG5yYWJiaXQtYm9vdHMgJDJlXG5nYXMtbWFzayAkMjlcbnNoaWVsZC1yaW5nICQzMFxuaXJvbi1uZWNrbGFjZSAkMmNcbmxlYXRoZXItYm9vdHMgJDJmXG5wb3dlci1yaW5nICQyYVxud2Fycmlvci1yaW5nICQyYlxuZGVvcy1wZW5kYW50ICQyZFxuYm93LW9mLW1vb24gJDNlXG5ib3ctb2Ytc3VuICQzZlxuXG5yZWZyZXNoICQ0MVxucGFyYWx5c2lzICQ0MlxudGVsZXBhdGh5ICQ0M1xudGVsZXBvcnQgJDQ0XG5yZWNvdmVyICQ0NVxuYmFycmllciAkNDZcbmNoYW5nZSAkNDdcbmZsaWdodCAkNDhcbnBzeWNoby1hcm1vciAkMWNcbmJvdy1vZi10cnV0aCAkNDBcbmA7XG5cbmNvbnN0IFNMT1RTOiBSZWFkb25seUFycmF5PHJlYWRvbmx5IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXT4gPSBbXG4gIFsweDAwLCAxMjEsMTkyXSwgLy8gc3dvcmQgb2Ygd2luZFxuICBbMHgwMSwgMjc0LDE3Nl0sIC8vIHN3b3JkIG9mIGZpcmVcbiAgWzB4MDIsIDMzNSwxMjNdLCAvLyBzd29yZCBvZiB3YXRlclxuICBbMHgwMywgIDc3LCAxMF0sIC8vIHN3b3JkIG9mIHRodW5kZXJcbiAgWzB4MDUsICA4OSwxMDddLCAvLyBiYWxsIG9mIHdpbmRcbiAgWzB4MDYsIDExNSwyMjRdLCAvLyB0b3JuYWRvIGJyYWNlbGV0XG4gIFsweDA3LCAyODIsMTg3XSwgLy8gYmFsbCBvZiBmaXJlXG4gIFsweDA4LCAgNDcsMTgyXSwgLy8gZmxhbWUgYnJhY2VsZXRcbiAgWzB4MDksIDI1MSwyMzJdLCAvLyBiYWxsIG9mIHdhdGVyXG4gIFsweDBhLCAyMDYsMjQ5XSwgLy8gYmxpenphcmQgYnJhY2VsZXRcbiAgWzB4MGIsICA4MywgNjNdLCAvLyBiYWxsIG9mIHRodW5kZXJcbiAgWzB4MGMsICAyMywgIDldLCAvLyBzdG9ybSBicmFjZWxldFxuICBbMHgxMiwgIDQ5LCA0OF0sIC8vIHNhY3JlZCBzaGllbGRcbiAgWzB4MTQsICA3NywgIDJdLCAvLyBwc3ljaG8gc2hpZWxkXG4gIFsweDc2LCAgNzAsICAzXSwgLy8gcHN5Y2hvIHNoaWVsZCBtaW1pYyAxXG4gIFsweDc3LCAgODQsICAzXSwgLy8gcHN5Y2hvIHNoaWVsZCBtaW1pYyAyXG4gIFsweDFiLCAxNjgsIDk2XSwgLy8gYmF0dGxlIHN1aXRcbiAgWzB4MWMsIDE5OSwxMTBdLCAvLyBwc3ljaG8gYXJtb3JcbiAgWzB4MWQsICA4MiwgOTVdLCAvLyBtZWRpY2FsIGhlcmIgc2VhbGVkIGNhdmVcbiAgWzB4MWUsICA4MiwxMDFdLCAvLyBhbnRpZG90ZSBzZWFsZWQgY2F2ZVxuICBbMHgxZiwgMzQ2LDE0N10sIC8vIGx5c2lzIHBsYW50IGZvZyBsYW1wXG4gIFsweDcwLCAzNDYsMTUzXSwgLy8gZm9nIGxhbXAgbWltaWMgMVxuICBbMHg3MSwgMzQ2LDE1OV0sIC8vIGZvZyBsYW1wIG1pbWljIDJcbiAgWzB4MjAsIDEyNiwgNTJdLCAvLyBmcnVpdCBvZiBsaW1lIG10IGh5ZHJhXG4gIFsweDIxLCAyMjcsIDk3XSwgLy8gZnJ1aXQgb2YgcG93ZXIgc2FiZXJhIHBhbGFjZVxuICBbMHgyMiwgMjU2LCA3M10sIC8vIG1hZ2ljIHJpbmcgZXZpbCBzcGlyaXQgaXNsYW5kXG4gIFsweDIzLCAgNTgsMTE1XSwgLy8gZnJ1aXQgb2YgcmVwdW4gc2FiZXJhIDJcbiAgWzB4MjQsICA4MiwxMTNdLCAvLyB3YXJwIGJvb3RzIHNlYWxlZCBjYXZlXG4gIFsweDI1LCAxODksMTgwXSwgLy8gc3RhdHVlIG9mIG9ueXhcbiAgWzB4MjYsICAxOCwxNzJdLCAvLyBvcGVsIHN0YXR1ZVxuICBbMHgyNywgMjY3LDE4NV0sIC8vIGluc2VjdCBmbHV0ZVxuICBbMHgyOCwgMjc1LDE0N10sIC8vIGZsdXRlIG9mIGxpbWVcbiAgWzB4MjksIDE0NywyMDZdLCAvLyBnYXMgbWFza1xuICBbMHgyYSwgMTcyLDEwNF0sIC8vIHBvd2VyIHJpbmdcbiAgWzB4MmIsIDIwMywgIDVdLCAvLyB3YXJyaW9yIHJpbmdcbiAgWzB4MmMsIDI0OSwgNjldLCAvLyBpcm9uIG5lY2tsYWNlXG4gIFsweDJkLCAxOTEsMTEwXSwgLy8gZGVvcyBwZW5kYW50XG4gIFsweDJlLCAgODksIDk5XSwgLy8gcmFiYml0IGJvb3RzXG4gIFsweDJmLCAxNjQsMTA0XSwgLy8gbGVhdGhlciBib290c1xuICBbMHgzMCwgMzE5LDEyM10sIC8vIHNoaWVsZCByaW5nXG4gIFsweDcyLCAzMjAsMTMwXSwgLy8gd2F0ZXJmYWxsIGNhdmUgbWltaWNcbiAgLy8gMzEgYWxhcm0gZmx1dGVcbiAgWzB4MzIsIDEwNSwgOTRdLCAvLyB3aW5kbWlsbCBrZXlcbiAgWzB4MzMsICA2NCwxOThdLCAvLyBrZXkgdG8gcHJpc29uXG4gIFsweDM0LCAgODMsIDcxXSwgLy8ga2V5IHRvIHN0eXhcbiAgWzB4MzUsIDM0NSwxNDBdLCAvLyBmb2cgbGFtcFxuICBbMHgzNiwgMzAxLDExOV0sIC8vIHNoZWxsIGZsdXRlXG4gIFsweDM3LCAyMzMsMTE4XSwgLy8gZXllIGdsYXNzZXNcbiAgWzB4MzgsIDIzNCwgODhdLCAvLyBicm9rZW4gc3RhdHVlXG4gIFsweDM5LCAyOTUsIDkyXSwgLy8gZ2xvd2luZyBsYW1wXG4gIC8vIDNhIHN0YXR1ZSBvZiBnb2xkXG4gIFsweDNiLCAyNzQsMTE3XSwgLy8gbG92ZSBwZW5kYW50XG4gIFsweDNjLCAzMzgsMjI2XSwgLy8ga2lyaXNhIHBsYW50XG4gIFsweDNkLCAgMjMsIDE3XSwgLy8gaXZvcnkgc3RhdHVlXG4gIFsweDNlLCAyMDYsMjQxXSwgLy8gYm93IG9mIG1vb25cbiAgWzB4M2YsIDEwMSwgIDZdLCAvLyBib3cgb2Ygc3VuXG4gIFsweDQwLCAyMDcsMTEwXSwgLy8gYm93IG9mIHRydXRoXG4gIFsweDQxLCAgOTIsMTE3XSwgLy8gcmVmcmVzaFxuICBbMHg0MiwgMjc5LDEyNl0sIC8vIHBhcmFseXNpc1xuICBbMHg0MywgMjAyLDEzOF0sIC8vIHRlbGVwYXRoeVxuICBbMHg0NCwgMTI0LDIwMl0sIC8vIHRlbGVwb3J0XG4gIFsweDQ1LCAzMDQsMTI4XSwgLy8gcmVjb3ZlclxuICBbMHg0NiwgMjQ4LCAzNV0sIC8vIGJhcnJpZXJcbiAgWzB4NDcsIDI3NywgIDNdLCAvLyBjaGFuZ2VcbiAgWzB4NDgsICAxNSwgMjVdLCAvLyBmbGlnaHRcbiAgWzB4NTAsICA4MiwxMDddLCAvLyBtZWRpY2FsIGhlcmIgc2VhbGVkIGNhdmUgZnJvbnRcbiAgLy8gNTEgc2FjcmVkIHNoaWVsZFxuICBbMHg1MiwgMTM0LDIxOV0sIC8vIG1lZGljYWwgaGVyYiBtdCBzYWJyZSB3XG4gIFsweDUzLCAgNTksMjE5XSwgLy8gbWVkaWNhbCBoZXJiIG10IHNhYnJlIG5cbiAgWzB4NTQsICA1MiwgNTVdLCAvLyBtYWdpYyByaW5nIGZvcnRyZXNzIDMgdXBwZXJcbiAgWzB4NTUsIDI0MSwgOTddLCAvLyBtZWRpY2FsIGhlcmIgc2FiZXJhIHBhbGFjZVxuICBbMHg1NiwgMTIzLCAyM10sIC8vIG1lZGljYWwgaGVyYiBtdCBoeWRyYVxuICBbMHg3NCwgMTE1LCAgM10sIC8vIG10IGh5ZHJhIG1pbWljXG4gIFsweDU3LCAgNzAsICA5XSwgLy8gbWVkaWNhbCBoZXJiIHN0eXhcbiAgWzB4NzUsICA4NCwgIDldLCAvLyBzdHl4IDEgbWltaWNcbiAgWzB4NTgsICAzMiwgMzhdLCAvLyBtYWdpYyByaW5nIGthcm1pbmVcbiAgWzB4NzksICAzMiwgMTZdLCAvLyBrYXJtaW5lIG1pbWljIDFcbiAgWzB4N2EsICA0MCwgMTZdLCAvLyBrYXJtaW5lIG1pbWljIDJcbiAgWzB4N2IsICA0MCwgMzhdLCAvLyBrYXJtaW5lIG1pbWljIDNcbiAgLy8gNTkgbWVkaWNhbCBoZXJiXG4gIFsweDVhLCAxNjEsIDk3XSwgLy8gZnJ1aXQgb2YgcG93ZXIgb2FzaXMgY2F2ZSAob3ZlciB3YXRlcilcbiAgWzB4MTAsIDMyNywxMjNdLCAvLyBmbHV0ZSBvZiBsaW1lIGNoZXN0IChOT1RFOiBjaGFuZ2VkIDViLT4gMTApXG4gIFsweDVjLCAyNTYsIDc5XSwgLy8gbHlzaXMgcGxhbnQgZXZpbCBzcGlyaXQgaXNsYW5kXG4gIFsweDVkLCAgMzYsMTM5XSwgLy8gbHlzaXMgcGxhbnQgc2FiZXJhIGxldmVsXG4gIFsweDVlLCAgMTQsMjI5XSwgLy8gYW50aWRvdGUgbXQgc2FicmUgblxuICBbMHg1ZiwgMzQ1LDIyNV0sIC8vIGFudGlkb3RlIGtpcmlzYSBjYXZlXG4gIFsweDYwLCAgMTgsIDk0XSwgLy8gYW50aWRvdGUgZm9ydGVzcyAzXG4gIFsweDYxLCAyMzQsIDk2XSwgLy8gZnJ1aXQgb2YgcG93ZXIgdmFtcGlyZSAyXG4gIFsweDYyLCAgMTgsMTE4XSwgLy8gZnJ1aXQgb2YgcG93ZXIgc2FiZXJhIGxldmVsXG4gIFsweDYzLCAgMzYsIDU0XSwgLy8gb3BlbCBzdGF0dWUgZm9ydHJlc3MgM1xuICBbMHg2NCwgMTc1LCA5N10sIC8vIGZydWl0IG9mIHBvd2VyIG9hc2lzIGNhdmVcbiAgWzB4NjUsIDEzOSwgNDBdLCAvLyBtYWdpYyByaW5nIG10IGh5ZHJhXG4gIFsweDY2LCAgNjYsMTYwXSwgLy8gZnJ1aXQgb2YgcmVwdW4gc2FiZXJhIGxldmVsXG4gIC8vIDY3IG1hZ2ljIHJpbmdcbiAgLy8gNjggbWFnaWMgcmluZ1xuICBbMHg2OSwgMTMxLDIwMV0sIC8vIG1hZ2ljIHJpbmcgbXQgc2FicmUgd1xuICBbMHg2YSwgIDc2LDIyNl0sIC8vIHdhcnAgYm9vdHMgbXQgc2FicmUgd1xuICBbMHg2YiwgIDE4LDEwMF0sIC8vIG1hZ2ljIHJpbmcgZm9ydHJlc3MgMyB1cHBlciAoYmVoaW5kKVxuICBbMHg2YywgMTkzLDEwM10sIC8vIG1hZ2ljIHJpbmcgcHlyYW1pZCBmcm9udFxuICBbMHg3OCwgMTk5LDEwM10sIC8vIHB5cmFtaWQgYmFjayBtaW1pY1xuICBbMHg2ZCwgMjA1LDEwM10sIC8vIG9wZWwgc3RhdHVlIHB5cmFtaWQgYmFja1xuICBbMHg3MywgMjU2LCA2N10sIC8vIGlyb24gbmVja2xhY2UgbWltaWNcbiAgWzB4NmUsICAyNCwgMzhdLCAvLyB3YXJwIGJvb3RzIGthcm1pbmVcbiAgWzB4NmYsICA0NCwgOTddLCAvLyBtYWdpYyByaW5nIGZvcnRyZXNzIDMgbG93ZXJcbl07XG5cbi8vIG5vbi11bmlxdWUga2V5IGl0ZW0gc2xvdHNcbmNvbnN0IEtFWSA9IG5ldyBTZXQoWzB4MTAsIDB4MTIsIDB4MjMsIDB4MjYsIDB4NjFdKTtcblxuY29uc3QgQk9TU0VTID0gbmV3IE1hcChbXG4gIFt+MHgxMDAsIDB4MmVdLCAvLyByYWJiaXQgYm9vdHMgc2xvdCAtPiB2YW1waXJlIDFcbiAgW34weDEwMSwgMHgwN10sIC8vIGJhbGwgb2YgZmlyZSBzbG90IC0+IGluc2VjdFxuICBbfjB4MTAyLCAweDA4XSwgLy8gZmxhbWUgYnJhY2VsZXQgc2xvdCAtPiBrZWxiZXNxdWUgMVxuICBbfjB4MTAzLCAweDA5XSwgLy8gYmFsbCBvZiB3YXRlciBzbG90IC0+IHJhZ2VcbiAgW34weDEwNCwgMHgzOF0sIC8vIGJyb2tlbiBzdGF0dWUgc2xvdCAtPiBzYWJlcmEgMVxuICBbfjB4MTA1LCAweDBiXSwgLy8gYmFsbCBvZiB0aHVuZGVyIHNsb3QgLT4gbWFkbyAxXG4gIFt+MHgxMDYsIDB4MjZdLCAvLyBvcGVsIHN0YXR1ZSBzbG90IC0+IGtlbGJlc3F1ZSAyXG4gIFt+MHgxMDcsIDB4MjNdLCAvLyBmcnVpdCBvZiByZXB1biBzbG90IC0+IHNhYmVyYSAyXG4gIFt+MHgxMDgsIDB4MTJdLCAvLyBzYWNyZWQgc2hpZWxkIHNsb3QgLT4gbWFkbyAyXG4gIFt+MHgxMDksIDB4M2RdLCAvLyBpdm9yeSBzdGF0dWUgc2xvdCAtPiBrYXJtaW5lXG4gIFt+MHgxMGEsIDB4MWNdLCAvLyBwc3ljaG8gYXJtb3Igc2xvdCAtPiBkcmF5Z29uIDFcbiAgLy8gWywgfjB4MTBiXSwgLy8gZHJheWdvbiAyXG4gIFt+MHgxMGMsIDB4NjFdLCAvLyBmcnVpdCBvZiBwb3dlciBzbG90IC0+IHZhbXBpcmUgMlxuXSk7XG5cbi8vIHNsb3RzIHRoYXQgY29tZSBmcm9tIHRyYWRlLWluc1xuLy8gIC0gbm90ZTogdGhlIGZvZyBsYW1wIHRyYWRlLWluIGRvZXNuJ3QgaGF2ZSBhIGdvb2Qgc2xvdCBmb3IgdGhpc1xuY29uc3QgVFJBREVTID0gbmV3IFNldChbMHgyOSwgMHgzZSwgMHg0NywgMHg0OF0pO1xuXG5jbGFzcyBHcmFwaCB7XG4gIC8qKiBtYXAgZnJvbSBpZCB0byBzbG90IGluZGV4ICovXG4gIHJlYWRvbmx5IHNsb3RzID0gbmV3IE1hcDxudW1iZXIsIG51bWJlcj4oKTtcbiAgLyoqIG1hcCBmcm9tIGlkIHRvIGl0ZW0gaW5kZXggKi9cbiAgcmVhZG9ubHkgaXRlbXMgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xuICAvKiogbWFwIGZyb20gc2xvdCBpbmRleCB0byBlbGVtZW50ICovXG4gIHJlYWRvbmx5IHNsb3RFbHRzID0gbmV3IE1hcDxudW1iZXIsIEhUTUxFbGVtZW50PigpO1xuICAvKiogbWFwIGZyb20gaXRlbSBpbmRleCB0byBlbGVtZW50ICovXG4gIC8vcmVhZG9ubHkgaXRlbUVsdHMgPSBuZXcgTWFwPG51bWJlciwgSFRNTEVsZW1lbnQ+KCk7XG4gIC8qKiBzZXQgb2Ygc2xvdCBpbmRleCAqL1xuICAvL3JlYWRvbmx5IGNoZWNrZWQgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgLy8gLyoqIG1hcCBmcm9tIHNsb3QgaWQgdG8gbm9kZSAqL1xuICAvLyByZWFkb25seSBub2RlRnJvbVNsb3QgPSBuZXcgTWFwPG51bWJlciwgYW55PigpO1xuICAvLyByZWFkb25seSBub2RlcyA9IG5ldyBNYXA8YW55LCBhbnk+KCk7XG4gIC8qKiBNYXBzIGl0ZW0gaW5kZXggdG8gd2hldGhlciBpdGVtIGlzIGdvdHRlbiAqL1xuICBoYXM6IEJpdHMgPSBCaXRzLm9mKCk7XG4gIC8qKiBvbmx5IHVzZWQgZm9yIGNsZWFyaW5nOiBzZXQgb2YgaXRlbSBpbmRleCB3ZSBqdXN0IGFzc3VtZSAqL1xuICByZWFkb25seSBhbHdheXM6IEJpdHM7XG5cbiAgcmVhZG9ubHkgZ3JpZDogRWxlbWVudDtcbiAgcmVhZG9ubHkgbWFwOiBFbGVtZW50O1xuXG4gIHVudXNlZEl0ZW1zOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocmVhZG9ubHkgcm9tOiBSb20sXG4gICAgICAgICAgICAgIHJlYWRvbmx5IHdvcmxkOiBXb3JsZCxcbiAgICAgICAgICAgICAgcmVhZG9ubHkgZmxhZ3M6IEZsYWdTZXQpIHtcbiAgICAvLyBUT0RPIC0gY29tcHV0ZSB0d28gZGVwZ3JhcGhzOiBvbmUgd2l0aCBnbGl0Y2hlcyBhbmQgb25lIHdpdGhvdXRcbiAgICAvLyAgLSB0aGVuIHdlIGNhbiBzaG93IGdyZWVuIHZzIHllbGxvdyBmb3IgZ2xpdGNoYWJsZSBsb2NhdGlvbnMuLj9cblxuICAgICh3aW5kb3cgYXMgYW55KS5HUkFQSCA9IHRoaXM7XG5cbiAgICB0aGlzLmdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmlkJylbMF07XG4gICAgdGhpcy5tYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtYXAnKVswXTtcblxuICAgIGxldCBhbHdheXMgPSBCaXRzLm9mKCk7XG5cbiAgICBmb3IgKGNvbnN0IHtpdGVtOiBpZCwgaW5kZXh9IG9mIHdvcmxkLmdyYXBoLnNsb3RzKSB7XG4gICAgICBpZiAoaWQgPT0gbnVsbCkgY29udGludWU7IC8vIHRocm93IG5ldyBFcnJvcihgYmFkIHNsb3Q6ICR7aW5kZXh9YCk7XG4gICAgICB0aGlzLnNsb3RzLnNldChpZCwgaW5kZXgpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHtpdGVtOiBpZCwgaW5kZXh9IG9mIHdvcmxkLmdyYXBoLml0ZW1zKSB7XG4gICAgICBpZiAoaWQgPT0gbnVsbCkgY29udGludWU7IC8vIHRocm93IG5ldyBFcnJvcihgYmFkIGl0ZW06ICR7aW5kZXh9YCk7XG4gICAgICB0aGlzLml0ZW1zLnNldChpZCwgaW5kZXgpO1xuICAgICAgY29uc3QgaXRlbSA9IHJvbS5pdGVtc1tpZF07XG4gICAgICAvLyBUT0RPIC0gc2V0dXAgYWx3YXlzIGZyb20gbm9uLWFkZGVkIGl0ZW1zP1xuICAgICAgaWYgKGl0ZW0gJiYgIWl0ZW0udW5pcXVlKSBhbHdheXMgPSBCaXRzLndpdGgoYWx3YXlzLCBpbmRleCk7XG4gICAgfVxuICAgIHRoaXMudW51c2VkSXRlbXMgPSB3b3JsZC5ncmFwaC5pdGVtcy5sZW5ndGg7XG5cbiAgICB0aGlzLmhhcyA9IHRoaXMuYWx3YXlzID0gYWx3YXlzO1xuXG4gICAgICAvLyB0aGlzLm5vZGVzLnNldChuLnVpZCwgbi5uYW1lKTtcbiAgICAgIC8vIHRoaXMucm91dGVbbi51aWRdID0gNDtcbiAgICAgIC8vIGlmIChuIGluc3RhbmNlb2YgU2xvdCkge1xuICAgICAgLy8gICAvLyB1c2VkIGJ5IGFkZEJveFxuICAgICAgLy8gICBpZiAoIW4uaXNNaW1pYygpKSB7XG4gICAgICAvLyAgICAgdGhpcy5ub2RlRnJvbVNsb3Quc2V0KG4uc2xvdEluZGV4LCBuKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gICAvLyBub3Qgc2hvd24sIGp1c3QgYXNzdW1lIGhhdmUgaXRcbiAgICAgIC8vICAgaWYgKG4ubmFtZSA9PSAnQWxhcm0gRmx1dGUnIHx8IG4ubmFtZSA9PSAnTWVkaWNhbCBIZXJiJykge1xuICAgICAgLy8gICAgIHRoaXMuYWx3YXlzLmFkZChuLml0ZW0udWlkKTtcbiAgICAgIC8vICAgICB0aGlzLnJvdXRlW24uaXRlbS51aWRdID0gMDtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSBlbHNlIGlmIChuIGluc3RhbmNlb2YgTG9jYXRpb24pIHtcbiAgICAgIC8vICAgLy8gZmluZCB0aGUgbWltaWNzLCB0aGV5IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBiZWNhdXNlXG4gICAgICAvLyAgIC8vIHRoZXkgYWxsIG1hcCB0byB0aGUgc2FtZSBzbG90IElELi4uXG4gICAgICAvLyAgIGZvciAoY29uc3QgY2hlc3Qgb2Ygbi5jaGVzdHMpIHtcbiAgICAgIC8vICAgICBpZiAoY2hlc3QuaXNNaW1pYygpKSB7XG4gICAgICAvLyAgICAgICB0aGlzLm1pbWljU2xvdHMuc2V0KG4uaWQgPDwgOCB8IGNoZXN0LnNwYXduU2xvdCwgY2hlc3QpO1xuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSBlbHNlIGlmIChuIGluc3RhbmNlb2YgVHJhY2tlck5vZGUpIHtcbiAgICAgIC8vICAgY29uc3QgaW5kZXggPSB0aGlzLmRlcGdyYXBoLnVpZFRvSXRlbVtuLnVpZF07XG4gICAgICAvLyAgIGlmIChpbmRleCA9PSBudWxsKSBjb250aW51ZTtcbiAgICAgIC8vICAgbGV0IGNvbG9yID0gNDtcbiAgICAgIC8vICAgaWYgKG4udHlwZSA9PT0gVHJhY2tlck5vZGUuT0ZGX1JPVVRFKSBjb2xvciA9IDE7XG4gICAgICAvLyAgIGlmIChuLnR5cGUgPT09IFRyYWNrZXJOb2RlLkdMSVRDSCkgY29sb3IgPSAyO1xuICAgICAgLy8gICBpZiAobi50eXBlID09PSBUcmFja2VyTm9kZS5IQVJEKSBjb2xvciA9IDM7XG4gICAgICAvLyAgIHRoaXMucm91dGVbbi51aWRdID0gY29sb3I7XG4gICAgICAvLyB9XG5cbiAgICBjb25zdCB0b2dnbGUgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgIGxldCB0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnR8bnVsbDtcbiAgICAgIHdoaWxlICh0ICYmICF0LmRhdGFzZXRbJ2luZGV4J10pIHtcbiAgICAgICAgdCA9IHQucGFyZW50RWxlbWVudDtcbiAgICAgIH1cbiAgICAgIGlmICghdCkgcmV0dXJuO1xuICAgICAgY29uc3QgdWlkID0gTnVtYmVyKHQuZGF0YXNldFsnaW5kZXgnXSk7XG4gICAgICBjb25zdCBoYXMgPSB0LmNsYXNzTGlzdC50b2dnbGUoJ2dvdCcpO1xuICAgICAgaWYgKHQuZGF0YXNldFsnaXRlbSddKSB7XG4gICAgICAgIHRoaXMuaGFzID0gaGFzID9cbiAgICAgICAgICAgIEJpdHMud2l0aCh0aGlzLmhhcywgdWlkKSA6XG4gICAgICAgICAgICBCaXRzLndpdGhvdXQodGhpcy5oYXMsIHVpZCk7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmdyaWQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGUpO1xuICAgIC8vdGhpcy5tYXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGUpO1xuICB9XG5cbiAgYWRkU2xvdChzbG90SWQ6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc2xvdHMuZ2V0KHNsb3RJZCk7XG4gICAgaWYgKGluZGV4ID09IG51bGwpIHsgZGVidWdnZXI7IHRocm93IG5ldyBFcnJvcigpOyB9XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgaXRlbWdldCA9IHRoaXMucm9tLml0ZW1HZXRzW3Nsb3RJZF07XG4gICAgY29uc3QgaXRlbSA9IGl0ZW1nZXQgJiYgdGhpcy5yb20uaXRlbXNbaXRlbWdldC5pdGVtSWRdO1xuICAgIC8vIG1ha2Ugc29tZSBib3hlcyBiaWdnZXI7IHF1aWNrIGhhY2sgdG8gYXZvaWQgdW5pcXVlIGFybW9yc1xuICAgIGlmIChpdGVtICYmIGl0ZW0udW5pcXVlIHx8IEtFWS5oYXMoc2xvdElkKSkge1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2tleScpO1xuICAgICAgeC0tOyB5LS07XG4gICAgfVxuICAgIHgtLTsgeS0tO1xuICAgIGRpdi5kYXRhc2V0WydpbmRleCddID0gU3RyaW5nKGluZGV4KTtcbiAgICBkaXYuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIGRpdi5zdHlsZS50b3AgPSB5ICsgJ3B4JztcbiAgICAvL2Rpdi50ZXh0Q29udGVudCA9ICdcXHhhMCc7XG4gICAgY29uc3QgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgIGlubmVyLnRleHRDb250ZW50ID1cbiAgICAgICAgc2xvdElkID49IDB4NzAgP1xuICAgICAgICAgICAgJ01pbWljJyA6XG4gICAgICAgICAgICB0aGlzLnJvbS5pdGVtc1tpdGVtZ2V0Lml0ZW1JZF0ubWVzc2FnZU5hbWUucmVwbGFjZSgnICcsICdcXHhhMCcpO1xuICAgIGlmICh0aGlzLmZsYWdzLnJhbmRvbWl6ZVRyYWRlcygpICYmIFRSQURFUy5oYXMoc2xvdElkKSkge1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2Jvc3MnKTtcbiAgICB9XG4gICAgdGhpcy5zbG90RWx0cy5zZXQoaW5kZXgsIGRpdik7XG4gICAgdGhpcy5tYXAuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2xzOiBzdHJpbmcsIGlkOiBzdHJpbmcpIHtcbiAgICAvLyBwYXJzZSB0aGUgaGV4LCByZW1vdmluZyAkIHByZWZpeFxuICAgIGNvbnN0IHVpZCA9IE51bWJlci5wYXJzZUludChpZC5zdWJzdHJpbmcoMSksIDE2KTtcbiAgICBjb25zdCBvdXRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xzKVswXSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICBsZXQgaW5kZXggPSB0aGlzLml0ZW1zLmdldCh1aWQpO1xuICAgIGlmIChpbmRleCA9PSBudWxsKSB7XG4gICAgICAvLyBJdGVtcyB0aGF0IGRvbid0IGJsb2NrIGFueXRoaW5nIHdvbid0IGhhdmUgc2hvd24gdXAgeWV0LlxuICAgICAgdGhpcy5pdGVtcy5zZXQodWlkLCBpbmRleCA9IHRoaXMudW51c2VkSXRlbXMrKyk7XG4gICAgfVxuICAgIG91dGVyLmRhdGFzZXRbJ2luZGV4J10gPSBTdHJpbmcoaW5kZXgpO1xuICAgIG91dGVyLmRhdGFzZXRbJ2l0ZW0nXSA9IFN0cmluZyhpbmRleCk7XG4gICAgLy90aGlzLnNsb3RFbHRzLnNldChpbmRleCwgb3V0ZXIpO1xuICB9XG5cbiAgYWRkRXh0cmFGbGFncygpIHtcbiAgICBjb25zdCBnID0gdGhpcy53b3JsZC5ncmFwaDtcbiAgICBmb3IgKGNvbnN0IHNsb3Qgb2YgZy5zbG90cy5zbGljZShnLmZpeGVkKSkge1xuICAgICAgY29uc3QgYyA9IHNsb3QuY29uZGl0aW9uO1xuICAgICAgY29uc3QgYm9zc1Nsb3QgPSBCT1NTRVMuZ2V0KGMpO1xuICAgICAgY29uc3QgcmVwbGFjZWQgPSBib3NzU2xvdCAmJiB0aGlzLnNsb3RzLmdldChib3NzU2xvdCk7XG4gICAgICBpZiAocmVwbGFjZWQgPT0gbnVsbCkgY29udGludWU7XG4gICAgICBjb25zdCBlbHQgPSB0aGlzLnNsb3RFbHRzLmdldChyZXBsYWNlZCk7XG4gICAgICBpZiAoZWx0ID09IG51bGwpIHRocm93IG5ldyBFcnJvcignZXhwZWN0ZWQnKTtcbiAgICAgIHRoaXMuc2xvdEVsdHMuZGVsZXRlKE51bWJlcihlbHQuZGF0YXNldFsnaW5kZXgnXSkpO1xuICAgICAgdGhpcy5zbG90RWx0cy5zZXQoc2xvdC5pbmRleCwgZWx0KTtcbiAgICAgIGVsdC5jbGFzc0xpc3QuYWRkKCdib3NzJyk7XG4gICAgICBlbHQuZGF0YXNldFsnaW5kZXgnXSA9IFN0cmluZyhzbG90LmluZGV4KTtcbiAgICAgIGVsdC5kYXRhc2V0WydpdGVtJ10gPSBTdHJpbmcoc2xvdC5pbmRleCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGZvciAoY29uc3QgZWx0IG9mIHRoaXMuc2xvdEVsdHMudmFsdWVzKCkpIHtcbiAgICAgIGVsdC5kYXRhc2V0WydzdGF0ZSddID0gZWx0LmNsYXNzTGlzdC5jb250YWlucygnZ290JykgPyAnJyA6ICdibG9ja2VkJztcbiAgICB9XG4gICAgZm9yIChjb25zdCBzbG90IG9mIHRyYXZlcnNlKHRoaXMud29ybGQuZ3JhcGgsIG5ld0ZpbGwoKSwgdGhpcy5oYXMpKSB7XG4gICAgICAvLyBmaWd1cmUgb3V0IHdoZXRoZXIgaXQncyBhdmFpbGFibGUgb3Igbm90XG4gICAgICAvLyBUT0RPIC0gY29uc2lkZXIgaGF2aW5nIG11bHRpcGxlIHdvcmxkcywgZm9yIGdsaXRjaGVkL2hhcmQ/XG4gICAgICAvLyAgICAgIC0+IGFkanVzdCBmbGFncyB0byBhZGQgYWxsIGdsaXRjaGVzL2hhcmQgbW9kZVxuICAgICAgY29uc3QgZWx0ID0gdGhpcy5zbG90RWx0cy5nZXQoc2xvdCk7XG4gICAgICBpZiAoZWx0ICYmICFlbHQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnb3QnKSkge1xuICAgICAgICBlbHQuZGF0YXNldFsnc3RhdGUnXSA9ICdhdmFpbGFibGUnO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBUT0RPIC0gYWxsIEcgZmxhZ3MgZ2V0IHRoZSBnbGl0Y2ggZm9yIGZyZWVcbi8vICAgICAgLSBhbGwgb3RoZXJzIChtaW51cyB3aWxkIHdhcnAgaWYgZGlzYWJsZWQpIHRyYWNrZWQgYXMgZ2xpdGNoZXNcbi8vICAgICAgLSBjb25zaWRlciBkYXJrIHllbGxvdyBhbmQgZGFyayBncmVlbiBhcyB3ZWxsIGFzIGRhcmsgYmx1ZSA/P1xuXG5sZXQgZmxhZ3MgPSAnUmxwdCBUYic7XG5mb3IgKGNvbnN0IGFyZyBvZiBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKS5zcGxpdCgnJicpKSB7XG4gIGNvbnN0IFtrZXksIHZhbHVlXSA9IGFyZy5zcGxpdCgnPScpO1xuICBpZiAoa2V5ID09PSAnZmxhZ3MnKSB7XG4gICAgZmxhZ3MgPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICB9XG59XG4vLyAgICdzcGVlZC1ib290cyc6IHRydWUsXG4vLyAgICdnbGl0Y2gtZ2hldHRvLWZsaWdodCc6IHRydWUsXG4vLyAgICdnbGl0Y2gtdGFsayc6IHRydWUsXG4vLyAgICdyb3V0ZS1uby1mcmVlLWJhcnJpZXInOiB0cnVlLFxuLy8gICAncm91dGUtc2h5cm9uLXRlbGVwb3J0JzogdHJ1ZSxcbi8vICAgJ3JvdXRlLWVhcmx5LWZsaWdodCc6IHRydWUsXG4vLyAgICd0cmFja2VyJzogdHJ1ZSxcbi8vIH07XG5cbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG4gIGNvbnN0IHJvbSA9IGF3YWl0IFJvbS5sb2FkKCk7XG4gIGNvbnN0IGZsYWdzZXQgPSBuZXcgRmxhZ1NldChmbGFncyk7XG4gIGRldGVybWluaXN0aWMocm9tLCBmbGFnc2V0KTsgLy8gbWFrZSBkZXRlcm1pbmlzdGljIGNoYW5nZXNcbiAgY29uc3Qgd29ybGQgPSBXb3JsZC5idWlsZChyb20sIGZsYWdzZXQsIHRydWUpOyAvLyArICcgRHQnKSk7XG4gIGNvbnN0IGdyYXBoID0gbmV3IEdyYXBoKHJvbSwgd29ybGQsIGZsYWdzZXQpO1xuICBmb3IgKGxldCBpdGVtIG9mIElURU1TLnNwbGl0KCdcXG4nKSkge1xuICAgIGl0ZW0gPSBpdGVtLnJlcGxhY2UoLyMuKi8sICcnKS50cmltKCk7XG4gICAgaWYgKCFpdGVtKSBjb250aW51ZTtcbiAgICBncmFwaC5hZGRJdGVtKC4uLihpdGVtLnNwbGl0KC8gKy9nKSBhcyBbc3RyaW5nLCBzdHJpbmddKSk7XG4gIH1cbiAgZm9yIChjb25zdCBzbG90IG9mIFNMT1RTKSB7XG4gICAgZ3JhcGguYWRkU2xvdCguLi5zbG90KTtcbiAgfVxuICBncmFwaC5hZGRFeHRyYUZsYWdzKCk7XG4gIGdyYXBoLnVwZGF0ZSgpO1xuXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGUtbWFwJykhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGdyYXBoLm1hcC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgfSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhci1hbGwnKSEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZm9yIChjb25zdCBlIG9mIGdyYXBoLmdyaWQucXVlcnlTZWxlY3RvckFsbCgnLmdvdCcpKSB7XG4gICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoJ2dvdCcpO1xuICAgIH1cbiAgICBncmFwaC5oYXMgPSBncmFwaC5hbHdheXM7XG4gICAgZ3JhcGgudXBkYXRlKCk7XG4gIH0pO1xufTtcblxuLy9mdW5jdGlvbiBkaWUoKTogbmV2ZXIgeyB0aHJvdyBuZXcgRXJyb3IoJ0Fzc2VydGlvbiBmYWlsZWQnKTsgfVxuXG5tYWluKCk7XG4iXX0=