import { Spawn } from '../rom/location.js';
import { MessageId } from '../rom/messageid.js';
import { GlobalDialog, LocalDialog } from '../rom/npc.js';
import { ShopType } from '../rom/shop.js';
import { hex } from '../rom/util.js';
import { assert } from '../util.js';
import { Monster } from '../rom/monster.js';
import { Patterns } from '../rom/pattern.js';
const [] = [hex];
function write(arr, start, ...data) {
    for (let i = 0; i < data.length; i++) {
        arr[start + i] = data[i];
    }
}
export function deterministicPreParse(prg) {
    prg[0x1a594] = 0xff;
    prg[0x1cdc5] = 0xa8;
    prg[0x1a176] = 0xff;
    prg[0x1a84c] = 0xff;
    prg[0x1d843] = 0xa0;
    prg[0x1e06b] &= 7;
    prg[0x1e06f] &= 7;
    prg[0x1e073] &= 7;
    prg[0x1e077] &= 7;
    prg[0x1e07b] &= 7;
    prg[0x1e084] &= 7;
    prg[0x1e09b] &= 7;
    prg[0x1e0b9] &= 7;
    prg[0x1e105] = 0x2f;
    prg[0x1e277] = 0x00;
    prg[0x1e366] = 0x40;
    prg[0x1e371] = 0x00;
    prg[0x1e387] = 0x00;
    prg[0x1e391] = 0x00;
    write(prg, 0x1a168, 0x33, 0x33);
    write(prg, 0x1a48e, 0x33, 0x33);
    prg[0x19bb1] = 0x70;
    prg[0x19bb5] = 0x71;
    prg[0x19a77] = 0x72;
    prg[0x19deb] = 0x73;
    prg[0x1a045] = 0x74;
    prg[0x1a0e1] = 0x75;
    prg[0x1a0e5] = 0x76;
    prg[0x1a0e9] = 0x77;
    prg[0x1a605] = 0x78;
    prg[0x1a3c1] = 0x79;
    prg[0x1a3c5] = 0x7a;
    prg[0x1a3c9] = 0x7b;
    write(prg, 0x1e0b7, 0xc0, 0x00);
    write(prg, 0x1e32a, 0xc0, 0x00);
    write(prg, 0x1e330, 0xc0, 0x00);
    write(prg, 0x1e336, 0xc0, 0x00);
    write(prg, 0x1e0e0, 0xc0, 0x00);
    write(prg, 0x1e0e6, 0xc0, 0x00);
    prg[0x1c803] = 0x00;
    write(prg, 0x1c80d, 0xa2, 0xb3);
    prg[0x1aa86] = 0xfe;
    write(prg, 0x3d6d5, 0x25, 0x29, 0x39, 0x3a, 0x3b, 0x47, 0x3c, 0x3e, 0x84, 0x46, 0xb2, 0x42, 0xb4, 0x41, 0xff);
    for (const addr of [0x38757, 0x38777, 0x3877b, 0x38797, 0x3879b,
        0x387db, 0x387df, 0x387fb, 0x387ff, 0x3881b, 0x3881f,
        0x38865, 0x38885, 0x38889, 0x388a5]) {
        prg[addr] |= 1;
    }
}
export function deterministic(rom, flags) {
    addZombieWarp(rom);
    consolidateItemGrants(rom);
    addMezameTrigger(rom);
    normalizeSwords(rom, flags);
    fixFlyableWalls(rom);
    fixMonsterTerrain(rom);
    fixCrystalis(rom);
    fixOpelStatue(rom);
    fixCoinSprites(rom);
    fixChests(rom);
    preventBossSoftlocks(rom);
    makeBraceletsProgressive(rom);
    adjustGoaFortressTriggers(rom);
    preventNpcDespawns(rom, flags);
    leafElderInSabreHeals(rom);
    if (flags.requireHealedDolphinToRide())
        requireHealedDolphin(rom);
    if (flags.saharaRabbitsRequireTelepathy())
        requireTelepathyForDeo(rom);
    adjustItemNames(rom, flags);
    alarmFluteIsKeyItem(rom, flags);
    brokahanaWantsMado1(rom);
    if (flags.teleportOnThunderSword()) {
        teleportOnThunderSword(rom);
        rom.townWarp.thunderSwordWarp = [rom.locations.Shyron.id, 0x41];
    }
    else {
        noTeleportOnThunderSword(rom);
    }
    undergroundChannelLandBridge(rom);
    if (flags.fogLampNotRequired())
        fogLampNotRequired(rom, flags);
    evilSpiritIslandRequiresDolphin(rom);
    simplifyInvisibleChests(rom);
    addCordelWestTriggers(rom, flags);
    if (flags.disableRabbitSkip())
        fixRabbitSkip(rom);
    if (flags.disableFlightStatueSkip())
        fixFlightStatueSkip(rom);
    if (flags.disableRageSkip())
        patchLimeTreeLake(rom);
    fixReverseWalls(rom);
    if (flags.chargeShotsOnly())
        disableStabs(rom);
    if (flags.orbsOptional())
        orbsOptional(rom);
    if (flags.noBowMode())
        noBowMode(rom);
    patchTooManyItemsMessage(rom);
    if (flags.hardcoreMode())
        hardcoreMode(rom);
    useNewStatusBarGraphics(rom);
    if (flags.shouldColorSwordElements())
        useElementSwordColors(rom);
}
function useElementSwordColors(rom) {
    function swapTiles(start, thunder) {
        for (let addr = 0; addr <= 0xa; addr++) {
            if (addr === 8)
                continue;
            const p = rom.patterns.get(addr | start);
            const orig = [...p.pixels];
            for (let i = 0; i < p.pixels.length; i++) {
                p.pixels[i] = orig[i ^ 8];
                if ((i >>> 3) === thunder)
                    p.pixels[i] |= orig[i];
            }
        }
    }
    swapTiles(0x1090);
    swapTiles(0x10d0);
    swapTiles(0x1110);
    swapTiles(0x1150);
    swapTiles(0x1190);
}
function useNewStatusBarGraphics(rom) {
    const page = 0x38 << 6;
    rom.patterns.set(page, 0x0, Patterns.HUD_LF);
    rom.patterns.set(page, 0x1, Patterns.HUD_PW);
    rom.patterns.set(page, 0x2, Patterns.HUD_EY);
    rom.patterns.set(page, 0x3, Patterns.HUD_LV);
    rom.patterns.set(page, 0x4, Patterns.HUD_DL);
    rom.patterns.set(page, 0x5, Patterns.HUD_MP);
    rom.patterns.set(page, 0x6, Patterns.HUD_EX);
}
function consolidateItemGrants(rom) {
    rom.items.GlowingLamp.itemUseData[0].message.action = 0x0b;
}
function addMezameTrigger(rom) {
    const trigger = rom.nextFreeTrigger();
    trigger.used = true;
    trigger.conditions = [~rom.flags.AlwaysTrue.id];
    trigger.message = MessageId.of({ action: 4 });
    trigger.flags = [rom.flags.AlwaysTrue.id];
    const mezame = rom.locations.MezameShrine;
    mezame.spawns.push(Spawn.of({ tile: 0x88, type: 2, id: trigger.id }));
}
function normalizeSwords(rom, flags) {
    rom.objects[0x10].atk = 3;
    rom.objects[0x11].atk = 6;
    rom.objects[0x12].atk = 8;
    rom.objects[0x18].atk = 3;
    rom.objects[0x13].atk = 5;
    rom.objects[0x19].atk = 5;
    rom.objects[0x17].atk = 7;
    rom.objects[0x1a].atk = 7;
    rom.objects[0x14].atk = 3;
    rom.objects[0x15].atk = 6;
    rom.objects[0x16].atk = 8;
    rom.objects[0x1c].atk = 3;
    rom.objects[0x1d].atk = 3;
    rom.objects[0x1e].atk = 5;
    rom.objects[0x1b].atk = 7;
    rom.objects[0x1f].atk = 7;
    if (flags.slowDownTornado()) {
        const tornado = rom.objects[0x12];
        tornado.speed = 0x07;
        tornado.data[0x0c] = 0x60;
    }
}
function preventBossSoftlocks(rom) {
    const trigger = rom.trigger(0xa0);
    trigger.used = true;
    trigger.conditions = [];
    trigger.flags = [];
    trigger.message = MessageId.of({ part: 0, index: 0, action: 0x15 });
    rom.objects[0x5e].data[0xd] = 0xfe;
    rom.items.InsectFlute.itemUseData[0].flags = [rom.flags.UsedInsectFlute.id];
}
function fixOpelStatue(rom) {
    rom.items.OpelStatue.selectedItemValue = 0;
}
function fixCoinSprites(rom) {
    for (const page of [0x60, 0x64, 0x65, 0x66, 0x67, 0x68,
        0x69, 0x6a, 0x6b, 0x6c, 0x6d, 0x6f]) {
        for (const pat of [0, 1, 2]) {
            rom.patterns.set(page << 6, pat, rom.patterns.get(0x5e << 6, pat).pixels);
        }
    }
    rom.objects[0x0c].metasprite = 0xa9;
}
function fixReverseWalls(rom) {
    for (const t in [0x04, 0x05, 0x08, 0x09]) {
        rom.tileEffects[0xbc - 0xb3].effects[t] = 0x18;
        rom.tileEffects[0xb5 - 0xb3].effects[t] = 0x18;
    }
}
function undergroundChannelLandBridge(rom) {
    const { tiles } = rom.screens[0xa1];
    tiles[0x28] = 0x9f;
    tiles[0x37] = 0x23;
    tiles[0x38] = 0x23;
    tiles[0x39] = 0x21;
    tiles[0x47] = 0x8d;
    tiles[0x48] = 0x8f;
    tiles[0x56] = 0x99;
    tiles[0x57] = 0x9a;
    tiles[0x58] = 0x8c;
}
function fogLampNotRequired(rom, flags) {
    const { flags: { AlwaysTrue, InjuredDolphin, FogLamp, KensuInCabin, ReturnedFogLamp }, items: { ShellFlute }, locations: { BoatHouse, Portoa_FishermanHouse }, npcs, } = rom;
    const requireHealed = flags.requireHealedDolphinToRide();
    ShellFlute.itemUseData[0].want =
        requireHealed ? InjuredDolphin.id : AlwaysTrue.id;
    npcs.KensuInCabin.data[0] = 0x67;
    npcs.KensuInCabin.localDialogs.get(-1)[0].message.action = 0x0a;
    npcs.KensuInCabin.localDialogs.get(-1)[0].flags = [];
    npcs.KensuInCabin.spawnConditions.set(BoatHouse.id, [ReturnedFogLamp.id, ~KensuInCabin.id]);
    npcs.Fisherman.spawnConditions.set(Portoa_FishermanHouse.id, [FogLamp.id]);
    rom.itemGets[0x64].flags = [];
    rom.itemGets[0x67].copyFrom(rom.itemGets[0x64]);
}
function fixChests(rom) {
    for (const loc of rom.locations) {
        for (const s of loc.spawns) {
            if (s.isChest())
                s.timed = false;
        }
    }
}
function adjustGoaFortressTriggers(rom) {
    const l = rom.locations;
    l.GoaFortress_Kelbesque.spawns[0].x -= 16;
    l.GoaFortress_Zebu.spawns.splice(1, 1);
    l.GoaFortress_Tornel.spawns.splice(2, 1);
    l.GoaFortress_Asina.spawns.splice(2, 1);
    l.GoaFortress_Kensu.spawns.splice(3, 1);
    l.GoaFortress_Kensu.spawns.splice(1, 1);
}
function alarmFluteIsKeyItem(rom, flags) {
    const { items: { AlarmFlute }, flags: { TalkedToZebuStudent, ZebuStudent }, locations: { MezameShrine, Leaf_StudentHouse, WaterfallCave4, ZebuCave }, npcs: { WindmillGuard, Zebu }, } = rom;
    rom.itemGets[0x31].inventoryRowStart = 0x20;
    AlarmFlute.unique = true;
    AlarmFlute.basePrice = 0;
    if (flags.zebuStudentGivesItem()) {
        WindmillGuard.data[1] = 0x31;
    }
    else {
        WindmillGuard.data[1] = 0xff;
        const dialog = WindmillGuard.dialog(Leaf_StudentHouse)[0];
        dialog.condition = ~TalkedToZebuStudent.id;
        dialog.flags.push(TalkedToZebuStudent.id);
        replace(Zebu.spawns(ZebuCave), ZebuStudent.id, TalkedToZebuStudent.id);
        MezameShrine.spawns.push(Spawn.of({ screen: 0, tile: 0x9b, type: 2, id: 0x31 }));
        MezameShrine.spawns.push(Spawn.of({ screen: 0, tile: 0x95, type: 2, id: 0x49 }));
        rom.itemGets[0x49].itemId = rom.items.MedicalHerb.id;
    }
    const replacements = [
        [0x21, 0.72],
        [0x1f, 0.9],
    ];
    let j = 0;
    for (const shop of rom.shops) {
        if (shop.type !== ShopType.TOOL)
            continue;
        for (let i = 0, len = shop.contents.length; i < len; i++) {
            if (shop.contents[i] !== 0x31)
                continue;
            const [item, priceRatio] = replacements[(j++) % replacements.length];
            shop.contents[i] = item;
            if (rom.shopDataTablesAddress) {
                shop.prices[i] = Math.round(shop.prices[i] * priceRatio);
            }
        }
    }
    rom.itemGets[0x5b].itemId = 0x1d;
    WaterfallCave4.spawn(0x19).id = 0x10;
}
function brokahanaWantsMado1(rom) {
    const { flags: { Karmine, Mado1 }, npcs: { Brokahana } } = rom;
    const dialog = assert(Brokahana.localDialogs.get(-1))[0];
    if (dialog.condition !== ~Karmine.id) {
        throw new Error(`Bad brokahana condition: ${dialog.condition}`);
    }
    dialog.condition = ~Mado1.id;
}
function requireHealedDolphin(rom) {
    const { flags: { InjuredDolphin, ShellFlute }, npcs: { Fisherman, FishermanDaughter }, } = rom;
    Fisherman.spawnConditions.set(0xd6, [ShellFlute.id, InjuredDolphin.id]);
    const daughterDialog = FishermanDaughter.localDialogs.get(-1);
    daughterDialog.unshift(daughterDialog[0].clone());
    daughterDialog[0].condition = ~InjuredDolphin.id;
    daughterDialog[1].condition = ~ShellFlute.id;
}
function requireTelepathyForDeo(rom) {
    const { flags: { Telepathy }, npcs: { Deo, SaharaBunny }, } = rom;
    SaharaBunny.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x12]));
    Deo.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x13]));
}
function teleportOnThunderSword(rom) {
    const { flags: { WarpShyron }, } = rom;
    rom.itemGets[0x03].flags.push(WarpShyron.id);
}
function noTeleportOnThunderSword(rom) {
    rom.itemGets[0x03].acquisitionAction.action = 0x16;
}
function adjustItemNames(rom, flags) {
    if (flags.leatherBootsGiveSpeed()) {
        const leatherBoots = rom.items[0x2f];
        leatherBoots.menuName = 'Speed Boots';
        leatherBoots.messageName = 'Speed Boots';
        if (flags.changeGasMaskToHazmatSuit()) {
            const gasMask = rom.items[0x29];
            gasMask.menuName = 'Hazmat Suit';
            gasMask.messageName = 'Hazmat Suit';
        }
    }
    for (let i = 0x05; i < 0x0c; i += 2) {
        rom.items[i].menuName = rom.items[i].menuName.replace('Ball', 'Orb');
        rom.items[i].messageName = rom.items[i].messageName.replace('Ball', 'Orb');
    }
}
function makeBraceletsProgressive(rom) {
    const { flags: { BallOfWind, TornadoBracelet }, npcs: { Tornel }, } = rom;
    const vanilla = Tornel.localDialogs.get(0x21);
    const patched = [
        vanilla[0],
        vanilla[2],
        vanilla[2].clone(),
        vanilla[1],
    ];
    patched[1].condition = ~TornadoBracelet.id;
    patched[2].condition = ~BallOfWind.id;
    patched[3].condition = ~0;
    Tornel.localDialogs.set(0x21, patched);
}
function simplifyInvisibleChests(rom) {
    const { CordelPlainEast, KirisaMeadow, UndergroundChannel } = rom.locations;
    for (const location of [CordelPlainEast, KirisaMeadow, UndergroundChannel]) {
        for (const spawn of location.spawns) {
            if (spawn.isChest())
                spawn.data[2] |= 0x20;
        }
    }
}
function addCordelWestTriggers(rom, flags) {
    const { CordelPlainEast, CordelPlainWest } = rom.locations;
    for (const spawn of CordelPlainEast.spawns) {
        if (spawn.isChest() || (flags.disableTeleportSkip() && spawn.isTrigger())) {
            CordelPlainWest.spawns.push(spawn.clone());
        }
    }
}
function fixRabbitSkip(rom) {
    for (const spawn of rom.locations.MtSabreNorth_Main.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x86) {
            if (spawn.x === 0x740) {
                spawn.x += 16;
                spawn.y += 16;
            }
        }
    }
}
function fixFlightStatueSkip(rom) {
    const oldHitbox = rom.hitboxes[rom.objects.guardianStatueMissile.hitbox];
    const newHitbox = rom.hitboxes[6];
    rom.objects.guardianStatueMissile.hitbox = newHitbox.id;
    newHitbox.x0 = oldHitbox.x0 - 6;
    newHitbox.w = oldHitbox.w + 12;
    newHitbox.y0 = oldHitbox.y0 - 2;
    newHitbox.h = oldHitbox.h + 4;
}
function patchTooManyItemsMessage(rom) {
    rom.messages.parts[0x20][0x0f].text += '\nItem: [:ITEM:]';
}
function addZombieWarp(rom) {
    const { flags: { WarpZombie }, locations: { ZombieTown }, } = rom;
    rom.flags.insertZombieWarpFlag();
    const message = rom.messages.parts[0x21][0];
    message.text = [
        ' {1a:Leaf}      {16:Brynmaer} {1d:Oak} ',
        '{0c:Nadare}\'s  {1e:Portoa}   {14:Amazones} ',
        '{19:Joel}      Zombie   {20:Swan} ',
        '{23:Shyron}    {18:Goa}      {21:Sahara}',
    ].join('\n');
    const trigger = rom.nextFreeTrigger();
    trigger.used = true;
    trigger.conditions = [];
    trigger.message = MessageId.of({});
    trigger.flags = [WarpZombie.id];
    for (const spawn of ZombieTown.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8a) {
            spawn.id = trigger.id;
        }
    }
    rom.townWarp.locations.splice(7, 0, ZombieTown.id);
    if (rom.townWarp.locations.pop() !== 0xff)
        throw new Error('unexpected');
}
function evilSpiritIslandRequiresDolphin(rom) {
    rom.trigger(0x8a).conditions = [~rom.flags.CurrentlyRidingDolphin.id];
    rom.messages.parts[0x1d][0x10].text = `The cave entrance appears
to be underwater. You'll
need to swim.`;
}
function leafElderInSabreHeals(rom) {
    const leafElder = rom.npcs[0x0d];
    const summitDialog = leafElder.localDialogs.get(0x35)[0];
    summitDialog.message.action = 0x17;
}
function patchLimeTreeLake(rom) {
    rom.metatilesets.lime.getTile(0x7c).setEffects(6);
    rom.metatilesets.lime.getTile(0x7f).setEffects(6);
    rom.metatilesets.lime.getTile(0x7b).setTiles([0x7f, 0x7f, 0x7f, 0x7f])
        .setAttrs(0).setEffects(6);
    rom.screens[0x74].set2d(0x90, [
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
    ]);
}
function preventNpcDespawns(rom, opts) {
    function remove(arr, elem) {
        const index = arr.indexOf(elem);
        if (index < 0)
            throw new Error(`Could not find element ${elem} in ${arr}`);
        arr.splice(index, 1);
    }
    function removeIf(arr, pred) {
        const index = arr.findIndex(pred);
        if (index < 0)
            throw new Error(`Could not find element in ${arr}`);
        arr.splice(index, 1);
    }
    const { locations: { BoatHouse, Brynmaer, Crypt_Draygon2, Joel_Shed, Leaf_ElderHouse, MtSabreNorth_SummitCave, MtSabreWest_Upper, PortoaPalace_ThroneRoom, Portoa_PalaceEntrance, Portoa_AsinaRoom, Portoa_FortuneTeller, Shyron_Temple, StomHouse, Swan_DanceHall, Swan_Tavern, WindmillCave, WaterfallCave4, WaterfallValleyNorth, ZebuCave, ZombieTown_HouseBasement, }, items: { GlowingLamp, KeyToPrison, LovePendant, StatueOfOnyx, }, npcs: { Akahana, AkahanaInBrynmaer, Asina, AztecaInShyron, Clark, Draygon, FortuneTeller, Kensu, KensuInCabin, KensuInSwan, LeafElder, LeafRabbit, OakChild, OakElder, OakMother, PortoaPalaceFrontGuard, PortoaQueen, PortoaThroneRoomBackDoorGuard, Rage, Stom, StonedAkahana, Tornel, WindmillGuard, Zebu, }, flags, } = rom;
    Kensu.localDialogs.delete(Swan_Tavern.id);
    KensuInSwan.link(Kensu.id);
    KensuInSwan.used = true;
    KensuInSwan.data = [...Kensu.data];
    Kensu.data[0] = GlowingLamp.id;
    Swan_DanceHall.spawns.find(s => s.isNpc() && s.id === Kensu.id).id =
        KensuInSwan.id;
    LovePendant.itemUseData[0].want = 0x100 | KensuInSwan.id;
    StonedAkahana.linkDialog(Akahana.id);
    AkahanaInBrynmaer.used = true;
    AkahanaInBrynmaer.link(Akahana.id);
    AkahanaInBrynmaer.data = [...Akahana.data];
    Brynmaer.spawns.find(s => s.isNpc() && s.id === Akahana.id).id =
        AkahanaInBrynmaer.id;
    StatueOfOnyx.itemUseData[0].want = 0x100 | AkahanaInBrynmaer.id;
    LeafElder.dialog(Leaf_ElderHouse)
        .splice(0, 0, ...LeafElder.dialog(Leaf_ElderHouse).splice(2, 1));
    LeafRabbit.dialog()[2].condition = flags.RescuedLeafElder.id;
    LeafRabbit.dialog()[2].flags.push(flags.TalkedToLeafRabbit.id);
    LeafRabbit.dialog()[3].flags.push(flags.TalkedToLeafRabbit.id);
    WindmillGuard.spawns(WindmillCave)[1] =
        ~flags.WindmillGuardAlarmFluteTradein.id;
    remove(Akahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    remove(StonedAkahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    function reverseDialog(ds) {
        ds.reverse();
        for (let i = 0; i < ds.length; i++) {
            const next = ds[i + 1];
            ds[i].condition = next ? ~next.condition : ~0;
        }
    }
    ;
    for (let i = 0; i < 4; i++) {
        const dlg = OakElder.dialog()[i];
        if (dlg.condition !== rom.flags.OakElder.id)
            dlg.message.action = 0x03;
    }
    (() => {
        const [killedInsect, gotItem, getItem, findChild] = OakMother.dialog();
        findChild.condition = ~flags.RescuedChild.id;
        gotItem.condition = ~0;
        OakMother.dialog().splice(0, 4, findChild, getItem, killedInsect, gotItem);
    })();
    for (const i of [0x20, 0x21, 0x22, 0x7c, 0x7d]) {
        reverseDialog(rom.npcs[i].dialog());
    }
    OakChild.dialog().unshift(...OakChild.dialog().splice(1, 1));
    PortoaThroneRoomBackDoorGuard.spawnConditions.set(PortoaPalace_ThroneRoom.id, [~flags.QueenNotInThroneRoom.id, ~flags.MesiaRecording.id]);
    PortoaPalaceFrontGuard.dialog()[1].condition = flags.MesiaRecording.id;
    PortoaQueen.dialog()[3].condition = flags.SwordOfWater.id;
    PortoaQueen.dialog()[3].message.action = 0x03;
    PortoaQueen.dialog()[4].flags.push(flags.PortoaQueenGoingAway.id);
    PortoaQueen.spawns(PortoaPalace_ThroneRoom)[1] = ~flags.MesiaRecording.id;
    PortoaQueen.spawns(Portoa_AsinaRoom)[0] = flags.MesiaRecording.id;
    PortoaQueen.dialog()[1].condition = flags.MesiaRecording.id;
    FortuneTeller.spawns(Portoa_FortuneTeller)[1] = ~flags.MesiaRecording.id;
    Clark.spawnConditions.set(ZombieTown_HouseBasement.id, [~flags.Clark.id]);
    Clark.spawnConditions.set(Joel_Shed.id, [flags.Clark.id]);
    Zebu.localDialogs.set(ZebuCave.id, [
        LocalDialog.of(~flags.TalkedToZebuInCave.id, [0x00, 0x1a], [flags.TalkedToZebuInCave.id]),
        LocalDialog.of(flags.LeafVillagersRescued.id, [0x00, 0x1d]),
        LocalDialog.of(flags.LeafAbduction.id, [0x00, 0x1c]),
        LocalDialog.of(flags.ZebuAtWindmill.id, [0x00, 0x1d]),
        LocalDialog.of(flags.UsedWindmillKey.id, [0x00, 0x1b, 0x03]),
        LocalDialog.of(~0, [0x00, 0x1d]),
    ]);
    remove(Zebu.spawns(ZebuCave), ~flags.BehindWhirlpool.id);
    Tornel.spawnConditions.delete(MtSabreWest_Upper.id);
    Stom.spawnConditions.delete(StomHouse.id);
    remove(Asina.spawns(Portoa_AsinaRoom), ~flags.CalmedAngrySea.id);
    const guard2 = rom.npcs[0x34];
    guard2.spawnConditions.set(PortoaPalace_ThroneRoom.id, [flags.MesiaRecording.id,
        ~flags.PortoaQueen.id]);
    guard2.localDialogs.set(Portoa_PalaceEntrance.id, guard2.localDialogs.get(-1));
    guard2.data[0] = rom.items.FluteOfLime.id;
    const guard2Message = rom.messages.alloc();
    guard2Message.text = "The queen left this for you.";
    guard2.localDialogs.set(PortoaPalace_ThroneRoom.id, [
        LocalDialog.of(~flags.PortoaQueen.id, [guard2Message.part,
            guard2Message.id, 0x03]),
        LocalDialog.of(~0, [0x0a, 0x0e]),
    ]);
    PortoaPalace_ThroneRoom.spawns.push(Spawn.of({ yt: 3, xt: 12, type: 1,
        patternBank: 1,
        id: guard2.id }));
    KensuInCabin.spawnConditions.set(BoatHouse.id, [~flags.AbleToRideDolphin.id,
        flags.ReturnedFogLamp.id]);
    KensuInCabin.dialog()[0].message.action = 0x02;
    AztecaInShyron.spawns(Shyron_Temple).push(~flags.ShyronMassacre.id);
    rom.trigger(0x82).conditions.push(~flags.ShyronMassacre.id);
    Rage.dialog()[0].condition = flags.SwordOfWater.id;
    Draygon.spawnConditions.set(Crypt_Draygon2.id, [~flags.Draygon2.id]);
    Zebu.dialog(Shyron_Temple)
        .unshift(...Zebu.dialog(Shyron_Temple).splice(1, 1));
    rom.trigger(0x80).conditions = [
        ~flags.ShyronMassacre.id,
        flags.TalkedToZebuInShyron.id,
        flags.SwordOfThunder.id,
    ];
    rom.trigger(0x81).conditions = [];
    if (opts.barrierRequiresCalmSea()) {
        rom.trigger(0x84).conditions.push(flags.CalmedAngrySea.id);
    }
    rom.trigger(0x8c).conditions.push(flags.TalkedToZebuInCave.id);
    rom.trigger(0x8d).used = false;
    for (const spawn of MtSabreNorth_SummitCave.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8d)
            spawn.id = 0xb2;
    }
    removeIf(WaterfallValleyNorth.spawns, spawn => spawn.isTrigger() && spawn.id === 0x8d);
    rom.trigger(0xb2).conditions.push(flags.Kelbesque1.id);
    rom.trigger(0xb2).flags.push(~flags.LeafVillagersCurrentlyAbducted.id, ~flags.LeafElderCurrentlyAbducted.id, flags.LeafVillagersRescued.id);
    rom.trigger(0x8c).conditions.push(~flags.Kelbesque1.id);
    rom.trigger(0x86).conditions.push(~flags.Kelbesque1.id);
    remove(KeyToPrison.itemUseData[0].flags, ~flags.LeafVillagersCurrentlyAbducted.id);
    replace(rom.trigger(0xbb).conditions, ~flags.Rage.id, ~flags.MesiaRecording.id);
}
function disableStabs(rom) {
    for (const o of [0x08, 0x09, 0x27]) {
        rom.objects[o].collisionPlane = 0;
    }
    rom.npcs.Brokahana.data[0] = rom.items.FruitOfLime.id;
}
function orbsOptional(rom) {
    for (const obj of [0x10, 0x14, 0x18, 0x1d]) {
        rom.objects[obj].terrainSusceptibility &= ~0x04;
        rom.objects[obj].level = 2;
    }
}
function noBowMode(rom) {
    const { flags: { UsedBowOfTruth }, locations: { Crypt_Draygon2, MezameShrine }, } = rom;
    let trigger;
    for (const spawn of MezameShrine.spawns) {
        if (spawn.isTrigger() && spawn.tile === 0x88) {
            trigger = rom.trigger(spawn.id);
        }
    }
    if (!trigger)
        throw new Error(`Could not find start trigger`);
    trigger.flags.push(UsedBowOfTruth.id);
    rom.tileEffects[0xb9 - 0xb3].effects[0x58] = 0;
    MezameShrine.meta.setExit(0, 'door', [Crypt_Draygon2.meta.id << 8 | 0x10, 'edge:bottom']);
}
function fixCrystalis(rom) {
    rom.objects[0x33].elements = 0xf;
}
function fixFlyableWalls(rom) {
    rom.tileEffects[0xb5 - 0xb3].effects[0x74] = 6;
    rom.tileEffects[0xb6 - 0xb3].effects[0x46] = 6;
}
function fixMonsterTerrain(rom) {
    for (const obj of rom.objects) {
        if (!(obj instanceof Monster))
            continue;
        if (obj.isProjectile() || obj.isBoss() || obj.isFlyer())
            continue;
        if (obj === rom.objects.mimic)
            continue;
        obj.terrainSusceptibility |= 0x3;
    }
}
function replace(array, old, replacement) {
    for (let i = 0; i < array.length; i++) {
        if (array[i] !== old)
            continue;
        array[i] = replacement;
        return;
    }
    throw new Error(`Could not find ${old} in ${array.join(',')}`);
}
function hardcoreMode(rom) {
    for (const loc of rom.locations) {
        loc.checkpoint = loc.saveable = false;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZXJtaW5pc3RpYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL2RldGVybWluaXN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUM5QyxPQUFPLEVBQUMsWUFBWSxFQUFFLFdBQVcsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEMsT0FBTyxFQUFDLEdBQUcsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ25DLE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDbEMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzVDLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUUzQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWpCLFNBQVMsS0FBSyxDQUFDLEdBQWUsRUFBRSxLQUFhLEVBQUUsR0FBRyxJQUFjO0lBQzlELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3BDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzFCO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxHQUFlO0lBRW5ELEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFHcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFJcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUdwQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNsQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUdwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFHcEIsS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUdoQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNwQixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDcEIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQztJQUVwQixLQUFLLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDaEMsS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoQyxLQUFLLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDaEMsS0FBSyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUtoQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBR3BCLEtBQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxF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QUFDO2dCQUMxQixJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLE9BQU87b0JBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbkQ7U0FDRjtJQUNILENBQUM7SUFDRCxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2xCLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQixTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEIsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3BCLENBQUM7QUFJRCxTQUFTLHVCQUF1QixDQUFDLEdBQVE7SUFDdkMsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQTtJQUN0QixHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBSUQsU0FBUyxxQkFBcUIsQ0FBQyxHQUFRO0lBQ3JDLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztBQUM3RCxDQUFDO0FBR0QsU0FBUyxnQkFBZ0IsQ0FBQyxHQUFRO0lBQ2hDLE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN0QyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNwQixPQUFPLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNoRCxPQUFPLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUM1QyxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDMUMsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUM7SUFDMUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxDQUFDO0FBRUQsU0FBUyxlQUFlLENBQUMsR0FBUSxFQUFFLEtBQWM7SUFpQi9DLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBRTFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUUxQixJQUFJLEtBQUssQ0FBQyxlQUFlLEVBQUUsRUFBRTtRQUczQixNQUFNLE9BQU8sR0FB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WUFBWSxFQUFFLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUU7WUFBRSxTQUFTO1FBQ2xFLElBQUksR0FBRyxLQUFLLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSztZQUFFLFNBQVM7UUFDeEMsR0FBRyxDQUFDLHFCQUFxQixJQUFJLEdBQUcsQ0FBQztLQUNsQztBQUNILENBQUM7QUFFRCxTQUFTLE9BQU8sQ0FBSSxLQUFVLEVBQUUsR0FBTSxFQUFFLFdBQWM7SUFDcEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDckMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRztZQUFFLFNBQVM7UUFDL0IsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQztRQUN2QixPQUFPO0tBQ1I7SUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtCQUFrQixHQUFHLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDakUsQ0FBQztBQUVELFNBQVMsWUFBWSxDQUFDLEdBQVE7SUFDNUIsS0FBSyxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsU0FBUyxFQUFFO1FBQy9CLEdBQUcsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7S0FDdkM7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gUGVyZm9ybSBpbml0aWFsIGNsZWFudXAvc2V0dXAgb2YgdGhlIFJPTS5cblxuaW1wb3J0IHtGbGFnU2V0fSBmcm9tICcuLi9mbGFnc2V0LmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuLi9yb20uanMnO1xuaW1wb3J0IHtTcGF3bn0gZnJvbSAnLi4vcm9tL2xvY2F0aW9uLmpzJztcbmltcG9ydCB7TWVzc2FnZUlkfSBmcm9tICcuLi9yb20vbWVzc2FnZWlkLmpzJztcbmltcG9ydCB7R2xvYmFsRGlhbG9nLCBMb2NhbERpYWxvZ30gZnJvbSAnLi4vcm9tL25wYy5qcyc7XG5pbXBvcnQge1Nob3BUeXBlfSBmcm9tICcuLi9yb20vc2hvcC5qcyc7XG5pbXBvcnQge1RyaWdnZXJ9IGZyb20gJy4uL3JvbS90cmlnZ2VyLmpzJztcbmltcG9ydCB7aGV4fSBmcm9tICcuLi9yb20vdXRpbC5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBNb25zdGVyIH0gZnJvbSAnLi4vcm9tL21vbnN0ZXIuanMnO1xuaW1wb3J0IHtQYXR0ZXJuc30gZnJvbSAnLi4vcm9tL3BhdHRlcm4uanMnO1xuXG5jb25zdCBbXSA9IFtoZXhdOyAvLyBnZW5lcmFsbHkgdXNlZnVsXG5cbmZ1bmN0aW9uIHdyaXRlKGFycjogVWludDhBcnJheSwgc3RhcnQ6IG51bWJlciwgLi4uZGF0YTogbnVtYmVyW10pIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyW3N0YXJ0ICsgaV0gPSBkYXRhW2ldO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmlzdGljUHJlUGFyc2UocHJnOiBVaW50OEFycmF5KTogdm9pZCB7XG4gIC8vIFJlbW92ZSB1bm5lY2Vzc2FyeSBzdGF0dWUgZmlnaHQgdHJpZ2dlcnMuICBUT0RPIC0gcmVtb3ZlIDFkIGxvY2F0aW9uIGNoZWNrXG4gIHByZ1sweDFhNTk0XSA9IDB4ZmY7IC8vIGp1c3QgY3V0IG9mZiB0d28gb2JqZWN0cyBlYXJseS5cblxuICAvLyBSZW1vdmUgdW5uZWNlc3Nhcnkgb2FrIGVudHJhbmNlIHRyaWdnZXIgKGFhKS4gIFJlZGlyZWN0IHRoZSBkaWFsb2cgZmxhZy5cbiAgcHJnWzB4MWNkYzVdID0gMHhhODsgLy8gY2hhbmdlIGZsYWcgdG8gbm90IHVzZSAwNDMuXG4gIHByZ1sweDFhMTc2XSA9IDB4ZmY7IC8vIHJlbW92ZSB0aGUgODMgdHJpZ2dlciBmcm9tIGdvYSBmb3J0cmVzcyBlbnRyYW5jZS5cbiAgcHJnWzB4MWE4NGNdID0gMHhmZjsgLy8gcmVtb3ZlIHRoZSBhYSB0cmlnZ2VyIChsYXN0IHNwYXduIGluIG9haykuXG5cbiAgLy8gUmVtb3ZlIGJyb2tlbiAodW51c2VkKSBrZW5zdSBkaWFsb2cgaW4gc3dhbiB0YXZlcm4gLSBvcmlnaW5hbCByZWFkc1xuICAvLyBwYXJ0IG9mIHRoZSBuZXh0IGFyZWEncyBsb2NhbCBkaWFsb2dzIGFzIGZsYWdzIHRvIHNldCwgaW5jbHVkaW5nIDE0MC5cbiAgcHJnWzB4MWQ4NDNdID0gMHhhMDsgLy8gY2hhbmdlIGUwIChleHBlY3RpbmcgZm9sbG93LXVwIGZsYWdzKSB0byBhMC5cblxuICAvLyBSZW1vdmUgdW51c2VkIGl0ZW0vdHJpZ2dlciBhY3Rpb25zXG4gIHByZ1sweDFlMDZiXSAmPSA3OyAvLyBtZWRpY2FsIGhlcmIgbm9ybWFsIHVzYWdlID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwNmZdICY9IDc7IC8vIG1hZ2ljIHJpbmcgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDczXSAmPSA3OyAvLyBmcnVpdCBvZiBsaW1lIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3N10gJj0gNzsgLy8gYW50aWRvdGUgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDdiXSAmPSA3OyAvLyBvcGVsIHN0YXR1ZSBpdGVtdXNlWzBdID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwODRdICY9IDc7IC8vIHdhcnAgYm9vdHMgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDQgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDliXSAmPSA3OyAvLyB3aW5kbWlsbCBrZXkgaXRlbXVzZVsxXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMGI5XSAmPSA3OyAvLyBnbG93aW5nIGxhbXAgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG5cbiAgcHJnWzB4MWUxMDVdID0gMHgyZjsgLy8gY2hhbmdlIFVzZWRCb3dPZlRydXRoIGZyb20gMDg2IHRvIGZpeGVkIDAyZiAoNjQ4NTo4MClcblxuICBwcmdbMHgxZTI3N10gPSAweDAwOyAvLyByZW1vdmUgZmxhZyAwYTEgZnJvbSBhbWF6b25lcyB3YXJwICh0cmlnZ2VyIDkwKVxuICBwcmdbMHgxZTM2Nl0gPSAweDQwOyAvLyByZW1vdmUgdW5yZWFkIDA4ZSBmbGFnIGZyb20gc2FiZXJhIHRyYXAgKHRyaWdnZXIgYjYpXG4gIHByZ1sweDFlMzcxXSA9IDB4MDA7IC8vIHJlbW92ZSBmbGFnIDBhMiBmcm9tIHBvcnRvYSBjYXN0bGUgYnJpZGdlICh0cmlnZ2VyIGI3KVxuXG4gIC8vIGd1YXJkIHBhcmFseXNpcyBmbGFncyBhcmUgbW92ZWQgaGFyZGNvZGVkIG5vd1xuICBwcmdbMHgxZTM4N10gPSAweDAwOyAvLyByZW1vdmUgY29uZGl0aW9uIDA5ZSBmcm9tIHBhbGFjZSBndWFyZCAodHJpZ2dlciBiYilcbiAgcHJnWzB4MWUzOTFdID0gMHgwMDsgLy8gcmVtb3ZlIGNvbmRpdGlvbiAwOTkgZnJvbSBhbWF6b25lcyBndWFyZCAodHJpZ2dlciBiYylcblxuICAvLyBDdXN0b20gc2hvb3Rpbmcgd2FsbHM6IG1hcmsgd2FsbHMgYXMgc2hvb3RpbmdcbiAgd3JpdGUocHJnLCAweDFhMTY4LCAweDMzLCAweDMzKTsgLy8gZnJvbnQgb2YgZ29hIGZvcnRyZXNzXG4gIHdyaXRlKHByZywgMHgxYTQ4ZSwgMHgzMywgMHgzMyk7IC8vIG9hc2lzIGNhdmVcblxuICAvLyBSZW51bWJlciBtaW1pY3NcbiAgcHJnWzB4MTliYjFdID0gMHg3MDsgLy8gZm9nIGxhbXAgY2F2ZSAzICg0YSkgbm9ydGggbWltaWNcbiAgcHJnWzB4MTliYjVdID0gMHg3MTsgLy8gZm9nIGxhbXAgY2F2ZSAzICg0YSkgc291dGh3ZXN0IG1pbWljXG4gIHByZ1sweDE5YTc3XSA9IDB4NzI7IC8vIHdhdGVyZmFsbCBjYXZlIDEgKDU0KSBtaW1pY1xuICBwcmdbMHgxOWRlYl0gPSAweDczOyAvLyBldmlsIHNwaXJpdCBpc2xhbmQgNCAoNmIpIHJpdmVyIHJpZ2h0IG1pbWljXG4gIHByZ1sweDFhMDQ1XSA9IDB4NzQ7IC8vIG10IGh5ZHJhIGNhdmUgOCAoODUpIG1pbWljXG4gIHByZ1sweDFhMGUxXSA9IDB4NzU7IC8vIHN0eHkgbGVmdCAoODkpIG5vcnRoIG1pbWljXG4gIHByZ1sweDFhMGU1XSA9IDB4NzY7IC8vIHN0eHkgcmlnaHQgKDg5KSBub3J0aCByaXZlcnNpZGUgbWltaWNcbiAgcHJnWzB4MWEwZTldID0gMHg3NzsgLy8gc3R4eSByaWdodCAoODkpIHNvdXRoIHJpdmVyc2lkZSBtaW1pY1xuICBwcmdbMHgxYTYwNV0gPSAweDc4OyAvLyBjcnlwdCBsZWZ0IHBpdCAoYTMpIG1pbWljXG4gIHByZ1sweDFhM2MxXSA9IDB4Nzk7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSB0b3AgbWlkZGxlIG1pbWljXG4gIHByZ1sweDFhM2M1XSA9IDB4N2E7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSB0b3AgcmlnaHQgbWltaWNcbiAgcHJnWzB4MWEzYzldID0gMHg3YjsgLy8ga2FybWluZSBiYXNlbWVudCAoYjUpIGJvdHRvbSByaWdodCBtaW1pY1xuXG4gIHdyaXRlKHByZywgMHgxZTBiNywgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSBzaGVsbCBmbHV0ZSB1c2UgZmxhZyAobmV2ZXIgcmVhZClcbiAgd3JpdGUocHJnLCAweDFlMzJhLCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIHByaXNvbiBvcGVuYWJsZSBmbGFnICh0cmlnZ2VyIGFkKVxuICB3cml0ZShwcmcsIDB4MWUzMzAsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgc3R4eSBvcGVuYWJsZSBmbGFnICh0cmlnZ2VyIGFlKVxuICB3cml0ZShwcmcsIDB4MWUzMzYsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgYWx0YXIgdXNhYmxlIGZsYWcgKHRyaWdnZXIgYWYpXG4gIHdyaXRlKHByZywgMHgxZTBlMCwgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSB1bnVzZWQgZmx1dGUgb2YgbGltZSBpdGVtdXNlIGZsYWdcbiAgd3JpdGUocHJnLCAweDFlMGU2LCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIHVudXNlZCBmbHV0ZSBvZiBsaW1lIGl0ZW11c2UgZmxhZ1xuXG4gIC8vIFN3YW4gZ2F0ZSBndWFyZHMgc3Bhd24gZXhhY3RseSBiYXNlZCBvbiBnYXRlIGJlaW5nIGNsb3NlZCAoMmIzKS5cbiAgLy8gQWxzbyByZW1vdmUgdGhlIGRlc3Bhd24gdHJpZ2dlciAod2UgY2FuJ3QgbW92ZSB0aGUgZ3VhcmRzIGJlY2F1c2VcbiAgLy8gdGhlIGdhdGUgYW5pbWF0aW9uIG5lZWRzIHRvIGJlIGluIHNsb3QgZSkuXG4gIHByZ1sweDFjODAzXSA9IDB4MDA7IC8vIHJlbW92ZSB+MDY2IGZyb20gc3Bhd24gY29uZGl0aW9uIDJjIEAgMzhcbiAgd3JpdGUocHJnLCAweDFjODBkLCAweGEyLCAweGIzKTsgLy8gc3Bhd24gY29uZGl0aW9uIDJkIEAgNzNcbiAgcHJnWzB4MWFhODZdID0gMHhmZTsgLy8gdHJpZ2dlciAtPiB1bnVzZWQgc3Bhd25cblxuICAvLyBUT0RPIC0gdGhlc2UgYXJlIHRyYW5zaXRpb25hbCB1bnRpbCB3ZSBtb3ZlIHRoZSBsb2dpYyBlbHNld2hlcmVcbiAgd3JpdGUocHJnLCAweDNkNmQ1LFxuICAgICAgICAweDI1LCAweDI5LCAgLy8gMjUgc3RhdHVlIG9mIG9ueXggdXNlIC0+IDI5IGdhcyBtYXNrXG4gICAgICAgIDB4MzksIDB4M2EsICAvLyAzOSBnbG93aW5nIGxhbXAgdXNlIC0+IDNhIHN0YXR1ZSBvZiBnb2xkXG4gICAgICAgIDB4M2IsIDB4NDcsICAvLyAzYiBsb3ZlIHBlbmRhbnQgdXNlIC0+IDQ3IGNoYW5nZVxuICAgICAgICAweDNjLCAweDNlLCAgLy8gM2Mga2lyaXNhIHBsYW50IHVzZSAtPiAzZSBib3cgb2YgbW9vblxuICAgICAgICAweDg0LCAweDQ2LCAgLy8gODQgYW5ncnkgc2VhIHRyaWdnZXIgLT4gNDYgYmFycmllclxuICAgICAgICAweGIyLCAweDQyLCAgLy8gYjIgc3VtbWl0IHRyaWdnZXIgLT4gNDIgcGFyYWx5c2lzXG4gICAgICAgIDB4YjQsIDB4NDEsICAvLyBiNCB3aW5kbWlsbCBjYXZlIHRyaWdnZXIgLT4gNDEgcmVmcmVzaFxuICAgICAgICAweGZmKTsgICAgICAgLy8gZm9yIGJvb2trZWVwaW5nIHB1cnBvc2VzLCBub3QgYWN0dWFsbHkgdXNlZFxuXG4gIC8vIE1ha2UgdGhlIHN3b3JkIHVzZSB0aGUgZWxlbWVudCdzIHBhbGV0dGUgaW5zdGVhZCBvZiB0aGUgcGxheWVyLlxuICAvLyBUT0RPIC0gbW92ZSB0aGlzIGludG8gcG9zdC1wYXJzZSBhcyBhIG1ldGFzcHJpdGUgZWRpdCAod2UnbGwgbmVlZCB0b1xuICAvLyBkbyBhIGZ1bGwgd3JpdGUgb24gdGhhdCB0YWJsZS4uLikuICBJZiB3ZSBkb24ndCBjb2xvciB0aGUgc3dvcmRcbiAgLy8gZWxlbWVudHMgdGhlbiB0aGlzIHR1cm5zIHRoZSBzd29yZHMgYSBicmlnaHRlciB3aGl0ZS5cbiAgZm9yIChjb25zdCBhZGRyIG9mIFsweDM4NzU3LCAweDM4Nzc3LCAweDM4NzdiLCAweDM4Nzk3LCAweDM4NzliLFxuICAgICAgICAgICAgICAgICAgICAgIDB4Mzg3ZGIsIDB4Mzg3ZGYsIDB4Mzg3ZmIsIDB4Mzg3ZmYsIDB4Mzg4MWIsIDB4Mzg4MWYsXG4gICAgICAgICAgICAgICAgICAgICAgMHgzODg2NSwgMHgzODg4NSwgMHgzODg4OSwgMHgzODhhNV0pIHtcbiAgICBwcmdbYWRkcl0gfD0gMTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5pc3RpYyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgLy8gTk9URTogZG8gdGhpcyB2ZXJ5IGVhcmx5IHRvIG1ha2Ugc3VyZSByZWZzIHRvIHdhcnAgcG9pbnQgZmxhZ3MgYXJlXG4gIC8vIHVwZGF0ZWQgdG8gcmVmbGVjdCBzaGlmdHMgKHByb2JhYmx5IG5vdCBhbiBpc3N1ZSBhbnltb3JlIG5vdyB0aGF0XG4gIC8vIHdlIHRyYWNrIGZsYWcgbW92ZXMgc2VwYXJhdGVseSkuXG4gIGFkZFpvbWJpZVdhcnAocm9tKTtcblxuICBjb25zb2xpZGF0ZUl0ZW1HcmFudHMocm9tKTtcbiAgYWRkTWV6YW1lVHJpZ2dlcihyb20pO1xuICBub3JtYWxpemVTd29yZHMocm9tLCBmbGFncyk7XG5cbiAgZml4Rmx5YWJsZVdhbGxzKHJvbSk7XG4gIGZpeE1vbnN0ZXJUZXJyYWluKHJvbSk7XG4gIGZpeENyeXN0YWxpcyhyb20pO1xuICBmaXhPcGVsU3RhdHVlKHJvbSk7XG4gIGZpeENvaW5TcHJpdGVzKHJvbSk7XG4gIGZpeENoZXN0cyhyb20pO1xuICBwcmV2ZW50Qm9zc1NvZnRsb2Nrcyhyb20pO1xuXG4gIG1ha2VCcmFjZWxldHNQcm9ncmVzc2l2ZShyb20pO1xuXG4gIGFkanVzdEdvYUZvcnRyZXNzVHJpZ2dlcnMocm9tKTtcbiAgcHJldmVudE5wY0Rlc3Bhd25zKHJvbSwgZmxhZ3MpO1xuICBsZWFmRWxkZXJJblNhYnJlSGVhbHMocm9tKTtcbiAgaWYgKGZsYWdzLnJlcXVpcmVIZWFsZWREb2xwaGluVG9SaWRlKCkpIHJlcXVpcmVIZWFsZWREb2xwaGluKHJvbSk7XG4gIGlmIChmbGFncy5zYWhhcmFSYWJiaXRzUmVxdWlyZVRlbGVwYXRoeSgpKSByZXF1aXJlVGVsZXBhdGh5Rm9yRGVvKHJvbSk7XG5cbiAgYWRqdXN0SXRlbU5hbWVzKHJvbSwgZmxhZ3MpO1xuXG4gIC8vIFRPRE8gLSBjb25zaWRlciBtYWtpbmcgYSBUcmFuc2Zvcm1hdGlvbiBpbnRlcmZhY2UsIHdpdGggb3JkZXJpbmcgY2hlY2tzXG4gIGFsYXJtRmx1dGVJc0tleUl0ZW0ocm9tLCBmbGFncyk7IC8vIE5PVEU6IHByZS1zaHVmZmxlXG4gIGJyb2thaGFuYVdhbnRzTWFkbzEocm9tKTtcbiAgaWYgKGZsYWdzLnRlbGVwb3J0T25UaHVuZGVyU3dvcmQoKSkge1xuICAgIHRlbGVwb3J0T25UaHVuZGVyU3dvcmQocm9tKTtcbiAgICAvLyBub3QgU2h5cm9uX1RlbXBsZSBzaW5jZSBuby10aHVuZGVyLXN3b3JkLWZvci1tYXNzYWNyZVxuICAgIHJvbS50b3duV2FycC50aHVuZGVyU3dvcmRXYXJwID0gW3JvbS5sb2NhdGlvbnMuU2h5cm9uLmlkLCAweDQxXTtcbiAgfSBlbHNlIHtcbiAgICBub1RlbGVwb3J0T25UaHVuZGVyU3dvcmQocm9tKTtcbiAgfVxuXG4gIHVuZGVyZ3JvdW5kQ2hhbm5lbExhbmRCcmlkZ2Uocm9tKTtcbiAgaWYgKGZsYWdzLmZvZ0xhbXBOb3RSZXF1aXJlZCgpKSBmb2dMYW1wTm90UmVxdWlyZWQocm9tLCBmbGFncyk7XG5cbiAgZXZpbFNwaXJpdElzbGFuZFJlcXVpcmVzRG9scGhpbihyb20pO1xuICBzaW1wbGlmeUludmlzaWJsZUNoZXN0cyhyb20pO1xuICBhZGRDb3JkZWxXZXN0VHJpZ2dlcnMocm9tLCBmbGFncyk7XG4gIGlmIChmbGFncy5kaXNhYmxlUmFiYml0U2tpcCgpKSBmaXhSYWJiaXRTa2lwKHJvbSk7XG4gIGlmIChmbGFncy5kaXNhYmxlRmxpZ2h0U3RhdHVlU2tpcCgpKSBmaXhGbGlnaHRTdGF0dWVTa2lwKHJvbSk7XG4gIGlmIChmbGFncy5kaXNhYmxlUmFnZVNraXAoKSkgcGF0Y2hMaW1lVHJlZUxha2Uocm9tKTtcblxuICBmaXhSZXZlcnNlV2FsbHMocm9tKTtcbiAgaWYgKGZsYWdzLmNoYXJnZVNob3RzT25seSgpKSBkaXNhYmxlU3RhYnMocm9tKTtcbiAgaWYgKGZsYWdzLm9yYnNPcHRpb25hbCgpKSBvcmJzT3B0aW9uYWwocm9tKTtcbiAgaWYgKGZsYWdzLm5vQm93TW9kZSgpKSBub0Jvd01vZGUocm9tKTtcblxuICBwYXRjaFRvb01hbnlJdGVtc01lc3NhZ2Uocm9tKTtcblxuICBpZiAoZmxhZ3MuaGFyZGNvcmVNb2RlKCkpIGhhcmRjb3JlTW9kZShyb20pO1xuXG4gIHVzZU5ld1N0YXR1c0JhckdyYXBoaWNzKHJvbSk7XG4gIGlmIChmbGFncy5zaG91bGRDb2xvclN3b3JkRWxlbWVudHMoKSkgdXNlRWxlbWVudFN3b3JkQ29sb3JzKHJvbSk7XG59XG5cbmZ1bmN0aW9uIHVzZUVsZW1lbnRTd29yZENvbG9ycyhyb206IFJvbSk6IHZvaWQge1xuICBmdW5jdGlvbiBzd2FwVGlsZXMoc3RhcnQ6IG51bWJlciwgdGh1bmRlcj86IG51bWJlcikge1xuICAgIGZvciAobGV0IGFkZHIgPSAwOyBhZGRyIDw9IDB4YTsgYWRkcisrKSB7XG4gICAgICBpZiAoYWRkciA9PT0gOCkgY29udGludWU7XG4gICAgICBjb25zdCBwID0gcm9tLnBhdHRlcm5zLmdldChhZGRyIHwgc3RhcnQpO1xuICAgICAgY29uc3Qgb3JpZyA9IFsuLi5wLnBpeGVsc107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAucGl4ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHAucGl4ZWxzW2ldID0gb3JpZ1tpIF4gOF07XG4gICAgICAgIGlmICgoaSA+Pj4gMykgPT09IHRodW5kZXIpIHAucGl4ZWxzW2ldIHw9IG9yaWdbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHN3YXBUaWxlcygweDEwOTApOyAvLyB3aW5kXG4gIHN3YXBUaWxlcygweDEwZDApOyAvLyBmaXJlXG4gIHN3YXBUaWxlcygweDExMTApOyAvLyB3YXRlclxuICBzd2FwVGlsZXMoMHgxMTUwKTsgLy8gdGh1bmRlclxuICBzd2FwVGlsZXMoMHgxMTkwKTsgLy8gY3J5c3RhbGlzXG59XG5cbi8vIFVwZGF0ZXMgYSBmZXcgaXRlbXVzZSBhbmQgdHJpZ2dlciBhY3Rpb25zIGluIGxpZ2h0IG9mIGNvbnNvbGlkYXRpb25cbi8vIGFyb3VuZCBpdGVtIGdyYW50aW5nLlxuZnVuY3Rpb24gdXNlTmV3U3RhdHVzQmFyR3JhcGhpY3Mocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3QgcGFnZSA9IDB4MzggPDwgNlxuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4MCwgUGF0dGVybnMuSFVEX0xGKTtcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDEsIFBhdHRlcm5zLkhVRF9QVyk7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHgyLCBQYXR0ZXJucy5IVURfRVkpO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4MywgUGF0dGVybnMuSFVEX0xWKTtcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDQsIFBhdHRlcm5zLkhVRF9ETCk7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHg1LCBQYXR0ZXJucy5IVURfTVApO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4NiwgUGF0dGVybnMuSFVEX0VYKTtcbn1cblxuLy8gVXBkYXRlcyBhIGZldyBpdGVtdXNlIGFuZCB0cmlnZ2VyIGFjdGlvbnMgaW4gbGlnaHQgb2YgY29uc29saWRhdGlvblxuLy8gYXJvdW5kIGl0ZW0gZ3JhbnRpbmcuXG5mdW5jdGlvbiBjb25zb2xpZGF0ZUl0ZW1HcmFudHMocm9tOiBSb20pOiB2b2lkIHtcbiAgcm9tLml0ZW1zLkdsb3dpbmdMYW1wLml0ZW1Vc2VEYXRhWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwYjtcbn1cblxuLy8gQWRkcyBhIHRyaWdnZXIgYWN0aW9uIHRvIG1lemFtZS4gIFVzZSA4NyBsZWZ0b3ZlciBmcm9tIHJlc2N1aW5nIHplYnUuXG5mdW5jdGlvbiBhZGRNZXphbWVUcmlnZ2VyKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHRyaWdnZXIgPSByb20ubmV4dEZyZWVUcmlnZ2VyKCk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFt+cm9tLmZsYWdzLkFsd2F5c1RydWUuaWRdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe2FjdGlvbjogNH0pO1xuICB0cmlnZ2VyLmZsYWdzID0gW3JvbS5mbGFncy5BbHdheXNUcnVlLmlkXTtcbiAgY29uc3QgbWV6YW1lID0gcm9tLmxvY2F0aW9ucy5NZXphbWVTaHJpbmU7XG4gIG1lemFtZS5zcGF3bnMucHVzaChTcGF3bi5vZih7dGlsZTogMHg4OCwgdHlwZTogMiwgaWQ6IHRyaWdnZXIuaWR9KSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN3b3Jkcyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpIHtcbiAgLy8gd2luZCAxID0+IDEgaGl0ICAgICAgICAgICAgICAgPT4gM1xuICAvLyB3aW5kIDIgPT4gMSBoaXQgICAgICAgICAgICAgICA9PiA2XG4gIC8vIHdpbmQgMyA9PiAyLTMgaGl0cyA4TVAgICAgICAgID0+IDhcblxuICAvLyBmaXJlIDEgPT4gMSBoaXQgICAgICAgICAgICAgICA9PiAzXG4gIC8vIGZpcmUgMiA9PiAzIGhpdHMgICAgICAgICAgICAgID0+IDVcbiAgLy8gZmlyZSAzID0+IDQtNiBoaXRzIDE2TVAgICAgICAgPT4gN1xuXG4gIC8vIHdhdGVyIDEgPT4gMSBoaXQgICAgICAgICAgICAgID0+IDNcbiAgLy8gd2F0ZXIgMiA9PiAxLTIgaGl0cyAgICAgICAgICAgPT4gNlxuICAvLyB3YXRlciAzID0+IDMtNiBoaXRzIDE2TVAgICAgICA9PiA4XG5cbiAgLy8gdGh1bmRlciAxID0+IDEtMiBoaXRzIHNwcmVhZCAgPT4gM1xuICAvLyB0aHVuZGVyIDIgPT4gMS0zIGhpdHMgc3ByZWFkICA9PiA1XG4gIC8vIHRodW5kZXIgMyA9PiA3LTEwIGhpdHMgNDBNUCAgID0+IDdcblxuICByb20ub2JqZWN0c1sweDEwXS5hdGsgPSAzOyAvLyB3aW5kIDFcbiAgcm9tLm9iamVjdHNbMHgxMV0uYXRrID0gNjsgLy8gd2luZCAyXG4gIHJvbS5vYmplY3RzWzB4MTJdLmF0ayA9IDg7IC8vIHdpbmQgM1xuXG4gIHJvbS5vYmplY3RzWzB4MThdLmF0ayA9IDM7IC8vIGZpcmUgMVxuICByb20ub2JqZWN0c1sweDEzXS5hdGsgPSA1OyAvLyBmaXJlIDJcbiAgcm9tLm9iamVjdHNbMHgxOV0uYXRrID0gNTsgLy8gZmlyZSAyXG4gIHJvbS5vYmplY3RzWzB4MTddLmF0ayA9IDc7IC8vIGZpcmUgM1xuICByb20ub2JqZWN0c1sweDFhXS5hdGsgPSA3OyAvLyBmaXJlIDNcblxuICByb20ub2JqZWN0c1sweDE0XS5hdGsgPSAzOyAvLyB3YXRlciAxXG4gIHJvbS5vYmplY3RzWzB4MTVdLmF0ayA9IDY7IC8vIHdhdGVyIDJcbiAgcm9tLm9iamVjdHNbMHgxNl0uYXRrID0gODsgLy8gd2F0ZXIgM1xuXG4gIHJvbS5vYmplY3RzWzB4MWNdLmF0ayA9IDM7IC8vIHRodW5kZXIgMSAodW51c2VkIGFsaWFzPylcbiAgcm9tLm9iamVjdHNbMHgxZF0uYXRrID0gMzsgLy8gdGh1bmRlciAxXG4gIHJvbS5vYmplY3RzWzB4MWVdLmF0ayA9IDU7IC8vIHRodW5kZXIgMlxuICByb20ub2JqZWN0c1sweDFiXS5hdGsgPSA3OyAvLyB0aHVuZGVyIDNcbiAgcm9tLm9iamVjdHNbMHgxZl0uYXRrID0gNzsgLy8gdGh1bmRlciAzXG5cbiAgaWYgKGZsYWdzLnNsb3dEb3duVG9ybmFkbygpKSB7XG4gICAgLy8gVE9ETyAtIHRvcm5hZG8gKG9iaiAxMikgPT4gc3BlZWQgMDcgaW5zdGVhZCBvZiAwOFxuICAgIC8vICAgICAgLSBsaWZldGltZSBpcyA0ODAgPT4gNzAgbWF5YmUgdG9vIGxvbmcsIDYwIHN3ZWV0IHNwb3Q/XG4gICAgY29uc3QgdG9ybmFkbyA9IHJvbS5vYmplY3RzWzB4MTJdO1xuICAgIHRvcm5hZG8uc3BlZWQgPSAweDA3O1xuICAgIHRvcm5hZG8uZGF0YVsweDBjXSA9IDB4NjA7IC8vIGluY3JlYXNlIGxpZmV0aW1lICg0ODApIGJ5IDIwJVxuICB9XG59XG5cbi8vIEFkZCBjb2RlIHRvIGVuc3VyZSBEcmF5Z29uIDIgYW5kIEdpYW50IEluc2VjdCByZXNwYXduIHdpdGhvdXQgdGhlaXJcbi8vIGl0ZW1zIG9uY2UgdGhleSd2ZSBiZWVuIHVzZWQuXG5mdW5jdGlvbiBwcmV2ZW50Qm9zc1NvZnRsb2Nrcyhyb206IFJvbSkge1xuICBjb25zdCB0cmlnZ2VyID0gcm9tLnRyaWdnZXIoMHhhMCk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFtdO1xuICB0cmlnZ2VyLmZsYWdzID0gW107XG4gIHRyaWdnZXIubWVzc2FnZSA9IE1lc3NhZ2VJZC5vZih7cGFydDogMCwgaW5kZXg6IDAsIGFjdGlvbjogMHgxNX0pO1xuXG4gIHJvbS5vYmplY3RzWzB4NWVdLmRhdGFbMHhkXSA9IDB4ZmU7IC8vIG9iamVjdCBhY3Rpb24gN2UgaW5zdGVhZCBvZiA3ZlxuICByb20uaXRlbXMuSW5zZWN0Rmx1dGUuaXRlbVVzZURhdGFbMF0uZmxhZ3MgPSBbcm9tLmZsYWdzLlVzZWRJbnNlY3RGbHV0ZS5pZF07XG59XG5cbmZ1bmN0aW9uIGZpeE9wZWxTdGF0dWUocm9tOiBSb20pIHtcbiAgLy8gRG9uJ3Qgc2VsZWN0IE9wZWwgU3RhdHVlIGF0IGFsbC4gIFRoaXMgcGF0Y2hlcyB0aGUgdGFibGUgYXQgJDIxMDNiXG4gIC8vIHRoYXQgdHJhbnNsYXRlcyBhbiBpdGVtIElEIHRvIGEgXCJzZWxlY3RlZCBpdGVtXCIgaW5kZXgsIGkuZS4gZWFjaFxuICAvLyB0eXBlIG9mIGl0ZW0gbWFwcyB0byBhIHNlcmllcyAxLi5OLiAgSW4gdGhpcyBjYXNlLCB3ZSBqdXN0IHJlbWFwXG4gIC8vIE9wZWwgU3RhdHVlIHRvIHplcm8gc28gdGhhdCBpdCBsb29rcyBsaWtlIG5vdGhpbmcgaXMgc2VsZWN0ZWQuXG4gIHJvbS5pdGVtcy5PcGVsU3RhdHVlLnNlbGVjdGVkSXRlbVZhbHVlID0gMDtcbn1cblxuZnVuY3Rpb24gZml4Q29pblNwcml0ZXMocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBwYWdlIG9mIFsweDYwLCAweDY0LCAweDY1LCAweDY2LCAweDY3LCAweDY4LFxuICAgICAgICAgICAgICAgICAgICAgIDB4NjksIDB4NmEsIDB4NmIsIDB4NmMsIDB4NmQsIDB4NmZdKSB7XG4gICAgZm9yIChjb25zdCBwYXQgb2YgWzAsIDEsIDJdKSB7XG4gICAgICByb20ucGF0dGVybnMuc2V0KHBhZ2UgPDwgNiwgcGF0LCByb20ucGF0dGVybnMuZ2V0KDB4NWUgPDwgNiwgcGF0KS5waXhlbHMpO1xuICAgIH1cbiAgfVxuICByb20ub2JqZWN0c1sweDBjXS5tZXRhc3ByaXRlID0gMHhhOTtcbn1cblxuLyoqXG4gKiBGaXggdGhlIHNvZnRsb2NrIHRoYXQgaGFwcGVucyB3aGVuIHlvdSBnbyB0aHJvdWdoXG4gKiBhIHdhbGwgYmFja3dhcmRzIGJ5IG1vdmluZyB0aGUgZXhpdC9lbnRyYW5jZSB0aWxlc1xuICogdXAgYSBiaXQgYW5kIGFkanVzdGluZyBzb21lIHRpbGVFZmZlY3RzIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gZml4UmV2ZXJzZVdhbGxzKHJvbTogUm9tKSB7XG4gIC8vIGFkanVzdCB0aWxlIGVmZmVjdCBmb3IgYmFjayB0aWxlcyBvZiBpcm9uIHdhbGxcbiAgZm9yIChjb25zdCB0IGluIFsweDA0LCAweDA1LCAweDA4LCAweDA5XSkge1xuICAgIHJvbS50aWxlRWZmZWN0c1sweGJjIC0gMHhiM10uZWZmZWN0c1t0XSA9IDB4MTg7XG4gICAgcm9tLnRpbGVFZmZlY3RzWzB4YjUgLSAweGIzXS5lZmZlY3RzW3RdID0gMHgxODtcbiAgfVxuICAvLyBUT0RPIC0gbW92ZSBhbGwgdGhlIGVudHJhbmNlcyB0byB5PTIwIGFuZCBleGl0cyB0byB5dD0wMVxufVxuXG4vKiogTWFrZSBhIGxhbmQgYnJpZGdlIGluIHVuZGVyZ3JvdW5kIGNoYW5uZWwgKi9cbmZ1bmN0aW9uIHVuZGVyZ3JvdW5kQ2hhbm5lbExhbmRCcmlkZ2Uocm9tOiBSb20pIHtcbiAgY29uc3Qge3RpbGVzfSA9IHJvbS5zY3JlZW5zWzB4YTFdO1xuICB0aWxlc1sweDI4XSA9IDB4OWY7XG4gIHRpbGVzWzB4MzddID0gMHgyMztcbiAgdGlsZXNbMHgzOF0gPSAweDIzOyAvLyAweDhlO1xuICB0aWxlc1sweDM5XSA9IDB4MjE7XG4gIHRpbGVzWzB4NDddID0gMHg4ZDtcbiAgdGlsZXNbMHg0OF0gPSAweDhmO1xuICB0aWxlc1sweDU2XSA9IDB4OTk7XG4gIHRpbGVzWzB4NTddID0gMHg5YTtcbiAgdGlsZXNbMHg1OF0gPSAweDhjO1xufVxuXG5mdW5jdGlvbiBmb2dMYW1wTm90UmVxdWlyZWQocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KSB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge0Fsd2F5c1RydWUsIEluanVyZWREb2xwaGluLCBGb2dMYW1wLFxuICAgICAgICAgICAgS2Vuc3VJbkNhYmluLCBSZXR1cm5lZEZvZ0xhbXB9LFxuICAgIGl0ZW1zOiB7U2hlbGxGbHV0ZX0sXG4gICAgbG9jYXRpb25zOiB7Qm9hdEhvdXNlLCBQb3J0b2FfRmlzaGVybWFuSG91c2V9LFxuICAgIG5wY3MsXG4gIH0gPSByb207XG4gICAgXG4gIC8vIE5lZWQgdG8gbWFrZSBzZXZlcmFsIGNoYW5nZXMuXG4gIC8vICgxKSBkb2xwaGluIG9ubHkgcmVxdWlyZXMgc2hlbGwgZmx1dGUsIG1ha2UgdGhlIGZsYWcgY2hlY2sgZnJlZVxuICAvLyAgICAgdW5sZXNzIGhlYWxpbmcgaXMgcmVxdWlyZWQuXG4gIGNvbnN0IHJlcXVpcmVIZWFsZWQgPSBmbGFncy5yZXF1aXJlSGVhbGVkRG9scGhpblRvUmlkZSgpO1xuICBTaGVsbEZsdXRlLml0ZW1Vc2VEYXRhWzBdLndhbnQgPVxuICAgICAgcmVxdWlyZUhlYWxlZCA/IEluanVyZWREb2xwaGluLmlkIDogQWx3YXlzVHJ1ZS5pZDtcbiAgLy8gKDIpIGtlbnN1IDY4IChANjEpIGRyb3BzIGFuIGl0ZW0gKDY3IG1hZ2ljIHJpbmcpXG4gIG5wY3MuS2Vuc3VJbkNhYmluLmRhdGFbMF0gPSAweDY3O1xuICBucGNzLktlbnN1SW5DYWJpbi5sb2NhbERpYWxvZ3MuZ2V0KC0xKSFbMF0ubWVzc2FnZS5hY3Rpb24gPSAweDBhO1xuICBucGNzLktlbnN1SW5DYWJpbi5sb2NhbERpYWxvZ3MuZ2V0KC0xKSFbMF0uZmxhZ3MgPSBbXTtcbiAgbnBjcy5LZW5zdUluQ2FiaW4uc3Bhd25Db25kaXRpb25zLnNldChCb2F0SG91c2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1JldHVybmVkRm9nTGFtcC5pZCwgfktlbnN1SW5DYWJpbi5pZF0pO1xuICAvLyAoMykgZmlzaGVybWFuIDY0IHNwYXducyBvbiBmb2cgbGFtcCByYXRoZXIgdGhhbiBzaGVsbCBmbHV0ZVxuICBucGNzLkZpc2hlcm1hbi5zcGF3bkNvbmRpdGlvbnMuc2V0KFBvcnRvYV9GaXNoZXJtYW5Ib3VzZS5pZCwgW0ZvZ0xhbXAuaWRdKTtcblxuICAvLyAoNCkgZml4IHVwIGl0ZW1nZXQgNjcgZnJvbSBpdGVtZ2V0IDY0IChkZWxldGUgdGhlIGZsYWcpXG4gIHJvbS5pdGVtR2V0c1sweDY0XS5mbGFncyA9IFtdO1xuICByb20uaXRlbUdldHNbMHg2N10uY29weUZyb20ocm9tLml0ZW1HZXRzWzB4NjRdKTtcbiAgLy9yb20uaXRlbUdldHNbMHg2N10uZmxhZ3MgPSBbMHgwYzFdO1xuXG4gIC8vIFRPRE8gLSBncmFwaGljcyBzY3Jld2VkIHVwIC0gZmlndXJlIG91dCBpZiBvYmplY3QgYWN0aW9uIGlzIGNoYW5naW5nXG4gIC8vIHRoZSBwYXR0ZXJuIHRhYmxlcyBiYXNlZCBvbiAoZS5nLikgJDYwMCx4IG1heWJlPyAgQ2FuIHdlIHByZXZlbnQgaXQ/XG5cbiAgLy8gVE9ETyAtIGFkZCBhIG5vdGVzIGZpbGUgYWJvdXQgdGhpcy5cblxufVxuXG4vKipcbiAqIFJlbW92ZSB0aW1lciBzcGF3bnMgZnJvbSBhbGwgY2hlc3RzLiAgTWltaWNzIGhhdmUgYWxyZWFkeSBiZWVuXG4gKiByZW51bWJlcmVkIHRvIGJlIHVuaXF1ZSAocHJlLXBhcnNlKS4gIE5vdGUgdGhhdCB0aGUgcmVudW1iZXJpbmdcbiAqIHJlcXVpcmVzIGFuIGFzc2VtYmx5IGNoYW5nZSAoJDNkM2ZkIGluIHByZXNodWZmbGUucykuXG4gKi9cbmZ1bmN0aW9uIGZpeENoZXN0cyhyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGxvYyBvZiByb20ubG9jYXRpb25zKSB7XG4gICAgZm9yIChjb25zdCBzIG9mIGxvYy5zcGF3bnMpIHtcbiAgICAgIGlmIChzLmlzQ2hlc3QoKSkgcy50aW1lZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBUT0RPIC0gZmluZCBhIGJldHRlciB3YXkgdG8gYnVuZGxlIGFzbSBjaGFuZ2VzPyAtIGJ1dCBpdCdzIGEgbWVzc1xuICAvLyAgICAgICAgd2l0aCBzaGFyaW5nIGxhYmVscywgdHJhY2tpbmcgY2xvYmJlcmluZywgZXRjLlxuICAvLyByb20uYXNzZW1ibGUoKVxuICAvLyAgICAgLiQoJ2FkYyAkMTAnKVxuICAvLyAgICAgLmJlcSgnbGFiZWwnKVxuICAvLyAgICAgLmxzaCgpXG4gIC8vICAgICAubHNoKGAke2FkZHJ9LHhgKVxuICAvLyAgICAgLmxhYmVsKCdsYWJlbCcpO1xuICAvLyByb20ucGF0Y2goKVxuICAvLyAgICAgLm9yZygweDNkM2ZkKVxuICAvLyAgICAgLmJ5dGUoMHhiMCk7XG5cbiAgLy8gcm9tLmNvZGUucmVwbGFjZSgweDNjMTkyLCAweDNjMWE3LCBgXG4gIC8vICAgICBhc2xcbiAgLy8gICAgIGFkYyAkMTAgIDsgZG8gc29tZXRoaW5nXG4gIC8vICAgICBibmUgK1xuICAvLyAgICAgIHJ0c1xuICAvLyAgICsgam1wIEZvb0JhcmApO1xuICAvLyByb20uY29kZS5yZXBsYWNlRXhhY3Qoc3RhcnQsIGVuZCwgY29kZSk7XG4gIC8vIHJvbS5jb2RlLmluc2VydChwYWdlLCBgXG4gIC8vICAgICBMYWJlbDogIDsgdXNhYmxlIGZyb20gZWxzZXdoZXJlP1xuICAvLyAgICAgLSBhc2xcbiAgLy8gICAgICAgYmNjIC1cbiAgLy8gICAgICAgcnRzYCk7XG59XG5cbmZ1bmN0aW9uIGFkanVzdEdvYUZvcnRyZXNzVHJpZ2dlcnMocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3QgbCA9IHJvbS5sb2NhdGlvbnM7XG4gIC8vIE1vdmUgS2VsYmVzcXVlIDIgb25lIGZ1bGwgdGlsZSBsZWZ0LlxuICBsLkdvYUZvcnRyZXNzX0tlbGJlc3F1ZS5zcGF3bnNbMF0ueCAtPSAxNjtcbiAgLy8gUmVtb3ZlIHNhZ2Ugc2NyZWVuIGxvY2tzIChleGNlcHQgS2Vuc3UpLlxuICBsLkdvYUZvcnRyZXNzX1plYnUuc3Bhd25zLnNwbGljZSgxLCAxKTsgLy8gemVidSBzY3JlZW4gbG9jayB0cmlnZ2VyXG4gIGwuR29hRm9ydHJlc3NfVG9ybmVsLnNwYXducy5zcGxpY2UoMiwgMSk7IC8vIHRvcm5lbCBzY3JlZW4gbG9jayB0cmlnZ2VyXG4gIGwuR29hRm9ydHJlc3NfQXNpbmEuc3Bhd25zLnNwbGljZSgyLCAxKTsgLy8gYXNpbmEgc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX0tlbnN1LnNwYXducy5zcGxpY2UoMywgMSk7IC8vIGtlbnN1IGh1bWFuIHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19LZW5zdS5zcGF3bnMuc3BsaWNlKDEsIDEpOyAvLyBrZW5zdSBzbGltZSBzY3JlZW4gbG9jayB0cmlnZ2VyXG59XG5cbmZ1bmN0aW9uIGFsYXJtRmx1dGVJc0tleUl0ZW0ocm9tOiBSb20sIGZsYWdzOkZsYWdTZXQpOiB2b2lkIHtcbiAgY29uc3Qge1xuICAgIGl0ZW1zOiB7QWxhcm1GbHV0ZX0sXG4gICAgZmxhZ3M6IHtUYWxrZWRUb1plYnVTdHVkZW50LCBaZWJ1U3R1ZGVudH0sXG4gICAgbG9jYXRpb25zOiB7TWV6YW1lU2hyaW5lLCBMZWFmX1N0dWRlbnRIb3VzZSwgV2F0ZXJmYWxsQ2F2ZTQsIFplYnVDYXZlfSxcbiAgICBucGNzOiB7V2luZG1pbGxHdWFyZCwgWmVidX0sXG4gIH0gPSByb207XG5cbiAgLy8gTW92ZSBhbGFybSBmbHV0ZSB0byB0aGlyZCByb3dcbiAgcm9tLml0ZW1HZXRzWzB4MzFdLmludmVudG9yeVJvd1N0YXJ0ID0gMHgyMDtcbiAgLy8gRW5zdXJlIGFsYXJtIGZsdXRlIGNhbm5vdCBiZSBkcm9wcGVkXG4gIC8vIHJvbS5wcmdbMHgyMTAyMV0gPSAweDQzOyAvLyBUT0RPIC0gcm9tLml0ZW1zWzB4MzFdLj8/P1xuICBBbGFybUZsdXRlLnVuaXF1ZSA9IHRydWU7XG4gIC8vIEVuc3VyZSBhbGFybSBmbHV0ZSBjYW5ub3QgYmUgc29sZFxuICBBbGFybUZsdXRlLmJhc2VQcmljZSA9IDA7XG5cbiAgXG4gIGlmIChmbGFncy56ZWJ1U3R1ZGVudEdpdmVzSXRlbSgpKSB7XG4gICAgLy8gWmVidSBzdHVkZW50IChha2Egd2luZG1pbGwgZ3VhcmQpOiBzZWNvbmRhcnkgaXRlbSAtPiBhbGFybSBmbHV0ZVxuICAgIFdpbmRtaWxsR3VhcmQuZGF0YVsxXSA9IDB4MzE7XG4gIH0gZWxzZSB7XG4gICAgLy8gQWN0dWFsbHkgbWFrZSB1c2Ugb2YgdGhlIFRhbGtlZFRvWmVidVN0dWRldCBmbGFnO1xuICAgIFdpbmRtaWxsR3VhcmQuZGF0YVsxXSA9IDB4ZmY7IC8vIGluZGljYXRlIG5vdGhpbmcgdGhlcmU6IG5vIHNsb3QuXG4gICAgY29uc3QgZGlhbG9nID0gV2luZG1pbGxHdWFyZC5kaWFsb2coTGVhZl9TdHVkZW50SG91c2UpWzBdO1xuICAgIGRpYWxvZy5jb25kaXRpb24gPSB+VGFsa2VkVG9aZWJ1U3R1ZGVudC5pZDtcbiAgICBkaWFsb2cuZmxhZ3MucHVzaChUYWxrZWRUb1plYnVTdHVkZW50LmlkKTtcbiAgICByZXBsYWNlKFplYnUuc3Bhd25zKFplYnVDYXZlKSwgWmVidVN0dWRlbnQuaWQsIFRhbGtlZFRvWmVidVN0dWRlbnQuaWQpO1xuICAgIC8vIEFsYXJtIGZsdXRlIGFuZCBhIG1lZGljYWwgaGVyYiBhcmUgaW4gY2hlc3RzIGluIG1lemFtZVxuICAgIE1lemFtZVNocmluZS5zcGF3bnMucHVzaChTcGF3bi5vZih7c2NyZWVuOiAwLCB0aWxlOiAweDliLCB0eXBlOiAyLCBpZDogMHgzMX0pKTtcbiAgICBNZXphbWVTaHJpbmUuc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3NjcmVlbjogMCwgdGlsZTogMHg5NSwgdHlwZTogMiwgaWQ6IDB4NDl9KSk7XG4gICAgcm9tLml0ZW1HZXRzWzB4NDldLml0ZW1JZCA9IHJvbS5pdGVtcy5NZWRpY2FsSGVyYi5pZDtcbiAgfVxuXG4gIC8vIFJlbW92ZSBhbGFybSBmbHV0ZSBmcm9tIHNob3BzIChyZXBsYWNlIHdpdGggb3RoZXIgaXRlbXMpXG4gIC8vIE5PVEUgLSB3ZSBjb3VsZCBzaW1wbGlmeSB0aGlzIHdob2xlIHRoaW5nIGJ5IGp1c3QgaGFyZGNvZGluZyBpbmRpY2VzLlxuICAvLyAgICAgIC0gaWYgdGhpcyBpcyBndWFyYW50ZWVkIHRvIGhhcHBlbiBlYXJseSwgaXQncyBhbGwgdGhlIHNhbWUuXG4gIGNvbnN0IHJlcGxhY2VtZW50cyA9IFtcbiAgICBbMHgyMSwgMC43Ml0sIC8vIGZydWl0IG9mIHBvd2VyLCA3MiUgb2YgY29zdFxuICAgIFsweDFmLCAwLjldLCAvLyBseXNpcyBwbGFudCwgOTAlIG9mIGNvc3RcbiAgXTtcbiAgbGV0IGogPSAwO1xuICBmb3IgKGNvbnN0IHNob3Agb2Ygcm9tLnNob3BzKSB7XG4gICAgaWYgKHNob3AudHlwZSAhPT0gU2hvcFR5cGUuVE9PTCkgY29udGludWU7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHNob3AuY29udGVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChzaG9wLmNvbnRlbnRzW2ldICE9PSAweDMxKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IFtpdGVtLCBwcmljZVJhdGlvXSA9IHJlcGxhY2VtZW50c1soaisrKSAlIHJlcGxhY2VtZW50cy5sZW5ndGhdO1xuICAgICAgc2hvcC5jb250ZW50c1tpXSA9IGl0ZW07XG4gICAgICBpZiAocm9tLnNob3BEYXRhVGFibGVzQWRkcmVzcykge1xuICAgICAgICAvLyBOT1RFOiB0aGlzIGlzIGJyb2tlbiAtIG5lZWQgYSBjb250cm9sbGVkIHdheSB0byBjb252ZXJ0IHByaWNlIGZvcm1hdHNcbiAgICAgICAgc2hvcC5wcmljZXNbaV0gPSBNYXRoLnJvdW5kKHNob3AucHJpY2VzW2ldICogcHJpY2VSYXRpbyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hhbmdlIGZsdXRlIG9mIGxpbWUgY2hlc3QncyAobm93LXVudXNlZCkgaXRlbWdldCB0byBoYXZlIG1lZGljYWwgaGVyYlxuICByb20uaXRlbUdldHNbMHg1Yl0uaXRlbUlkID0gMHgxZDtcbiAgLy8gQ2hhbmdlIHRoZSBhY3R1YWwgc3Bhd24gZm9yIHRoYXQgY2hlc3QgdG8gYmUgdGhlIG1pcnJvcmVkIHNoaWVsZCBjaGVzdFxuICBXYXRlcmZhbGxDYXZlNC5zcGF3bigweDE5KS5pZCA9IDB4MTA7XG5cbiAgLy8gVE9ETyAtIHJlcXVpcmUgbmV3IGNvZGUgZm9yIHR3byB1c2VzXG59XG5cbmZ1bmN0aW9uIGJyb2thaGFuYVdhbnRzTWFkbzEocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge2ZsYWdzOiB7S2FybWluZSwgTWFkbzF9LCBucGNzOiB7QnJva2FoYW5hfX0gPSByb207XG4gIGNvbnN0IGRpYWxvZyA9IGFzc2VydChCcm9rYWhhbmEubG9jYWxEaWFsb2dzLmdldCgtMSkpWzBdO1xuICBpZiAoZGlhbG9nLmNvbmRpdGlvbiAhPT0gfkthcm1pbmUuaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEJhZCBicm9rYWhhbmEgY29uZGl0aW9uOiAke2RpYWxvZy5jb25kaXRpb259YCk7XG4gIH1cbiAgZGlhbG9nLmNvbmRpdGlvbiA9IH5NYWRvMS5pZDtcbn1cblxuZnVuY3Rpb24gcmVxdWlyZUhlYWxlZERvbHBoaW4ocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7SW5qdXJlZERvbHBoaW4sIFNoZWxsRmx1dGV9LFxuICAgIG5wY3M6IHtGaXNoZXJtYW4sIEZpc2hlcm1hbkRhdWdodGVyfSxcbiAgfSA9IHJvbTtcbiAgLy8gTm9ybWFsbHkgdGhlIGZpc2hlcm1hbiAoJDY0KSBzcGF3bnMgaW4gaGlzIGhvdXNlICgkZDYpIGlmIHlvdSBoYXZlXG4gIC8vIHRoZSBzaGVsbCBmbHV0ZSAoMjM2KS4gIEhlcmUgd2UgYWxzbyBhZGQgYSByZXF1aXJlbWVudCBvbiB0aGUgaGVhbGVkXG4gIC8vIGRvbHBoaW4gc2xvdCAoMDI1KSwgd2hpY2ggd2Uga2VlcCBhcm91bmQgc2luY2UgaXQncyBhY3R1YWxseSB1c2VmdWwuXG4gIEZpc2hlcm1hbi5zcGF3bkNvbmRpdGlvbnMuc2V0KDB4ZDYsIFtTaGVsbEZsdXRlLmlkLCBJbmp1cmVkRG9scGhpbi5pZF0pO1xuICAvLyBBbHNvIGZpeCBkYXVnaHRlcidzIGRpYWxvZyAoJDdiKS5cbiAgY29uc3QgZGF1Z2h0ZXJEaWFsb2cgPSBGaXNoZXJtYW5EYXVnaHRlci5sb2NhbERpYWxvZ3MuZ2V0KC0xKSE7XG4gIGRhdWdodGVyRGlhbG9nLnVuc2hpZnQoZGF1Z2h0ZXJEaWFsb2dbMF0uY2xvbmUoKSk7XG4gIGRhdWdodGVyRGlhbG9nWzBdLmNvbmRpdGlvbiA9IH5Jbmp1cmVkRG9scGhpbi5pZDtcbiAgZGF1Z2h0ZXJEaWFsb2dbMV0uY29uZGl0aW9uID0gflNoZWxsRmx1dGUuaWQ7XG59XG5cbmZ1bmN0aW9uIHJlcXVpcmVUZWxlcGF0aHlGb3JEZW8ocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7VGVsZXBhdGh5fSxcbiAgICBucGNzOiB7RGVvLCBTYWhhcmFCdW5ueX0sXG4gIH0gPSByb207XG4gIC8vIE5vdCBoYXZpbmcgdGVsZXBhdGh5ICgyNDMpIHdpbGwgdHJpZ2dlciBhIFwia3l1IGt5dVwiICgxYToxMiwgMWE6MTMpIGZvclxuICAvLyBib3RoIGdlbmVyaWMgYnVubmllcyAoNTkpIGFuZCBkZW8gKDVhKS5cbiAgU2FoYXJhQnVubnkuZ2xvYmFsRGlhbG9ncy5wdXNoKEdsb2JhbERpYWxvZy5vZih+VGVsZXBhdGh5LmlkLCBbMHgxYSwgMHgxMl0pKTtcbiAgRGVvLmdsb2JhbERpYWxvZ3MucHVzaChHbG9iYWxEaWFsb2cub2YoflRlbGVwYXRoeS5pZCwgWzB4MWEsIDB4MTNdKSk7XG59XG5cbmZ1bmN0aW9uIHRlbGVwb3J0T25UaHVuZGVyU3dvcmQocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7V2FycFNoeXJvbn0sXG4gIH0gPSByb207XG4gIC8vIGl0ZW1nZXQgMDMgc3dvcmQgb2YgdGh1bmRlciA9PiBzZXQgMmZkIHNoeXJvbiB3YXJwIHBvaW50XG4gIHJvbS5pdGVtR2V0c1sweDAzXS5mbGFncy5wdXNoKFdhcnBTaHlyb24uaWQpO1xufVxuXG5mdW5jdGlvbiBub1RlbGVwb3J0T25UaHVuZGVyU3dvcmQocm9tOiBSb20pOiB2b2lkIHtcbiAgLy8gQ2hhbmdlIHN3b3JkIG9mIHRodW5kZXIncyBhY3Rpb24gdG8gYmJlIHRoZSBzYW1lIGFzIG90aGVyIHN3b3JkcyAoMTYpXG4gIHJvbS5pdGVtR2V0c1sweDAzXS5hY3F1aXNpdGlvbkFjdGlvbi5hY3Rpb24gPSAweDE2O1xufVxuXG5mdW5jdGlvbiBhZGp1c3RJdGVtTmFtZXMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KTogdm9pZCB7XG4gIGlmIChmbGFncy5sZWF0aGVyQm9vdHNHaXZlU3BlZWQoKSkge1xuICAgIC8vIHJlbmFtZSBsZWF0aGVyIGJvb3RzIHRvIHNwZWVkIGJvb3RzXG4gICAgY29uc3QgbGVhdGhlckJvb3RzID0gcm9tLml0ZW1zWzB4MmZdITtcbiAgICBsZWF0aGVyQm9vdHMubWVudU5hbWUgPSAnU3BlZWQgQm9vdHMnO1xuICAgIGxlYXRoZXJCb290cy5tZXNzYWdlTmFtZSA9ICdTcGVlZCBCb290cyc7XG4gICAgaWYgKGZsYWdzLmNoYW5nZUdhc01hc2tUb0hhem1hdFN1aXQoKSkge1xuICAgICAgY29uc3QgZ2FzTWFzayA9IHJvbS5pdGVtc1sweDI5XTtcbiAgICAgIGdhc01hc2subWVudU5hbWUgPSAnSGF6bWF0IFN1aXQnO1xuICAgICAgZ2FzTWFzay5tZXNzYWdlTmFtZSA9ICdIYXptYXQgU3VpdCc7XG4gICAgfVxuICB9XG5cbiAgLy8gcmVuYW1lIGJhbGxzIHRvIG9yYnNcbiAgZm9yIChsZXQgaSA9IDB4MDU7IGkgPCAweDBjOyBpICs9IDIpIHtcbiAgICByb20uaXRlbXNbaV0ubWVudU5hbWUgPSByb20uaXRlbXNbaV0ubWVudU5hbWUucmVwbGFjZSgnQmFsbCcsICdPcmInKTtcbiAgICByb20uaXRlbXNbaV0ubWVzc2FnZU5hbWUgPSByb20uaXRlbXNbaV0ubWVzc2FnZU5hbWUucmVwbGFjZSgnQmFsbCcsICdPcmInKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlQnJhY2VsZXRzUHJvZ3Jlc3NpdmUocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7QmFsbE9mV2luZCwgVG9ybmFkb0JyYWNlbGV0fSxcbiAgICBucGNzOiB7VG9ybmVsfSxcbiAgfSA9IHJvbTtcbiAgLy8gdG9ybmVsJ3MgdHJpZ2dlciBuZWVkcyBib3RoIGl0ZW1zXG4gIGNvbnN0IHZhbmlsbGEgPSBUb3JuZWwubG9jYWxEaWFsb2dzLmdldCgweDIxKSE7XG4gIGNvbnN0IHBhdGNoZWQgPSBbXG4gICAgdmFuaWxsYVswXSwgLy8gYWxyZWFkeSBsZWFybmVkIHRlbGVwb3J0XG4gICAgdmFuaWxsYVsyXSwgLy8gZG9uJ3QgaGF2ZSB0b3JuYWRvIGJyYWNlbGV0XG4gICAgdmFuaWxsYVsyXS5jbG9uZSgpLCAvLyB3aWxsIGNoYW5nZSB0byBkb24ndCBoYXZlIG9yYlxuICAgIHZhbmlsbGFbMV0sIC8vIGhhdmUgYnJhY2VsZXQsIGxlYXJuIHRlbGVwb3J0XG4gIF07XG4gIHBhdGNoZWRbMV0uY29uZGl0aW9uID0gflRvcm5hZG9CcmFjZWxldC5pZDsgLy8gZG9uJ3QgaGF2ZSBicmFjZWxldFxuICBwYXRjaGVkWzJdLmNvbmRpdGlvbiA9IH5CYWxsT2ZXaW5kLmlkOyAvLyBkb24ndCBoYXZlIG9yYlxuICBwYXRjaGVkWzNdLmNvbmRpdGlvbiA9IH4wOyAgICAgLy8gZGVmYXVsdFxuICBUb3JuZWwubG9jYWxEaWFsb2dzLnNldCgweDIxLCBwYXRjaGVkKTtcbn1cblxuZnVuY3Rpb24gc2ltcGxpZnlJbnZpc2libGVDaGVzdHMocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3Qge0NvcmRlbFBsYWluRWFzdCwgS2lyaXNhTWVhZG93LCBVbmRlcmdyb3VuZENoYW5uZWx9ID0gcm9tLmxvY2F0aW9ucztcbiAgZm9yIChjb25zdCBsb2NhdGlvbiBvZiBbQ29yZGVsUGxhaW5FYXN0LCBLaXJpc2FNZWFkb3csIFVuZGVyZ3JvdW5kQ2hhbm5lbF0pIHtcbiAgICBmb3IgKGNvbnN0IHNwYXduIG9mIGxvY2F0aW9uLnNwYXducykge1xuICAgICAgLy8gc2V0IHRoZSBuZXcgXCJpbnZpc2libGVcIiBmbGFnIG9uIHRoZSBjaGVzdC5cbiAgICAgIGlmIChzcGF3bi5pc0NoZXN0KCkpIHNwYXduLmRhdGFbMl0gfD0gMHgyMDtcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHRoZSBzdGF0dWUgb2Ygb255eCBhbmQgcG9zc2libHkgdGhlIHRlbGVwb3J0IGJsb2NrIHRyaWdnZXIgdG8gQ29yZGVsIFdlc3RcbmZ1bmN0aW9uIGFkZENvcmRlbFdlc3RUcmlnZ2Vycyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpIHtcbiAgY29uc3Qge0NvcmRlbFBsYWluRWFzdCwgQ29yZGVsUGxhaW5XZXN0fSA9IHJvbS5sb2NhdGlvbnM7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgQ29yZGVsUGxhaW5FYXN0LnNwYXducykge1xuICAgIGlmIChzcGF3bi5pc0NoZXN0KCkgfHwgKGZsYWdzLmRpc2FibGVUZWxlcG9ydFNraXAoKSAmJiBzcGF3bi5pc1RyaWdnZXIoKSkpIHtcbiAgICAgIC8vIENvcHkgaWYgKDEpIGl0J3MgdGhlIGNoZXN0LCBvciAoMikgd2UncmUgZGlzYWJsaW5nIHRlbGVwb3J0IHNraXBcbiAgICAgIENvcmRlbFBsYWluV2VzdC5zcGF3bnMucHVzaChzcGF3bi5jbG9uZSgpKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZml4UmFiYml0U2tpcChyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IHNwYXduIG9mIHJvbS5sb2NhdGlvbnMuTXRTYWJyZU5vcnRoX01haW4uc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLmlkID09PSAweDg2KSB7XG4gICAgICBpZiAoc3Bhd24ueCA9PT0gMHg3NDApIHtcbiAgICAgICAgc3Bhd24ueCArPSAxNjtcbiAgICAgICAgc3Bhd24ueSArPSAxNjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZml4RmxpZ2h0U3RhdHVlU2tpcChyb206IFJvbSk6IHZvaWQge1xuICAvLyBTd2l0Y2ggdG8gYSB3aWRlciBoaXRib3ggdGhhdCBwcmV2ZW50cyBzbmVha2luZyBhcm91bmQgdGhlIGVkZ2UuXG4gIC8vIE9wdGlvbnM6XG4gIC8vICAgJDE3IGlzIHJpZGljdWxvdXNseSB3aWRlLCBidXQgYWN0dWFsbHkgYSBsaXR0bGUgc2hvcnRlci5cbiAgLy8gICAgICAgTWFpbiBkb3duc2lkZSBpcyB0aGF0IHRoZSB2ZXJ0aWNhbCBhbGlnbm1lbnQgaXMgZGlmZmVyZW50LFxuICAvLyAgICAgICBzbyBpdCBoaXRzIHdoZW4gcGxheWVyIGlzIGJlbG93IGFuZCBkb2Vzbid0IGhpdCByaWdodCBhYm92ZS5cbiAgLy8gICAkMGUgaXMgb25seSBzbGlnaHRseSB3aWRlciwgYnV0IHRhbGxlci4gIFRoaXMgY2F1c2VzIHRoZSBiZWFtXG4gIC8vICAgICAgIHRvIGhpdCBzZXZlcmFsIHBpeGVscyBhd2F5IGZyb20gYW4gYWN0dWFsIHZpc3VhbCBjb2xsaXNpb24uXG4gIC8vICAgJDA2IGlzIHVudXNlZCwgc28gd2UgY2FuIHJlcHVycG9zZSBpdC4gIFdlIGFkZCA2IGhvcml6b250YWxcbiAgLy8gICAgICAgcGl4ZWxzIGFuZCAyIHZlcnRpY2FsIHBpeGVscyB0byBlYWNoIHNpZGUgZnJvbSB0aGUgb3JpZ2luYWxcbiAgLy8gICAgICAgaGl0Ym94IDEsIHdoaWNoIHNlZW1zIHRvXG4gIC8vICAgICAgIGJlIHRoZSBtaW5pbXVtXG4gIGNvbnN0IG9sZEhpdGJveCA9IHJvbS5oaXRib3hlc1tyb20ub2JqZWN0cy5ndWFyZGlhblN0YXR1ZU1pc3NpbGUuaGl0Ym94XTtcbiAgY29uc3QgbmV3SGl0Ym94ID0gcm9tLmhpdGJveGVzWzZdO1xuICByb20ub2JqZWN0cy5ndWFyZGlhblN0YXR1ZU1pc3NpbGUuaGl0Ym94ID0gbmV3SGl0Ym94LmlkO1xuICBuZXdIaXRib3gueDAgPSBvbGRIaXRib3gueDAgLSA2O1xuICBuZXdIaXRib3gudyAgPSBvbGRIaXRib3gudyAgKyAxMjtcbiAgbmV3SGl0Ym94LnkwID0gb2xkSGl0Ym94LnkwIC0gMjtcbiAgbmV3SGl0Ym94LmggID0gb2xkSGl0Ym94LmggICsgNDtcbn1cblxuZnVuY3Rpb24gcGF0Y2hUb29NYW55SXRlbXNNZXNzYWdlKHJvbTogUm9tKSB7XG4gIHJvbS5tZXNzYWdlcy5wYXJ0c1sweDIwXVsweDBmXS50ZXh0ICs9ICdcXG5JdGVtOiBbOklURU06XSc7XG59XG5cbmZ1bmN0aW9uIGFkZFpvbWJpZVdhcnAocm9tOiBSb20pIHtcbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7V2FycFpvbWJpZX0sXG4gICAgbG9jYXRpb25zOiB7Wm9tYmllVG93bn0sXG4gIH0gPSByb207XG4gIC8vIE1ha2Ugc3BhY2UgZm9yIHRoZSBuZXcgZmxhZyBiZXR3ZWVuIEpvZWwgYW5kIFN3YW5cbiAgcm9tLmZsYWdzLmluc2VydFpvbWJpZVdhcnBGbGFnKCk7XG4gIC8vIFVwZGF0ZSB0aGUgbWVudVxuICBjb25zdCBtZXNzYWdlID0gcm9tLm1lc3NhZ2VzLnBhcnRzWzB4MjFdWzBdO1xuICBtZXNzYWdlLnRleHQgPSBbXG4gICAgJyB7MWE6TGVhZn0gICAgICB7MTY6QnJ5bm1hZXJ9IHsxZDpPYWt9ICcsXG4gICAgJ3swYzpOYWRhcmV9XFwncyAgezFlOlBvcnRvYX0gICB7MTQ6QW1hem9uZXN9ICcsXG4gICAgJ3sxOTpKb2VsfSAgICAgIFpvbWJpZSAgIHsyMDpTd2FufSAnLFxuICAgICd7MjM6U2h5cm9ufSAgICB7MTg6R29hfSAgICAgIHsyMTpTYWhhcmF9JyxcbiAgXS5qb2luKCdcXG4nKTtcbiAgLy8gQWRkIGEgdHJpZ2dlciB0byB0aGUgZW50cmFuY2UgLSB0aGVyZSdzIGFscmVhZHkgYSBzcGF3biBmb3IgOGFcbiAgLy8gYnV0IHdlIGNhbid0IHJldXNlIHRoYXQgc2luY2UgaXQncyB0aGUgc2FtZSBhcyB0aGUgb25lIG91dHNpZGVcbiAgLy8gdGhlIG1haW4gRVNJIGVudHJhbmNlOyBzbyByZXVzZSBhIGRpZmZlcmVudCBvbmUuXG4gIGNvbnN0IHRyaWdnZXIgPSByb20ubmV4dEZyZWVUcmlnZ2VyKCk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFtdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe30pO1xuICB0cmlnZ2VyLmZsYWdzID0gW1dhcnBab21iaWUuaWRdOyAvLyBuZXcgd2FycCBwb2ludCBmbGFnXG4gIC8vIEFjdHVhbGx5IHJlcGxhY2UgdGhlIHRyaWdnZXIuXG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgWm9tYmllVG93bi5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4OGEpIHtcbiAgICAgIHNwYXduLmlkID0gdHJpZ2dlci5pZDtcbiAgICB9XG4gIH1cbiAgLy8gSW5zZXJ0IGludG8gdGhlIHdhcnAgdGFibGUuXG4gIHJvbS50b3duV2FycC5sb2NhdGlvbnMuc3BsaWNlKDcsIDAsIFpvbWJpZVRvd24uaWQpO1xuICBpZiAocm9tLnRvd25XYXJwLmxvY2F0aW9ucy5wb3AoKSAhPT0gMHhmZikgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkJyk7XG4gIC8vIEFTTSBmaXhlcyBzaG91bGQgaGF2ZSBoYXBwZW5lZCBpbiBwcmVzaHVmZmxlLnNcbn1cblxuZnVuY3Rpb24gZXZpbFNwaXJpdElzbGFuZFJlcXVpcmVzRG9scGhpbihyb206IFJvbSkge1xuICByb20udHJpZ2dlcigweDhhKS5jb25kaXRpb25zID0gW35yb20uZmxhZ3MuQ3VycmVudGx5UmlkaW5nRG9scGhpbi5pZF07XG4gIHJvbS5tZXNzYWdlcy5wYXJ0c1sweDFkXVsweDEwXS50ZXh0ID0gYFRoZSBjYXZlIGVudHJhbmNlIGFwcGVhcnNcbnRvIGJlIHVuZGVyd2F0ZXIuIFlvdSdsbFxubmVlZCB0byBzd2ltLmA7XG59XG5cbmZ1bmN0aW9uIGxlYWZFbGRlckluU2FicmVIZWFscyhyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCBsZWFmRWxkZXIgPSByb20ubnBjc1sweDBkXTtcbiAgY29uc3Qgc3VtbWl0RGlhbG9nID0gbGVhZkVsZGVyLmxvY2FsRGlhbG9ncy5nZXQoMHgzNSkhWzBdO1xuICBzdW1taXREaWFsb2cubWVzc2FnZS5hY3Rpb24gPSAweDE3OyAvLyBoZWFsIGFuZCBkaXNhcHBlYXIuXG59XG5cbi8vIFByZXZlbnQgUmFnZSBza2lwIGJ5IGFkZGluZyB0cmVlcyBvbiBlaXRoZXIgc2lkZSBvZiBlbnRyYW5jZS5cbi8vIFRPRE8gLSBtYWtlIHRoaXMgb3B0aW9uYWw/IGFjY291bnQgZm9yIGl0IGluIGxvZ2ljP1xuZnVuY3Rpb24gcGF0Y2hMaW1lVHJlZUxha2Uocm9tOiBSb20pOiB2b2lkIHtcbiAgcm9tLm1ldGF0aWxlc2V0cy5saW1lLmdldFRpbGUoMHg3Yykuc2V0RWZmZWN0cyg2KTtcbiAgcm9tLm1ldGF0aWxlc2V0cy5saW1lLmdldFRpbGUoMHg3Zikuc2V0RWZmZWN0cyg2KTtcbiAgcm9tLm1ldGF0aWxlc2V0cy5saW1lLmdldFRpbGUoMHg3Yikuc2V0VGlsZXMoWzB4N2YsIDB4N2YsIDB4N2YsIDB4N2ZdKVxuICAgICAgLnNldEF0dHJzKDApLnNldEVmZmVjdHMoNik7IC8vLnJlcGxhY2VJbihyb20ubWV0YXNjcmVlbnMubGltZVRyZWVMYWtlKTtcblxuXG4gIHJvbS5zY3JlZW5zWzB4NzRdLnNldDJkKDB4OTAsIFtcbiAgICBbMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgbnVsbCwgbnVsbCxcbiAgICAgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3YiwgMHg3Yl0sXG4gICAgWzB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIG51bGwsIG51bGwsXG4gICAgIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2JdLFxuICBcblxuXG4gIC8vIHJvbS5zY3JlZW5zWzB4NzRdLnNldDJkKDB4OTAsIFtcbiAgLy8gICBbMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZCwgMHg3ZSxcbiAgLy8gICAgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3YywgMHg3ZiwgMHg3Y10sXG4gIC8vICAgWzB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIG51bGwsIG51bGwsXG4gIC8vICAgIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzBdLFxuICAvLyAgIFsweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCBudWxsLCBudWxsLFxuICAvLyAgICAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwXSxcblxuXG5cbiAgICAvLyBEaWZmZXJlbnQgb3B0aW9ucyB0byBmaWxsIGluIHRoZSBzcGFjZXMuLi5cbiAgICAvLyBbMHg3MywgMHg3MywgMHg3MywgMHg3MywgMHg3MywgMHg3MywgMHg3MywgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg3MywgMHg3MywgMHg3MywgMHg3MywgMHg3MywgMHg3MywgMHg3M10sXG4gICAgLy8gWzB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjUsIDB4NjVdLFxuICAgIC8vIFsweDY3LCAweDY3LCAweDY3LCAweDY3LCAweDY3LCAweDY3LCAweDY3LCBudWxsLCBudWxsLFxuICAgIC8vICAweDY3LCAweDY3LCAweDY3LCAweDY3LCAweDY3LCAweDY3LCAweDY3XSxcbiAgICAvLyBbMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMF0sXG4gICAgLy8gWzB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2ZdLFxuICBdKTtcbn1cblxuZnVuY3Rpb24gcHJldmVudE5wY0Rlc3Bhd25zKHJvbTogUm9tLCBvcHRzOiBGbGFnU2V0KTogdm9pZCB7XG4gIGZ1bmN0aW9uIHJlbW92ZTxUPihhcnI6IFRbXSwgZWxlbTogVCk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyLmluZGV4T2YoZWxlbSk7XG4gICAgaWYgKGluZGV4IDwgMCkgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBlbGVtZW50ICR7ZWxlbX0gaW4gJHthcnJ9YCk7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgZnVuY3Rpb24gcmVtb3ZlSWY8VD4oYXJyOiBUW10sIHByZWQ6IChlbGVtOiBUKSA9PiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSBhcnIuZmluZEluZGV4KHByZWQpO1xuICAgIGlmIChpbmRleCA8IDApIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgZWxlbWVudCBpbiAke2Fycn1gKTtcbiAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIC8vIGZ1bmN0aW9uIGRpYWxvZyhpZDogbnVtYmVyLCBsb2M6IG51bWJlciA9IC0xKTogTG9jYWxEaWFsb2dbXSB7XG4gIC8vICAgY29uc3QgcmVzdWx0ID0gcm9tLm5wY3NbaWRdLmxvY2FsRGlhbG9ncy5nZXQobG9jKTtcbiAgLy8gICBpZiAoIXJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGRpYWxvZyAkJHtoZXgoaWQpfSBhdCAkJHtoZXgobG9jKX1gKTtcbiAgLy8gICByZXR1cm4gcmVzdWx0O1xuICAvLyB9XG4gIC8vIGZ1bmN0aW9uIHNwYXducyhpZDogbnVtYmVyLCBsb2M6IG51bWJlcik6IG51bWJlcltdIHtcbiAgLy8gICBjb25zdCByZXN1bHQgPSByb20ubnBjc1tpZF0uc3Bhd25Db25kaXRpb25zLmdldChsb2MpO1xuICAvLyAgIGlmICghcmVzdWx0KSB0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgc3Bhd24gY29uZGl0aW9uICQke2hleChpZCl9IGF0ICQke2hleChsb2MpfWApO1xuICAvLyAgIHJldHVybiByZXN1bHQ7XG4gIC8vIH1cblxuICAvLyBMaW5rIHNvbWUgcmVkdW5kYW50IE5QQ3M6IEtlbnN1ICg3ZSwgNzQpIGFuZCBBa2FoYW5hICg4OCwgMTYpXG5cbiAgY29uc3Qge1xuICAgIGxvY2F0aW9uczoge1xuICAgICAgQm9hdEhvdXNlLCBCcnlubWFlcixcbiAgICAgIENyeXB0X0RyYXlnb24yLFxuICAgICAgSm9lbF9TaGVkLFxuICAgICAgTGVhZl9FbGRlckhvdXNlLFxuICAgICAgTXRTYWJyZU5vcnRoX1N1bW1pdENhdmUsIE10U2FicmVXZXN0X1VwcGVyLFxuICAgICAgUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20sIFBvcnRvYV9QYWxhY2VFbnRyYW5jZSxcbiAgICAgIFBvcnRvYV9Bc2luYVJvb20sIFBvcnRvYV9Gb3J0dW5lVGVsbGVyLFxuICAgICAgU2h5cm9uX1RlbXBsZSwgU3RvbUhvdXNlLCBTd2FuX0RhbmNlSGFsbCwgU3dhbl9UYXZlcm4sXG4gICAgICBXaW5kbWlsbENhdmUsIFdhdGVyZmFsbENhdmU0LCBXYXRlcmZhbGxWYWxsZXlOb3J0aCxcbiAgICAgIFplYnVDYXZlLCBab21iaWVUb3duX0hvdXNlQmFzZW1lbnQsXG4gICAgfSxcbiAgICBpdGVtczoge1xuICAgICAgR2xvd2luZ0xhbXAsIEtleVRvUHJpc29uLCBMb3ZlUGVuZGFudCwgU3RhdHVlT2ZPbnl4LFxuICAgIH0sXG4gICAgbnBjczoge1xuICAgICAgQWthaGFuYSAvKiAxNiAqLywgQWthaGFuYUluQnJ5bm1hZXIsIC8qIDgyICovIEFzaW5hIC8qIDYyICovLFxuICAgICAgQXp0ZWNhSW5TaHlyb24gLyogNmUgKi8sXG4gICAgICBDbGFyayAvKiA0NCAqLywgRHJheWdvbiAvKiBjYiAqLywgRm9ydHVuZVRlbGxlciAvKiAzOSAqLyxcbiAgICAgIEtlbnN1IC8qIDdlICovLCBLZW5zdUluQ2FiaW4gLyogNjggKi8sIEtlbnN1SW5Td2FuIC8qIDc0ICovLFxuICAgICAgTGVhZkVsZGVyIC8qIDBkICovLCBMZWFmUmFiYml0IC8qIDEzICovLFxuICAgICAgT2FrQ2hpbGQgLyogMWYgKi8sIE9ha0VsZGVyIC8qIDFkICovLCBPYWtNb3RoZXIgLyogMWUgKi8sXG4gICAgICBQb3J0b2FQYWxhY2VGcm9udEd1YXJkIC8qIDM0ICovLCBQb3J0b2FRdWVlbiAvKiAzOCAqLyxcbiAgICAgIFBvcnRvYVRocm9uZVJvb21CYWNrRG9vckd1YXJkIC8qIDMzICovLCBSYWdlIC8qIGMzICovLFxuICAgICAgU3RvbSAvKiA2MCAqLywgU3RvbmVkQWthaGFuYSAvKiA4OCAqLyxcbiAgICAgIFRvcm5lbCAvKiA1ZiAqLywgV2luZG1pbGxHdWFyZCAvKiAxNCAqLywgWmVidSAvKiA1ZSAqLyxcbiAgICB9LFxuICAgIGZsYWdzLFxuICB9ID0gcm9tO1xuXG4gIEtlbnN1LmxvY2FsRGlhbG9ncy5kZWxldGUoU3dhbl9UYXZlcm4uaWQpOyAvLyB1bnVzZWQgZGlhbG9nXG4gIEtlbnN1SW5Td2FuLmxpbmsoS2Vuc3UuaWQpO1xuICBLZW5zdUluU3dhbi51c2VkID0gdHJ1ZTtcbiAgS2Vuc3VJblN3YW4uZGF0YSA9IFsuLi5LZW5zdS5kYXRhXSBhcyBhbnk7XG4gIEtlbnN1LmRhdGFbMF0gPSBHbG93aW5nTGFtcC5pZDtcbiAgU3dhbl9EYW5jZUhhbGwuc3Bhd25zLmZpbmQocyA9PiBzLmlzTnBjKCkgJiYgcy5pZCA9PT0gS2Vuc3UuaWQpIS5pZCA9XG4gICAgICBLZW5zdUluU3dhbi5pZDtcbiAgTG92ZVBlbmRhbnQuaXRlbVVzZURhdGFbMF0ud2FudCA9IDB4MTAwIHwgS2Vuc3VJblN3YW4uaWQ7XG5cbiAgLy8gZGlhbG9nIGlzIHNoYXJlZCBiZXR3ZWVuIDg4IGFuZCAxNi5cbiAgU3RvbmVkQWthaGFuYS5saW5rRGlhbG9nKEFrYWhhbmEuaWQpO1xuXG4gIC8vIE1ha2UgYSBuZXcgTlBDIGZvciBBa2FoYW5hIGluIEJyeW5tYWVyOyBvdGhlcnMgd29uJ3QgYWNjZXB0IHRoZSBTdGF0dWUgb2YgT255eC5cbiAgLy8gTGlua2luZyBzcGF3biBjb25kaXRpb25zIGFuZCBkaWFsb2dzIGlzIHN1ZmZpY2llbnQsIHNpbmNlIHRoZSBhY3R1YWwgTlBDIElEXG4gIC8vICgxNiBvciA4MikgaXMgd2hhdCBtYXR0ZXJzIGZvciB0aGUgdHJhZGUtaW5cbiAgQWthaGFuYUluQnJ5bm1hZXIudXNlZCA9IHRydWU7XG4gIEFrYWhhbmFJbkJyeW5tYWVyLmxpbmsoQWthaGFuYS5pZCk7XG4gIEFrYWhhbmFJbkJyeW5tYWVyLmRhdGEgPSBbLi4uQWthaGFuYS5kYXRhXSBhcyBhbnk7IC8vIGVuc3VyZSBnaXZlIGl0ZW1cbiAgQnJ5bm1hZXIuc3Bhd25zLmZpbmQocyA9PiBzLmlzTnBjKCkgJiYgcy5pZCA9PT0gQWthaGFuYS5pZCkhLmlkID1cbiAgICAgIEFrYWhhbmFJbkJyeW5tYWVyLmlkO1xuICBTdGF0dWVPZk9ueXguaXRlbVVzZURhdGFbMF0ud2FudCA9IDB4MTAwIHwgQWthaGFuYUluQnJ5bm1hZXIuaWQ7XG5cbiAgLy8gTGVhZiBlbGRlciBpbiBob3VzZSAoJDBkIEAgJGMwKSB+IHN3b3JkIG9mIHdpbmQgcmVkdW5kYW50IGZsYWdcbiAgLy8gZGlhbG9nKDB4MGQsIDB4YzApWzJdLmZsYWdzID0gW107XG4gIC8vcm9tLml0ZW1HZXRzWzB4MDBdLmZsYWdzID0gW107IC8vIGNsZWFyIHJlZHVuZGFudCBmbGFnXG5cbiAgLy8gTGVhZCBlbGRlciBuZWVkcyB0byBnaXZlIGl0ZW0gZXZlbiBpZiB3aW5kbWlsbCBrZXkgd2FzIHVzZWQuXG4gIC8vIFRoaXMgaXMgbW9zdGx5IGlycmVsZXZhbnQgd2l0aCB2YW5pbGxhIHBsYWNlbWVudCwgYnV0IGlmIHRoZSBlbGRlciBpcyBub3RcbiAgLy8gaW1tZWRpYXRlbHkgYXZhaWxhYmxlLCBpdCBjYW4gYmVjb21lIGEgcHJvYmxlbS5cbiAgTGVhZkVsZGVyLmRpYWxvZyhMZWFmX0VsZGVySG91c2UpXG4gICAgICAuc3BsaWNlKDAsIDAsIC4uLkxlYWZFbGRlci5kaWFsb2coTGVhZl9FbGRlckhvdXNlKS5zcGxpY2UoMiwgMSkpO1xuXG4gIC8vIExlYWYgcmFiYml0ICgkMTMpIG5vcm1hbGx5IHN0b3BzIHNldHRpbmcgaXRzIGZsYWcgYWZ0ZXIgcHJpc29uIGRvb3Igb3BlbmVkLFxuICAvLyBidXQgdGhhdCBkb2Vzbid0IG5lY2Vzc2FyaWx5IG9wZW4gbXQgc2FicmUuICBJbnN0ZWFkIChhKSB0cmlnZ2VyIG9uIDA0N1xuICAvLyAoc2V0IGJ5IDhkIHVwb24gZW50ZXJpbmcgZWxkZXIncyBjZWxsKS4gIEFsc28gbWFrZSBzdXJlIHRoYXQgdGhhdCBwYXRoIGFsc29cbiAgLy8gcHJvdmlkZXMgdGhlIG5lZWRlZCBmbGFnIHRvIGdldCBpbnRvIG10IHNhYnJlLlxuICBMZWFmUmFiYml0LmRpYWxvZygpWzJdLmNvbmRpdGlvbiA9IGZsYWdzLlJlc2N1ZWRMZWFmRWxkZXIuaWQ7XG4gIExlYWZSYWJiaXQuZGlhbG9nKClbMl0uZmxhZ3MucHVzaChmbGFncy5UYWxrZWRUb0xlYWZSYWJiaXQuaWQpO1xuICBMZWFmUmFiYml0LmRpYWxvZygpWzNdLmZsYWdzLnB1c2goZmxhZ3MuVGFsa2VkVG9MZWFmUmFiYml0LmlkKTtcblxuICAvLyBXaW5kbWlsbCBndWFyZCBpbiBjYXZlICgkMTQgQCAkMGUpIHNob3VsZG4ndCBkZXNwYXduIGFmdGVyIGFiZHVjdGlvbiAoMDM4KSxcbiAgLy8gYnV0IGluc3RlYWQgYWZ0ZXIgZ2l2aW5nIHRoZSBpdGVtICgwODgpXG4gIFdpbmRtaWxsR3VhcmQuc3Bhd25zKFdpbmRtaWxsQ2F2ZSlbMV0gPVxuICAgICAgfmZsYWdzLldpbmRtaWxsR3VhcmRBbGFybUZsdXRlVHJhZGVpbi5pZDtcbiAgLy9kaWFsb2coMHgxNCwgMHgwZSlbMF0uZmxhZ3MgPSBbXTsgLy8gcmVtb3ZlIHJlZHVuZGFudCBmbGFnIH4gd2luZG1pbGwga2V5XG5cbiAgLy8gQWthaGFuYSAoJDE2IC8gODgpIH4gc2hpZWxkIHJpbmcgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHgxNiwgMHg1NylbMF0uZmxhZ3MgPSBbXTtcbiAgLy8gRG9uJ3QgZGlzYXBwZWFyIGFmdGVyIGdldHRpbmcgYmFycmllciAobm90ZSA4OCdzIHNwYXducyAqbm90KiBsaW5rZWQgdG8gMTYpXG4gIHJlbW92ZShBa2FoYW5hLnNwYXducyhXYXRlcmZhbGxDYXZlNCksIH5mbGFncy5CZWhpbmRXaGlybHBvb2wuaWQpO1xuICByZW1vdmUoU3RvbmVkQWthaGFuYS5zcGF3bnMoV2F0ZXJmYWxsQ2F2ZTQpLCB+ZmxhZ3MuQmVoaW5kV2hpcmxwb29sLmlkKTtcblxuICBmdW5jdGlvbiByZXZlcnNlRGlhbG9nKGRzOiBMb2NhbERpYWxvZ1tdKTogdm9pZCB7XG4gICAgZHMucmV2ZXJzZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5leHQgPSBkc1tpICsgMV07XG4gICAgICBkc1tpXS5jb25kaXRpb24gPSBuZXh0ID8gfm5leHQuY29uZGl0aW9uIDogfjA7XG4gICAgfVxuICB9O1xuXG4gIC8vIE9hayBlbGRlciAoJDFkKSB+IHN3b3JkIG9mIGZpcmUgcmVkdW5kYW50IGZsYWdcbiAgLy9vYWtFbGRlckRpYWxvZ1s0XS5mbGFncyA9IFtdO1xuICAvLyBNYWtlIHN1cmUgdGhhdCB3ZSB0cnkgdG8gZ2l2ZSB0aGUgaXRlbSBmcm9tICphbGwqIHBvc3QtaW5zZWN0IGRpYWxvZ3NcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICBjb25zdCBkbGcgPSBPYWtFbGRlci5kaWFsb2coKVtpXTtcbiAgICBpZiAoZGxnLmNvbmRpdGlvbiAhPT0gcm9tLmZsYWdzLk9ha0VsZGVyLmlkKSBkbGcubWVzc2FnZS5hY3Rpb24gPSAweDAzO1xuICB9XG5cbiAgLy8gT2FrIG1vdGhlciAoJDFlKSB+IGluc2VjdCBmbHV0ZSByZWR1bmRhbnQgZmxhZ1xuICAvLyBUT0RPIC0gcmVhcnJhbmdlIHRoZXNlIGZsYWdzIGEgYml0IChtYXliZSB+MDQ1LCB+MGEwIH4wNDEgLSBzbyByZXZlcnNlKVxuICAvLyAgICAgIC0gd2lsbCBuZWVkIHRvIGNoYW5nZSBiYWxsT2ZGaXJlIGFuZCBpbnNlY3RGbHV0ZSBpbiBkZXBncmFwaFxuICAoKCkgPT4ge1xuICAgIGNvbnN0IFtraWxsZWRJbnNlY3QsIGdvdEl0ZW0sIGdldEl0ZW0sIGZpbmRDaGlsZF0gPSBPYWtNb3RoZXIuZGlhbG9nKCk7XG4gICAgZmluZENoaWxkLmNvbmRpdGlvbiA9IH5mbGFncy5SZXNjdWVkQ2hpbGQuaWQ7XG4gICAgLy9nZXRJdGVtLmNvbmRpdGlvbiA9IH4weDIyNztcbiAgICAvL2dldEl0ZW0uZmxhZ3MgPSBbXTtcbiAgICBnb3RJdGVtLmNvbmRpdGlvbiA9IH4wOyAvLyBhbHdheXMgdHJ1ZVxuICAgIE9ha01vdGhlci5kaWFsb2coKS5zcGxpY2UoMCwgNCwgZmluZENoaWxkLCBnZXRJdGVtLCBraWxsZWRJbnNlY3QsIGdvdEl0ZW0pO1xuICB9KSgpO1xuICAvLy8gb2FrTW90aGVyRGlhbG9nWzJdLmZsYWdzID0gW107XG4gIC8vIC8vIEVuc3VyZSB3ZSBhbHdheXMgZ2l2ZSBpdGVtIGFmdGVyIGluc2VjdC5cbiAgLy8gb2FrTW90aGVyRGlhbG9nWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgLy8gb2FrTW90aGVyRGlhbG9nWzFdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgLy8gcmV2ZXJzZURpYWxvZyhvYWtNb3RoZXJEaWFsb2cpO1xuXG4gIC8vIFJldmVyc2UgdGhlIG90aGVyIG9hayBkaWFsb2dzLCB0b28uXG4gIGZvciAoY29uc3QgaSBvZiBbMHgyMCwgMHgyMSwgMHgyMiwgMHg3YywgMHg3ZF0pIHtcbiAgICByZXZlcnNlRGlhbG9nKHJvbS5ucGNzW2ldLmRpYWxvZygpKTtcbiAgfVxuXG4gIC8vIFN3YXAgdGhlIGZpcnN0IHR3byBvYWsgY2hpbGQgZGlhbG9ncy5cbiAgT2FrQ2hpbGQuZGlhbG9nKCkudW5zaGlmdCguLi5PYWtDaGlsZC5kaWFsb2coKS5zcGxpY2UoMSwgMSkpO1xuXG4gIC8vIFRocm9uZSByb29tIGJhY2sgZG9vciBndWFyZCAoJDMzIEAgJGRmKSBzaG91bGQgaGF2ZSBzYW1lIHNwYXduIGNvbmRpdGlvbiBhcyBxdWVlblxuICAvLyAoMDIwIE5PVCBxdWVlbiBub3QgaW4gdGhyb25lIHJvb20gQU5EIDAxYiBOT1Qgdmlld2VkIG1lc2lhIHJlY29yZGluZylcbiAgUG9ydG9hVGhyb25lUm9vbUJhY2tEb29yR3VhcmQuc3Bhd25Db25kaXRpb25zLnNldChcbiAgICAgIFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLmlkLFxuICAgICAgW35mbGFncy5RdWVlbk5vdEluVGhyb25lUm9vbS5pZCwgfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkXSk7XG5cbiAgLy8gRnJvbnQgcGFsYWNlIGd1YXJkICgkMzQpIHZhY2F0aW9uIG1lc3NhZ2Uga2V5cyBvZmYgMDFiIGluc3RlYWQgb2YgMDFmXG4gIFBvcnRvYVBhbGFjZUZyb250R3VhcmQuZGlhbG9nKClbMV0uY29uZGl0aW9uID0gZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7XG5cbiAgLy8gUXVlZW4ncyAoJDM4KSBkaWFsb2cgbmVlZHMgcXVpdGUgYSBiaXQgb2Ygd29ya1xuICAvLyBHaXZlIGl0ZW0gKGZsdXRlIG9mIGxpbWUpIGV2ZW4gaWYgZ290IHRoZSBzd29yZCBvZiB3YXRlclxuICBQb3J0b2FRdWVlbi5kaWFsb2coKVszXS5jb25kaXRpb24gPSBmbGFncy5Td29yZE9mV2F0ZXIuaWQ7IC8vIFwieW91IGZvdW5kIHN3b3JkXCJcbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbM10ubWVzc2FnZS5hY3Rpb24gPSAweDAzOyAvLyAgPT4gYWN0aW9uIDMgaXRlbWdldFxuICAvLyBFbnN1cmUgeW91IGNhbiBhbHdheXMgbWFrZSB0aGUgcXVlZW4gZ28gYXdheS5cbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbNF0uZmxhZ3MucHVzaChmbGFncy5Qb3J0b2FRdWVlbkdvaW5nQXdheS5pZCk7XG4gIC8vIFF1ZWVuIHNwYXduIGNvbmRpdGlvbiBkZXBlbmRzIG9uIDAxYiAobWVzaWEgcmVjb3JkaW5nKSBub3QgMDFmIChiYWxsIG9mIHdhdGVyKVxuICAvLyBUaGlzIGVuc3VyZXMgeW91IGhhdmUgYm90aCBzd29yZCBhbmQgYmFsbCB0byBnZXQgdG8gaGVyICg/Pz8pXG4gIFBvcnRvYVF1ZWVuLnNwYXducyhQb3J0b2FQYWxhY2VfVGhyb25lUm9vbSlbMV0gPSB+ZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7XG4gIFBvcnRvYVF1ZWVuLnNwYXducyhQb3J0b2FfQXNpbmFSb29tKVswXSA9IGZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuICBQb3J0b2FRdWVlbi5kaWFsb2coKVsxXS5jb25kaXRpb24gPSBmbGFncy5NZXNpYVJlY29yZGluZy5pZDsgLy8gcmV2ZWFsXG5cbiAgLy8gRm9ydHVuZSB0ZWxsZXIgKCQzOSkgc2hvdWxkIGFsc28gbm90IHNwYXduIGJhc2VkIG9uIG1lc2lhIHJlY29yZGluZyByYXRoZXIgdGhhbiBvcmJcbiAgRm9ydHVuZVRlbGxlci5zcGF3bnMoUG9ydG9hX0ZvcnR1bmVUZWxsZXIpWzFdID0gfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuXG4gIC8vIENsYXJrICgkNDQpIG1vdmVzIGFmdGVyIHRhbGtpbmcgdG8gaGltICgwOGQpIHJhdGhlciB0aGFuIGNhbG1pbmcgc2VhICgwOGYpLlxuICAvLyBUT0RPIC0gY2hhbmdlIDA4ZCB0byB3aGF0ZXZlciBhY3R1YWwgaXRlbSBoZSBnaXZlcywgdGhlbiByZW1vdmUgYm90aCBmbGFnc1xuICBDbGFyay5zcGF3bkNvbmRpdGlvbnMuc2V0KFpvbWJpZVRvd25fSG91c2VCYXNlbWVudC5pZCwgW35mbGFncy5DbGFyay5pZF0pO1xuICBDbGFyay5zcGF3bkNvbmRpdGlvbnMuc2V0KEpvZWxfU2hlZC5pZCwgW2ZsYWdzLkNsYXJrLmlkXSk7XG4gIC8vZGlhbG9nKDB4NDQsIDB4ZTkpWzFdLmZsYWdzLnBvcCgpOyAvLyByZW1vdmUgcmVkdW5kYW50IGl0ZW1nZXQgZmxhZ1xuXG4gIC8vIEJyb2thaGFuYSAoJDU0KSB+IHdhcnJpb3IgcmluZyByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDU0KVsyXS5mbGFncyA9IFtdO1xuXG4gIC8vIERlbyAoJDVhKSB+IHBlbmRhbnQgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg1YSlbMV0uZmxhZ3MgPSBbXTtcblxuICAvLyBaZWJ1ICgkNWUpIGNhdmUgZGlhbG9nIChAICQxMClcbiAgLy8gVE9ETyAtIGRpYWxvZ3MoMHg1ZSwgMHgxMCkucmVhcnJhbmdlKH4weDAzYSwgMHgwMGQsIDB4MDM4LCAweDAzOSwgMHgwMGEsIH4weDAwMCk7XG4gIFplYnUubG9jYWxEaWFsb2dzLnNldChaZWJ1Q2F2ZS5pZCwgW1xuICAgIExvY2FsRGlhbG9nLm9mKH5mbGFncy5UYWxrZWRUb1plYnVJbkNhdmUuaWQsXG4gICAgICAgICAgICAgICAgICAgWzB4MDAsIDB4MWFdLCBbZmxhZ3MuVGFsa2VkVG9aZWJ1SW5DYXZlLmlkXSksXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuTGVhZlZpbGxhZ2Vyc1Jlc2N1ZWQuaWQsIFsweDAwLCAweDFkXSksXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuTGVhZkFiZHVjdGlvbi5pZCwgWzB4MDAsIDB4MWNdKSwgLy8gMDM4IGxlYWYgYXR0YWNrZWRcbiAgICBMb2NhbERpYWxvZy5vZihmbGFncy5aZWJ1QXRXaW5kbWlsbC5pZCwgWzB4MDAsIDB4MWRdKSwgLy8gMDM5IGxlYXJuZWQgcmVmcmVzaFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLlVzZWRXaW5kbWlsbEtleS5pZCwgWzB4MDAsIDB4MWIsIDB4MDNdKSwgLy8gPT4gcmVmcmVzaFxuICAgIExvY2FsRGlhbG9nLm9mKH4wLCBbMHgwMCwgMHgxZF0pLFxuICBdKTtcbiAgLy8gRG9uJ3QgZGVzcGF3biBvbiBnZXR0aW5nIGJhcnJpZXJcbiAgcmVtb3ZlKFplYnUuc3Bhd25zKFplYnVDYXZlKSwgfmZsYWdzLkJlaGluZFdoaXJscG9vbC5pZCk7IC8vIHJlbW92ZSAwNTEgTk9UIGxlYXJuZWQgYmFycmllclxuXG4gIC8vIFRvcm5lbCAoJDVmKSBpbiBzYWJyZSB3ZXN0ICgkMjEpIH4gdGVsZXBvcnQgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg1ZiwgMHgyMSlbMV0uZmxhZ3MgPSBbXTtcbiAgLy8gRG9uJ3QgZGVzcGF3biBvbiBnZXR0aW5nIGJhcnJpZXJcbiAgVG9ybmVsLnNwYXduQ29uZGl0aW9ucy5kZWxldGUoTXRTYWJyZVdlc3RfVXBwZXIuaWQpOyAvLyBhbHdheXMgc3Bhd25cblxuICAvLyBTdG9tICgkNjApOiBkb24ndCBkZXNwYXduIG9uIGdldHRpbmcgYmFycmllclxuICBTdG9tLnNwYXduQ29uZGl0aW9ucy5kZWxldGUoU3RvbUhvdXNlLmlkKTsgLy8gcmVtb3ZlIDA1MSBOT1QgbGVhcm5lZCBiYXJyaWVyXG5cbiAgLy8gUHJldmVudCBkZXNwYXduIGZyb20gYmFjayByb29tIGFmdGVyIGNhbG1pbmcgc2VhICh+MDhmIG9yIH4yODMpXG4gIHJlbW92ZShBc2luYS5zcGF3bnMoUG9ydG9hX0FzaW5hUm9vbSksIH5mbGFncy5DYWxtZWRBbmdyeVNlYS5pZCk7XG5cbiAgLy8gQWRkIGFuIGV4dHJhIE5QQyBpbiBQb3J0b2EgdGhyb25lIHJvb20gdG8gZ2l2ZSBGbHV0ZSBvZiBMaW1lIGlmXG4gIC8vIHRoZSBxdWVlbiBpcyBub3QgdGhlcmUuXG4gIC8vIEkgd2FudGVkIHRvIG1ha2UgdGhpcyBiZSB0aGUgcXVlZW4ncyBsYWR5LWluLXdhaXRpbmcsIGJ1dCBpdCBkb2Vzbid0XG4gIC8vIHJlYWxseSB3b3JrIHdpdGggdGhlIHBhdHRlcm5zIGFzIHRoZXkgYXJlLiAgV2UgY291bGQgc3dpdGNoIHRoZSA0YSB0b1xuICAvLyBpbnN0ZWFkIGJlIDQ5IGFuZCB0aGVuIHRoZSBndWFyZCBiZWNvbWVzIHRoZSBsYWR5ICh3ZSdkIHdhbnQgdG8gc3dpdGNoXG4gIC8vIHRvIHRoZSBwaW5rIHBhbGV0dGUgYXMgd2VsbCkuICBCdXQgdGhhdCBkb2Vzbid0IHJlYWxseSBidXkgdXMgbXVjaC5cbiAgY29uc3QgZ3VhcmQyID0gcm9tLm5wY3NbMHgzNF07XG4gIGd1YXJkMi5zcGF3bkNvbmRpdGlvbnMuc2V0KFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB+ZmxhZ3MuUG9ydG9hUXVlZW4uaWRdKTtcbiAgZ3VhcmQyLmxvY2FsRGlhbG9ncy5zZXQoUG9ydG9hX1BhbGFjZUVudHJhbmNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZDIubG9jYWxEaWFsb2dzLmdldCgtMSkhKTtcbiAgZ3VhcmQyLmRhdGFbMF0gPSByb20uaXRlbXMuRmx1dGVPZkxpbWUuaWQ7XG4gIGNvbnN0IGd1YXJkMk1lc3NhZ2UgPSByb20ubWVzc2FnZXMuYWxsb2MoKTtcbiAgZ3VhcmQyTWVzc2FnZS50ZXh0ID0gXCJUaGUgcXVlZW4gbGVmdCB0aGlzIGZvciB5b3UuXCI7XG4gIGd1YXJkMi5sb2NhbERpYWxvZ3Muc2V0KFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLmlkLCBbXG4gICAgTG9jYWxEaWFsb2cub2YofmZsYWdzLlBvcnRvYVF1ZWVuLmlkLCBbZ3VhcmQyTWVzc2FnZS5wYXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkMk1lc3NhZ2UuaWQsIDB4MDNdKSxcbiAgICBMb2NhbERpYWxvZy5vZih+MCwgWzB4MGEsIDB4MGVdKSwgLy8gXCJCZSBjYXJlZnVsXCIgKG9yIDE0OjA0IFwiR29vZCBsdWNrLlwiKVxuICBdKTtcbiAgUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20uc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3l0OiAzLCB4dDogMTIsIHR5cGU6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuQmFuazogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBndWFyZDIuaWR9KSk7XG5cbiAgLy8gS2Vuc3UgaW4gY2FiaW4gKCQ2OCBAICQ2MSkgbmVlZHMgdG8gYmUgYXZhaWxhYmxlIGV2ZW4gYWZ0ZXIgdmlzaXRpbmcgSm9lbC5cbiAgLy8gQ2hhbmdlIGhpbSB0byBqdXN0IGRpc2FwcGVhciBhZnRlciBzZXR0aW5nIHRoZSByaWRlYWJsZSBkb2xwaGluIGZsYWcgKDA5YiksXG4gIC8vIGFuZCB0byBub3QgZXZlbiBzaG93IHVwIGF0IGFsbCB1bmxlc3MgdGhlIGZvZyBsYW1wIHdhcyByZXR1cm5lZCAoMDIxKS5cbiAgS2Vuc3VJbkNhYmluLnNwYXduQ29uZGl0aW9ucy5zZXQoQm9hdEhvdXNlLmlkLCBbfmZsYWdzLkFibGVUb1JpZGVEb2xwaGluLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFncy5SZXR1cm5lZEZvZ0xhbXAuaWRdKTtcbiAgS2Vuc3VJbkNhYmluLmRpYWxvZygpWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMjsgLy8gZGlzYXBwZWFyXG5cbiAgLy8gQXp0ZWNhIGluIFNoeXJvbiAoNmUpIHNob3VsZG4ndCBzcGF3biBhZnRlciBtYXNzYWNyZSAoMDI3KVxuICBBenRlY2FJblNoeXJvbi5zcGF3bnMoU2h5cm9uX1RlbXBsZSkucHVzaCh+ZmxhZ3MuU2h5cm9uTWFzc2FjcmUuaWQpO1xuICAvLyBBbHNvIHRoZSBkaWFsb2cgdHJpZ2dlciAoODIpIHNob3VsZG4ndCBoYXBwZW5cbiAgcm9tLnRyaWdnZXIoMHg4MikuY29uZGl0aW9ucy5wdXNoKH5mbGFncy5TaHlyb25NYXNzYWNyZS5pZCk7XG5cbiAgLy8gS2Vuc3UgaW4gbGlnaHRob3VzZSAoJDc0LyQ3ZSBAICQ2MikgfiByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDc0LCAweDYyKVswXS5mbGFncyA9IFtdO1xuXG4gIC8vIEF6dGVjYSAoJDgzKSBpbiBweXJhbWlkIH4gYm93IG9mIHRydXRoIHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4ODMpWzBdLmNvbmRpdGlvbiA9IH4weDI0MDsgIC8vIDI0MCBOT1QgYm93IG9mIHRydXRoXG4gIC8vZGlhbG9nKDB4ODMpWzBdLmZsYWdzID0gW107XG5cbiAgLy8gUmFnZSBibG9ja3Mgb24gc3dvcmQgb2Ygd2F0ZXIsIG5vdCByYW5kb20gaXRlbSBmcm9tIHRoZSBjaGVzdFxuICBSYWdlLmRpYWxvZygpWzBdLmNvbmRpdGlvbiA9IGZsYWdzLlN3b3JkT2ZXYXRlci5pZDtcblxuICAvLyBSZW1vdmUgdXNlbGVzcyBzcGF3biBjb25kaXRpb24gZnJvbSBNYWRvIDFcbiAgLy8gcm9tLm5wY3NbMHhjNF0uc3Bhd25Db25kaXRpb25zLmRlbGV0ZSgweGYyKTsgLy8gYWx3YXlzIHNwYXduXG5cbiAgLy8gRHJheWdvbiAyICgkY2IgQCBsb2NhdGlvbiAkYTYpIHNob3VsZCBkZXNwYXduIGFmdGVyIGJlaW5nIGRlZmVhdGVkLlxuICBEcmF5Z29uLnNwYXduQ29uZGl0aW9ucy5zZXQoQ3J5cHRfRHJheWdvbjIuaWQsIFt+ZmxhZ3MuRHJheWdvbjIuaWRdKTtcblxuICAvLyBGaXggWmVidSB0byBnaXZlIGtleSB0byBzdHh5IGV2ZW4gaWYgdGh1bmRlciBzd29yZCBpcyBnb3R0ZW4gKGp1c3Qgc3dpdGNoIHRoZVxuICAvLyBvcmRlciBvZiB0aGUgZmlyc3QgdHdvKS4gIEFsc28gZG9uJ3QgYm90aGVyIHNldHRpbmcgMDNiIHNpbmNlIHRoZSBuZXcgSXRlbUdldFxuICAvLyBsb2dpYyBvYnZpYXRlcyB0aGUgbmVlZC5cbiAgWmVidS5kaWFsb2coU2h5cm9uX1RlbXBsZSlcbiAgICAgIC51bnNoaWZ0KC4uLlplYnUuZGlhbG9nKFNoeXJvbl9UZW1wbGUpLnNwbGljZSgxLCAxKSk7XG4gIC8vIHplYnVTaHlyb25bMF0uZmxhZ3MgPSBbXTtcblxuICAvLyBTaHlyb24gbWFzc2FjcmUgKCQ4MCkgcmVxdWlyZXMga2V5IHRvIHN0eHlcbiAgcm9tLnRyaWdnZXIoMHg4MCkuY29uZGl0aW9ucyA9IFtcbiAgICB+ZmxhZ3MuU2h5cm9uTWFzc2FjcmUuaWQsXG4gICAgZmxhZ3MuVGFsa2VkVG9aZWJ1SW5TaHlyb24uaWQsXG4gICAgZmxhZ3MuU3dvcmRPZlRodW5kZXIuaWQsXG4gIF07XG5cbiAgLy8gRW50ZXIgc2h5cm9uICgkODEpIHNob3VsZCBzZXQgd2FycCBubyBtYXR0ZXIgd2hhdFxuICByb20udHJpZ2dlcigweDgxKS5jb25kaXRpb25zID0gW107XG5cbiAgaWYgKG9wdHMuYmFycmllclJlcXVpcmVzQ2FsbVNlYSgpKSB7XG4gICAgLy8gTGVhcm4gYmFycmllciAoJDg0KSByZXF1aXJlcyBjYWxtIHNlYVxuICAgIHJvbS50cmlnZ2VyKDB4ODQpLmNvbmRpdGlvbnMucHVzaChmbGFncy5DYWxtZWRBbmdyeVNlYS5pZCk7XG4gICAgLy8gVE9ETyAtIGNvbnNpZGVyIG5vdCBzZXR0aW5nIDA1MSBhbmQgY2hhbmdpbmcgdGhlIGNvbmRpdGlvbiB0byBtYXRjaCB0aGUgaXRlbVxuICB9XG4gIC8vcm9tLnRyaWdnZXIoMHg4NCkuZmxhZ3MgPSBbXTtcblxuICAvLyBBZGQgYW4gZXh0cmEgY29uZGl0aW9uIHRvIHRoZSBMZWFmIGFiZHVjdGlvbiB0cmlnZ2VyIChiZWhpbmQgemVidSkuICBUaGlzIGVuc3VyZXNcbiAgLy8gYWxsIHRoZSBpdGVtcyBpbiBMZWFmIHByb3BlciAoZWxkZXIgYW5kIHN0dWRlbnQpIGFyZSBnb3R0ZW4gYmVmb3JlIHRoZXkgZGlzYXBwZWFyLlxuICByb20udHJpZ2dlcigweDhjKS5jb25kaXRpb25zLnB1c2goZmxhZ3MuVGFsa2VkVG9aZWJ1SW5DYXZlLmlkKTtcblxuICAvLyBNb3JlIHdvcmsgb24gYWJkdWN0aW9uIHRyaWdnZXJzOlxuICAvLyAxLiBSZW1vdmUgdGhlIDhkIHRyaWdnZXIgaW4gdGhlIGZyb250IG9mIHRoZSBjZWxsLCBzd2FwIGl0IG91dFxuICAvLyAgICBmb3IgYjIgKGxlYXJuIHBhcmFseXNpcykuXG4gIHJvbS50cmlnZ2VyKDB4OGQpLnVzZWQgPSBmYWxzZTtcbiAgZm9yIChjb25zdCBzcGF3biBvZiBNdFNhYnJlTm9ydGhfU3VtbWl0Q2F2ZS5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24uaWQgPT09IDB4OGQpIHNwYXduLmlkID0gMHhiMjtcbiAgfVxuICByZW1vdmVJZihXYXRlcmZhbGxWYWxsZXlOb3J0aC5zcGF3bnMsXG4gICAgICAgICAgIHNwYXduID0+IHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLmlkID09PSAweDhkKTtcbiAgLy8gMi4gU2V0IHRoZSB0cmlnZ2VyIHRvIHJlcXVpcmUgaGF2aW5nIGtpbGxlZCBrZWxiZXNxdWUuXG4gIHJvbS50cmlnZ2VyKDB4YjIpLmNvbmRpdGlvbnMucHVzaChmbGFncy5LZWxiZXNxdWUxLmlkKTtcbiAgLy8gMy4gQWxzbyBzZXQgdGhlIHRyaWdnZXIgdG8gZnJlZSB0aGUgdmlsbGFnZXJzIGFuZCB0aGUgZWxkZXIuXG4gIHJvbS50cmlnZ2VyKDB4YjIpLmZsYWdzLnB1c2goXG4gICAgfmZsYWdzLkxlYWZWaWxsYWdlcnNDdXJyZW50bHlBYmR1Y3RlZC5pZCxcbiAgICB+ZmxhZ3MuTGVhZkVsZGVyQ3VycmVudGx5QWJkdWN0ZWQuaWQsXG4gICAgZmxhZ3MuTGVhZlZpbGxhZ2Vyc1Jlc2N1ZWQuaWQpO1xuICAvLyA0LiBEb24ndCB0cmlnZ2VyIHRoZSBhYmR1Y3Rpb24gaW4gdGhlIGZpcnN0IHBsYWNlIGlmIGtlbGJlc3F1ZSBkZWFkXG4gIHJvbS50cmlnZ2VyKDB4OGMpLmNvbmRpdGlvbnMucHVzaCh+ZmxhZ3MuS2VsYmVzcXVlMS5pZCk7XG4gIC8vIDUuIERvbid0IHRyaWdnZXIgcmFiYml0IGJsb2NrIGlmIGtlbGJlc3F1ZSBkZWFkXG4gIHJvbS50cmlnZ2VyKDB4ODYpLmNvbmRpdGlvbnMucHVzaCh+ZmxhZ3MuS2VsYmVzcXVlMS5pZCk7IC8vIGtpbGxlZCBrZWxiZXNxdWVcbiAgLy8gNi4gRG9uJ3QgZnJlZSB2aWxsYWdlcnMgZnJvbSB1c2luZyBwcmlzb24ga2V5XG4gIHJlbW92ZShLZXlUb1ByaXNvbi5pdGVtVXNlRGF0YVswXS5mbGFncyxcbiAgICAgICAgIH5mbGFncy5MZWFmVmlsbGFnZXJzQ3VycmVudGx5QWJkdWN0ZWQuaWQpO1xuICAvLyByb20ucHJnWzB4MWUwYTNdID0gMHhjMDtcbiAgLy8gcm9tLnByZ1sweDFlMGE0XSA9IDB4MDA7XG5cbiAgLy8gVE9ETyAtIGFkZGl0aW9uYWwgd29yayBvbiBhYmR1Y3Rpb24gdHJpZ2dlcjpcbiAgLy8gICAtIGdldCByaWQgb2YgdGhlIGZsYWdzIG9uIGtleSB0byBwcmlzb24gdXNlXG4gIC8vICAgLSBhZGQgYSBjb25kaXRpb24gdGhhdCBhYmR1Y3Rpb24gZG9lc24ndCBoYXBwZW4gaWYgcmVzY3VlZFxuICAvLyBHZXQgcmlkIG9mIEJPVEggdHJpZ2dlcnMgaW4gc3VtbWl0IGNhdmUsICBJbnN0ZWFkLCB0aWUgZXZlcnl0aGluZ1xuICAvLyB0byB0aGUgZWxkZXIgZGlhbG9nIG9uIHRvcFxuICAvLyAgIC0gaWYga2VsYmVzcXVlIHN0aWxsIGFsaXZlLCBtYXliZSBnaXZlIGEgaGludCBhYm91dCB3ZWFrbmVzc1xuICAvLyAgIC0gaWYga2VsYmVzcXVlIGRlYWQgdGhlbiB0ZWFjaCBwYXJhbHlzaXMgYW5kIHNldC9jbGVhciBmbGFnc1xuICAvLyAgIC0gaWYgcGFyYWx5c2lzIGxlYXJuZWQgdGhlbiBzYXkgc29tZXRoaW5nIGdlbmVyaWNcbiAgLy8gU3RpbGwgbmVlZCB0byBrZWVwIHRoZSB0cmlnZ2VyIGluIHRoZSBmcm9udCBpbiBjYXNlIG5vXG4gIC8vIGFiZHVjdGlvbiB5ZXRcbiAgLy8gICAtIGlmIE5PVCBwYXJhbHlzaXMgQU5EIGlmIE5PVCBlbGRlciBtaXNzaW5nIEFORCBpZiBrZWxiZXF1ZSBkZWFkXG4gIC8vIC0tLT4gbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciB0d28gd2F5cyB0byBnZXQgKGxpa2UgcmVmcmVzaCk/XG4gIC8vXG4gIC8vIEFsc28gYWRkIGEgY2hlY2sgdGhhdCB0aGUgcmFiYml0IHRyaWdnZXIgaXMgZ29uZSBpZiByZXNjdWVkIVxuXG5cblxuICAvLyBQYXJhbHlzaXMgdHJpZ2dlciAoJGIyKSB+IHJlbW92ZSByZWR1bmRhbnQgaXRlbWdldCBmbGFnXG4gIC8vcm9tLnRyaWdnZXIoMHhiMikuY29uZGl0aW9uc1swXSA9IH4weDI0MjtcbiAgLy9yb20udHJpZ2dlcigweGIyKS5mbGFncy5zaGlmdCgpOyAvLyByZW1vdmUgMDM3IGxlYXJuZWQgcGFyYWx5c2lzXG5cbiAgLy8gTGVhcm4gcmVmcmVzaCB0cmlnZ2VyICgkYjQpIH4gcmVtb3ZlIHJlZHVuZGFudCBpdGVtZ2V0IGZsYWdcbiAgLy9yb20udHJpZ2dlcigweGI0KS5jb25kaXRpb25zWzFdID0gfjB4MjQxO1xuICAvL3JvbS50cmlnZ2VyKDB4YjQpLmZsYWdzID0gW107IC8vIHJlbW92ZSAwMzkgbGVhcm5lZCByZWZyZXNoXG5cbiAgLy8gVGVsZXBvcnQgYmxvY2sgb24gbXQgc2FicmUgaXMgZnJvbSBzcGVsbCwgbm90IHNsb3RcbiAgLy8gTk9URTogdGhpcyBpcyBub3cgZG9uZSBpbiBmbGFncy5kZWZyYWdcbiAgLy9yZXBsYWNlKHJvbS50cmlnZ2VyKDB4YmEpLmNvbmRpdGlvbnMsIH4weDAzZiwgfmZsYWdzLlRlbGVwb3J0LmlkKTtcblxuICAvLyBQb3J0b2EgcGFsYWNlIGd1YXJkIG1vdmVtZW50IHRyaWdnZXIgKCRiYikgc3RvcHMgb24gMDFiIChtZXNpYSkgbm90IDAxZiAob3JiKVxuICByZXBsYWNlKHJvbS50cmlnZ2VyKDB4YmIpLmNvbmRpdGlvbnMsIH5mbGFncy5SYWdlLmlkLCB+ZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQpO1xuXG4gIC8vIFJlbW92ZSByZWR1bmRhbnQgdHJpZ2dlciA4YSAoc2xvdCAxNikgaW4gem9tYmlldG93biAoJDY1KVxuICAvLyAgLS0gbm90ZTogbm8gbG9uZ2VyIG5lY2Vzc2FyeSBzaW5jZSB3ZSByZXB1cnBvc2UgaXQgaW5zdGVhZC5cbiAgLy8gY29uc3Qge3pvbWJpZVRvd259ID0gcm9tLmxvY2F0aW9ucztcbiAgLy8gem9tYmllVG93bi5zcGF3bnMgPSB6b21iaWVUb3duLnNwYXducy5maWx0ZXIoeCA9PiAheC5pc1RyaWdnZXIoKSB8fCB4LmlkICE9IDB4OGEpO1xuXG4gIC8vIC8vIFJlcGxhY2UgYWxsIGRpYWxvZyBjb25kaXRpb25zIGZyb20gMDBlIHRvIDI0M1xuICAvLyBmb3IgKGNvbnN0IG5wYyBvZiByb20ubnBjcykge1xuICAvLyAgIGZvciAoY29uc3QgZCBvZiBucGMuYWxsRGlhbG9ncygpKSB7XG4gIC8vICAgICBpZiAoZC5jb25kaXRpb24gPT09IDB4MDBlKSBkLmNvbmRpdGlvbiA9IDB4MjQzO1xuICAvLyAgICAgaWYgKGQuY29uZGl0aW9uID09PSB+MHgwMGUpIGQuY29uZGl0aW9uID0gfjB4MjQzO1xuICAvLyAgIH1cbiAgLy8gfVxufVxuXG4vLyBIYXJkIG1vZGUgZmxhZzogSGMgLSB6ZXJvIG91dCB0aGUgc3dvcmQncyBjb2xsaXNpb24gcGxhbmVcbmZ1bmN0aW9uIGRpc2FibGVTdGFicyhyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IG8gb2YgWzB4MDgsIDB4MDksIDB4MjddKSB7XG4gICAgcm9tLm9iamVjdHNbb10uY29sbGlzaW9uUGxhbmUgPSAwO1xuICB9XG4gIC8vIEFsc28gdGFrZSB3YXJyaW9yIHJpbmcgb3V0IG9mIHRoZSBwaWN0dXJlLi4uIDp0cm9sbDpcbiAgLy8gcm9tLml0ZW1HZXRzWzB4MmJdLmlkID0gMHg1YjsgLy8gbWVkaWNhbCBoZXJiIGZyb20gc2Vjb25kIGZsdXRlIG9mIGxpbWUgY2hlY2tcbiAgcm9tLm5wY3MuQnJva2FoYW5hLmRhdGFbMF0gPSByb20uaXRlbXMuRnJ1aXRPZkxpbWUuaWQ7XG59XG5cbmZ1bmN0aW9uIG9yYnNPcHRpb25hbChyb206IFJvbSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IG9iaiBvZiBbMHgxMCwgMHgxNCwgMHgxOCwgMHgxZF0pIHtcbiAgICAvLyAxLiBMb29zZW4gdGVycmFpbiBzdXNjZXB0aWJpbGl0eSBvZiBsZXZlbCAxIHNob3RzXG4gICAgcm9tLm9iamVjdHNbb2JqXS50ZXJyYWluU3VzY2VwdGliaWxpdHkgJj0gfjB4MDQ7XG4gICAgLy8gMi4gSW5jcmVhc2UgdGhlIGxldmVsIHRvIDJcbiAgICByb20ub2JqZWN0c1tvYmpdLmxldmVsID0gMjtcbiAgfVxufVxuXG5mdW5jdGlvbiBub0Jvd01vZGUocm9tOiBSb20pOiB2b2lkIHtcbiAgLy8gSW5pdGlhbCB0cmlnZ2VyIGdpdmVzIFwidXNlZCBib3cgb2YgdHJ1dGhcIi5cbiAgY29uc3Qge1xuICAgIGZsYWdzOiB7VXNlZEJvd09mVHJ1dGh9LFxuICAgIGxvY2F0aW9uczoge0NyeXB0X0RyYXlnb24yLCBNZXphbWVTaHJpbmV9LFxuICB9ID0gcm9tO1xuICBsZXQgdHJpZ2dlciE6IFRyaWdnZXI7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgTWV6YW1lU2hyaW5lLnNwYXducykge1xuICAgIGlmIChzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi50aWxlID09PSAweDg4KSB7XG4gICAgICB0cmlnZ2VyID0gcm9tLnRyaWdnZXIoc3Bhd24uaWQpO1xuICAgIH1cbiAgfVxuICBpZiAoIXRyaWdnZXIpIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgc3RhcnQgdHJpZ2dlcmApO1xuICB0cmlnZ2VyLmZsYWdzLnB1c2goVXNlZEJvd09mVHJ1dGguaWQpO1xuICAvLyBBZGQgYW4gZXhpdCBzdHJhaWdodCB0byBkcmF5Z29uXG4gIHJvbS50aWxlRWZmZWN0c1sweGI5IC0gMHhiM10uZWZmZWN0c1sweDU4XSA9IDA7XG4gIE1lemFtZVNocmluZS5tZXRhLnNldEV4aXQoXG4gICAgICAwLCAnZG9vcicsIFtDcnlwdF9EcmF5Z29uMi5tZXRhLmlkIDw8IDggfCAweDEwLCAnZWRnZTpib3R0b20nXSk7XG59XG5cbi8vIEZvciBub3cgdGhpcyBqdXN0IGZpeGVzIHRoZSBzaG90IHRvIGJlIGFsbCBlbGVtZW50cyBpbnN0ZWFkIG9mIG5vbmUuXG5mdW5jdGlvbiBmaXhDcnlzdGFsaXMocm9tOiBSb20pIHtcbiAgcm9tLm9iamVjdHNbMHgzM10uZWxlbWVudHMgPSAweGY7XG59XG5cbi8vIFRoZXJlIGFyZSBhIGZldyBtZXRhdGlsZXMgdGhhdCBoYXZlIGluY29ycmVjdCBiZWhhdmlvciAob25lIG9mXG4vLyB0aGUgcGlsbGFyIHRpbGVzIGluIHRoZSBjcnlwdCB0aWxlc2V0IGFuZCBhIGNvcm5lciB0aWxlIGluIHRoZVxuLy8gY2F2ZSB0aWxlc2V0KSwgd2hpY2ggYWxsb3dzIGZseWluZyB0aHJvdWdoIHRoZW0uICBUaGUgY3J5cHQgdGlsZVxuLy8gY2FuIGNhdXNlIHRoZSBwbGF5ZXIgdG8gZ2V0IHN0dWNrIGlmIHRoZXkgZ2V0IGhpdCB3aGlsZSBmbHlpbmdcbi8vIG5lYXIgaXQuICBUaGUgY2F2ZSBjb3JuZXIgY2FuIGFsbG93IHNuZWFraW5nIHBhc3QgdGhlIHN0b25lZFxuLy8gTlBDcyBpbiB0aGUgd2F0ZXJmYWxsIGNhdmUgdXNpbmcgZmxpZ2h0LlxuZnVuY3Rpb24gZml4Rmx5YWJsZVdhbGxzKHJvbTogUm9tKSB7XG4gIHJvbS50aWxlRWZmZWN0c1sweGI1IC0gMHhiM10uZWZmZWN0c1sweDc0XSA9IDY7IC8vIGNhdmUgY29ybmVyXG4gIHJvbS50aWxlRWZmZWN0c1sweGI2IC0gMHhiM10uZWZmZWN0c1sweDQ2XSA9IDY7IC8vIGNyeXB0IHBpbGxhclxufVxuXG4vLyBUb21hdG9zIChhbmQgb3RoZXJzKSBzaG91bGRuJ3QgYmUgYWJsZSB0byBjcm9zcyB3YXRlciBvciByb2xsIHVwIHJhbXBzLlxuZnVuY3Rpb24gZml4TW9uc3RlclRlcnJhaW4ocm9tOiBSb20pIHtcbiAgZm9yIChjb25zdCBvYmogb2Ygcm9tLm9iamVjdHMpIHtcbiAgICBpZiAoIShvYmogaW5zdGFuY2VvZiBNb25zdGVyKSkgY29udGludWU7XG4gICAgaWYgKG9iai5pc1Byb2plY3RpbGUoKSB8fCBvYmouaXNCb3NzKCkgfHwgb2JqLmlzRmx5ZXIoKSkgY29udGludWU7XG4gICAgaWYgKG9iaiA9PT0gcm9tLm9iamVjdHMubWltaWMpIGNvbnRpbnVlO1xuICAgIG9iai50ZXJyYWluU3VzY2VwdGliaWxpdHkgfD0gMHgzO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2U8VD4oYXJyYXk6IFRbXSwgb2xkOiBULCByZXBsYWNlbWVudDogVCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFycmF5W2ldICE9PSBvbGQpIGNvbnRpbnVlO1xuICAgIGFycmF5W2ldID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgJHtvbGR9IGluICR7YXJyYXkuam9pbignLCcpfWApOyAgICAgIFxufVxuXG5mdW5jdGlvbiBoYXJkY29yZU1vZGUocm9tOiBSb20pIHtcbiAgZm9yIChjb25zdCBsb2Mgb2Ygcm9tLmxvY2F0aW9ucykge1xuICAgIGxvYy5jaGVja3BvaW50ID0gbG9jLnNhdmVhYmxlID0gZmFsc2U7XG4gIH1cbn1cbiJdfQ==